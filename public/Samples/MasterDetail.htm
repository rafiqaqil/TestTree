<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Interactive Master Detail Chart | JSCharting</title>
    <meta http-equiv="content-type" content="text-html; charset=utf-8" />

    <script type="text/javascript" src="../jsc/jscharting.js"></script>

    <link rel="stylesheet" type="text/css" href="css/default.css" />
    <style type="text/css">
      /*CSS*/
    </style>
  </head>
  <body>
    <div id="masterChart" style="width: 740px; height: 400px;  margin: 0px auto;"></div>
    <div id="detailsChart" style="width: 740px; height: 400px;  margin: 0px auto;"></div>

    <script type="text/javascript">
      /*
Control a second detail chart by clicking on the master chart.
Learn how to:

  - Use click events to interact with the chart to show details.
*/
      // JS

      var mName = JSC.formatDate(new Date(2020, 0, 1), 'MMMM');
      var data = [
        ['1/1/2020', 175],
        ['1/2/2020', 178],
        ['1/3/2020', 163],
        ['1/4/2020', 151],
        ['1/5/2020', 153],
        ['1/6/2020', 134],
        ['1/7/2020', 119],
        ['1/8/2020', 109],
        ['1/9/2020', 98],
        ['1/10/2020', 116],
        ['1/11/2020', 133],
        ['1/12/2020', 114],
        ['1/13/2020', 102],
        ['1/14/2020', 113],
        ['1/15/2020', 99],
        ['1/16/2020', 101],
        ['1/17/2020', 109],
        ['1/18/2020', 99],
        ['1/19/2020', 108],
        ['1/20/2020', 111],
        ['1/21/2020', 122],
        ['1/22/2020', 111],
        ['1/23/2020', 100],
        ['1/24/2020', 105],
        ['1/25/2020', 98],
        ['1/26/2020', 110],
        ['1/27/2020', 105],
        ['1/28/2020', 108],
        ['1/29/2020', 102],
        ['1/30/2020', 82],
        ['1/31/2020', 89],
        ['2/1/2020', 95],
        ['2/2/2020', 92],
        ['2/3/2020', 95],
        ['2/4/2020', 113],
        ['2/5/2020', 133],
        ['2/6/2020', 149],
        ['2/7/2020', 138],
        ['2/8/2020', 130],
        ['2/9/2020', 134],
        ['2/10/2020', 140],
        ['2/11/2020', 149],
        ['2/12/2020', 150],
        ['2/13/2020', 167],
        ['2/14/2020', 181],
        ['2/15/2020', 196],
        ['2/16/2020', 183],
        ['2/17/2020', 185],
        ['2/18/2020', 181],
        ['2/19/2020', 161],
        ['2/20/2020', 153],
        ['2/21/2020', 168],
        ['2/22/2020', 164],
        ['2/23/2020', 160],
        ['2/24/2020', 158],
        ['2/25/2020', 148],
        ['2/26/2020', 163],
        ['2/27/2020', 146],
        ['2/28/2020', 130],
        ['3/1/2020', 128],
        ['3/2/2020', 138],
        ['3/3/2020', 129],
        ['3/4/2020', 136],
        ['3/5/2020', 118],
        ['3/6/2020', 132],
        ['3/7/2020', 133],
        ['3/8/2020', 124],
        ['3/9/2020', 136],
        ['3/10/2020', 126],
        ['3/11/2020', 131],
        ['3/12/2020', 126],
        ['3/13/2020', 134],
        ['3/14/2020', 143],
        ['3/15/2020', 149],
        ['3/16/2020', 157],
        ['3/17/2020', 169],
        ['3/18/2020', 166],
        ['3/19/2020', 172],
        ['3/20/2020', 188],
        ['3/21/2020', 180],
        ['3/22/2020', 168],
        ['3/23/2020', 160],
        ['3/24/2020', 166],
        ['3/25/2020', 165],
        ['3/26/2020', 159],
        ['3/27/2020', 170],
        ['3/28/2020', 177],
        ['3/29/2020', 193],
        ['3/30/2020', 170],
        ['3/31/2020', 153],
        ['4/1/2020', 142],
        ['4/2/2020', 133],
        ['4/3/2020', 143],
        ['4/4/2020', 149],
        ['4/5/2020', 168],
        ['4/6/2020', 173],
        ['4/7/2020', 190],
        ['4/8/2020', 175],
        ['4/9/2020', 162],
        ['4/10/2020', 174],
        ['4/11/2020', 184],
        ['4/12/2020', 195],
        ['4/13/2020', 165],
        ['4/14/2020', 151],
        ['4/15/2020', 163],
        ['4/16/2020', 165],
        ['4/17/2020', 164],
        ['4/18/2020', 161],
        ['4/19/2020', 141],
        ['4/20/2020', 149],
        ['4/21/2020', 156],
        ['4/22/2020', 141],
        ['4/23/2020', 143],
        ['4/24/2020', 151],
        ['4/25/2020', 163],
        ['4/26/2020', 182],
        ['4/27/2020', 170],
        ['4/28/2020', 162],
        ['4/29/2020', 181],
        ['4/30/2020', 171],
        ['5/1/2020', 155],
        ['5/2/2020', 165],
        ['5/3/2020', 159],
        ['5/4/2020', 140],
        ['5/5/2020', 156],
        ['5/6/2020', 164],
        ['5/7/2020', 144],
        ['5/8/2020', 125],
        ['5/9/2020', 139],
        ['5/10/2020', 151],
        ['5/11/2020', 141],
        ['5/12/2020', 155],
        ['5/13/2020', 159],
        ['5/14/2020', 146],
        ['5/15/2020', 135],
        ['5/16/2020', 130],
        ['5/17/2020', 120],
        ['5/18/2020', 119],
        ['5/19/2020', 134],
        ['5/20/2020', 135],
        ['5/21/2020', 148],
        ['5/22/2020', 133],
        ['5/23/2020', 148],
        ['5/24/2020', 147],
        ['5/25/2020', 142],
        ['5/26/2020', 138],
        ['5/27/2020', 129],
        ['5/28/2020', 121],
        ['5/29/2020', 124],
        ['5/30/2020', 121],
        ['5/31/2020', 121],
        ['6/1/2020', 130],
        ['6/2/2020', 116],
        ['6/3/2020', 114],
        ['6/4/2020', 97],
        ['6/5/2020', 106],
        ['6/6/2020', 96],
        ['6/7/2020', 115],
        ['6/8/2020', 96],
        ['6/9/2020', 108],
        ['6/10/2020', 92],
        ['6/11/2020', 90],
        ['6/12/2020', 109],
        ['6/13/2020', 112],
        ['6/14/2020', 100],
        ['6/15/2020', 119],
        ['6/16/2020', 127],
        ['6/17/2020', 130],
        ['6/18/2020', 113],
        ['6/19/2020', 111],
        ['6/20/2020', 112],
        ['6/21/2020', 110],
        ['6/22/2020', 93],
        ['6/23/2020', 105],
        ['6/24/2020', 123],
        ['6/25/2020', 136],
        ['6/26/2020', 152],
        ['6/27/2020', 140],
        ['6/28/2020', 144],
        ['6/29/2020', 153],
        ['6/30/2020', 152],
        ['7/1/2020', 142],
        ['7/2/2020', 124],
        ['7/3/2020', 118],
        ['7/4/2020', 112],
        ['7/5/2020', 114],
        ['7/6/2020', 115],
        ['7/7/2020', 119],
        ['7/8/2020', 124],
        ['7/9/2020', 109],
        ['7/10/2020', 128],
        ['7/11/2020', 128],
        ['7/12/2020', 119],
        ['7/13/2020', 122],
        ['7/14/2020', 109],
        ['7/15/2020', 107],
        ['7/16/2020', 116],
        ['7/17/2020', 121],
        ['7/18/2020', 114],
        ['7/19/2020', 107],
        ['7/20/2020', 94],
        ['7/21/2020', 76],
        ['7/22/2020', 83],
        ['7/23/2020', 64],
        ['7/24/2020', 47],
        ['7/25/2020', 47],
        ['7/26/2020', 43],
        ['7/27/2020', 24],
        ['7/28/2020', 25],
        ['7/29/2020', 9],
        ['7/30/2020', 38],
        ['7/31/2020', 20],
        ['8/1/2020', 34],
        ['8/2/2020', 34],
        ['8/3/2020', 40],
        ['8/4/2020', 55],
        ['8/5/2020', 64],
        ['8/6/2020', 73],
        ['8/7/2020', 68],
        ['8/8/2020', 51],
        ['8/9/2020', 51],
        ['8/10/2020', 42],
        ['8/11/2020', 51],
        ['8/12/2020', 67],
        ['8/13/2020', 79],
        ['8/14/2020', 63],
        ['8/15/2020', 49],
        ['8/16/2020', 32],
        ['8/17/2020', 40],
        ['8/18/2020', 55],
        ['8/19/2020', 49],
        ['8/20/2020', 33],
        ['8/21/2020', 47],
        ['8/22/2020', 38],
        ['8/23/2020', 53],
        ['8/24/2020', 34],
        ['8/25/2020', 31],
        ['8/26/2020', 46],
        ['8/27/2020', 35],
        ['8/28/2020', 38],
        ['8/29/2020', 29],
        ['8/30/2020', 48],
        ['8/31/2020', 44],
        ['9/1/2020', 51],
        ['9/2/2020', 67],
        ['9/3/2020', 50],
        ['9/4/2020', 35],
        ['9/5/2020', 23],
        ['9/6/2020', 18],
        ['9/7/2020', 28],
        ['9/8/2020', 47],
        ['9/9/2020', 53],
        ['9/10/2020', 59],
        ['9/11/2020', 57],
        ['9/12/2020', 62],
        ['9/13/2020', 77],
        ['9/14/2020', 91],
        ['9/15/2020', 95],
        ['9/16/2020', 98],
        ['9/17/2020', 101],
        ['9/18/2020', 109],
        ['9/19/2020', 95],
        ['9/20/2020', 87],
        ['9/21/2020', 85],
        ['9/22/2020', 84],
        ['9/23/2020', 95],
        ['9/24/2020', 108],
        ['9/25/2020', 125],
        ['9/26/2020', 137],
        ['9/27/2020', 154],
        ['9/28/2020', 150],
        ['9/29/2020', 170],
        ['9/30/2020', 160],
        ['10/1/2020', 151],
        ['10/2/2020', 133],
        ['10/3/2020', 138],
        ['10/4/2020', 156],
        ['10/5/2020', 173],
        ['10/6/2020', 186],
        ['10/7/2020', 166],
        ['10/8/2020', 169],
        ['10/9/2020', 155],
        ['10/10/2020', 145],
        ['10/11/2020', 146],
        ['10/12/2020', 164],
        ['10/13/2020', 168],
        ['10/14/2020', 177],
        ['10/15/2020', 162],
        ['10/16/2020', 169],
        ['10/17/2020', 188],
        ['10/18/2020', 189],
        ['10/19/2020', 191],
        ['10/20/2020', 169],
        ['10/21/2020', 161],
        ['10/22/2020', 180],
        ['10/23/2020', 180],
        ['10/24/2020', 193],
        ['10/25/2020', 173],
        ['10/26/2020', 167],
        ['10/27/2020', 182],
        ['10/28/2020', 164],
        ['10/29/2020', 160],
        ['10/30/2020', 162],
        ['10/31/2020', 180],
        ['11/1/2020', 200],
        ['11/2/2020', 161],
        ['11/3/2020', 177],
        ['11/4/2020', 196],
        ['11/5/2020', 187],
        ['11/6/2020', 173],
        ['11/7/2020', 173],
        ['11/8/2020', 166],
        ['11/9/2020', 168],
        ['11/10/2020', 175],
        ['11/11/2020', 188],
        ['11/12/2020', 170],
        ['11/13/2020', 161],
        ['11/14/2020', 159],
        ['11/15/2020', 166],
        ['11/16/2020', 167],
        ['11/17/2020', 182],
        ['11/18/2020', 162],
        ['11/19/2020', 158],
        ['11/20/2020', 156],
        ['11/21/2020', 144],
        ['11/22/2020', 146],
        ['11/23/2020', 163],
        ['11/24/2020', 145],
        ['11/25/2020', 126],
        ['11/26/2020', 132],
        ['11/27/2020', 133],
        ['11/28/2020', 129],
        ['11/29/2020', 121],
        ['11/30/2020', 115],
        ['12/1/2020', 97],
        ['12/2/2020', 104],
        ['12/3/2020', 94],
        ['12/4/2020', 111],
        ['12/5/2020', 127],
        ['12/6/2020', 122],
        ['12/7/2020', 133],
        ['12/8/2020', 114],
        ['12/9/2020', 99],
        ['12/10/2020', 107],
        ['12/11/2020', 93],
        ['12/12/2020', 75],
        ['12/13/2020', 56],
        ['12/14/2020', 69],
        ['12/15/2020', 74],
        ['12/16/2020', 65],
        ['12/17/2020', 71],
        ['12/18/2020', 68],
        ['12/19/2020', 62],
        ['12/20/2020', 79],
        ['12/21/2020', 83],
        ['12/22/2020', 64],
        ['12/23/2020', 63],
        ['12/24/2020', 79],
        ['12/25/2020', 90],
        ['12/26/2020', 84],
        ['12/27/2020', 84],
        ['12/28/2020', 91],
        ['12/29/2020', 109],
        ['12/30/2020', 104],
        ['12/31/2020', 103]
      ].map(function(xy) {
        return { x: xy[0], y: xy[1] };
      });

      var options = {
        debug: true,
        type: 'column',
        legend_visible: false,
        title_label_text: 'Master Chart 2020',
        xAxis: {
          scale: {
            type: 'time',
            interval: { unit: 'month', multiplier: 1 }
          },
          formatString: 'MMM'
        },
        defaultPoint_events_click: pointClick,
        defaultSeries_pointSelection: true,
        series: [
          {
            name: 'All Months',
            palette: 'default',
            points: getSumData()
          }
        ]
      };
      var chart2Options = {
        type: 'column',
        animation_duration: 600,
        title_label_text: 'Month of ' + mName,
        defaultPoint_tooltip: 'January %xValue <b>%yValue</b>',
        legend_visible: false,
        series: [{ points: getData(0, true) }]
      };

      var chart = JSC.chart('masterChart', options, function() {
        /* Select the first point in this chart */
        this.series(0)
          .points(0)
          .select(true);
      });
      var chart2 = JSC.chart('detailsChart', chart2Options);

      function pointClick(e) {
        updateChart(new Date(this.x).getMonth(), this.tokenValue('%color'), true);
      }

      function updateChart(month, color, forDetail) {
        var mName = JSC.formatString(new Date(2020, month, 1), 'MMMM');
        var series = {
          color: color,
          defaultPoint_tooltip: mName + ' %xValue <b>%yValue</b>',
          points: getData(month, forDetail)
        };
        chart2.options({ title: { label: { text: 'Month of ' + mName } } });
        chart2.series(0).options(series);
      }

      function getData(month, forDetail) {
        var result = [];
        data.forEach(function(point) {
          if (new Date(Date.parse(point.x)).getMonth() === month) {
            var day = new Date(point.x).getDate() + '';
            //Specifying a point id enables the chart to animate updating specific days.
            result.push(forDetail ? { id: day, x: day, y: point.y } : point);
          }
        });
        return result;
      }

      function getSumData() {
        var result = [];
        for (var i = 0; i < 12; i++) {
          var mData = getData(i);
          result.push({ x: mData[0].x, y: JSC.sum(mData, 'y') });
        }
        return result;
      }
    </script>
  </body>
</html>
