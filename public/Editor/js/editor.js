/*
* @license
* (c) 2011-2020 Corporate Web Solutions Ltd. This software may be used to support and facilitate your
* development utilizing JSCharting if you hold a valid license for JSCharting.  This software may not
* be used or integrated for any task independent of its JSCharting support role.
* Please see https://jscharting.com/store/ for JSCharting licensing options.
*
* */
jQuery(function(){initLayoutResize()});function initLayoutResize(){"undefined"==typeof JSCTools&&(JSCTools={});JSCTools.g=JSCTools.g||{};JSCTools.g.splitter=new LayoutResize}function timerMe(){$.proxy(function(){this.fixLayout();this.fixMainHeight()},this)}
(function(a){function e(b){if("sidebar"===b[0].id){var a=document.getElementById("switchUI"),d=a.getAttribute("class");-1==d.indexOf("off")&&0<=b[0].className.indexOf("collapsed")?(GLOBAL.is_UI_hidden=!0,a.setAttribute("class","switch-area black off ")):(GLOBAL.is_UI_hidden=!1,a.setAttribute("class","switch-area black "))}else a=document.getElementById("switchDocs"),d=a.getAttribute("class"),-1==d.indexOf("off")&&0<=b[0].className.indexOf("collapsed")?a.setAttribute("class","switch-area black off "):
a.setAttribute("class","switch-area black ")}LayoutResize=function(){this.init.apply(this,arguments)};LayoutResize.prototype={init:function(b){this.o=a.extend({header:"#header",footer:"#footer",main:"#main",sidebar:"#sidebar",sidebarScroll:"#sidebar div.sidebar-holder",tabsetClass:".tabset",content:"#content",visual:"#content div.visual",visualInnerContent:"img",aside:"div.aside",contentScrollBlocks:"div.block-in-holder, div.aside-holder",bottomContent:"div.box-area",vertResizer:"#content .splitter",
rightResizer:"div.aside .splitter-v",leftResizer:"#sidebar .sidebar-splitter",collapsedClass:"collapsed",animatedClass:"animated",vResizeClass:"v-resize",hResizeClass:"h-resize",opener:"a.open",slideSpeed:400,openCloseMinWidth:5},b);this.findElements();this.addEvents();this.visualResize();this.asideResize();this.sidebarResize();this.fixLayout();this.fixMainHeight();this.openClose(this.aside,this.content);this.openClose(this.sidebar,this.main);this.scrollHeight=scrollSize.getHeight();document.getElementById("switchUI").onclick=
function(){var b=document.getElementById("sideUIButton");if(b.click)b.click();else if(document.createEvent){var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!0);b.dispatchEvent(a)}};document.getElementById("switchDocs").onclick=function(){var b=document.getElementById("sideDocButton");if(b.click)b.click();else if(document.createEvent){var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!0);b.dispatchEvent(a)}};document.getElementById("buttonLeft").onclick=function(b){};
document.getElementById("buttonRight").onclick=function(b){}},findElements:function(){this.win=a(window);this.body=a("body");this.header=a(this.o.header);this.footer=a(this.o.footer);this.main=a(this.o.main);this.sidebar=a(this.o.sidebar);this.sidebarScroll=a(this.o.sidebarScroll);this.sidebarTabset=this.sidebar.find(this.o.tabsetClass);this.content=a(this.o.content);this.bottomContent=a(this.o.bottomContent);this.visual=a(this.o.visual);this.aside=a(this.o.aside);this.asideHolderBox=this.aside.find(this.o.contentScrollBlocks);
this.asideTabset=this.aside.find(this.o.tabsetClass);this.contentScrollBlocks=this.content.find(this.o.contentScrollBlocks);this.vertResizer=a(this.o.vertResizer);this.rightResizer=a(this.o.rightResizer);this.leftResizer=a(this.o.leftResizer);this.resizers=this.rightResizer.add(this.leftResizer)},addEvents:function(){this.lastWindowHeight=this.win.height();this.lastWindowWidth=this.win.width();this.win.bind("load",a.proxy(function(){this.fixLayout();this.fixMainHeight()},this)).bind("resize",a.proxy(function(){clearTimeout(this.timer);
this.timer=setTimeout(timerMe,50);if(this.win.height()!=this.lastWindowHeight||this.win.width()!=this.lastWindowWidth)this.lastWindowHeight=this.win.height(),this.lastWindowWidth=this.win.width(),this.fixLayout(),this.fixMainHeight()},this))},fixLayout:function(){this.resetHeight();this.fixSidebarHeight();this.fixContentHeight();this.fixResizersHeight();this.fixBottomContentHeight()},fixMainHeight:function(){this.main.css({height:0}).css({height:this.win.height()-this.main.offset().top-this.footer.height()})},
resetHeight:function(){this.sidebarScroll.add(this.contentScrollBlocks).add(this.resizers).css({height:0})},fixSidebarHeight:function(){this.sidebarScroll.css({height:0}).css({height:Math.max(this.win.height(),this.body.height())-this.sidebarScroll.offset().top-this.footer.outerHeight(!0)})},fixContentHeight:function(){this.contentScrollBlocks.css({height:0}).each(a.proxy(function(b,c){var d=a(c);d.css({height:this.win.height()-d.offset().top-parseInt(d.css("paddingTop"))-parseInt(d.css("paddingBottom"))-
this.footer.outerHeight(!0)})},this))},fixResizersHeight:function(){this.resizers.css({height:0}).each(a.proxy(function(b,c){a(c).css({height:a(c).parent().outerHeight()})},this))},fixBottomContentHeight:function(){this.bottomContent.css({height:0}).css({height:this.win.height()-this.bottomContent.offset().top-this.footer.height()});this.visual.height()>this.win.height()-this.footer.height()-this.visual.offset().top-this.vertResizer.outerHeight(!0)&&this.visual.css({height:this.win.height()-this.footer.height()-
this.visual.offset().top-this.vertResizer.outerHeight(!0)})},visualResize:function(){this.visualResizeDrag=!1;this.vertResizer.bind("mousedown",a.proxy(function(b){a(".chart-iframe-overlay").css({display:"block"});this.visualResizeDrag=!0;this.startOffset=b.pageY;this.startHeight=this.visual.height();this.setDragClass("vertical");b.preventDefault()},this));this.body.bind("mousemove",a.proxy(function(b){if(this.visualResizeDrag){var c=this.startHeight+(b.pageY-this.startOffset),d=this.startHeight+
(b.pageY-this.startOffset),e=this.win.height()-this.footer.height()-this.visual.offset().top-this.vertResizer.outerHeight(!0),c=Math.min(c,d,e);a(".chart-iframe").css({height:c});this.visual.css({height:c});this.fixLayout();b.preventDefault()}},this)).bind("mouseup",a.proxy(function(){this.visualResizeDrag&&(a(".chart-iframe-overlay").css({display:"none"}),this.visualResizeDrag=!1,this.removeDragClass(),GLOBAL.aceEditor.resize())},this))},asideResize:function(){this.asideResizeDrag=!1;this.aside.data("width",
this.getPercentWidth(this.aside.width(),this.content));this.asideHolderBox.bind("scroll",a.proxy(function(){this.asideTabset.css({marginLeft:-this.asideHolderBox.scrollLeft()})},this));this.rightResizer.bind("mousedown",a.proxy(function(b){this.asideResizeDrag=!0;this.startOffset=b.pageX;this.startWidth=this.aside.width();this.setDragClass("horizontal");b.preventDefault()},this));this.body.bind("mousemove",a.proxy(function(b){this.asideResizeDrag&&(this.asideWidth=Math.min(this.startWidth+(this.startOffset-
b.pageX),this.content.width()/2),20>this.asideWidth?(this.asideWidth=0,this.aside.addClass(this.o.collapsedClass)):this.aside.removeClass(this.o.collapsedClass),this.asideWidth=this.getPercentWidth(this.asideWidth,this.content),this.aside.css({width:this.asideWidth+"%"}).data("width",this.asideWidth),this.fixContentHeight(),b.preventDefault())},this)).bind("mouseup",a.proxy(function(){this.asideResizeDrag&&(this.asideResizeDrag=!1,this.removeDragClass(),GLOBAL.aceEditor.resize())},this))},sidebarResize:function(){this.sidebarResizeDrag=
!1;this.sidebar.data("width",this.getPercentWidth(this.sidebar.width(),this.main));this.sidebarScroll.bind("scroll",a.proxy(function(){this.sidebarTabset.css({marginLeft:-this.sidebarScroll.scrollLeft()})},this));this.leftResizer.bind("mousedown",a.proxy(function(b){this.sidebarResizeDrag=!0;this.startOffset=b.pageX;this.startWidth=this.sidebar.width();this.setDragClass("horizontal");b.preventDefault()},this));this.body.bind("mousemove",a.proxy(function(b){this.sidebarResizeDrag&&(this.sidebarWidth=
Math.min(this.startWidth+(b.pageX-this.startOffset),this.main.width()/2),20>this.sidebarWidth?(this.sidebarWidth=0,this.sidebar.addClass(this.o.collapsedClass)):this.sidebar.removeClass(this.o.collapsedClass),this.sidebarWidth=this.getPercentWidth(this.sidebarWidth,this.main),this.sidebar.css({width:this.sidebarWidth+"%"}).data("width",this.sidebarWidth),this.fixLayout(),b.preventDefault())},this)).bind("mouseup",a.proxy(function(){this.sidebarResizeDrag&&(this.sidebarResizeDrag=!1,this.removeDragClass())},
this))},openClose:function(b,c){b.find(this.o.opener).bind("click",a.proxy(function(d){GLOBAL.reportAction(d.originalEvent.target,"click");b.addClass(this.o.animatedClass);b.hasClass(this.o.collapsedClass)?b.stop().animate({width:Math.max(this.getPixelWidth(b.data("width"),c),this.getPixelWidth(this.o.openCloseMinWidth,c))},{duration:this.o.slideSpeed,complete:a.proxy(function(){b.removeClass(this.o.animatedClass);b.css({width:Math.max(b.data("width"),this.o.openCloseMinWidth)+"%"});this.fixLayout();
e(b)},this)}).removeClass(this.o.collapsedClass):b.stop().animate({width:0},{duration:this.o.slideSpeed,complete:a.proxy(function(){b.addClass(this.o.collapsedClass);b.removeClass(this.o.animatedClass);this.fixLayout();e(b)},this)});d.preventDefault()},this))},getPercentWidth:function(b,a){return b/(a.width()/100)},getPixelWidth:function(b,a){return b*(a.width()/100)},getVisualScrollHeight:function(){return this.visual.width()>=this.visual.find(this.o.visualInnerContent).width()?0:this.scrollHeight},
setDragClass:function(b){this.body.addClass("vertical"==b?this.o.vResizeClass:this.o.hResizeClass)},removeDragClass:function(){this.body.removeClass(this.o.vResizeClass+" "+this.o.hResizeClass)}}})(jQuery);
var scrollSize=function(){function a(a){b&&(document.body.removeChild(b),b=null);e=document.createElement("div");b=document.createElement("div");b.style.cssText="position:absolute;overflow:hidden;width:100px;height:100px";b.appendChild(e);document.body.appendChild(b);e.style.cssText="height:"+(a?"100%":"200px");c=a?e.offsetHeight:e.offsetWidth;b.style.overflow="scroll";e.innerHTML=1;d=a?e.offsetHeight:e.offsetWidth;a&&b.clientHeight&&(d=b.clientHeight);document.body.removeChild(b);b=null;return c-
d}var e,b,c,d;return{getWidth:function(){return a(!1)},getHeight:function(){return a(!0)}}}();function initClearFields(){clearFormFields({clearInputs:!0,clearTextareas:!0,passwordFieldText:!0,filterClass:"default"})}
function clearFormFields(a){function e(a,b){a&&(a.style.display="none");b&&(b.style.display="inline")}null==a.clearInputs&&(a.clearInputs=!0);null==a.clearTextareas&&(a.clearTextareas=!0);null==a.passwordFieldText&&(a.passwordFieldText=!1);null==a.addClassFocus&&(a.addClassFocus=!1);a.filter||(a.filter="default");if(a.clearInputs)for(var b=document.getElementsByTagName("input"),c=0;c<b.length;c++)if(("text"==b[c].type||"password"==b[c].type)&&b[c].className.indexOf(a.filterClass))if(b[c].valueHtml=
b[c].value,b[c].onfocus=function(){this.valueHtml==this.value&&(this.value="");this.fake&&(e(this,this.previousSibling),this.previousSibling.focus());a.addClassFocus&&!this.fake&&(this.className+=" "+a.addClassFocus,this.parentNode.className+=" parent-"+a.addClassFocus)},b[c].onblur=function(){""==this.value&&(this.value=this.valueHtml,a.passwordFieldText&&"password"==this.type&&e(this,this.nextSibling));a.addClassFocus&&(this.className=this.className.replace(a.addClassFocus,""),this.parentNode.className=
this.parentNode.className.replace("parent-"+a.addClassFocus,""))},a.passwordFieldText&&"password"==b[c].type){var d=document.createElement("input");d.type="text";d.value=b[c].value;d.className=b[c].className;d.fake=!0;b[c].parentNode.insertBefore(d,b[c].nextSibling);e(b[c],null)}if(a.clearTextareas){b=document.getElementsByTagName("textarea");for(c=0;c<b.length;c++)b[c].className.indexOf(a.filterClass)&&(b[c].valueHtml=b[c].value,b[c].onfocus=function(){this.value==this.valueHtml&&(this.value="");
a.addClassFocus&&(this.className+=" "+a.addClassFocus,this.parentNode.className+=" parent-"+a.addClassFocus)},b[c].onblur=function(){""==this.value&&(this.value=this.valueHtml);a.addClassFocus&&(this.className=this.className.replace(a.addClassFocus,""),this.parentNode.className=this.parentNode.className.replace("parent-"+a.addClassFocus,""))})}};
 var typeIsNum={type:"number"},typeIsStr={type:"string"},typeIsBool={type:"bool"},typeIsObjEvH={type:"obj_eventHandler"},typeIsObjFill={type:"obj_fill"},typeIsObjColor={type:"obj_color"},strSpecific="specific",strObject="object",strNumber="number",strArray="array",ENUM="enum";
(function(){var e={},f={},c=function(){return{map:{objects:"configs",enums:"enums"},objectsDescription:"Configuration objects used to specify chart settings.",objects:{chart:{type:"object",description:"The top level chart configuration API.<br> var chart = new JSC.Chart({});",seealso:"Tutorials.firstChart",object:{tabIndex:{type:"number,string",description:"Used to enable and disable accessibility or to assign an initial tabIndex for the chart.",number:{description:"The initial tabIndex for the chart."},
string:{description:"Values 'auto' or 'none' enables or disables accessibility for the chart."},version:"2.8",seealso:"Tutorials.accessibility"},description:{type:"string",description:"Description for the chart used with accessibility features. It can be used to describe the chart and contents used by screen readers.",version:"2.8",seealso:"Tutorials.accessibility"},animation:{type:"obj_animation",description:"Specifies the animation settings for all animation scenarios such as real-time data updates."},
type:{type:"enum_chartType",description:'The fundamental Chart Type such as horizontal or vertical. See <a href="Enums.seriesType">seriesType enum</a> for line, bar, area varieties. This can be set through <a href="Types.series.type">chart.defaultSeries.type</a>',seealso:"Tutorials.chartTypes:Describes how to define specific chart types."},targetElement:{type:"string,object",hide:!0,description:"Specifies the ID of the HTML element to which this chart is added, or the element itself.",def:"'container_Chart'"},
template:{type:"obj_chart",description:"Configuration object of a chart template to apply to this chart.",remarks:"A single template with common settings can be made and used by all charts on a website to make developing charts faster while maintaining the same look and behavior."},defaultAnnotation:{type:"obj_annotation",description:"Default annotation settings."},defaultAxis:{type:"obj_axis",version:"2.9",description:"Default options that are applied to axes."},defaultCultureName:{type:"enum_cultures",
description:"Default culture name used when formatting values on this chart.",def:"'en-US'",seealso:"Tutorials.labelFormatting"},defaultHighlight:{type:"obj_highlight",version:"2.6",description:"Default highlight options applied to all other highlights on the chart."},defaultPoint:{type:"obj_point",description:"Options applied to all points on this chart."},defaultSeries:{type:"obj_series",description:"Options applied to all series on this chart. It's recommended to use this property to reduce the amount of coding necessary when applying settings to multiple series."},
palette:{type:"enum_palette,obj_smartPalette,array",description:"Palette used for series on this chart. Can be a palette name or array of colors.",array:{arrayType:"specific",description:"An array of colors used by each series.",types:[{type:"obj_color"}]},enum_palette:{description:"A predefined color palette.",ui:"PalettePicker"}},hatchPalette:{type:"bool,array",description:"Indicates whether a default palette should be used with a boolean setting, or an array of hatchStyles that define the palette.",
version:"2.0",array:{arrayType:"specific",description:"An array of hatch styles used by each series.",types:[{type:"enum_hatchStyle"}]}},width:{type:"number,string",def:640,number:{description:"in pixels.",min:0,max:32E3},string:{description:"as percentage of parent element.",format:"^[0-9]+%$",example:"'100%'"},description:"Width of the chart in pixels or percentage of container. When not specified, chart will fill container size."},height:{type:"number,string",number:{description:"chart height in pixels.",
min:0,max:32E3,def:350},string:{description:"chart height percentage of parent element.",format:"^[0-9]+%$"},description:"Height of the chart in pixels or percentage of container."},annotations:{type:"array",description:"An array of annotations placed on the chart at arbitrary positions.",sample:"Samples.boxPositions",array:{arrayType:"specific",types:[{description:"An annotation added to the chart.",type:"obj_annotation"}]}},fill:{type:"obj_color",description:"Color of the chart image background.",
remarks:"Same as setting chart.box.fill.<br> NOTE: This property must be set with a color value. The fill object is not supported.",def:'"rgb(250,250,250)"',hide:!0},box:{type:"object",description:"Visual properties of a box surrounding the chart image.",object:{outline:{type:"obj_outline",description:"Outline surrounding the chart image."},radius:{type:"number",description:"Corner radius of the box surrounding the chart."},fill:{type:"obj_fill",description:"Color of the box surrounding the chart image. Effectively the chart background color."},
padding:{type:"number",version:"2.0",description:"Space between box edges and the content in pixels."},corners:{type:"object,array,enum_boxCornerType",version:"2.0",description:"Describes the type of each individual corner of the box.",object:{topLeft:{type:"enum_boxCornerType",description:"Top left corner type."},topRight:{type:"enum_boxCornerType",description:"Top right corner type."},bottomRight:{type:"enum_boxCornerType",description:"Bottom right corner type."},bottomLeft:{type:"enum_boxCornerType",
description:"Bottom left corner type."}},array:{0:{description:"An array of corner types starting at topLeft going clockwise. ",arrayType:"specific",types:[{name:"topLeft",type:"enum_boxCornerType",description:"Top left corner type."},{name:"topRight",type:"enum_boxCornerType",description:"Top right corner type."},{name:"bottomRight",type:"enum_boxCornerType",description:"Bottom right corner type."},{name:"bottomLeft",type:"enum_boxCornerType",description:"Bottom left corner type."}],example:'["cut","square","cut","square"]'}}}}},
defaultBox:{type:"object",version:"2.5",description:"Default box properties that apply to virtually all box visuals on the chart.",object:{outline:{type:"obj_outline",description:"Outline options."},radius:{type:"number",description:"Corner radius of the box default chart box style."},fill:{type:"obj_fill",description:"Fill of the default chart box style."},boxVisible:{type:"bool",description:"Whether the annotation box is visible. Setting this property to false leaves only the annotation label visible. This property offers a shortcut to hide the annotation background box with one setting.",
def:!0}}},margin:{type:"obj_margin",description:"Specifies the margin around the chart.",remarks:"JS chart margin settings specify the distances between the chart area and image edges."},debug:{type:"bool",description:"Enables or disables warning messages in the browser console. Disabled by default."},xAxis:{type:"obj_axis,array",description:"The main x axis or array of x axes used on the charts.",array:{description:"An array of axes bound to either a series or another x Axis.",arrayType:"specific",
types:[{type:"obj_axis"}]}},yAxis:{type:"array,obj_axis",description:"The main y axis object or array of y axis objects for this chart.",array:{description:"An array of axes bound to either a series or another y Axis.",arrayType:"specific",types:[{type:"obj_axis"}]}},zAxis:{type:"array,obj_axis",description:"The main z axis used on the charts.",array:{description:"An array of axes bound to either a series or another z Axis.",arrayType:"specific",types:[{type:"obj_axis"}]}},zAxisFormatString:{type:"string",
version:"1.1",hide:!0,description:"Format string used for values on the z axis. Values associated with this axis including point labels, tooltips, among others will inherit this format by default.",seealso:"Tutorials.labelFormatting|Samples.AxisFormatting"},zAxisCultureName:{type:"enum_cultures",version:"1.1",hide:!0,hidden:!0,description:"Culture name used for formatting values on the axis.",seealso:"Tutorials.labelFormatting"},zAxisLabelText:{type:"string",version:"1.1",hide:!0,description:"Defines a label description for z data.",
remarks:"Currently this is used with automatic tooltip descriptions."},zAxisScaleType:{type:"string",hide:!0,description:"If set to 'stacked' column points that share an x value or name will overlap.",version:"1.5"},legend:{type:"obj_legend",description:"Chart legend box options.",seealso:"Tutorials.legend"},title:{type:"obj_titleBox",description:"Chart title box options."},chartArea:{type:"obj_chartArea",description:"Chart area related settings.",array:{validator:function(b,a,d,c){},arrayType:"specific",
description:"An array of chart area objects.",types:[{type:"obj_chartArea"}]}},series:{type:"array",description:"An array of series drawn on the chart.",array:{arrayType:"specific",types:[{description:"A series added to the chart",type:"obj_series"}]},seealso:"Tutorials.data"},data:{type:"string,array",version:"2.6",description:"A csv file name, csv text content, or values separated into arrays of rows and column. Used mainly with the calendar chart type but can also be used to populate a series of any other chart type automatically. Csv data must be in [date,value] format for use with calendar type.",
seeAlso:"JSC.fetch()",string:{description:"The csv file name, csv text content, or values separated into arrays of rows and column."},array:{arrayType:"specific",types:[{type:"array",array:{0:{arrayType:"specific",example:"['Greg',50]",description:"Each item in this row is mapped to a point property x,y,z respectively.",types:[{name:"valueN",type:"string,number,date",multi:!0,description:"Value mapped to point properties."}]}}}]}},grid:{type:"obj_grid",version:"2.8",description:"Grid options that enable switching between chart and grid view for the charted data."},
events:{type:"object",inlineName:"chartEvents",description:"Chart and chart area specific events.",object:{click:{type:"obj_eventHandler",inline:!0,description:"Fires when the chartArea is clicked.",remarks:'In the function, the "this" keyword refers to the chart object. An event argument is passed to the specified function. It contains  e.xAxis & e.yValue properties which are arrays of objects with axis and value properties. The value property refers to the axis value at the clicked position. e.yAxis[0].axis and e.xAxis[0].axis refer to the primary axes.'},
addSeries:{type:"obj_eventHandler",inline:!0,description:"Fires when a series is added to the chart.",remarks:'In the function, the "this" keyword refers to the chart object. An event argument is passed to the specified function. The e.options property contains info about the series that was added to the chart. Returning flase prevents the series from being added.'},load:{type:"obj_eventHandler",inline:!0,description:"Fires when the chart is finished loading.",remarks:'In the function, the "this" keyword refers to the chart object. An event argument is passed to the specified function.'},
redraw:{type:"obj_eventHandler",inline:!0,description:"Fires when the chart redraws.",remarks:'In the function, the "this" keyword refers to the chart object. An event argument is passed to the specified function.'},selection:{type:"obj_eventHandler",inline:!0,description:"Fires when an area of the chart is selected for zooming.",remarks:'In the function, the "this" keyword refers to the chart object. An event argument is passed to the specified function. It contains  e.xAxis & e.yValue properties which are arrays of objects with axis, min and max properties. The min and max properties refers to the axis values of the selected area. e.yAxis[0].axis and e.xAxis[0].axis refer to the primary axes.'},
selecting:{type:"obj_eventHandler",version:"2.1",inline:!0,description:"Fires when chart area selection values change active.",remarks:'In the function, the "this" keyword refers to the chart object. An event argument is passed to the specified function. It contains  e.xAxis & e.yValue properties which are arrays of objects with axis, min and max properties. The min and max properties refers to the axis values of the selected area. e.yAxis[0].axis and e.xAxis[0].axis refer to the primary axes.',seealso:"Samples.zoomSelection"},
zoomed:{type:"obj_eventHandler",inline:!0,description:"Fires when a chart zoom is completed.",remarks:'In the function, the "this" keyword refers to the chart object. An event argument is passed to the specified function. It contains axes ranges which are objects with min, max and range properties of the selected area.'},scrolled:{type:"obj_eventHandler",inline:!0,description:"Fires when a chart scroll is completed.",remarks:'In the function, the "this" keyword refers to the chart object. An event argument is passed to the specified function. It contains axes ranges which are objects with min, max and range properties of the selected area.'},
mouseOver:{type:"obj_eventHandler",inline:!0,description:"Fires when mouse cursor enters the chartArea.",remarks:'In the function, the "this" keyword refers to the chart object. An event argument is passed to the specified function.'},mouseOut:{type:"obj_eventHandler",inline:!0,description:"Fires when mouse cursor exits the chartArea.",remarks:'In the function, the "this" keyword refers to the chart object. An event argument is passed to the specified function.'}}},defaultTooltip:{type:"obj_tooltip",
description:"Point tooltip options."},toolbar:{type:"obj_toolbar",description:"Export and Print button toolbar settings."},axisToZoom:{type:"enum_zoomAxis",description:"Specifies axis zooming type."},mapping:{type:"object",version:"2.1",description:"Map chart type related settings.",object:{base:{type:"object",description:"The base object defines map layers that are used in the background. ",object:{layers:{type:"string",description:"A list of comma delimited map codes or geoJSON/topoJSON files. Map property filters can also be used if a reference layer is defined.",
seealso:"Tutorials.mapList"},series:{type:"obj_series",description:"The series styling for base map layers."}}},referenceLayers:{type:"string",description:"A list of comma delimited map codes or geoJSON/topoJSON files that are loaded into memory but not shown on the chart by default. This is useful when a series is built based on map features in memory.",seealso:"Tutorials.mapList"},zoomLimit:{type:"number",version:"2.1",description:"Defines a maximum zoom limit as a percent where 1 is 100%. A value of 5 means the chart can only zoom in to a maximum of 500% of original size."},
projection:{type:"bool,enum_projection,object",version:"2.1",description:"Accepts a projection name, projection options or bool value. When true (default), the standard mercator projection is applied to the map.",object:{type:{type:"enum_projection",description:"Projection to use."},point:{type:"array",description:"Projection origin point. ",array:{0:{description:"Origin point in degrees.",arrayType:"specific",types:[{name:"Long",type:"number",description:"Longitude coordinate in degrees between -180 and 180."},
{name:"Lat",type:"number",description:"Latitude coordinate in degrees between -90 and 90."}],example:"[120,-60]"}}},parallels:{type:"array",description:"Defines standard parallels of related projection.",array:{0:{description:"One parallel used with Stereographic and LambertAzimuthalEqualArea projection.",arrayType:"specific",types:[{name:"Lat",type:"number",description:"Latitude of first parallel in degrees between -90 and 90."}],example:"[-60]"},1:{description:"Two parallels used with LambertConformalConic projection.",
arrayType:"specific",types:[{name:"Lat1",type:"number",description:"Latitude of first parallel in degrees between -90 and 90."},{name:"Lat2",type:"number",description:"Latitude of second parallel in degrees between -90 and 90."}],example:"[-60,60]"}}}}}},seealso:"Tutorials.mapping"},calendar:{type:"obj_calendar",version:"2.6",description:"Encompasses options for the calendar chart type."},highlights:{type:"array",version:"2.6",description:"An array of highlight options used to groupings of points.",
array:{arrayType:"specific",description:"An array of highlights.",types:[{type:"obj_highlight"}]}},languageStrings:{type:"obj_languageStrings",description:"A number of strings used on the chart."},modules:{type:"array",hide:!0,description:"hidden",array:{arrayType:"specific",types:[{description:"Module names",type:"string"}]}},baseUrl:{type:"string",version:"2.9",description:"Manually specifies the location where the jscharting.js and its resources are located. It is not necessary to set if a script tag referencing jscharting.js exists on a page.",
remarks:'This URL can be set globally using <a href="iObject.JSC.defaults()">JSC.defaults()</a> and is useful when using jscharting.js as a module.'}}},annotation:{type:"object",description:"Encapsulates a box with a label that can be placed arbitrarily on the chart.",object:{tabIndex:{type:"number,string",description:"Used to enable and disable accessibility or to assign an initial tabIndex for the chart item.",number:{description:"The initial tabIndex for this item."},string:{description:"Values 'auto' or 'none' enables or disables accessibility for the item."},
version:"2.8",seealso:"Tutorials.accessibility"},description:{type:"string",description:"Description for the chart item used by screen readers. If not defined and the item has a label, the label text will be read.",version:"2.8",seealso:"Tutorials.accessibility"},id:{type:"string",version:"2.5",description:"The id of this annotation. Used to easily reference the annotation with chart.annotations(id) api."},label:{type:"obj_label",description:"Label displayed inside the annotation.",obj_label:{object:{autoWrap:{type:"bool",
version:"2.0",description:"When set to false, the annotation will not try to wrap text automatically."}}}},position:{type:"string",version:"2.6",description:'Alignment or pixel position in or around the chartArea. The position can be prefixed with "inside" meaning inside the chartArea. \n\n Alignment based position can be specified with two alignment values where their order is significant. First value specifies the side to align to such as top, right, bottom, left. The second value is the alignment on that side. For example, \'top left\' will place the annotation on top of the chart and align left whereas \'left top\' places it on the left side and aligns to top. Inside the chartArea these two settings will have the same meaning.\n\nPixel position of the annotation where 0,0 is the top left corner of the chart image. Prefixing this setting with "inside " like: "inside 10,10" will make the 0,0 position refer to the top left corner of the chartArea. Items will stack  when using the same positions such as "inside top left" for multiple items.\n',
string:{description:"annotation's position relative to the chart or chartArea"}},fill:{type:"obj_fill",description:"Background fill of this annotation."},outline:{type:"obj_outline",description:"Annotation box outline settings."},corners:{type:"object,array,enum_boxCornerType",version:"2.0",description:"Describes the type or each individual corner of the box.",object:{topLeft:{type:"enum_boxCornerType",description:"Top left corner type."},topRight:{type:"enum_boxCornerType",description:"Top right corner type."},
bottomRight:{type:"enum_boxCornerType",description:"Bottom right corner type."},bottomLeft:{type:"enum_boxCornerType",description:"Bottom left corner type."}},array:{0:{description:"An array of corner types starting at topLeft going clockwise. ",arrayType:"specific",types:[{name:"topLeft",type:"enum_boxCornerType",description:"Top left corner type."},{name:"topRight",type:"enum_boxCornerType",description:"Top right corner type."},{name:"bottomRight",type:"enum_boxCornerType",description:"Bottom right corner type."},
{name:"bottomLeft",type:"enum_boxCornerType",description:"Bottom left corner type."}],example:'["cut","square","cut","square"]'}}},transparency:{type:"number",description:"Transparency from 0 to 1, where 0 is solid and 1 is transparent.",min:0,max:1,hide:!0,hidden:!0},shadow:{type:"bool",version:"2.0",description:"Enables or disables the annotation shadow."},opacity:{type:"number",version:"1.4",description:"Opacity from 0 to 1, where 0 is transparent and 1 is solid (default).",min:0,max:1},boxVisible:{type:"bool",
description:"Whether the annotation box is visible. Setting this property to false leaves only the annotation label visible. This property offers a shortcut to hide the annotation background box with one setting.",def:!0},radius:{type:"number",description:"Annotation box corner radius.",min:0,max:50,def:5},padding:{type:"obj_margin",description:"Space between box edges and the annotation label in pixels.",version:"2.0"},width:{type:"number",description:"Annotation width (automatic if not defined)",
number:{description:"in pixels.",min:0,max:32E3},example:"120"},height:{type:"number",description:"Annotation height (automatic if not defined)",number:{description:"in pixels.",min:0,max:32E3},example:"60"},margin:{type:"obj_margin",description:"Annotation margin.",version:"2.0"},asHTML:{type:"bool",version:"2.0",description:"When true, the annotation and label will be rendered using HTML.",def:!1}}},axis:{type:"object",description:"Represents a chart axis.",object:{tabIndex:{type:"number,string",
description:"Used to enable and disable accessibility or to assign an initial tabIndex for the chart item.",number:{description:"The initial tabIndex for this item."},string:{description:"Values 'auto' or 'none' enables or disables accessibility for the item."},version:"2.8",seealso:"Tutorials.accessibility"},description:{type:"string",description:"Description for the chart item used by screen readers. If not defined and the item has a label, the label text will be read.",version:"2.8",seealso:"Tutorials.accessibility"},
id:{type:"string",description:"The id of this axis. Used to reference the axis programmatically at run-time."},label:{type:"obj_label",description:"Main axis label configuration.",remarks:'This label\'s text is also used to describe data associated with this axis. For example, if the y axis label reads "cost", the tooltip for a data point may show "cost: 123" based on this label.'},autoRotate:{type:"number",version:"2.0",description:"The possible rotation of tick labels in degrees used when labels overlap without rotation.",
remarks:"Applies to horizontal axes. Setting a value of 0 will disable angled ticks."},alternateGridFill:{type:"obj_fill",description:"Fill used on the area between every other two grid lines."},orientation:{type:"enum_orientation",description:"Axis orientation."},defaultTick:{type:"obj_axisTick",description:"The default settings used by all major axis ticks on the axis."},defaultMinorTick:{type:"obj_axisTick",description:"The default settings used by all minor axis ticks on the axis."},defaultMarker:{type:"obj_axisMarker",
version:"2.1",description:"Default setting applied to all axis markers on this axis.",seealso:"Samples.LegendAxisMarkers"},originTick:{type:"obj_axisTick",version:"2.0",description:"A custom tick representing the axis origin. For example, on numeric axes the default origin is the value 0.",remarks:"To disable the originTick, set originTick.enabled=false"},customTicks:{type:"array",description:"An array of custom ticks or tick values added to this axis.",version:"1.5",array:{arrayType:"specific",description:"An array of custom ticks or tick values that will be added to this axis.",
types:[{type:"obj_axisTick",description:"A tick object configuration."},{type:"number",description:"A tick value that will inherit other properties from defaultTick.",number:{description:"A tick value that will inherit other properties from defaultTick."}}]}},line:{type:"object",description:"Styling options for the axis line.",object:{color:{type:"obj_color",description:"Outline color."},dashStyle:{type:"enum_dashStyle",description:"Line dash style",version:"1.4"},width:{type:"number",description:"Outline width"},
breaks:{type:"obj_lineBreaks",description:"Enables and configures options for visual  axis line gaps at tick positions. Specifying an empty object for this property will enable the feature.",version:"2.5"},onTop:{type:"bool",version:"2.5",description:"Used with radial and circular charts. When true, the axis line will render on top of data. If set to false explicitly, the line will render behind gridlines."},opacity:{type:"number",version:"2.0",description:"Opacity of this line. 0 = transparent, 1 = solid."},
visible:{type:"bool",version:"2.5",description:"Specifies whether the line is visible."},caps:{type:"obj_lineCaps",version:"2.8",description:"Line cap options that provide control over line cap shapes such as arrows. The 'arrow' line cap type is a specialized shape that is available in addition to other shape types."}}},markers:{type:"array",description:"Axis markers drawn on this axis.",array:{arrayType:"specific",description:"An array of axis markers.",types:[{type:"obj_axisMarker",description:"Axis marker added to this axis."}]}},
formatString:{type:"string",description:"Format string used for values on this axis. Values associated with this axis including axis ticks, point labels, among others will inherit this format by default.",seealso:"Tutorials.labelFormatting|Samples.AxisFormatting"},cultureName:{type:"enum_cultures",description:"Culture name used for formatting values on the axis.",seealso:"Tutorials.labelFormatting"},spacingPercentage:{type:"number",description:"Spacing percentage between column or bar groups. This setting applies when used with the x axis.",
max:0.5,min:0},staticColumnWidth:{type:"number",description:"Pixel width of columns stemming from this axis. This setting applies when used with the x axis."},chartAreaOffset:{type:"number",hide:!0,description:"Pixel distance offset from the chart area"},centerTickMarks:{type:"bool",hide:!0,description:"Specifies whether axis ticks are centered with the data points.",remarks:"At this time, this feature only works with category data."},scale:{type:"object",description:"Scale related settings such as intervals, range and the like.",
version:"1.1",object:{zoomLimit:{type:"number,obj_timeInterval",description:"Specifies the minimum axis range that can be zoomed.",number:{description:"Maximum numeric zoom range.",example:"5"},obj_timeInterval:{description:"Maximum time zoom range.",example:"{unit:'day',multiplier:2}",inline:!0},seealso:""},interval:{type:"number,obj_timeInterval",description:"Specifies the major axis tick intervals.",number:{description:"Numeric interval."},seealso:"Samples.AxisIntervals"},minInterval:{type:"number,obj_timeInterval",
version:"2.9",description:"The minimum interval the axis will automatically consider. For example, setting a value of 1 will prevent intervals with decimal places such as .5, 1.5."},minorInterval:{type:"number,obj_timeInterval,string",description:"Specifies the minor axis tick intervals.",string:{description:'If minorInterval is set to a string value of "auto" automatic minor ticks are used.'},number:{description:"Numeric interval."},seealso:"Samples.AxisIntervals"},invert:{type:"bool",description:"Indicates whether the axis scale is inverted."},
range:{type:"object,array",description:"Scale range including min, max, and padding.",version:"1.1",object:{min:{type:"number,date,string",number:{description:"Numeric minimum axis value."},date:{description:"Time based minimum axis value."},string:{description:"If scale is time, this string is parsed to a date with new Date()"},description:"Specifies the minimum value of this axis."},max:{type:"number,date,string",number:{description:"Numeric maximum axis value."},date:{description:"Time based maximum axis value."},
string:{description:"If scale is time, this string is parsed to a date with new Date()"},description:"Specifies the maximum value of this axis."},padding:{type:"number",description:"Axis scale padding amount. Pads the data range by this amount to leave space between data and axis edges.",number:{description:"A value between 0 and 1 where 1 means the scale is padded by 100% in effect doubling the range.",min:0,max:1}}},array:{0:{arrayType:"specific",description:" as a [min,max] array.",types:[{type:"number,date,string",
name:"min",number:{description:"Numeric minimum axis value."},date:{description:"Time based minimum axis value."},string:{description:"If scale is time, this string is parsed to a date with new Date()"},description:"Specifies the minimum value of this axis."},{type:"number,date,string",name:"max",number:{description:"Numeric maximum axis value."},date:{description:"Time based maximum axis value."},string:{description:"If scale is time, this string is parsed to a date with new Date()"},description:"Specifies the maximum value of this axis."}]}}},
defaultBreak:{type:"object",version:"2.7",description:"Defines the styling options for how scale breaks are rendered.",object:{type:{type:"enum_scaleBreakType",description:"The scale break type.",remarks:"The 'zigzap' and 'gap' types clip the chartArea at the scale break positions. The 'line' type simply draws a line on top of the scale break position. The 'line' type can be used to create seamless scale breaks by setting the line width to 0. This is the same as using the 'hidden' break type."},line:{type:"object",
description:"Additional scale breaks styling options of the break line.",object:{color:{type:"obj_color",description:"Line color used with the 'line' scale break type."},width:{type:"number",description:"Width of the gap when using 'zigzag' or 'gap' type breaks, or the width of the line drawn when using 'line' type."}}}}},breaks:{type:"object,array",description:"Scale breaks as an array of break ranges, or automatic settigns.",version:"1.1",updated:"2.7",array:{arrayType:"specific",description:"An array of scale breaks.",
types:[{type:"array",description:"An array of [min,max] scale breaks.",array:{0:{arrayType:"specific",description:" as a [min,max] array.",types:[{type:"number,date",name:"min",number:{description:"Numeric minimum scale break value."},date:{description:"Time based minimum scale break value."},description:"Specifies the minimum value of this scale break."},{type:"number,date",name:"max",number:{description:"Numeric maximum scale break value."},date:{description:"Time based maximum scale break value."},
description:"Specifies the maximum value of this scale break."}]}}},{type:"obj_calendarPattern",version:"2.7",description:"",seealso:"Samples.financePatternBreaks"}]},object:{limit:{type:"number",description:"The maximum number of automatic scale breaks generated for this axis."}}},syncWith:{type:"string",description:"ID of another axis that this axis will sync its range with.",remarks:"This is useful with unit conversion where two axes show the same scale but in different units. An axis not associated with data can be synced with another axis. Or two axes both with data can be set to show the same range.",
seealso:"Samples.AxisShadowingTime"},type:{type:"enum_scale",description:'Specifies the axis <a href="Enums.scale">scale</a> enum.',remarks:"If a time scale is specified for the x axis, the chart will attempt to interpret the data x values as dates."},includeOrigin:{type:"bool",version:"2.0",description:"When set to true, the axis will attempt to include the origin in the scale"},logBase:{type:"number",description:"The logarithmic base used with logarithmic scales.",version:"2.6",seealso:"Samples.AxisLogScale"}}},
visible:{type:"bool",description:"Whether the axis is visible.",version:"1.5"},onTop:{type:"bool",version:"2.5",description:"When true and using with circular or radial charts, grid lines will render on top of data."},caOffset:{type:"number",version:"2.8",description:"Specifies the distance the of the axis from the related chartArea. A value of 0 will force the axis to touch the chart area even if it overlaps other axes. Negative values move the axis inside the chart area."},overflow:{type:"string",
version:"2.0",description:"When set to 'hidden' the tick labels get clipped instead of affecting layout of the chart.",remarks:"This is useful with live charts to prevent chartArea resizing due to axis tick labels."},crosshair:{type:"obj_axisTick",description:"An axis tick that follows the mouse cursor and invokes combined tooltips or if x crosshair is combined with y axis crosshair, the y axis will show multiple crosshairs for all point values at the given x position.",remarks:"Also used as colorBar visual that indicates the value of the hovered element",
version:"2.7",obj_axisTick:{object:{enabled:{type:"bool",description:"Enables the crosshair."},snapToData:{type:"bool",description:"When enabled with x axis, the crosshair position will be limited to data point x values.",remarks:"When enabled with y axes, multiple y axis crosshairs are created for all point y values at the given x axis position."}}}}}},lineBreaks:{type:"object",version:"2.5",description:"Options for adding gaps to the axis line at tick positions. This is an aesthetic feature that gives gauge types an improved visual quality in some cases. It can also be used with smartPalette line fill and represent ranges defined by the palette.",
isInlined:!0,object:{gap:{type:"number",description:"A numeric value between 0-1 that controls the gap size at break positions.",def:0.01},invert:{type:"bool",description:"When true,  gaps and fills are reversed."},custom:{type:"array",description:"When true,  gaps and fills are reversed.",array:{arrayType:"specific",types:[{type:"number",description:"An axis value or value between 0 and 1 mapped to the axis range.",number:{description:"An axis value or value between 0 and 1 mapped to the axis range."}}],
description:"An array of values between 0-1 representing the full axis range or axis scale values that define the break positions. When specified, the line will break at these positions instead of axis tick positions."}}}},axisTick:{type:"object",description:"Represents an axis tick that incapsulates the tick label, gridLine, line styling settings.",seealso:"Tutorials.TicksMarkers",object:{gridLine:{type:"obj_line",version:"2.5",description:"Line drawn on the chart area at the axis tick position.",
remarks:"Setting gridLine.visible='auto' will hide the grid lines if there are few gridlines used.",obj_line:{object:{width:{type:"number,string",description:"Outline width in pixels. When used with a category scale and column series types, gridLine_width='column' will make gridLine widths match the column width."},visible:{type:"bool,string",version:"2.5",description:"Specifies whether the line is visible. Setting the value 'auto' will hide the grid lines if there are few gridlines used."},onTop:{type:"bool",
version:"2.5",description:"When true and using with circular or radial charts, grid lines will render on top of data."}}}},line:{type:"obj_line",description:"The tick line of this AxisTick. The line.length property controls the length of this tick mark.",obj_line:{object:{radius:{type:"number",version:"2.8",description:"Controls the radius of curly brace range tick shapes."}}}},fill:{type:"obj_fill",version:"2.7",description:"Background fill of the axisTick label."},outline:{type:"obj_outline",version:"2.7",
description:"AxisTick label box outline settings."},corners:{type:"object,array,enum_boxCornerType",version:"2.7",description:"Describes the type or each individual corner of the axis tick label box.",object:{topLeft:{type:"enum_boxCornerType",description:"Top left corner type."},topRight:{type:"enum_boxCornerType",description:"Top right corner type."},bottomRight:{type:"enum_boxCornerType",description:"Bottom right corner type."},bottomLeft:{type:"enum_boxCornerType",description:"Bottom left corner type."}},
array:{0:{description:"An array of corner types starting at topLeft going clockwise. ",arrayType:"specific",types:[{name:"topLeft",type:"enum_boxCornerType",description:"Top left corner type."},{name:"topRight",type:"enum_boxCornerType",description:"Top right corner type."},{name:"bottomRight",type:"enum_boxCornerType",description:"Bottom right corner type."},{name:"bottomLeft",type:"enum_boxCornerType",description:"Bottom left corner type."}],example:'["cut","square","cut","square"]'}}},radius:{type:"number",
description:"Axis tick label box corner radius.",version:"2.7",def:3},label:{type:"obj_label",description:"Axis tick label.",obj_label:{object:{text:{type:"string,method",description:"Label text for axis ticks. The %value token is replaced with the tick value.",method:{description:"A callback function that processes the given legend entry text before it is displayed. The value of the axis tick is passed to the label callback function as an argument.",seealso:"Samples.LabelCallbacks"},string:{tokenSet:"value"}},
placement:{type:"enum_placement",version:"2.8",description:"Used with range ticks to manually specify whether labels are places inside or outside the range tick shapes."},onTop:{type:"bool",version:"2.5",description:"When true and using with circular or radial charts, axis tick lines and labels will render on top of data."}}},seealso:"Tutorials.tokenReference:Label Token Reference|Samples.labelTokens"},value:{type:"number,string,date,array,object",description:"(Custom Ticks) The axis value this tick represents.",
version:"1.5",updated:"2.8",number:{description:"Can be used in every axis scale. On category scales, the number refers to category index, but decimal places can be specified."},string:{description:"If the axis scale is time, this value is parsed with Date(). Category names indicates a range. SeriesCollection tokens are supported, as well as the %value token",tokenSet:"seriesCollection",seealso:"Tutorials.tokenReference|Samples.axisTickValueTokens"},date:{description:"A Date object."},object:{pattern:{type:"obj_calendarPattern",
description:"A calendar pattern that generates ticks for each specified interval or range"}},array:{0:{arrayType:"specific",version:"2.8",description:"AxisTick range value",types:[{name:"start",type:"number,string,date",number:{allowNull:!1},date:{description:"A Date object."},string:{description:"Date time string or category name."},description:"The start value."},{name:"end",type:"number,string,date",number:{allowNull:!1},date:{description:"A Date object."},string:{description:"Date time string or category name."},
description:"The end value."}]}}},enabled:{type:"bool",description:"Whether the axis tick(s) is enabled and rendered. Also used with defaultTick to disable automatically generated ticks.",version:"1.5"},includeInScale:{type:"bool",description:"Whether the axis range is adjusted to include this tick.",version:"1.5",seealso:"Samples.axisMarkerGoal"},padding:{type:"number",version:"2.0",description:"Space between the tick label and tick mark."},placement:{type:"enum_placement",version:"2.5",updated:"2.8",
description:"Can be used with regular or circular outer axes to place ticks inside or outside the related chart area."},rangeMode:{type:"enum_rangeMode",description:"Controls the visualization when the tick has a range value.",def:"auto",version:"2.8",seealso:"Tutorials.rangeTicks"},onTop:{type:"bool",version:"2.5",description:"When true and using with circular or radial charts, all tick visuals will render on top of data."},axisId:{type:"string",version:"2.9",description:"With multiple x or y axes, this property can be used with point.(x/y)AxisTick to specify the id of the axis the point axis tick should be added to."}}},
axisMarker:{type:"object",description:"Defines styles and positions used to mark a specified section or position on an axis. .",object:{id:{type:"string",description:"The axis marker id"},value:{type:"number,string,object,array",description:"Axis marker value.",updated:"2.8",object:{low:{type:"number,date,string",description:"Axis marker range start value.",number:{description:"Numeric marker minimum value."},date:{description:"Time marker minimum value."},string:{description:"Token value, category name, or date string value that is parsed with Date().",
version:"1.5",tokenSet:"seriesCollection"}},high:{type:"number,date,string",description:"Axis marker range end value.",number:{description:"Numeric marker maximum value."},date:{description:"Time marker maximum value."},string:{description:"Token value, category name, or date string value that is parsed with Date().",version:"1.5",tokenSet:"seriesCollection"}},pattern:{type:"obj_calendarPattern",description:"A calendar pattern that generates markers for each specified date range"}},array:{0:{description:"A pair of high, low values as an array.",
arrayType:"specific",example:"[5, 10]",types:[{name:"low",type:"number,date,string",description:"Minimum axis value.",number:{description:"Numeric marker minimum value."},date:{description:"Time marker minimum value."},string:{description:"Token value, category name, or date string value that is parsed with Date().",version:"1.5",tokenSet:"seriesCollection"}},{name:"high",type:"number,date,string",description:"Maximum axis value.",number:{description:"Numeric marker maximum value."},date:{description:"Time marker maximum value."},
string:{description:"Token value, category name, or date string value that is parsed with Date().",version:"1.5",tokenSet:"seriesCollection"}}]}},string:{description:"Token value, category name, or date string value that is parsed with Date().",version:"1.5",tokenSet:"seriesCollection"},number:{description:"Numeric axis value of this marker."},date:{description:"Time based axis value of this marker."}},includeInScale:{type:"bool",description:"Whether the axis range is adjusted to always include this marker.",
version:"1.5"},color:{type:"obj_fill",description:"Axis marker color."},line:{type:"obj_line",description:"Single value axis marker line options."},bringToFront:{type:"bool",hide:!0,description:"When true, the axis marker will appear in front of the data."},onTop:{type:"bool",description:"When true, the axis marker will appear in front of the data."},transparency:{type:"number",description:"Transparency from 0 to 1, where 0 is solid and 1 is transparent.",min:0,max:1,def:0,hide:!0,hidden:!0},opacity:{type:"number",
version:"1.4",description:"Opacity from 0 to 1, where 0 is transparent and 1 is solid (default).",min:0,max:1,def:1},label:{type:"obj_label",description:"Label object drawn next to the axis marker.",obj_label:{object:{text:{type:"string",description:"Label text for axis marker. "}}}},zIndex:{type:"number",hide:!0,description:"Z index setting of the axis marker visual."},legendEntry:{type:"obj_legendEntry",version:"2.1",description:"This marker's legend entry settings.",seealso:"Samples.LegendAxisMarkers"}},
seealso:"Samples.axisMarkersInFront"},color:{type:"enum_colors,string,array",description:'Represents a color that can be set in a number of ways. Possible options are: \nThe color name: "red"\nHex color value: "#FF0000"\nRGB values syntax: rgb(20,20,20)\nRGBA values syntax: rgba(20,20,20,.5)\nArray of [color,opaciy]: ["blue",.5]',string:{description:"A format such as rgb(120,120,120), rgba(120,120,120,.5) or #FF0000 can be specified as a string",format:["."],ui:"ColorPicker"},enum_colors:{description:"A color name can be used to specify colors",
ui:"ColorPicker"},array:{0:{description:" a color with opacity",type:"array",example:"['red',0.5]",arrayType:"specific",types:[{name:"color",type:"obj_color",description:"The color value."},{name:"opacity",type:"number",description:"Opacity from 0 to 1, where 0 is transparent and 1 is solid.",min:0,max:1}]}},ui:"ColorPicker"},fill:{type:"obj_color,array,object",description:"Represents a color with default shading effect disabled, a simple array based linear gradient fill, or complex linear gradient fill with stops.",
array:{0:{description:"A color that includes the option to disable default shading applied to the parent object or an opacity.",type:"array",example:"['blue',false]",arrayType:"specific",types:[{name:"color",type:"obj_color",description:"The color value."},{name:"shaded",type:"bool,number",description:"if false, the default shading is disabled. If a number is specified, it defines the color opacity"}]},1:{description:"Simple gradient (color1,colorN,angle)",type:"array",arrayType:"specific",example:"['red','blue','gree','white',45]",
types:[{name:"color1",type:"obj_color",description:"first color in the linear gradient."},{name:"colorN",type:"obj_color",multi:!0,description:"Subsequent colors in the linear gradient."},{name:"angle",type:"number",description:"angle of the gradient"}]}},object:{description:"Represents a complex gradient fill with stops.",angle:{type:"number",description:"Gradient angle.",number:{description:"in degrees.",min:-360,max:360,def:0,tag:"\u00b0"}},stops:{type:"array",description:"Defines gradient color stops for this fill object.",
array:{arrayType:"anyType",description:"An array of gradient stops.",types:[{type:"array",array:{0:{arrayType:"specific",example:"[0.1,'red']",description:"A gradient stop with position and color.",types:[{name:"position",type:"number",description:"Percentage position of this gradient stop.",min:0,max:1},{name:"color",type:"obj_color",description:"The color used with this gradient stop."}]}}}]}},image:{type:"string",description:"URL of an image that fills the area."}}},hatch:{type:"object",version:"2.0",
isInlined:!0,description:"Describes a hatch pattern fill.",object:{style:{type:"enum_hatchStyle",description:"Hatch pattern name"},color:{type:"obj_color",description:"Color of the hatch pattern"}}},complete:{type:"object,number",description:"Percent complete values and styling options",version:"2.0",hide:!0,isInlined:!0,number:{description:"numeric value 0-1"},object:{y:{type:"number,array",description:"Percent of (Y) complete.",remarks:"Applies to data point visuals that draw a rectangle. ",number:{description:"Numeric value 0-1."},
array:{0:{arrayType:"specific",types:[{name:"low",type:"number",description:"Starting value."},{name:"high",type:"number",description:"End value."}]}}},x:{type:"number,array",version:"2.0",description:"Percent of (X) complete",number:{description:"Numeric value 0-1."},array:{0:{arrayType:"specific",types:[{name:"low",type:"number",description:"Starting value."},{name:"high",type:"number",description:"End value."}]}}},fill:{type:"obj_fill",description:"Fill options for the area."},hatch:{type:"obj_hatch",
description:"Hatch styling for the area."}}},colorRange:{type:"object",description:"A color range specifying a value range and color.",version:"2.1",object:{value:{type:"number,array",description:"Range value.",array:{0:{description:"A pair of high, low values as an array.",arrayType:"specific",example:"[5, 10]",types:[{name:"low",type:"number",description:"Minimum value.",number:{description:"Numeric minimum value."}},{name:"high",type:"number",description:"Maximum  value.",number:{description:"Numeric maximum value."},
date:{description:"Time  maximum value."}}]}},number:{description:"Numeric value of range."}},color:{type:"obj_color",description:"The color associated with this color range."},legendEntry:{type:"obj_legendEntry",description:"The legend entry associated with this range."},min:{type:"number",hide:!0,description:"The starting value of the ranges."},max:{type:"number",hide:!0,description:"The ending or max value to generate ranges for."},interval:{type:"number",hide:!0,description:"Interval of the ranges generaed."}},
seealso:"Samples.SmartPaletteRanges|Tutorials.smartPalette"},spRange:{type:"object,array",description:"Takes an object which determines the range values automatically, an array of ranges, or an array of numbers",isInlined:!0,object:{min:{type:"number",description:"The starting value of the ranges."},max:{type:"number",description:"The ending or max value to generate ranges for."},interval:{type:"number",description:"Interval of the ranges generaed."}},array:{arrayType:"specific",description:"An array of color range configs that can include a min/max and color or an array of numbers.",
types:[{type:"obj_colorRange"},{type:"number"}]}},smartPalette:{type:"object",version:"2.1",description:"A smartPalette defines a gradient range of colors and how point values are mapped to it.",object:{id:{type:"string",version:"2.5",description:"The smartPalette id."},pointValue:{type:"string,method",description:"Specifies a token expression evaluated for each point that maps to the colors.",string:{description:"The point's custom attribute value to base the resultig color on.",tokenSet:"point"},
method:{description:"A function that point as an argument and returns the value. Using a function can help improve performance with charts that have many data points.",version:"2.6"}},ranges:{type:"obj_spRange",description:"An array of value ranges and the associated colors."},defaultRange:{type:"obj_colorRange",description:"Default settings that are applied to each range. This can be used to specify a single legend entry config for all ranges."},stops:{type:"array",description:"An array of values and colors similar to linear gradient stops.",
array:{arrayType:"anyType",description:"An array of gradient stops.",types:[{type:"array",array:{0:{arrayType:"specific",example:"[0,'green',.2]",description:"A value and color pair similar to a linear gradient stop.",types:[{name:"value",type:"number",description:"The value of this gradient stop."},{name:"color",type:"obj_color",description:"The color associated with this value."},{name:"snapStart",type:"number",required:!1,description:"A value between 0-1. The color of this stop will extend for this amount of the range between it and the next stop. A value of 0 will have no effect."},
{name:"snapEnd",type:"number",required:!1,description:"A value between 0-1. The color of the next stop will extend down to this amount of the range between this stop and the next. A value of 1 will have no effect."}]},1:{arrayType:"specific",example:"[0,'green',.2]",hide:!0,description:"A value and color pair similar to a linear gradient stop but including a start color snap value.",types:[{name:"value",type:"number",description:"The value of this gradient stop."},{name:"color",type:"obj_color",description:"The color associated with this value."},
{name:"snapStart",type:"number",required:!1,description:"A value between 0-1. The color of this stop will extend for this amount of the range between it and the next stop. A value of 0 will have no effect."}]},2:{arrayType:"specific",example:"[0,'green',.2]",hide:!0,description:"A value and color pair similar to a linear gradient stop but including a start and end color snap value.",types:[{name:"value",type:"number",description:"The value of this gradient stop."},{name:"color",type:"obj_color",description:"The color associated with this value."}]}}}]}},
colors:{type:"array",description:".",array:{arrayType:"anyType",description:"An array of colors that will stretch evenly to cover the range of point values.",types:[{type:"obj_color",description:"A color that is part of this array of colors."}]}},colorsValueRange:{type:"array",version:"2.6",description:"Option can be used with colors array to explicitly define the value range those colors should apply to.",array:{0:{arrayType:"specific",description:"a [min,max] array.",types:[{name:"start",type:"number",
description:"The low value."},{name:"end",type:"number",description:"The high value."}]}}},invert:{type:"bool",description:"Indicates whether the color stops are reversed. If so, the values will also invert."},colorBar:{type:"object",version:"2.1",description:"A gradient range of colors that appears in the legend when used with a smartPalette set on the chart level palette property",object:{width:{type:"number",description:"The width or height of the bar depending on the direction of the associated axis."},
length:{type:"number",description:"The width or height of the bar depending on the direction of the associated axis."},axis:{type:"obj_axis",description:"Axis options used with the axis that is drawn in the legend."},visible:{type:"bool",version:"2.7",description:"Indicates whether the colorBar is visible in the legend."}}}},seealso:"Samples.SmartPaletteGallery|Tutorials.smartPalette"},label:{type:"object",description:"Represents a label containing text, font styling, color, and other options. ",
object:{text:{type:"string,method",description:"The label text.",string:{description:"A string value of this label."},method:{description:"A callback function that processes this label's parent object and returns the resulting string. Supported with the following objects:  legendEntry, point tooltip, and axis tick labels."},seealso:"Tutorials.tokenReference:Label Token Reference|Samples.labelTokens"},color:{type:"obj_color",description:"label color"},visible:{type:"bool",description:"Whether the label is visible.",
def:!0},align:{type:"enum_alignHorizontal",description:"Horizontal alignment of this label."},verticalAlign:{type:"enum_alignVertical",description:"Vertical alignment of this label."},offset:{type:"string,number",description:"Label offset from the initial position in pixels.",string:{description:"Comma delimited x,y offset amount in pixels."},number:{description:"Used with pie labels to indicate offset distance from the pie slice."}},style:{type:"obj_labelStyle",description:"Label style options."},
rotate:{type:"number",description:"Label rotation in degrees."},margin:{type:"obj_margin",version:"2.0",description:"Margin of this label."},padding:{type:"obj_margin",version:"2.0",hide:!0,hidden:!0,description:"Padding of this label."},autoWrap:{type:"bool",version:"2.6",description:"Used to disable automatic wrapping in certain situations."},maxWidth:{type:"number",version:"2.9",description:"Max width of this label."}}},outline:{type:"object,string",isInlined:!0,description:"Represents outline settings",
object:{color:{type:"obj_color",description:"Outline color."},dashStyle:{type:"enum_dashStyle",description:"Line dash style",version:"1.4"},width:{type:"number",description:"Outline width"},visible:{type:"bool",version:"2.5",description:"Specifies whether the line is visible."}}},line:{type:"object",description:"Defines styling used to draw a line or curve.",object:{color:{type:"obj_color",description:"Outline color."},width:{type:"number,string",description:"Outline width"},dashStyle:{type:"enum_dashStyle",
description:"Line dash style"},length:{type:"number",description:"Length of the line when applicable."},opacity:{type:"number",version:"2.0",description:"Opacity of this line. 0 = transparent, 1 = solid."},visible:{type:"bool",version:"2.5",description:"Specifies whether the line is visible."},caps:{type:"obj_lineCaps",version:"2.8",description:"Line cap options that provide control over line cap shapes such as arrows. The 'arrow' line cap type is a specialized shape that is available in addition to other shape types."}}},
chartArea:{type:"object",description:"Represents an area on which series and elements are plotted. ",object:{tabIndex:{type:"number,string",description:"Used to enable and disable accessibility or to assign an initial tabIndex for the chart item.",number:{description:"The initial tabIndex for this item."},string:{description:"Values 'auto' or 'none' enables or disables accessibility for the item."},version:"2.8",seealso:"Tutorials.accessibility"},description:{type:"string",description:"Description for the chart item used by screen readers. If not defined and the item has a label, the label text will be read.",
version:"2.8",seealso:"Tutorials.accessibility"},type:{type:"enum_chartType",description:'The fundamental Chart Type such as horizontal or vertical. See <a href="Enums.seriesType">seriesType enum</a> for line, bar, area varieties. This can be set through <a href="Types.series.type">chart.defaultSeries.type</a>',seealso:"Tutorials.chartTypes:Describes how to define specific chart types.",version:"2.0"},fill:{type:"obj_fill",description:"Fill settings used to fill the interior of this chart area."},
transparency:{type:"number",description:"Transparency from 0 to 1, where 0 is solid and 1 is transparent.",min:0,max:1,def:0,hide:!0,hidden:!0},boxVisible:{type:"bool",version:"2.0",description:"Whether the annotation box is visible. Setting this property to false leaves only the annotation label visible. This property offers a shortcut to hide the annotation background box with one setting.",def:!0},opacity:{type:"number",version:"1.4",description:"Opacity from 0 to 1, where 0 is transparent and 1 is solid (default).",
min:0,max:1,def:1},outline:{type:"obj_outline",description:"Chart area box outline settings."},shadow:{type:"bool",version:"2.0",description:"Enables or disables the chart area shadow."},clipContent:{type:"bool",version:"2.6",description:"Controls whether series visuals are clipped when they go outside the chartArea rectangle."},height:{type:"number",hide:!0,description:"Value from 0 to 1. Used with multiple chart areas, it represents the height of this chart area in relation to the rest of the chart areas in this chart. A value of .5 indicates the chart area uses 50% of the available space.<br><br>A value of 2 or more indicates a pixel height for the chart area."},
series:{type:"array",array:{description:"An array of series drawn on this chart area.",arrayType:"specific",types:[{description:"A series added to the chart area.",type:"obj_series"}]}},yAxis:{type:"obj_axis,array",description:"The chart area's y axis or array of y axes.",array:{arrayType:"specific",description:"An array of y axes.",types:[{type:"obj_axis"}]}},xAxis:{type:"obj_axis,array",description:"The chart area's y axis or array of y axes.",version:"2.0",array:{arrayType:"specific",description:"An array of y axes.",
types:[{type:"obj_axis"}]}},title:{type:"obj_titleBox",description:"ChartArea's title box options.",version:"2.0"}}},series:{type:"object",description:"Represents a series of data points and series related options.",object:{tabIndex:{type:"number,string",description:"Used to enable and disable accessibility or to assign an initial tabIndex for the chart item.",number:{description:"The initial tabIndex for this item."},string:{description:"Values 'auto' or 'none' enables or disables accessibility for the item."},
version:"2.8",seealso:"Tutorials.accessibility"},description:{type:"string",description:"Description for the chart item used by screen readers. If not defined and the item has a label, the label text will be read.",version:"2.8",seealso:"Tutorials.accessibility"},id:{type:"string",description:"Series object id."},type:{version:"1.1",type:"enum_seriesType,enum_chartType",description:"Specifies the series type or a chart type such as pie, radar, or gauge.",seealso:"Tutorials.chartTypes:Describes how to define specific chart types."},
animation:{type:"obj_animation",description:"Specifies the initial animation of the series."},name:{type:"string",description:"Name of this series."},defaultPoint:{type:"obj_point",description:"Point options applied to all points in this series."},firstPoint:{type:"obj_point",version:"2.9",description:"Point options applied to the first point in this series."},lastPoint:{type:"obj_point",version:"2.9",description:"Point options applied to the first point in this series."},points:{type:"array,object",
description:"An array of points or point data object associated with this series.",array:{arrayType:"specific",types:[{type:"obj_point",description:"A point added to this series."}]},object:{mapTo:{type:"string",version:"2.0",description:"A comma delimited list of properties the items in data array or csv columns map to."},data:{type:"array,string",version:"2.0",description:"Array of arrays representing each data point that map to the mapTo property.",array:{arrayType:"specific",types:[{type:"array",
array:{0:{arrayType:"specific",example:"['Greg',50]",description:"Each tuple creates a new point where each value in the array is mapped to a property named in the properties argument.",types:[{name:"valueN",type:"string,number,date",multi:!0,description:"Value mapped to the properties defined in the first argument."}]}}}]}},types:{type:"string",version:"2.0",description:"A comma delimited list of data types that map to each data column."},delimiter:{type:"string",version:"2.0",description:"By default a comma delimiter is used, but alternative column delimeters can be specified when using with csv data."},
newline:{type:"string",version:"2.0",description:"An optional alternative newline delimiter."},header:{type:"bool",version:"2.0",description:"When set to true, the first row of csv data will not be used."}}},attributes:{type:"array,object",version:"2.5",description:"Series attributes  containing additional metadata as key value pairs that can be referenced in label text or other series related properties using tokens such as %attributeKey.",object:{"*":{type:"string,number,date",description:"Any attribute. The name of the property will be used as the key."}},
array:{arrayType:"specific",description:"An array of series attributes.",types:[{type:"array",array:{0:{arrayType:"specific",description:"A key-value pair representing an attribute.",types:[{name:"key",type:"string",description:"An attribute key. The key is used as a token in label text like: %key."},{name:"value",type:"string,number,date",description:"Key tokens will be replaced with this value."}]}}}]}},color:{type:"obj_color",description:"The default series color. Same as the defaultPoint.Color setting."},
fill:{type:"obj_fill",version:"2.9",description:"The fill of series area used with area series type."},opacity:{type:"number",version:"1.4",description:"Specifies the amount of opacity of this series from 0 to 1, where 0 is transparent and 1 is solid.",min:0,max:1},palette:{type:"enum_palette,obj_smartPalette,array",description:"Palette used for elements in this series.",array:{arrayType:"specific",types:[{type:"obj_color"}],description:"Array of color strings."},enum_palette:{description:"A predefined palette used by elements.",
ui:"PalettePicker"}},hatchPalette:{type:"bool,array",description:"Indicates whether a default palette should be used with a boolean setting, or an array of hatchStyles that define the palette.",version:"2.0",array:{arrayType:"specific",description:"An array of hatch styles used by each series.",types:[{type:"enum_hatchStyle"}]}},line:{type:"obj_line",description:"Line options used when the series type property is a line or spline.",obj_line:{object:{tension:{type:"number",version:"2.9",description:"A value between 0 and 1 that controls the tension of the curved line when used with a spline series type."}}}},
emptyPointMode:{type:"enum_emptyPointMode",description:"Specifies the behavior of the series if empty points are included. Empty points have y values set to null."},pointSelection:{type:"bool",description:"Specifies whether point selection is enabled for this series."},cursor:{type:"enum_cursor",description:"The cursor type when mouse hovers points in this series"},mouseTracking:{type:"object,bool",description:"Specifies mouse tracking options for this series.",object:{enabled:{type:"bool",description:"Whether mouse tracking is enabled for this series."}},
bool:{description:"Whether mouse tracking is enabled for this series."},remarks:"Disabling mouse tracking can improve client-side performance."},legendEntry:{type:"obj_legendEntry",description:"Legend entry settings associated with this series."},xAxis:{type:"number,string,obj_axis",description:"Specifies the x axis associated with this series, or a new axis used only by this series..",number:{description:"The index of the x axis associated with this series."},string:{description:"The id of a x axis associated with this series."}},
yAxis:{type:"number,string,obj_axis",description:"Specifies the y axis associated with this series, or a new axis used only by this series.",number:{description:"The index of the y axis associated with this series."},string:{description:"The id of a y axis associated with this series."}},explodeOffset:{type:"number",description:"Specifies the number of pixels by which pie slices are exploded."},transparency:{type:"number",description:"Specifies the amount of transparency of this series from 0 to 1, where 0 is solid and 1 is transparent.",
min:0,max:1,hide:!0,hidden:!0},states:{type:"object",description:"Specifies the series states",object:{hover:{type:"obj_seriesState",description:"State options when mouse hovers the series."},select:{type:"obj_seriesState",description:"State options when series is selected."}},seealso:"Tutorials.states"},events:{type:"object",inlineName:"seriesEvents",description:"Event functions fired when for specific mouse interactions with this series.",object:{mouseOver:{type:"obj_eventHandler",inline:!0,description:"Fires when mouse enters the series."},
mouseOut:{type:"obj_eventHandler",inline:!0,description:"Fires when mouse leaves the series."},click:{type:"obj_eventHandler",inline:!0,description:"Fires when series is clicked."},legendEntryClick:{type:"obj_eventHandler",inline:!0,description:"Fires when the series legend entry is clicked. The default event action is to toggle the visibility of the series. This can be prevented by returning false or calling event.preventDefault()."},show:{type:"obj_eventHandler",inline:!0,description:"Fires when series becomes visible."},
hide:{type:"obj_eventHandler",inline:!0,description:"Fires when series is hidden."}}},angle:{type:"obj_angleArc",description:"The starting angle or arc of pie, gauge or radar series type.",version:"1.1"},shape:{type:"obj_shape",version:"1.1",description:"Styling and position info for the series when it is a pie, gauge or radar series type",obj_shape:{type:"object",object:{center:{type:"string",description:"Center of the series in pixels or percentages"},size:{type:"string,number,array",description:"Size of the series in pixels or percentages.",
number:{description:"Size of the series in pixels."},string:{description:"Size of the series as a percentage of either the chart's width or height, whichever is smaller."},array:{0:{arrayType:"specific",description:" as a [width,height] array.",version:"1.2",types:[{type:"number,string",name:"width",description:"Width in pixels, or as percentage of chart size.",version:"1.1",number:{type:"number",description:"in pixels.",min:0},string:{description:"as percentage of chart height or width.",format:"^[0-9]+%$",
example:"'100%'"}},{type:"number,string",name:"height",description:"Height in pixels or as percentage of chart size.",version:"1.1",number:{type:"number",description:"in pixels.",min:0},string:{description:"as percentage of chart height or width.",format:"^[0-9]+%$",example:"'100%'"}}]}}},innerSize:{type:"string,number",description:"Inner size of the series in pixels or percentages. Refers to the donut hole size",number:{description:"Inner size in pixels."}},offset:{type:"string",description:"Offset of the series in pixels from the automatically determined position."},
padding:{type:"string,number",version:"1.1",description:"Padding between objects drawn on the chart area such as pies, radars, and gauges. The value represents a string percentage or a number from 0 to 1, where 0 is no padding and 1 is 100% padded. And if value > 1, it's a pixel value",remarks:"The default for Gauges is 0.15. For Radars, it is 0.3. And for Pies, it is 0.3. Funnel, pyramid, and cone types use 0.25.  This setting should be applied to defaultSeries rather than individual series.",number:{min:0}},
innerPadding:{type:"number",version:"1.2",description:"Padding between elements of this shape. For example space between funnel sections. If the value is less than 1, it represents a percentage of the whole. If the value is equal or greater than 1, it represents pixels.",remarks:"When using a percentage like .1, this devotes 10% of the height to padding for all points. When pixel values are used, they specify the pixel spacing between each element.",number:{min:0}},innerFill:{type:"obj_fill",version:"2.5",
description:"Used with gauges to fill the inner chartarea background.."},type:{type:"string",description:"Bubble series shape type can refer to marker types or icons. When used, bubble will take on this shape rather then a circle.",version:"2.1",seealso:"Samples.BubbleIcons"}}}},size:{type:"object,array",version:"1.1",description:"Specifies the minimum and maximum sizes of points. The minimum size can be set to limit bar height, and both can be used to specify bubble size limits.",object:{min:{type:"number,string",
description:"Minimum bar size in pixels, or bubble size in pixels or as percentage of chart size.",version:"1.1",number:{type:"number",description:"in pixels.",min:0},string:{description:"as percentage of chart height or width.",format:"^[0-9]+%$",example:"'100%'"}},max:{type:"number,string",description:"Maximum bubble size in pixels or as percentage of chart size.",version:"1.1",number:{type:"number",description:"in pixels.",min:0},string:{description:"as percentage of chart height or width.",format:"^[0-9]+%$",
example:"'100%'"}}},array:{0:{arrayType:"specific",description:" as a [min,max] array.",types:[{type:"number,string",name:"min",description:"Minimum bar size in pixels, or bubble size in pixels or as percentage of chart size.",version:"1.1",number:{type:"number",description:"in pixels.",min:0},string:{description:"as percentage of chart height or width.",format:"^[0-9]+%$",example:"'100%'"}},{type:"number,string",name:"max",description:"Maximum bubble size in pixels or as percentage of chart size.",
version:"1.1",number:{type:"number",description:"in pixels.",min:0},string:{description:"as percentage of chart height or width.",format:"^[0-9]+%$",example:"'100%'"}}]}}},map:{type:"string,obj_mapFileData",version:"2.1",skip:!0,description:"Specifies a map by code, a file name or a map features defined in a map file that is specified in baseLayers",seealso:"Tutorials.mapList|Tutorials.mapping"},mapDataId:{type:"string",version:"2.1",skip:!0,hide:!0,hidden:!0,description:" "},isBaseLayer:{type:"bool",
version:"2.1",skip:!0,hide:!0,hidden:!0,description:" "},visible:{type:"bool",description:"Indicates whether the series is visible.",version:"2.6"}}},point:{type:"array,object",description:"Represents a data point and related options",object:{description:{type:"string",description:"Description for the point used with screen readers.",version:"2.8",seealso:"Tutorials.accessibility"},id:{type:"string",description:"Point object id."},parent:{type:"string",version:"1.3",description:"Identifies a parent point by id.",
remarks:"This property allows defining nested hierarchies of points currently used with treemap data."},fill:{type:"obj_color",version:"2.9",description:"Specifies only the point visual fill color and does not affect other point related color."},color:{type:"obj_color",description:"This point's color."},outline:{type:"obj_outline",description:"Point's outline options. Applies to marker, bar, or pie series types."},hatch:{type:"obj_hatch",version:"2.0",description:"The hatch style to fill the point visual.",
def:"none"},focusGlow:{type:"object",version:"2.7",description:"A glow effect when the point is hovered or highlighted by combined tooltip and crosshair",object:{color:{type:"obj_color",description:"Base glow color.",tokenSet:"point"},opacity:{type:"number",description:"Opacity from 0 to 1, where 0 is transparent and 1 is solid (default).",min:0,max:1},width:{type:"number",description:"Width of the glow."}}},transparency:{type:"number",description:"Transparency from 0 to 1, where 0 is solid and 1 is transparent.",
min:0,max:1,def:0,hide:!0,hidden:!0},opacity:{type:"number",version:"1.4",description:"Opacity from 0 to 1, where 0 is transparent and 1 is solid.",min:0,max:1,def:1},marker:{type:"obj_pointMarker",description:"Point marker options used when the parent series type is set to marker"},annotation:{type:"obj_annotation",version:"2.1",description:"Annotation of this point. Used in organizational charts to set options for node visualizations."},label:{type:"obj_label",description:"Point label options.",
remarks:"Point labels include smart layout logic that will attempt to position them efficiently and without overlapping other labels or points. Specifying settings for align, verticalAlign, and placement will limit the range of possible label positions but the chart will try to find the best settings for any other properties that are not set explicitly.",obj_label:{object:{line:{type:"obj_line",description:"Line connecting label to datapoint. Used with pie series."},text:{type:"string,method",description:"label text",
method:{description:"A callback function that processes the label text. The point is passed to the label callback function as aN argument.",seealso:"Samples.LabelCallbacks"},string:{tokenSet:"point"}},autoHide:{type:"bool",version:"2.0",description:"When true and the chart cannot find a place for the label without overlapping other labels or visuals, it will hide automatically."},placement:{type:"enum_placement",version:"2.6",description:"Indicates whether the label position should be limited to only inside or outside. By default the chart will decide the most suitable placement automatically."}}}},
tooltip:{type:"string,method",description:"Tooltip string for this element. Point related tokens can be used.",seealso:"Tutorials.tokenReference:Label Token Reference|Samples.labelTokens",string:{description:"A string tooltip that uses tokens to display point related data.",tokenSet:"point"},method:{description:"A callback function that processes the given point tooltip text before it is displayed. The point is passed to the label callback function as the first argument."}},mouseTracking:{type:"bool",
version:"2.6",description:"When false, the point will not respond to mouse events. The points will also be invisible to crosshairs and excluded from combined tooltips",def:!0},states:{type:"object",inlineName:"pointStates",description:"Specifies point state options",object:{hover:{type:"obj_pointState",description:"State options when mouse hovers the point."},select:{type:"obj_pointState",description:"State options when point is selected."}},seealso:"Tutorials.States"},events:{type:"object",inlineName:"pointEvents",
description:"Event functions fired when for specific mouse interactions with this point.",object:{mouseOver:{type:"obj_eventHandler",inline:!0,description:"Fires when mouse enters the point.",remarks:'In the function, the "this" keyword refers to the clicked point object. An event argument is passed to the specified function.'},mouseOut:{type:"obj_eventHandler",inline:!0,description:"Fires when mouse leaves the point.",remarks:'In the function, the "this" keyword refers to the clicked point object. An event argument is passed to the specified function.'},
click:{type:"obj_eventHandler",inline:!0,description:"Fires when point is clicked.",remarks:'In the function, the "this" keyword refers to the clicked point object. An event argument is passed to the specified function. Returning false cancels the operation.'},select:{type:"obj_eventHandler",inline:!0,description:"Fires when point is selected.",remarks:'In the function, the "this" keyword refers to the clicked point object. An event argument is passed to the specified function. Returning false cancels the operation.'},
unselect:{type:"obj_eventHandler",inline:!0,description:"Fires when point is unselected."},remove:{type:"obj_eventHandler",inline:!0,description:"Fires when point is removed with the remove() method.",remarks:'In the function, the "this" keyword refers to the point object. An event argument is passed to the specified function. Returning false cancels the operation.'},update:{type:"obj_eventHandler",inline:!0,description:"Fires when point is updated with the update() method.",remarks:'In the function, the "this" keyword refers to the point object. An event argument is passed to the specified function. Returning false cancels the operation.'}}},
name:{type:"string",description:"Name of this point"},x:{type:"number,array,date,string",description:"X value of this point.",number:{description:"Numeric x value of this data point."},date:{description:"Time based x value of this data point."},string:{description:'A string date value that requires the x axis scale type "time" setting.'},array:{0:{arrayType:"specific",version:"1.1",description:"X value range",types:[{name:"xStart",type:"number,string,date",number:{allowNull:!0},date:{description:"A Date object x value of this data point."},
string:{description:"Date time string parsed with Date().",version:"1.5"},description:"The starting x value."},{name:"x",type:"number,string,date",number:{allowNull:!0},date:{description:"A Date object x value of this data point."},string:{description:"Date time string parsed with Date().",version:"2.0"},description:"The x value."}]}}},y:{type:"number,array,string,date",description:"Y value of this point.",number:{allowNull:!0},string:{description:"Date time string parsed with Date().",version:"1.5"},
date:{description:"A Date object y value of this data point."},array:{0:{arrayType:"specific",version:"1.1",description:"Y value range",types:[{name:"yStart",type:"number,string,date",number:{allowNull:!0},date:{description:"A Date object y value of this data point."},string:{description:"Date time string parsed with Date().",version:"1.5"},description:"The starting y value."},{name:"y",type:"number,string,date",number:{allowNull:!0},date:{description:"A Date object y value of this data point."},
string:{description:"Date time string parsed with Date().",version:"1.5"},description:"The y value."}]}}},z:{type:"number",description:"Z value of this point. Used in bubble charts and as gauge needle length from 0 to 1, and as pie slide lengths.",number:{allowNull:!0},version:"1.1",seealso:"Tutorials.chartTypes"},open:{type:"number",description:"Open price value used with finance charts.",number:{allowNull:!1}},high:{type:"number",description:"High price value used with finance charts.",number:{allowNull:!1}},
low:{type:"number",description:"Low price value used with finance charts.",number:{allowNull:!1}},close:{type:"number",description:"Close price value used with finance charts.",number:{allowNull:!1}},subvalue:{type:"obj_subvalue",version:"1.1",description:"Used to specify error bar data for this series."},subvalueX:{type:"obj_subvalue",version:"2.0",description:"Used to specify error bar data for this series on the X axis."},complete:{type:"obj_complete",version:"2.0",description:"Styling of the complete area."},
date:{type:"number,array,string,obj_calendarPattern",version:"2.6",seealso:"Tutorials.calendar",description:"Used with calendar charts to specify a date, date range, or calendar pattern to bind to.",number:{description:"Numeric date value."},string:{description:"A string date value."},array:{0:{arrayType:"specific",description:"A start/end dateTime range.",types:[{name:"startDate",type:"number,string",description:"The low value.",string:{description:"Date time string."}},{name:"endDate",type:"number,string,date",
description:"Ending dateTime value.",string:{description:"Date time string."}}]}}},attributes:{type:"array,object",version:"2.6",description:"Point attributes which hold additional information about the point and can be referenced within label text with tokens such as %attributeKey.",remarks:'With calendar charts, wrapping a string value attribute in an array like ["attribute string value"] allows merging attributes of multiple points. See the events calendar example in the <a href="Tutorials.calendar">Calendar tutorial</a> for more details.',
object:{"*":{type:"string,number,date",description:"Any attribute. The name of the property will be used as the key."}},array:{arrayType:"specific",description:"An array of point attributes.",types:[{type:"array",array:{0:{arrayType:"specific",description:"A key-value pair representing an attribute.",types:[{name:"key",type:"string",description:"An attribute key. The key is used as a token in label text like: %key."},{name:"value",type:"string,number,date",description:"Key tokens will be replaced with this value."}]}}}]}},
selected:{type:"bool",description:"Indicates whether this point is selected."},exploded:{type:"bool",description:"Indicates whether this pie slice is offset from the main pie."},legendEntry:{type:"obj_legendEntry",version:"2.0",description:"Legend entry settings associated with this point."},xAxisTick:{type:"obj_axisTick",version:"2.8",description:"When defined, an axis tick is added to the x axis with this point's x value. The axis tick label will be processed using point tokens that can describe this point."},
yAxisTick:{type:"obj_axisTick",version:"2.8",description:"When defined, an axis tick is added to the y axis with this point's y value. The axis tick label will be processed using point tokens that can describe this point."},map:{type:"string,obj_mapFileData",version:"2.1",skip:!0,description:"Specifies a map feature by code, a file name or a map feature defined in a map file that is specified in baseLayers",seealso:"Tutorials.mapList|Tutorials.mapping"},mapTo:{hide:!0,type:"string",version:"2.0",
description:"A comma delimited list of properties the items in data array or csv columns map to."},data:{hide:!0,type:"array,string",version:"2.0",description:"Array of arrays representing each data point that map to the map property.",array:{arrayType:"anyType",types:[{name:"valueN",type:"string,number,date,array",multi:!0,description:"Value mapped to the properties defined in the first argument.",array:{arrayType:"anyType",types:[{name:"*",type:"string,number,date",multi:!0,description:"Value mapped to the properties defined in the first argument."}]}}]}},
types:{hide:!0,type:"string",version:"2.0",description:"A comma delimited list of data types that map to each data column."},delimiter:{hide:!0,type:"string",version:"2.0",description:"By default a comma delimiter is used, but alternative column delimeters can be specified when using with csv data."},newline:{hide:!0,type:"string",version:"2.0",description:"An optional alternative newline delimiter."},header:{hide:!0,type:"bool",version:"2.0",description:"When set to true, the first row of csv data will not be used."}},
array:{0:{arrayType:"specific",description:"A numeric X and Y value pair. The x value can also represent a date if the x axis has a time scale type.",types:[{type:"number",name:"X",description:"The x component of this point.",number:{description:"Numeric x value. ",remarks:"If the x axis type is set to time, the chart will attempt to convert the numeric value to a date."}},{name:"Y",type:"number,array",description:"The Y value of this point.",array:{0:{arrayType:"specific",description:" as a [min,max] array.",
types:[{type:"number,date",name:"min",number:{description:"Numeric start y value."},date:{description:"Time based start y value."},string:{description:"If scale is time, this string is parsed to a date with new Date()"},description:"Specifies the start y value of this point."},{type:"number,date",name:"max",number:{description:"Numeric end y value."},date:{description:"Time based end y value."},string:{description:"If scale is time, this string is parsed to a date with new Date()"},description:"Specifies the end y value of this point."}]}}}],
example:"[5,10]"},1:{arrayType:"specific",description:"A time X value and numeric Y value pair.",types:[{name:"X",type:"date",description:"The x component of this point.",date:{description:"A date value."}},{name:"Y",type:"number,array",description:"The Y value of this point.",array:{0:{arrayType:"specific",description:" as a [min,max] array.",types:[{type:"number,date",name:"min",number:{description:"Numeric start y value."},date:{description:"Time based start y value."},string:{description:"If scale is time, this string is parsed to a date with new Date()"},
description:"Specifies the start y value of this point."},{type:"number,date",name:"max",number:{description:"Numeric end y value."},date:{description:"Time based end y value."},string:{description:"If scale is time, this string is parsed to a date with new Date()"},description:"Specifies the end y value of this point."}]}}}],example:'[new Date(2015,0,1),10] or ["1/1/2015",10]'},2:{arrayType:"specific",description:"A point Name and Y value pair. The name can also represent a date if the x axis has a time scale type.",
types:[{name:"X",type:"string",description:"The x component of this point.",string:{description:"The name of this point. If the x axis scale type is set to time, date values can be passed as strings and the chart will try to interpret them as date data types.",remarks:"If the x axis type is set to time, the chart will attempt to convert the string value to a date."}},{name:"Y",type:"number,array",description:"The Y value of this point.",array:{0:{arrayType:"specific",description:" as a [min,max] array.",
types:[{type:"number,date",name:"min",number:{description:"Numeric start y value."},date:{description:"Time based start y value."},string:{description:"If scale is time, this string is parsed to a date with new Date()"},description:"Specifies the start y value of this point."},{type:"number,date",name:"max",number:{description:"Numeric end y value."},date:{description:"Time based end y value."},string:{description:"If scale is time, this string is parsed to a date with new Date()"},description:"Specifies the end y value of this point."}]}}}],
example:'["Chris",120]'},3:{arrayType:"specific",description:"A finance data point with a date and OHLC (Open, High, Low, Close) values.",types:[{name:"X",type:"date,string",description:"The x component of this point.",date:{description:"A date x value."},string:{description:"A string date value. If the x axis scale type is set to time, date values can be passed as strings and the chart will try to interpret them as date data types."}},{name:"Open",type:"number",description:"Open price value."},{name:"High",
type:"number",description:"High price value."},{name:"Low",type:"number",description:"Low price value."},{name:"Close",type:"number",description:"Close price value."}],example:"[new Date(2015,0,1), 12.50, 13.15, 10.62, 11.75]"}}},pointMarker:{type:"object",description:"Represents point marker settings",object:{type:{type:"enum_markerTypes,string,obj_icon",description:'Specifies a predefined marker shape or image path. Alternatively, an icon object with properties related to the shape such as "path" can be used to specify a custom path shape that will be scaled to the marker size. ',
version:"2.1",enum_markerTypes:{example:" "},string:{description:"A string URL of a raster image to use as the marker visual. Or the path of an icon.",validator:function(b,a,c,e){if(!b||!/^url\(/.test(b))return{message:"The marker type specified is not valid."}}},example:"'circle', 'url(images/us.png)', {name:'iconName'}, 'iconName'"},visible:{type:"bool",description:"Specifies whether this marker is visible."},color:{type:"obj_color",description:"This point marker color. Applies to both fill and outline color but is slightly adjusted for outline color by default.",
version:"2.9"},fill:{type:"obj_fill",description:"Marker shape fill."},outline:{type:"obj_outline",description:"Point marker outline styling."},size:{type:"number",description:"Point marker size in pixels."},offset:{type:"string",version:"2.1",description:"Offsets the marker visual in pixels from the original position.",seealso:"Samples.MapThematicMarkers"},states:{type:"object",inlineName:"pointMarkerStates",description:"State options for point marker.",object:{hover:{type:"obj_pointMarkerState",
inline:!0,description:"State options when the mouse hovers the marker."},select:{type:"obj_pointMarkerState",inline:!0,description:"State options when point is selected."}},seealso:"Tutorials.states"},rotate:{type:"number,string",description:"Specifies rotation of the marker in degrees. When using circular or radial charts, setting 'auto' will rotate the marker so it is oriented pointing away from the center. Point tokens values can be used with this property.",tokenSet:"point",version:"2.5"},length:{type:"number,array",
description:"Values between 0 and 1 used with needle gauge charts to specify the needle length or range.",version:"2.5",array:{0:{description:"An array of low and high values.",arrayType:"specific",types:[{name:"Low",type:"number",description:"Low value"},{name:"High",type:"number",description:"High value"}],example:"[.1,.5]"}}}}},legend:{type:"object",description:"Represents the legend box settings of this chart.",object:{tabIndex:{type:"number,string",description:"Used to enable and disable accessibility or to assign an initial tabIndex for the chart item.",
number:{description:"The initial tabIndex for this item."},string:{description:"Values 'auto' or 'none' enables or disables accessibility for the item."},version:"2.8",seealso:"Tutorials.accessibility"},description:{type:"string",description:"Description for the chart item used by screen readers. If not defined and the item has a label, the label text will be read.",version:"2.8",seealso:"Tutorials.accessibility"},horizontalSpacing:{type:"number",version:"2.0",description:"Additional horizontal spacing between entries (not cells or columns of entries) when they are side-by-side"},
cellSpacing:{type:"number",version:"2.0",description:"Similar to HTML table cellSpacing attribute, it defines the space between each cell and box edges."},fill:{type:"obj_fill",description:"Fills the background of the legend box."},outline:{type:"obj_outline",description:"Legend box outline."},radius:{type:"number",description:"Legend box corner radius.",min:0,max:50,def:5},visible:{type:"bool",description:"Specifies whether the legend is visible."},defaultEntry:{type:"obj_legendEntry",description:"Specifies the default options used by all legend entries in this legend."},
reversed:{type:"bool",description:"Specifies whether the order of the legend entries is reversed."},shadow:{type:"bool",description:"Specifies whether a shadow is visible for the legend box."},maxWidth:{type:"number",version:"2.9",description:"Limits the pixel width of the legend box."},width:{type:"number",description:"When specified, this pixel width is used for the legend. Determined automatically when not specified."},height:{type:"number",version:"1.2,",description:"When specified, this pixel height is used for the legend. Determined automatically when not specified."},
margin:{type:"obj_margin",description:"Specifies the margin of the legend box.",version:"2.0"},transparency:{type:"number",description:"Transparency from 0 to 1, where 0 is solid and 1 is transparent.",min:0,max:1,def:0,hide:!0,hidden:!0},opacity:{type:"number",version:"1.4",description:"Opacity from 0 to 1, where 0 is transparent and 1 is solid.",min:0,max:1,def:1},boxVisible:{type:"bool",description:"Whether the legend box background and outline are visible",def:!0},corners:{type:"object,array,enum_boxCornerType",
version:"2.0",description:"Describes the type of each individual corner of the box.",object:{topLeft:{type:"enum_boxCornerType",description:"Top left corner type."},topRight:{type:"enum_boxCornerType",description:"Top right corner type."},bottomRight:{type:"enum_boxCornerType",description:"Bottom right corner type."},bottomLeft:{type:"enum_boxCornerType",description:"Bottom left corner type."}},array:{0:{description:"An array of corner types starting at topLeft going clockwise. ",arrayType:"specific",
types:[{name:"topLeft",type:"enum_boxCornerType",description:"Top left corner type."},{name:"topRight",type:"enum_boxCornerType",description:"Top right corner type."},{name:"bottomRight",type:"enum_boxCornerType",description:"Bottom right corner type."},{name:"bottomLeft",type:"enum_boxCornerType",description:"Bottom left corner type."}],example:'["cut","square","cut","square"]'}}},layout:{type:"enum_directionalLayout",description:"Layout of the legend entries."},offset:{type:"string",description:'Offsets the legend by this pixel amount given as "x,y" from the initial position'},
position:{type:"enum_orientation,string",version:"2.6",description:'Alignment or pixel position in or around the chartArea. The position can be prefixed with "inside" meaning inside the chartArea. \n\n Alignment based position can be specified with two alignment values where their order is significant. First value specifies the side to align to such as top, right, bottom, left. The second value is the alignment on that side. For example, \'top left\' will place the item on top of the chart and align left whereas \'left top\' places it on the left side and aligns to top. Inside the chartArea these two settings will have the same meaning.\n\nPixel position of the item where 0,0 is the top left corner of the chart image. Prefixing this setting with "inside " like: "inside 10,10" will make the 0,0 position refer to the top left corner of the chartArea. Items will stack  when using the same positions such as "inside top left" for multiple items.\n',
enum_orientation:{description:"Predefined position around the chart area."}},title:{type:"object",description:"Represents the legend title",inlineName:"legendTitle",object:{label:{type:"obj_label",description:"Title label of this legend.",version:"1.2",obj_label:{object:{text:{type:"string",description:"Label text for title. ",tokenSet:"seriesCollection"}}}}}},headerStyle:{type:"obj_labelStyle",version:"2.0",description:"Styling setting for column header labels."},header:{type:"string,array",version:"2.0",
description:"An array or delimited list (string) of header labels for each column defined in the template property.",string:{description:"If the string contains commas, it will be split by commas. Otherwise, it will split by spaces."},array:{arrayType:"specific",types:[{type:"string",description:"Header text."}]}},template:{type:"string,array",description:"An array or delimited list (string) of tokens and expressions that define the value for each column. The header property provides a similar way to label each column.",
version:"2.0",string:{description:"If the string contains commas, it will be split by commas. Otherwise, it will split by spaces."},array:{arrayType:"specific",types:[{type:"string",description:"token expression for each column."}]}},customEntries:{type:"array",version:"2.1",description:"An array of custom legend entries that will be added to the legend.",array:{arrayType:"specific",types:[{description:"A custom legend entry.",type:"obj_legendEntry"}]},seealso:"Samples.LegendCustomEntries"}}},legendEntry:{type:"object",
description:"Represents a legend entry.",object:{name:{type:"string,method",description:"The %name token in the legend template will refer to this string rather than process the token on the related item directly.",method:{description:"A callback function that processes the given legend entry text before it is displayed. "},version:"2.0"},value:{type:"string,method",description:"The %value token in the legend template will refer to this string rather than process the token on the related item directly.",
method:{description:"A callback function that processes the given legend entry text before it is displayed."},version:"2.0"},style:{type:"obj_labelStyle",description:"Legend entry text style."},padding:{type:"number",description:"Distance between the entry text and icon"},color:{type:"obj_color",description:"Legend entry text color."},width:{type:"number",description:"When specified, this pixel width is used for the entry. Determined automatically when not specified."},height:{type:"number",description:"Height of the legend entry in pixels."},
iconWidth:{type:"number",description:"Specifies the entry icon width."},lineAbove:{type:"bool",version:"2.6",description:"When true, a line will be drawn above the legend entry."},visible:{type:"bool",description:"Specifies whether this legend entry is visible."},sortOrder:{type:"number",description:"Legend entries will be sorted by this number."},states:{type:"object",inlineName:"legendEntryState",description:"State options for legend entry.",object:{hover:{type:"obj_legendEntryState",inline:!0,
description:"State options on legend entry hover."},hidden:{type:"obj_legendEntryState",inline:!0,description:"State options when legend entry is disabled."}},seealso:"Tutorials.states"},cursor:{type:"enum_cursor",version:"2.6",description:"The mouse cursor type when hovering this entry."},events:{type:"object",inlineName:"legendEntryEvents",version:"2.0",description:"Event functions fired when for specific mouse interactions with this legend entry.",object:{mouseOver:{type:"obj_eventHandler",inline:!0,
description:"Fires when mouse enters the legend entry."},mouseOut:{type:"obj_eventHandler",inline:!0,description:"Fires when mouse leaves the legend entry."},click:{type:"obj_eventHandler",inline:!0,description:"Fires when legend entry is clicked."}}},icon:{type:"obj_icon",version:"2.1",description:"Icon options that are incorporated into the legend entry icon visual.",seealso:"Samples.BarMarkerIconsInLegend",obj_icon:{object:{color:{type:"obj_color",version:"2.5",description:"When used with custom entries, this value specifies the color of the entry default icon."}}}},
attributes:{type:"array,object",description:"Used with custom entries, these attributes hold values that legend columns may require.",version:"2.1",object:{"*":{type:"string,number,date",description:"any attribute. The name of the property will be used as the key."}},array:{arrayType:"specific",description:"An array of point attributes.",types:[{type:"array",array:{0:{arrayType:"specific",description:"A key-value pair representing an attribute.",types:[{name:"key",type:"string",description:"An attribute key. The key is used as a token in label text like: %key."},
{name:"value",type:"string,number,date",description:"Key tokens will be replaced with this value."}]}}}]},seealso:"Samples.LegendAlone"},description:{type:"string",description:"Description for the legendEntry used by screen readers.",version:"2.8",seealso:"Tutorials.accessibility"}}},timeInterval:{type:"object",description:"Represents a time interval span.",isInlined:!0,example:"{unit:'day',multiplier:2}",object:{unit:{type:"enum_timeUnit",description:"The time unit used by this interval."},multiplier:{type:"number",
def:1,description:"Time unit multiplication factor."}}},titleBox:{type:"object",description:"Represents chart title box options.",object:{tabIndex:{type:"number,string",description:"Used to enable and disable accessibility or to assign an initial tabIndex for the chart item.",number:{description:"The initial tabIndex for this item."},string:{description:"Values 'auto' or 'none' enables or disables accessibility for the item."},version:"2.8",seealso:"Tutorials.accessibility"},description:{type:"string",
description:"When accessibility mode is enabled, the chart title will be read when focused on the title. This setting can modify the text the screen reader sees in this scenario.",version:"2.8",seealso:"Tutorials.accessibility"},label:{type:"obj_label",description:"Title label.",obj_label:{object:{text:{type:"string",description:"Label text for title. ",tokenSet:"seriesCollection"}}}},fill:{type:"obj_fill",description:"Background fill of the title box."},transparency:{type:"number",description:"Transparency from 0 to 1, where 0 is solid and 1 is transparent.",
min:0,max:1,def:0,hide:!0,hidden:!0},opacity:{type:"number",version:"1.4",description:"Opacity from 0 to 1, where 0 is transparent and 1 is solid (default).",min:0,max:1,def:1},boxVisible:{type:"bool",description:"Whether the title box background and outline is visible",def:!0},radius:{type:"number",description:"Boxes corner radius.",min:0,def:5},padding:{type:"number",description:"Spacing between the title label and bounding box.",min:0,def:5},outline:{type:"obj_outline",description:"Title box outline settings."},
position:{type:"enum_titlePosition",description:"Title box position."},visible:{type:"bool",version:"2.0",description:"Whether the title is visible."}}},tooltip:{type:"object",description:"Represents data tooltip settings.",object:{fill:{type:"obj_fill",description:"Background fill.",remarks:'When this property is set to "auto" (default), the background is automatically created to include the source point\'s color.',def:"auto"},transparency:{type:"number",description:"Transparency from 0 to 1, where 0 is solid and 1 is transparent.",
min:0,max:1,def:0.2,hide:!0,hidden:!0},opacity:{type:"number",version:"1.4",description:"Opacity from 0 to 1, where 0 is transparent and 1 is solid (default).",min:0,max:1,def:0.8},outline:{type:"obj_outline",description:"Tooltip box outline styling."},radius:{type:"number",description:"Box corner radius.",min:0,max:50,def:4},enabled:{type:"bool",description:"Specifies whether tooltips are enabled.",def:!0},shadow:{type:"bool",description:"Enables or disables the tooltip shadow.",def:!0},padding:{type:"number",
description:"Padding between annotation content and tooltip box.",min:0,max:50,def:5},margin:{type:"number",version:"2.0",description:"Numeric margin that influences the distance betwee toolip and the target element"},label:{type:"obj_label",updated:"2.7",description:"Label displayed inside the annotation.",remarks:" When combined tooltip is enabled, the text property supports additional additional point list tokens.",seealso:"Tutorials.cttCrosshair",obj_label:{object:{text:{type:"string,method",
version:"2.7",description:"Combined tooltip label text",method:{description:"A callback function that processes the label text. The points are passed to the label callback function as an argument."},string:{tokenSet:"pointList"}}}},obj_label_def:{style:{fontSize:"9pt",fontFamily:"Tahoma",fontWeight:"normal",textDecoration:"none"}}},snap:{type:"number",hide:!0,description:"Proximity snap given in pixels.",remarks:"The tooltip will appear when the mouse is within this many pixels from a point and will remain while within this range."},
sticky:{type:"bool",description:"When true, tooltips disappear and point mouseOut event occurs when the cursor hovers a different series or leaves the chart area. Otherwise, these events occur when the mouse leaves the point's snap proximity.",remarks:"This setting is a shortcut for series.mouseTracking.sticky"},combined:{type:"bool",version:"2.7",description:"Enables a combined tooltip that includes details about all points at the cursor x axis position. The combined tooltip can also be enabled automatically based on crosshair settings. Use defaultTooltip.label.text to defined the combined tooltip template.",
seealso:"Tutorials.cttCrosshair"}}},languageStrings:{type:"object",description:"Represents language strings used on the chart.",object:{exportButtonTooltip:{type:"string",description:"Export button tooltip.",def:"'Export to raster or vector image'"},printButtonTooltip:{type:"string",description:"Print button tooltip.",def:"'Print the chart'"},resetZoomText:{type:"string",description:"Reset zoom label text.",def:"'Zoom Out'"},resetZoomTooltip:{type:"string",description:"Reset zoom label tooltip.",
def:"'Reset Zoom'"}}},exportOptions:{type:"object",description:"Represents image exporting options.",object:{server:{type:"string",description:"Export server URL."},imageType:{type:"enum_mimeType,string",description:"Output image format.",string:{description:"A custom mime type used when a different server supporting other types is used."}},title:{type:"string",version:"2.6",description:"Title file attribute."},author:{type:"string",version:"2.6",description:"Author file attribute."},subject:{type:"string",
version:"2.6",description:"Subject file attribute."},keywords:{type:"string",version:"2.6",description:"Keywords file attribute."},comment:{type:"string",version:"2.6",description:"Comment file attribute."},rating:{type:"number",version:"2.6",description:"Rating file attribute."}}},toolbar:{type:"obj_uiItem",description:"Represents the chart toolbar that contains the export, print and zoom out buttons.",obj_uiItem:{object:{items:{type:"object",description:"All root level uiItems.",version:"2.0",object:{"export":{type:"obj_uiItem",
description:"The default export UI item."},resetZoom:{type:"obj_uiItem",description:"The default reset zoom button."},zoom:{type:"obj_uiItem",version:"2.1",description:"The default zoom toolbar used with mapping."},"*":{type:"obj_uiItem",description:"Any additional custom keyed uiItems."}}},exportOptions:{type:"obj_exportOptions",description:"Options related to exporting and the resulting image"}}}},uiItem:{type:"obj_annotation",description:"Represents an interactive UI element such as a button, a group of buttons, or both.",
remarks:"The uiItem can be selectable like a checkbox when select state options are defined.",version:"2.0",obj_annotation:{object:{type:{type:"enum_uiItemType",description:"Specifies the uiItem role and behavior."},value:{type:"string,number,bool,array",description:"The value of this item. If type=selectMultiple a comma delimited list can be used to indicate which child options are selected.",array:{0:{description:"An array with a low and high values used with range (slider) uiItem type to provide support for dual slider handles.",
arrayType:"specific",version:"2.7",types:[{name:"Low",type:"number",description:"Low value"},{name:"High",type:"number",description:"High value"}],example:"[5,8,9,3]"}}},min:{type:"number",version:"2.7",description:"The minimum value of a range (slider) uiItem. When min/max is not set, the default range of a slider is 0\u20131."},max:{type:"number",version:"2.7",description:"The maximum value of a range (slider) uiItem. When min/max is not set, the default range of a slider is 0\u20131."},visible:{type:"bool",
description:"Indicates whether the UI item is visible."},icon:{type:"obj_icon",description:"The icon associated with this UI item.",remarks:"The icon can be positioned left, top, right, bottom by using label alignment options.",version:"2.0"},cursor:{type:"enum_cursor",description:"The mouse cursor type when hovering this item."},defaultItem:{type:"obj_uiItem",description:"Default settings for all child items."},itemsBox:{type:"obj_annotation",description:"Specifies how the child items are displayed. hidden, visible, later as dropdown maybe.",
obj_annotation:{object:{visible:{type:"bool",description:"Indicates whether the child UI items are visible initially."},position:{type:"enum_orientation,string",description:"Position of child UI items in relation to this item.",string:{description:"The default setting 'auto' automatically positions items in an appropriate position."}},layout:{type:"enum_directionalLayout",description:"Layout of the UI items."}}},string:{description:"Shortcut settings, maybe enum"}},items:{type:"object,string",description:"Additional custom UI Items.",
version:"2.0",object:{"*":{type:"obj_uiItem",description:"Any additional custom keyed uiItems."}},string:{description:'A reference to enum item members in docs if prefixed with "enum_", or comma delimited list of items that will be converted to object keys.',example:'"enum_colors"'}},tooltip:{type:"string",description:"HTML tooltip text for this uiItem."},layout:{type:"enum_directionalLayout",version:"2.7",description:"Used with slider (range) uiItem to specify the slider orientation."},states:{type:"object",
inlineName:"uiItemStates",description:"Button States",object:{hover:{type:"obj_uiItemState",inline:!0,description:"UI item hover state styling."},select:{type:"obj_uiItemState",inline:!0,description:"UI item select state styling."}},seealso:"Tutorials.states"},events:{type:"object",inlineName:"uiItemEvents",version:"2.0",description:"Event fired for specific data changes or mouse interactions with this item.",object:{mouseOver:{type:"obj_eventHandler",inline:!0,description:"Fires when mouse enters the item."},
mouseOut:{type:"obj_eventHandler",inline:!0,description:"Fires when mouse leaves the item."},click:{type:"obj_eventHandler",inline:!0,description:"Fires when the item is clicked."},change:{type:"obj_dataEventHandler",inline:!0,description:"Fires when the item value changes."}}},accept:{type:"string",version:"2.7",description:"Used with file uiItem type to specify the acceptable file types.",example:'Possible settings include: "image/png, image/jpeg", ".png, .jpg, .jpeg", "image/*"'},throttle:{type:"number",
version:"2.8",description:"Useful with slider (range) when to improve how smoothly things update."}}}},icon:{type:"string,object",description:"An icon visual.",version:"2.0",string:{description:"Icon name from the available icon sets."},seealso:"Samples.iconsBrowser",object:{padding:{type:"obj_margin",description:"Spacing between icon and outerShape."},margin:{type:"obj_margin",description:"Margins around icon outerShape."},size:{type:"number",description:"Icon width and height",number:{description:"in pixels.",
min:0,max:32E3},example:"40"},width:{type:"number",description:"Icon width",number:{description:"in pixels.",min:0,max:32E3},example:"120"},height:{type:"number",description:"Icon height (automatic if not defined)",number:{description:"in pixels.",min:0,max:32E3},example:"60"},name:{type:"string",description:"Icon name from the available icon sets."},path:{type:"string",description:"A custom icon path using SVG path syntax."},outerShape:{type:"enum_markerTypes",description:"Defines an outer shape out of which this icon is cut out."},
outline:{type:"obj_outline",description:"Outline settings for this icon."},fill:{type:"obj_fill",description:"Icon fill."},visible:{type:"bool",description:"Indicates whether the icon is visible."},position:{type:"enum_orientation",description:"Describes the position of the icon in relation to related visual such as a label",def:"left"},rotate:{type:"number",description:"Rotation of the icon in degrees.",version:"2.5"}}},margin:{type:"number,array,object,string",version:"2.0",isInlined:!0,description:"Margin of the visual item.",
number:{description:"Applies this margin amount in pixels to all four sides."},array:{0:{description:"An array of top, right, bottom, and left margin settings ",arrayType:"specific",types:[{name:"Top",type:"number",description:"Top margin"},{name:"Right",type:"number",description:"Right margin"},{name:"Bottom",type:"number",description:"Bottom margin"},{name:"Left",type:"number",description:"Left margin"}],example:"[5,8,9,3]"},1:{description:"An array of two values: top and bottom, right and left margin settings ",
arrayType:"specific",types:[{name:"TopBottom",type:"number",description:"Top and bottom margin"},{name:"RightLeft",type:"number",description:"Right and left margin"}],example:"[5,8]"},2:{description:"An array of 3 values: top, right and left, and bottom margin settings ",arrayType:"specific",types:[{name:"Top",type:"number",description:"Top and bottom margin"},{name:"RightLeft",type:"number",description:"Right and left margin"},{name:"Bottom",type:"number",description:"Bottom margin"}],example:"[5,8]"}},
object:{top:{type:"number",description:"Top margin in pixels."},right:{type:"number",description:"Right margin in pixels."},bottom:{type:"number",description:"Bottom margin in pixels."},left:{type:"number",description:"Left margin in pixels."}},string:{version:"2.5",description:"A css margin value such as '25px 50px 75px 100px'. The px suffix is not required and defaults to pixel values."}},labelStyle:{type:"object",description:"Label Style",isInlined:!0,object:{maxWidth:{type:"number",description:"Label max width.",
number:{description:"A numeric width of label."}},fontSize:{type:"number,string",description:"Label's font size.",number:{description:"A numeric pixel size of the font. A setting such as 10 is equivalent to 10px"},string:{description:"A string size setting including a pt or px specifier.",tag:"pt,px"}},fontFamily:{type:"enum_fontFamily,string",description:"Label's font family"},fontWeight:{type:"enum_fontWeight",description:"Label's font weight"},fontStyle:{type:"enum_fontStyle",description:"Label's font style"},
textDecoration:{version:"2.6",type:"enum_textDecoration",description:"Specifies the decoration added to text."},cursor:{type:"enum_cursor",description:"Mouse cursor on label hover."},color:{type:"obj_color",description:"Label color."}}},seriesState:{type:"object",isInlined:!0,description:"Represents series state options.",object:{line:{type:"obj_line",description:"Line options used when this series type is a line."},transparency:{type:"number",description:"Transparency from 0 to 1, where 0 is solid and 1 is transparent.",
min:0,max:1,hide:!0,hidden:!0},opacity:{type:"number",version:"1.4",description:"Opacity from 0 to 1, where 0 is transparent and 1 is solid (default).",min:0,max:1},cursor:{type:"enum_cursor",description:"The mouse cursor type when hovering this series."}}},uiItemState:{type:"obj_uiItem",isInlined:!0,description:"Represents uiItem state options."},legendEntryState:{type:"object",isInlined:!0,description:"Represents legend entry state options.",object:{style:{type:"obj_labelStyle",description:"Legend entry label style."}}},
pointState:{type:"object",isInlined:!0,description:"Represents data point state options.",object:{outline:{type:"obj_outline",description:"Point's outline options. Applies to marker, bar, or pie series types."},marker:{type:"obj_pointMarker",description:"Point marker options"},fill:{type:"obj_fill",description:"Point marker, bar or pie fill."},size:{type:"number",description:"Point marker size."}}},pointMarkerState:{type:"object",description:"Point marker state options.",isInlined:!0,object:{fill:{type:"obj_fill",
description:"Fills the marker."},outline:{type:"obj_outline",description:"Point marker outline properties."}}},animation:{type:"bool,object",isInlined:!0,description:"Specifies animation settings such as enabled, duration, and easing.",bool:{description:"Enables or disables animation using a true or false boolean value."},example:'false OR {duration:250, easing:"easeInQuad"}',object:{duration:{type:"number",description:"The duration in milliseconds."},easing:{type:"enum_animationEasing,string",description:"Animation easing function name.",
string:{description:"Any additional or custom easing methods available through jQuery UI."}}}},eventHandler:{type:"string,method",inline:!0,isInlined:!0,description:"An event handler.",method:{description:"Function executed when the event is fired."},string:{description:"String that is compiled into a function that executes when the event fires. This setting allows the use of tokens that are replaced with values related to the object firing the event."}},dataEventHandler:{type:"method",inline:!0,
isInlined:!0,description:"A data event handler.",method:{description:"Function executed when the event is fired. The first argument of this function recieves the given data."}},angleArc:{type:"number,array,object",version:"1.1",isInlined:!0,description:"Defines an angle or arc.",remarks:"All angles are based on 0 degrees pointing right.",number:{type:"number",description:"An angle in degrees."},array:{0:{description:"An arc based on starting and ending angles.",type:"array",example:"[-45,45]",arrayType:"specific",
types:[{name:"start",type:"number",description:"The Starting Angle."},{name:"end",type:"number",description:"The Ending Angle."}]}},object:{start:{type:"number",description:"Start angle in degrees."},end:{type:"number",description:"End angle in degrees."},orientation:{type:"number",description:"Orientation of the arc used in conjunction with the sweep property.",remarks:"If only orientation is defined, a sweep of 360 is assumed."},sweep:{type:"number,string",description:"The sweep in degrees given as number, or as a string percentage of 360.",
remarks:"If only the sweep is defined, it is evaluated with an assumed orientation angle of 0.",example:'"50%" OR 5',number:{description:"Sweep angle given in degrees."},string:{description:"Sweep angle given as percentage of 360 degrees where 50% is equivalent to 180 degrees. Series tokens can also be used with this property to define sweep angles. ",tokenSet:"series"}}}},shape:{type:"object",version:"1.1",description:"Encapsulates the styling settings of a shape.",object:{fill:{type:"obj_fill",
description:"Background fill of this shape."},outline:{type:"obj_outline",description:"Shape outline styling.",obj_outline:{type:"object",object:{dashStyle:{version:"1.3",type:"enum_dashStyle",description:"Line dash style"}}}},transparency:{type:"number",description:"Transparency from 0 to 1, where 0 is solid and 1 is transparent.",min:0,max:1,hide:!0,hidden:!0},opacity:{type:"number",version:"1.4",description:"Opacity from 0 to 1, where 0 is transparent and 1 is solid (default).",min:0,max:1},visible:{type:"bool",
description:"Whether the shape visual is visible.",def:!0},label:{type:"obj_label,array",hide:!0,version:"2.5",tokenSet:"series",description:"Series shape label. Used to specify label text and settings when the series is represented as a shape",remarks:"Currently supported with treemap, gauge, radar charts.",array:{arrayType:"specific",types:[{type:"obj_label",description:"Label options."}],description:"An array of label options that support unique alignments and will automatically position to void overlaps."}}}},
subvalue:{type:"object",version:"1.1",description:"Represents additional point data values that can be specified as relative to or independent of the parent point's value. Subvalues are used to store point error bar values.",object:{range:{type:"array",description:"Represents an error range [low,high]",example:"[-45,45]",array:{0:{arrayType:"specific",types:[{name:"low",type:"number",description:"Low error value."},{name:"high",type:"number",description:"High error value."}]}}},line:{type:"obj_line",
description:"Error line styling.",obj_line:{object:{length:{type:"number,string",version:"1.1",description:"Length of the error line caps given in pixels or as a percentage in a string. ",example:"100 OR '50%'"}}}},offset:{type:"number",description:"Represents a range, +/- the value of the offset with respect to the elements YValue value or range. "},percent:{type:"number",description:"Represents a range, +/- the percentage of the elements YValue value or range."},values:{type:"array",description:"An array of subvalues associated with this point.",
version:"2.0",array:{arrayType:"specific",types:[{type:"number",description:"Array of numeric subvalues.",number:{description:"Value."}}]}}}},mapFileData:{type:"object",version:"2.1",skip:!0,description:"GeoJSON or topoJSON file contents."},zoomConfig:{type:"string,number,array",version:"2.1",description:"Defines a zoom position, level, or in case of mapping specific points to zoom in on.",number:{description:"Zoom level where 1 is 100%. Setting the zoom level to 1 zooms out completely."},string:{description:"A zoom value can be used as well as zoom offset by specifying + or - before the value. Map codes are also supported.",
example:"'100%', '+20%' == '+20', '-20%', 'US', 'US.CA'"},array:{0:{description:"An x and y offset representing a pan.  ",arrayType:"specific",types:[{name:"X",type:"number",description:"xOffset"},{name:"Y",type:"number",description:"yOffset"}],example:"[2,3]"},1:{description:"X and y center coordinates given in axis values and a zoom level.  ",arrayType:"specific",types:[{name:"X",type:"number",description:"X axis value."},{name:"Y",type:"number",description:"Y axis value."},{name:"Zoom Level",type:"number",
description:"Zoom level where 1 is 100%."}],example:"[5,8,2]"},2:{description:"A bbox to zoom into view.",arrayType:"specific",types:[{name:"X",type:"number",description:"X coordinate"},{name:"Y",type:"number",description:"Y coordinate"},{name:"Width",type:"number",description:"Width of the bbox."},{name:"Height",type:"number",description:"Height of the bbox."}],example:"[5,8,9,3]"}}},updateOptions:{type:"object",isInlined:!0,description:"Update options used when the chart responds to this update.",
object:{animation:{description:"Animation settings used when with this update.",type:"obj_animation"}}},calendar:{type:"object",version:"2.6",description:"Encompasses options for the calendar chart type.",object:{range:{type:"array",description:"The date range the calendar chart encompasses. It can be used when chart.data is not populated so the chart knows what dates to show or to cull data and only show the specified date range.",array:{0:{arrayType:"specific",description:"Date range",types:[{name:"start",
type:"number,string,date",date:{description:"A Date object starting date."},string:{description:"Date time string parsed with Date()."},description:"The starting date."},{name:"end",type:"number,string,date",date:{description:"A Date object end date."},string:{description:"Date time string parsed with Date()."},description:"The end date."}]}}},initial:{type:"date,number,string",description:"Date of the series that is displayed first when chart renders.",number:{description:"Numeric date value."},
string:{description:"String date value"},date:{description:"Native Date object."}},weekStart:{type:"number",description:"The starting day of the week (0-6) used when arranging calendar grids. Sunday (0) by default. "},seriesFormat:{type:"string",description:"The date format string used when creating series names. These labels appear in the legend name columns."},pointFormat:{type:"string",description:"The date format string used when creating point names. These labels are accessible through the point %name token in labels."},
calculation:{type:"enum_calculation",description:"The calculation used when grouping date value pairs into cells and subvalues."},interpolateSubvalues:{type:"bool",description:"Sub values are grouped into predefined intervals but may result in spikes if data does not provide sufficient points for each sub grouping. Setting this to true will create interpolated values for missing data points."},defaultEmptyPoint:{type:"obj_point",description:"The default point options for cells that do not contain any heatmap data."},
defaultEdgePoint:{type:"obj_point",description:"The default point options set for peripheral calendar cells that are not part of the series date range but included for completeness. For example when using month view, some cells representing days of adjacent months are included to fill in the gaps of the grid."}}},calendarPattern:{type:"object,string",version:"2.6",updated:"2.7",description:'Specifies a calendar pattern that includes filters and rules such as weekends, or more complicated rules similar to how dates of national holidays are determined. Calendar patterns can also represent complex time intervals such as first weekend of every month.<br><br>Setting filter property value to "*" indicates that an interval at that time span. For example {month:"*"} means every month. Only one property can have an asterisk.<br><br>  To represent every 3 months this configuration can be used: {month:"*",every:3} <br><br>When using options such as { year:"1/1/2020" } the year value is evaluated using the same function applied to dates being tested and is equivalent to { year:2020 }<br><br>See <a href="Tutorials.calendarPatterns">calendarPattern tutorial</a> for more details.',
remarks:"",string:{description:"A shortcut to quickly specify interval calendar patterns with star values. Setting the value 'month' is equivalent to { month:'*' }. This is a convenient shortcut to use with data nesting utility functions.",version:"2.7"},object:{inclusive:{type:"bool",description:"When multiple filters are specified and this this option is true, all filters must be met for a date value to match this pattern."},every:{type:"number",description:'When used with an interval filter such as {month:"*",every:3}, it provides a way to specify "every 3 months"'},
offset:{type:"number,obj_timeInterval",version:"2.7",number:{description:"Numeric time offset in milliseconds."},description:"Specifies a time offset as a time interval or as a number in milliseconds. This option is useful with scale breaks that remove parts of the scale such as weekends. Data points may be centered on dates that specify the beginning of the time span like 12AM. This offset allows the parts of the scale that are removed to be adjusted so they dont remove parts of the data points.",
seealso:"Samples.financePatternBreaks"},year:{type:"obj_calendarPatternValue",description:"The year value to match",example:"{ year:2018 }"},month:{type:"obj_calendarPatternValue",description:"The month value to match (1-12)"},quarter:{type:"obj_calendarPatternValue",description:"The quarter number to match"},weekday:{type:"obj_calendarPatternValue",description:"The weekday number to match (0-6)"},dayofyear:{type:"obj_calendarPatternValue",description:"The day of year to match"},day:{type:"obj_calendarPatternValue",
description:"The day of month to match (1-31)"},date:{type:"obj_calendarPatternValue",description:"The specific date or dates to match"},hour:{type:"obj_calendarPatternValue",description:"The hour of day to match"},minuteofday:{type:"obj_calendarPatternValue",description:"The minute of day to match."},minute:{type:"obj_calendarPatternValue",description:"The minute of hour to match (0-59)"},second:{type:"obj_calendarPatternValue",description:"The second of minute to match (0-59)."}}},calendarPatternValue:{type:"number,string,array,object",
description:"A value range used to match dates against.",version:"2.6",isInlined:!0,inline:!0,string:{description:'The string can be a date, "*", or number. When using the asterisk, it means "every" and makes the pattern become an interval.'},number:{description:"A number to match agains the filter function."},array:{arrayType:"specific",description:"An array of specific values to match.",types:[{type:"string,number",description:"Values to match."}]},object:{range:{type:"array",description:"The start/end values of the range to match.",
array:{0:{arrayType:"specific",description:"Range of values to match",types:[{name:"start",type:"number,string,date",date:{description:"A Date object starting date."},string:{description:"Date time string."},description:"The low value."},{name:"end",type:"number,string,date",date:{description:"A Date object starting date."},string:{description:"Date time string."},description:"The high value."}]}}}}},highlight:{type:"object",version:"2.6",description:"Options that define a pattern and styling used to highlight a grouping of points.",
object:{id:{type:"string",description:"The id of this highlight."},pattern:{type:"obj_calendarPattern",description:"Calendar pattern to highlight."},fill:{type:"obj_fill",description:"Background fill of this highlight that renders behind point visuals."},outline:{type:"obj_outline",description:"Outline styling options that render on top of point visuals.",obj_outline:{type:"object",object:{dashStyle:{type:"enum_dashStyle",description:"Line dash style"}}}},opacity:{type:"number",description:"Opacity from 0 to 1, where 0 is transparent and 1 is solid (default).",
min:0,max:1}}},lineCaps:{type:"object",isInlined:!0,inlineName:"lineCaps",description:"Line cap settings.",object:{start:{description:"Settings for the line cap at the start of the line.",type:"object",object:{type:{type:"string,enum_markerTypes",description:"Specifies the line cap shape name or a specialized 'arrow' cap."},size:{type:"string,number",description:"A percentage of line width or a pixel size of the cap."},overflow:{type:"bool",description:"When set to true, the cap extends beyond the line end. When false, it is drawn within the span of the line."}}},
end:{description:"Settings for the line cap at the end of the line.",type:"object",object:{type:{type:"string,enum_markerTypes",description:"Specifies the line cap shape name or a specialized 'arrow' cap."},size:{type:"string,number",description:"A percentage of line width or a pixel size of the cap."},overflow:{type:"bool",description:"When set to true, the cap extends beyond the line end. When false, it is drawn within the span of the line."}}},everyShape:{type:"bool",description:"When true and the line path is made up of multiple shapes, the caps are applied to every individual shape."},
type:{type:"string,enum_markerTypes",description:"Specifies the default line cap shape name or a specialized 'arrow' cap."},size:{type:"string,number",description:"The default cap size as a percentage of line width or a pixel size of the cap."},overflow:{type:"bool",description:"The default cap overflow setting. When set to true, the cap extends beyond the line end. When false, it is drawn within the span of the line."}}},grid:{type:"object",version:"2.8",description:"Encapsulates grid options.",
object:{enabled:{type:"bool",description:'Enables the chart to switch between chart and grid view when enabled through the chart <a href="Types.chart.grid">grid property</a>.'},exportFile:{type:"bool,string",description:"When true or set with a csv file name, the grid will show a button that allows downloading the data as CSV.",string:{description:"Enables the export button and sets the filename of the output csv file."},bool:{description:"Enables the export button and uses the default filename."},
version:"2.9",example:"'grid-data' -> exports grid-data.csv"},exportComment:{type:"string",description:"A comment added to the beginning of the csv output.",version:"2.9",hide:!0},title:{type:"string",description:"Data grid title text.",version:"2.9"},data:{type:"array,method",description:"An array of json objects or arrays to display in the grid. A function can be specified as well. It will be executed and the returned data will display in the grid. When grid.options({}) is called, the function is executed again to refresh grid data.",
array:{arrayType:"specific",types:[{type:"array",array:{0:{arrayType:"specific",example:"['Greg',50]",description:"Each tuple represents a data row.",types:[{name:"valueN",type:"string,number,date",multi:!0,description:"Column value of the data row."}]}}},{type:"object",object:{"*":{type:"string,number,date",description:"."}}}]},method:{description:"A function that returns the data for this grid."}},cultureName:{type:"enum_cultures",description:"Default formatting culture name."},width:{type:"number,string",
description:"The width of the output grid as a number in pixels or string percentage."},height:{type:"number,string",description:"Height of the grid in pixels. Can be used to limit the resulting height."},headerCol:{type:"bool",description:"Enables a header column that displays the numeric index of each data row."},headerRow:{type:"bool",description:"Enables a header row that shows column names or letters when names are not available."},cssFile:{type:"string",description:"When specified, the default DataGrid css file will be omitted and the specified one is downloaded instead. Setting the value to an empty string will omit downloading the default css file. "},
className:{type:"string",description:"The css class name of the datagrid table."},defaultColumn:{type:"obj_gridColumn",description:"Column definition settings that will apply to all data columns."},columns:{type:"array",description:"Defines columns and their options shown in the grid.",array:{arrayType:"specific",types:[{description:"A series added to the chart",type:"obj_gridColumn"}]}},summaryRow:{type:"array",description:"An array of value strings assigned to each data column. An object with properties referring to column names. Or an array of either to create multiple summary rows.",
array:{arrayType:"specific",types:[{description:"The string value for the column",type:"string"}]},remarks:"The %min %max %sum %average tokens can be used define the calculation for the summary row columns."},buttons:{type:"object",description:"Accessibility options for the grid buttons when enabled.",object:{chart:{type:"obj_gridButton",description:"The view chart button options"},grid:{type:"obj_gridButton",description:"The view grid button options"},"export":{type:"obj_gridButton",description:"The download grid CSV button options"}},
seealso:"Tutorials.accessibility"},description:{type:"string",description:"Accessibility description for the grid/chart switch buttons used by screen readers.",version:"2.8",seealso:"Tutorials.accessibility"}}},gridColumn:{type:"object",isInlined:!0,version:"2.8",description:"A grid column definition that includes header, cell text and other options.",object:{header:{type:"string,array",description:"The header of the data column.",array:{arrayType:"specific",description:"An array of header strings. Each item creates a separate header.",
types:[{type:"string",description:"A header of the data column."}]}},width:{type:"number,string",description:"Width of the output column in pixels or as a css string value."},type:{type:"string",description:"Data type of the column such as number or date."},align:{type:"string",description:"Left, center, or right alignment of the column values."},value:{type:"string",description:"Cell value label text that can be used to specify the data, format, or expression for the column."},className:{type:"string",
description:"The css class name applied to the grid column."}}},gridButton:{type:"object",isInlined:!0,description:"Accessibility options for the button",version:"2.8",object:{description:{type:"string",description:"The accessibility description of the button."},tabIndex:{type:"number,string",description:"Used to enable and disable accessibility or to assign a tabIndex for the button.",number:{description:"The tabIndex for the button."},string:{description:"Values 'auto' or 'none' enables or disables accessibility for the chart."}},
text:{type:"string",description:"The text of the button."}}}},enumsDescription:"Predefined string values used with settings for the chart.",enums:{chartType:{type:"enum",version:"2.5",description:'Specifies a base chart type like vertical or horizontal. For types such as line, bar, etc. See <a href="Enums.seriesType">seriesType</a> enum.',members:{vertical:{isDefault:!0,description:"Combo Chart Type.",chain:"enum_seriesType"},horizontal:{description:"Horizontal Chart Type",chain:"enum_seriesType"},
pie:{description:"Pie Chart Type",chain:"enum_pieType",enumAttributes:{seriesLayout:"visualShape",behavior:"colorByPoint,labelConnector,noNameGrouping"}},gauge:{version:"2.5",description:"Gauge Chart Type.",chain:"enum_gaugeType",enumAttributes:{seriesLayout:"visualShape",behavior:"colorByPoint,noNameGrouping,snapToZero"}},radar:{version:"2.5",description:"Radar Chart Type.",chain:"enum_radarType",enumAttributes:{seriesLayout:"visualShape"}},funnel:{description:"Funnel Chart Type.",version:"2.5",
chain:"enum_funnelShapeType",enumAttributes:{seriesLayout:"visualShape",funnelNozzleType:"nozzle",behavior:"colorByPoint,labelConnector,noNameGrouping"}},pyramid:{description:"Funnel Chart Type.",version:"2.5",chain:"enum_funnelOrientationType",enumAttributes:{funnelShapeType:"square",seriesLayout:"visualShape",behavior:"colorByPoint,labelConnector,noNameGrouping"}},cone:{description:"Funnel Chart Type.",version:"2.5",chain:"enum_funnelOrientationType",enumAttributes:{funnelShapeType:"round",seriesLayout:"visualShape",
behavior:"colorByPoint,labelConnector,noNameGrouping"}},heatmap:{description:"Heatmap Chart Type.",version:"2.5",chain:"enum_columnType",enumAttributes:{behavior:"colorByPoint"}},calendar:{description:"Calendar Chart Type.",version:"2.6",chain:"enum_calendarType",enumAttributes:{}},treemap:{description:"Treemap Chart Type.",version:"2.5",chain:"enum_treemapMode",enumAttributes:{behavior:"noNameGrouping,tree"}},map:{description:"Map Chart Type.",version:"1.4",chain:"enum_columnType",enumAttributes:{behavior:"noNameGrouping"}},
organization:{description:"Organization Chart Type.",version:"2.0",chain:"enum_organizationType",enumAttributes:{behavior:"annotation,tree,noNameGrouping"}}},terminateAt:"enum_seriesType",seealso:"Tutorials.chartTypes"},treemapMode:{description:"Specifies the TreeMap layout algorithm.",version:"2.5",isInlined:!0,inline:!0,members:{squarify:{isDefault:!0,chain:"enum_treemapDirection",description:"squarify algorithm"},sliceanddice:{chain:"enum_treemapDirection",description:"Slice and dice algorithm"},
stripes:{chain:"enum_treemapDirection",description:"stripes algorithm"}}},treemapDirection:{description:"The direction of the TreeMap algorithm.",isInlined:!0,inline:!0,version:"2.5",members:{horizontal:{isDefault:!0,chain:"enum_columnType",description:"Horizontal direction."},vertical:{chain:"enum_columnType",description:"Vertical direction"}}},radarType:{inline:!0,isInlined:!0,type:"enum",version:"2.5",members:{auto:{isDefault:!0,chain:"enum_seriesType",description:"By default, the radar chart will be either a polar or spider type based on the data type of the point x values. If the x values are numeric or time based, a polar type is used. If they are names, a spider type is used."},
polar:{chain:"enum_seriesType",description:"Y axis gridl ines are drawn as circles."},spider:{chain:"enum_seriesType",description:"Y axis  grid lines are drawn as straight lines between x axis grid line intersects resembling a spider web."}}},gaugeType:{inline:!0,type:"enum",isInlined:!0,version:"2.5",members:{circular:{isDefault:!0,chain:"enum_circularGaugeType",description:"The default circular gauge type."},linear:{chain:"enum_linearGaugeType",description:"Linear gauge type"}}},linearGaugeType:{inline:!0,
type:"enum",isInlined:!0,version:"2.5",members:{vertical:{isDefault:!0,chain:"enum_seriesType",description:"Linear gauges are oriented vertically."},horizontal:{chain:"enum_seriesType",description:"Linear gauges are oriented horizontally."}}},seriesType:{type:"enum",version:"1.1",description:"Specifies a series type such as line or column.",members:{column:{description:"Column series type.",chain:"enum_columnType",enumAttributes:{behavior:"snapToZero,clusters,drawRect"}},line:{isDefault:!0,description:"Line series type.",
chain:"enum_lineSeriesType",enumAttributes:{behavior:"drawMarker,drawLine"}},area:{description:"Area series type.",chain:"enum_areaShadingType",enumAttributes:{behavior:"drawMarker,drawLine,drawArea,snapToZero"}},marker:{description:"Marker series type.",enumAttributes:{behavior:"drawMarker"}},bubble:{version:"1.1",description:"Bubble series type where the size of the bubbles is determined by the point z values.",chain:"enum_bubbleSizingType",enumAttributes:{behavior:""}},ohlc:{description:"Open high low close finance type.",
enumAttributes:{behavior:"clusters"}},candlestick:{description:"Finance candlestick series type.",chain:"enum_columnType",enumAttributes:{behavior:"clusters,drawRect"}},map:{description:"Map series type.",chain:"enum_columnType",hide:!0,hidden:!0,enumAttributes:{behavior:"varyPalette"}},heatmap:{description:"Heatmap series type.",hide:!0,hidden:!0,version:"2.6",chain:"enum_columnType",enumAttributes:{}},calendar:{description:"Calendar series type.",hide:!0,hidden:!0,version:"2.6",chain:"enum_calendarType",
enumAttributes:{}},variwide:{description:"Variwide(Mekko) series type.",chain:"enum_variwideType",enumAttributes:{behavior:"snapToZero,clusters,drawRect"}}},seealso:"Tutorials.chartTypes"},bubbleSizingType:{inline:!0,type:"enum",isInlined:!0,version:"1.1",members:{area:{isDefault:!0,description:"The z value controls the bubble volume."},width:{description:"The z value controls the bubble width."}}},areaShadingType:{inline:!0,isInlined:!0,type:"enum",version:"1.1",description:"Specifies shading effects of area series.",
members:{subtle:{isDefault:!0,description:"Standard subtle area shading.",chain:"enum_lineSeriesType"},none:{description:"No effect",chain:"enum_lineSeriesType"}}},lineSeriesType:{inline:!0,isInlined:!0,type:"enum",version:"1.1",description:"Specifies a line series type modifier.",members:{normal:{isDefault:!0,description:"Standard line series type"},spline:{description:"Curved line series type."},step:{description:"Stepped line series type."}}},circularGaugeType:{type:"enum",version:"2.5",inline:!0,
isInlined:!0,members:{clip:{isDefault:!0,chain:"enum_seriesType",description:"Gauge where the boundaries are clipped based on the start and end angles."},circle:{description:"A circular gauge without clipping.",chain:"enum_seriesType"},arc:{description:"A gauge that fills an arc.",chain:"enum_seriesType"}}},columnType:{type:"enum",version:"1.1",description:"Column styling options such as shading effect.",inline:!0,isInlined:!0,members:{subtle:{isDefault:!0,description:"When not specified, a subtle effect is used."},
solid:{description:"No effect"},aqua:{description:"Aqua shading effect."},rounded:{description:"Rounded shading effect."},roundCaps:{version:"2.5",description:"Rounds caps of column series type."},cushion:{version:"2.5",description:"Cushion shading effect used with treeMap charts."}}},pieType:{type:"enum",version:"1.1",inline:!0,isInlined:!0,members:{normal:{isDefault:!0,description:"Standard pie series type."},donut:{description:"Donut series type"},nested:{hidden:!0,hide:!0,description:"Nested pie type."}}},
funnelOrientationType:{type:"enum",version:"2.5",inline:!0,isInlined:!0,members:{normal:{isDefault:!0,description:"Standard funnel type."},inverted:{description:"Upsidedown funnel."}}},funnelShapeType:{type:"enum",version:"2.5",inline:!0,isInlined:!0,members:{round:{isDefault:!0,description:"Cone shaped funnel.",chain:"enum_funnelOrientationType"},square:{description:"Pyramid shaped funnel.",chain:"enum_funnelOrientationType"}}},organizationType:{type:"enum",version:"2.0",inline:!0,isInlined:!0,members:{down:{isDefault:!0,
description:"Items are arranged from top to bottom."},left:{description:"Items are arranged from right to left."},up:{description:"Items are arranged from bottom to top."},right:{description:"Items are arranged from left to right."}}},calendarType:{type:"enum",version:"2.6",inline:!0,isInlined:!0,members:{auto:{isDefault:!0,description:"Attempts to choose a calendar view automatically based on input data.",chain:"enum_columnType"},decade:{description:"Groups data into a grid of 10 year intervals by year(10).",
chain:"enum_columnType"},years:{description:"Groups data into a grid of years by months. Subvalues are grouped into days.",chain:"enum_columnType"},year:{description:"Groups data into a grid of weeks by weekdays. Subvalues are grouped into hours.",chain:"enum_columnType"},quarter:{description:"Groups data into a grid of weeks by weekday spanning 3 months. Subvalues are grouped into hours.",chain:"enum_columnType"},month:{description:"Groups data into a grid of weekdays by week spanning 1 month. Subvalues are grouped into hours.",
chain:"enum_columnType"},week30min:{description:"Groups data into a grid of 30 minutes intervals by weekday. Subvalues are grouped into minutes.",chain:"enum_columnType"},week:{description:"Groups data into a grid of hours by weekday. Subvalues are grouped into minutes.",chain:"enum_columnType"},dayminutes:{description:"Groups data into a grid of hours by minute. Subvalues are grouped into seconds.",chain:"enum_columnType"},dayhours:{description:"Groups data into a grid of 6 hour intervals by hour. Subvalues are grouped into minutes.",
chain:"enum_columnType"},day30min:{description:"Groups data into a grid of 30 minute intervals by 3 hour intervals. Subvalues are grouped into minutes.",chain:"enum_columnType"},day15min:{description:"Groups data into a grid of 15 minute intervals by 3 hour intervals. Subvalues are grouped into minutes.",chain:"enum_columnType"},day5min:{description:"Groups data into a grid of 5 minute intervals by hour. Subvalues are grouped into minutes.",chain:"enum_columnType"},day:{description:"An alias for auto.",
chain:"enum_columnType"},hourseconds:{description:"Groups data into a grid hours by minute. Subvalues are grouped into milliseconds.",chain:"enum_columnType"},hour30sec:{description:"Groups data into a grid of 30 second intervals by 5 minute intervals. Subvalues are grouped into 50 millisecond intervals.",chain:"enum_columnType"},hour10sec:{description:"Groups data into a grid of 10 second intervals by 5 minute intervals. Subvalues are grouped into 50 millisecond intervals.",chain:"enum_columnType"},
hourminutes:{description:"Groups data into a grid of 10 minute intervals by minute. Subvalues are grouped into 50 millisecond intervals",chain:"enum_columnType"},hour:{description:"An alias for auto.",chain:"enum_columnType"},minute:{description:"Groups data into a grid of seconds by milliseconds.",chain:"enum_columnType"}}},variwideType:{type:"enum",version:"2.7",description:"Variwide styling options such as shading effect.",inline:!0,isInlined:!0,members:{subtle:{isDefault:!0,description:"When not specified, a subtle effect is used."},
solid:{description:"No effect"},aqua:{description:"Aqua shading effect."},rounded:{description:"Rounded shading effect."},roundCaps:{version:"2.5",description:"Rounds caps of column series type."},cushion:{version:"2.5",description:"Cushion shading effect used with treeMap charts."}}},nanoChartTypes:{type:"enum",description:"NanoChart types.",members:{sparkline:"sparkline",arealine:"arealine",bar:"bar",bullet:"bullet",column:"column",progress:"progress",pie:"pie",heatmap:"heatmap",scale:"scale",chart:"chart",
barfull:"barfull"}},markerTypes:{type:"enum",description:"Point marker shape types.",members:{none:"No marker.",diamond:"Diamond shape.",circle:"Circle shape.","arrow-down":"Arrow Down shape.","arrow-up":"Arrow Up shape.","five-point-star":"Five point star.","four-point-star":"Four point star.",merger:"Finance merger indicator.","split-reverse":"Finance reverse split indicator.","seven-point-star":"Seven point star.","six-point-star":"Six point star.",spinoff:"Finance spinoff indicator.",split:"Finance split indicator.",
square:"Square shape.",triangle:"Triangle shape.","triangle-down":"Triangle pointing down shape."}},emptyPointMode:{type:"enum",description:"Specifies how points with null y values behave.",members:{"default":"When not specified, the chart displays an incontinuity in the data.",ignore:"Empty points are ignored",treatAsZero:"Point will behave as if its y value is 0."}},projection:{type:"enum",description:"A projection that is applied to the map.",version:"2.1",members:{none:"No projection.",mercator:"Mercator projection.",
lambertConformalConic:"Lambert conformal conic projection.",lambertAzimuthalEqualArea:"Lambert azimuthal equal-area projection.",stereographic:"Stereographic projection.",orthographic:"Orthographic projection."}},scaleBreakType:{type:"enum",description:"Specifies how scale breaks are rendered. ",updated:"2.7",members:{zigzag:{description:"Clips the chartArea creating a gap with a zigzag in the middle.",isDefault:!0},gap:"Clips the chartArea creating a gap.",line:"Renders a line at the break position.",
hidden:"Does not clip the chart area or render any visual indicator of the scale break."}},scale:{type:"enum",description:"Specifies an axis scale type.",updated:"2.6",members:{auto:{description:"Scale is automatically determined.",isDefault:!0},time:"Specifies a time scale",stacked:"Stacks points",stackedFull:"Points are stacked where each stack is equal to 100%",stackedLogarithmic:{description:"A logarithic scale with stacked data points.",version:"2.6"},logarithmic:{description:"A logarithmic scale. See Axis.Scale for more log related options",
version:"2.6"},variwide:{description:"A scale type used with x axis scales that is set automatically with variwide series types. It gives each category on the scale a differing width based on data point z or y values.",version:"2.7"}}},rangeMode:{type:"enum",description:"Specifies the range tick shape type.",updated:"2.8",members:{auto:{description:"Range tick visualization is selected automatically.",isDefault:!0},curly:"Curly brace shape is drawn.",measure:"Measurement lines with arrows are drawn."}},
colors:{type:"enum",description:"Specifies a color by name.",regexValidation:"rgb(a)?",caseInsensitive:!0,ui:"ColorPicker",members:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",
cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",
forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",
lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}},palette:{type:"enum",description:"Specifies a predefined palette by name.",members:{"default":"default palette",spreadsheet:"Default spreadsheet palette",
oceanMidtones:"oceanMidtones palette",mutedRainbow:"mutedRainbow palette",pastelContrast:"pastelContrast palette",rainforest:"rainForest palette",random:"random palette",autumn:"autumn palette",bright:"bright palette",lavender:"lavender palette",midTones:"midTones palette",mixed:"mixed palette",pastel:"pastel palette",poppies:"poppies palette",spring:"spring palette",warmEarth:"warmEarth palette",waterMeadow:"waterMeadow palette",darkRainbow:"darkRainbow palette",midRange:"midRange palette",vividDark:"vividDark palette",
fiveColor1:"fiveColor1 palette with 5 colors.",fiveColor2:"fiveColor2 palette",fiveColor3:"fiveColor3 palette",fiveColor4:"fiveColor4 palette",fiveColor5:"fiveColor5 palette",fiveColor6:"fiveColor6 palette",fiveColor7:"fiveColor7 palette",fiveColor8:"fiveColor8 palette",fiveColor9:"fiveColor9 palette",fiveColor10:"fiveColor10 palette with 5 colors.",fiveColor11:"fiveColor11 palette with 5 colors.",fiveColor12:"fiveColor12 palette with 5 colors.",fiveColor13:"fiveColor13 palette with 5 colors.",fiveColor14:"fiveColor14 palette with 5 colors.",
fiveColor15:"fiveColor15 palette with 5 colors.",fiveColor16:"fiveColor16 palette with 5 colors.",fiveColor17:"fiveColor17 palette with 5 colors.",fiveColor18:"fiveColor18 palette with 5 colors.",fiveColor19:"fiveColor19 palette with 5 colors.",fiveColor20:"fiveColor20 palette with 5 colors.",fiveColor21:"fiveColor21 palette with 5 colors.",fiveColor22:"fiveColor22 palette with 5 colors.",fiveColor23:"fiveColor23 palette with 5 colors.",fiveColor24:"fiveColor24 palette with 5 colors.",fiveColor25:"fiveColor25 palette with 5 colors.",
fiveColor26:"fiveColor26 palette with 5 colors.",fiveColor27:"fiveColor27 palette with 5 colors.",fiveColor28:"fiveColor28 palette with 5 colors.",fiveColor29:"fiveColor29 palette with 5 colors.",fiveColor30:"fiveColor30 palette with 5 colors.",fiveColor31:"fiveColor31 palette with 5 colors.",fiveColor32:"fiveColor32 palette with 5 colors.",fiveColor33:"fiveColor33 palette with 5 colors.",fiveColor34:"fiveColor34 palette with 5 colors.",fiveColor35:"fiveColor35 palette with 5 colors.",fiveColor36:"fiveColor36 palette with 5 colors.",
fiveColor37:"fiveColor37 palette with 5 colors.",fiveColor38:"fiveColor38 palette with 5 colors.",fiveColor39:"fiveColor39 palette with 5 colors.",fiveColor40:"fiveColor40 palette with 5 colors.",fiveColor41:"fiveColor41 palette with 5 colors.",fiveColor42:"fiveColor42 palette with 5 colors.",fiveColor43:"fiveColor43 palette with 5 colors.",fiveColor44:"fiveColor44 palette with 5 colors.",fiveColor45:"fiveColor45 palette with 5 colors.",fiveColor46:"fiveColor46 palette with 5 colors.",colorVision1:"accessible colorVision1 palette with 10 colors.",
colorVision2:"accessible colorVision2 palette with 5 colors.",colorVision3:"accessible colorVision3 palette with 5 colors.",colorVision4:"accessible colorVision4 palette with 5 colors."},ui:"PalettePicker"},hatchStyle:{type:"enum",version:"2.0",description:"Specifies pre-defined hatch patterns",members:{none:"No hatch pattern",horizontal:"horizontal",vertical:"vertical","light-downward-diagonal":"light-downward-diagonal","light-upward-diagonal":"light-upward-diagonal",percent05:"percent05",percent10:"percent10",
percent20:"percent20",percent25:"percent25","dashed-downward-diagonal":"dashed-downward-diagonal","dashed-upward-diagonal":"dashed-upward-diagonal","dashed-horizontal":"dashed-horizontal","dashed-vertical":"dashed-vertical","forward-diagonal":"forward-diagonal","backward-diagonal":"backward-diagonal","large-horizontal":"large-horizontal","dark-downward-diagonal":"dark-downward-diagonal","dark-upward-diagonal":"dark-upward-diagonal","dark-horizontal":"dark-horizontal","dark-vertical":"dark-vertical",
"wide-downward-diagonal":"wide-downward-diagonal","wide-upward-diagonal":"wide-upward-diagonal","narrow-horizontal":"narrow-horizontal","narrow-vertical":"narrow-vertical","small-grid":"small-grid","large-grid":"large-grid","dotted-grid":"dotted-grid","cross-diagonal":"cross-diagonal","outlined-diamond":"outlined-diamond",dotted:"dotted","dotted-diamond":"dotted-diamond","solid-diamond":"solid-diamond","large-checker-board":"large-checker-board","small-checker-board":"small-checker-board",wave:"wave",
"zig-zag":"zig-zag","diagonal-brick":"diagonal-brick","horizontal-brick":"horizontal-brick",weave:"weave"}},cultures:{type:"enum",description:"Specifies a list of culture names available for formatting.",members:{af:"Afrikaans","af-ZA":"Afrikaans (South Africa)",ar:"Arabic","ar-AE":"Arabic (U.A.E.)","ar-BH":"Arabic (Bahrain)","ar-DZ":"Arabic (Algeria)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)",
"ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-YE":"Arabic (Yemen)",az:"Azeri","az-Cyrl-AZ":"Azeri (Cyrillic, Azerbaijan)","az-Latn-AZ":"Azeri (Latin, Azerbaijan)",be:"Belarusian","be-BY":"Belarusian (Belarus)",bg:"Bulgarian","bg-BG":"Bulgarian (Bulgaria)","bs-Latn-BA":"Bosnian (Bosnia and Herzegovina)",ca:"Catalan","ca-ES":"Catalan (Catalan)",cs:"Czech","cs-CZ":"Czech (Czech Republic)",
"cy-GB":"Welsh (United Kingdom)",da:"Danish","da-DK":"Danish (Denmark)",de:"German","de-AT":"German (Austria)","de-DE":"German (Germany)","de-CH":"German (Switzerland)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)",dv:"Divehi","dv-MV":"Divehi (Maldives)",el:"Greek","el-GR":"Greek (Greece)",en:"English","en-029":"English (Caribbean)","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-GB":"English (United Kingdom)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)",
"en-NZ":"English (New Zealand)","en-PH":"English (Republic of the Philippines)","en-TT":"English (Trinidad and Tobago)","en-US":"English (United States)","en-ZA":"English (South Africa)","en-ZW":"English (Zimbabwe)",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-ES":"Spanish (Spain)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)",
"es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-PY":"Spanish (Paraguay)","es-SV":"Spanish (El Salvador)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",et:"Estonian","et-EE":"Estonian (Estonia)",eu:"Basque","eu-ES":"Basque (Basque)",fa:"Persian","fa-IR":"Persian (Iran)",fi:"Finnish","fi-FI":"Finnish (Finland)",fo:"Faroese","fo-FO":"Faroese (Faroe Islands)",fr:"French","fr-BE":"French (Belgium)",
"fr-CA":"French (Canada)","fr-FR":"French (France)","fr-CH":"French (Switzerland)","fr-LU":"French (Luxembourg)","fr-MC":"French (Principality of Monaco)",gl:"Galician","gl-ES":"Galician (Galician)",gu:"Gujarati","gu-IN":"Gujarati (India)",he:"Hebrew","he-IL":"Hebrew (Israel)",hi:"Hindi","hi-IN":"Hindi (India)",hr:"Croatian","hr-BA":"Croatian (Bosnia and Herzegovina)","hr-HR":"Croatian (Croatia)",hu:"Hungarian","hu-HU":"Hungarian (Hungary)",hy:"Armenian","hy-AM":"Armenian (Armenia)",id:"Indonesian",
"id-ID":"Indonesian (Indonesia)",is:"Icelandic","is-IS":"Icelandic (Iceland)",it:"Italian","it-CH":"Italian (Switzerland)","it-IT":"Italian (Italy)",ja:"Japanese","ja-JP":"Japanese (Japan)",ka:"Georgian","ka-GE":"Georgian (Georgia)",kk:"Kazakh","kk-KZ":"Kazakh (Kazakhstan)",kn:"Kannada","kn-IN":"Kannada (India)",ko:"Korean",kok:"Konkani","kok-IN":"Konkani (India)","ko-KR":"Korean (Korea)",ky:"Kyrgyz","ky-KG":"Kyrgyz (Kyrgyzstan)",lt:"Lithuanian","lt-LT":"Lithuanian (Lithuania)",lv:"Latvian","lv-LV":"Latvian (Latvia)",
"mi-NZ":"Maori (New Zealand)",mk:"Macedonian","mk-MK":"Macedonian (Former Yugoslav Republic of Macedonia)",mn:"Mongolian","mn-MN":"Mongolian (Cyrillic, Mongolia)",mr:"Marathi","mr-IN":"Marathi (India)",ms:"Malay","ms-BN":"Malay (Brunei Darussalam)","ms-MY":"Malay (Malaysia)","mt-MT":"Maltese (Malta)","nb-NO":"Norwegian, Bokmal (Norway)",nl:"Dutch","nl-BE":"Dutch (Belgium)","nl-NL":"Dutch (Netherlands)","nn-NO":"Norwegian, Nynorsk (Norway)",no:"Norwegian","ns-ZA":"Northern Sotho (South Africa)",pa:"Punjabi",
"pa-IN":"Punjabi (India)",pl:"Polish","pl-PL":"Polish (Poland)",pt:"Portuguese","pt-BR":"Portuguese (Brazil)","pt-PT":"Portuguese (Portugal)","quz-BO":"Quechua (Bolivia)","quz-EC":"Quechua (Ecuador)","quz-PE":"Quechua (Peru)",ro:"Romanian","ro-RO":"Romanian (Romania)",ru:"Russian","ru-RU":"Russian (Russia)",sa:"Sanskrit","sa-IN":"Sanskrit (India)","se-FI":"Sami (Northern) (Finland)","se-NO":"Sami (Northern) (Norway)","se-SE":"Sami (Northern) (Sweden)",sk:"Slovak","sk-SK":"Slovak (Slovakia)",sl:"Slovenian",
"sl-SI":"Slovenian (Slovenia)","sma-NO":"Sami (Southern) (Norway)","sma-SE":"Sami (Southern) (Sweden)","smj-NO":"Sami (Lule) (Norway)","smj-SE":"Sami (Lule) (Sweden)","smn-FI":"Sami (Inari) (Finland)","sms-FI":"Sami (Skolt) (Finland)",sq:"Albanian","sq-AL":"Albanian (Albania)",sr:"Serbian","sr-Cyrl-BA":"Serbian (Cyrillic) (Bosnia and Herzegovina)","sr-Cyrl-CS":"Serbian (Cyrillic, Serbia)","sr-Latn-BA":"Serbian (Latin) (Bosnia and Herzegovina)","sr-Latn-CS":"Serbian (Latin, Serbia)",sv:"Swedish","sv-FI":"Swedish (Finland)",
"sv-SE":"Swedish (Sweden)",sw:"Kiswahili","sw-KE":"Kiswahili (Kenya)",syr:"Syriac","syr-SY":"Syriac (Syria)",ta:"Tamil","ta-IN":"Tamil (India)",te:"Telugu","te-IN":"Telugu (India)",th:"Thai","th-TH":"Thai (Thailand)","tn-ZA":"Tswana (South Africa)",tr:"Turkish","tr-TR":"Turkish (Turkey)",tt:"Tatar","tt-RU":"Tatar (Russia)",uk:"Ukrainian","uk-UA":"Ukrainian (Ukraine)",ur:"Urdu","ur-PK":"Urdu (Islamic Republic of Pakistan)",uz:"Uzbek","uz-Cyrl-UZ":"Uzbek (Cyrillic, Uzbekistan)","uz-Latn-UZ":"Uzbek (Latin, Uzbekistan)",
vi:"Vietnamese","vi-VN":"Vietnamese (Vietnam)","xh-ZA":"Xhosa (South Africa)","zh-CN":"Chinese (People's Republic of China)","zh-HK":"Chinese (Hong Kong S.A.R.)","zh-CHS":"Chinese (Simplified)","zh-CHT":"Chinese (Traditional)","zh-MO":"Chinese (Macao S.A.R.)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)","zu-ZA":"Zulu (South Africa)"},seealso:"Tutorials.labels"},timeUnit:{type:"enum",description:"Specifies a time unit.",members:{second:"A second.",minute:"A minute.",hour:"An hour.",day:"A day.",
week:"A week.",month:"A month.",year:"A year."}},zoomAxis:{type:"enum",description:"Specifies which axis to zoom.",members:{x:"Zoom x axis.",y:"Zoom y axis.",xy:"Zoom x and y axis.",none:"No zooming."}},alignHorizontal:{type:"enum",description:"Specifies a horizontal alignment of text.",members:{center:"Centered",left:"Left aligned",right:"Right aligned"}},alignVertical:{type:"enum",description:"Specifies a vertical alignment of text.",members:{top:"Top aligned",middle:"Vertically centered",bottom:"Bottom aligned"}},
directionalLayout:{type:"enum",description:"Specifies the layout of entries inside the legend box.",members:{auto:"Layout is determined automatically.",vertical:"Entries are laid out vertically.",horizontal:"Entries are laid out horizontally."},seealso:"Tutorials.legend"},orientation:{type:"enum",description:"Specifies the orientation in relation to another visual object.",members:{none:"No orientation is specified.",left:"The object is on the left.",right:"The object is on the right.",top:"The object is on top.",
bottom:"The object is on bottom.",topLeft:"The object on the upper left hand side.",topRight:"The object on the upper right hand side.",bottomRight:"The object on the bottom right hand side.",bottomLeft:"The object on the bottom left hand side.",opposite:"Opposite of the default orientation used by axis.orientation"}},titlePosition:{type:"enum",description:"Specifies the position of a title box.",members:{left:"title left position",center:"centered title",right:"title is right aligned",full:"title box spans chart area."}},
placement:{type:"enum",description:"Defines a position of labels in relation to related shape or container.",version:"2.5",members:{auto:"Automatic (Inside or outside)",inside:"Inside container or shape",outside:"Outside container or shape"}},uiItemType:{type:"enum",version:"2.1",updated:"2.7",description:"Specifies a uiItem mode.",members:{auto:{isDefault:!0,description:"The item behavior will be based on other settings."},option:"The item has a boolean value with selected or normal states. As a child of a parent uiItem, it can be a named option.",
checkbox:"Same as option, but the icon will automatically be set to the checkbox visual",toggle:"Same as checkbox but uses an alternative icon visual.",radio:"Same as option, but the icon will automatically be set to the radio visual",select:"The value of the item is based on a single selected child item.",selectMultiple:"Same as select, but multiple child items can be selected.",range:"A range slider uiItem.",file:"A file input uiItem that allows users to load files for processing."}},fontWeight:{type:"enum",
description:"Specifies font weight style options.",members:{normal:"Normal weight",bold:"Bold weight"}},fontStyle:{type:"enum",description:"Specifies a font style.",members:{normal:"Normal font style",italic:"Italic font style"}},fontFamily:{type:"enum",description:"Specifies a predefined font family.",caseInsensitive:!0,members:{Tahoma:"",Arial:"",Verdana:"",Helvetica:"","Trebuchet MS":"","Arial Black":"","Comic Sans MS":"","Courier New":"",Georgia:"",Impact:"","Lucida Console":"","Lucida Sans Unicode":"",
"Lucida Grande":"",Geneva:"","Times New Roman":"","MS Sans Serif":"","MS Serif":"","Arial, Helvetica, sans-serif":"","Arial Black, Gadget, sans-serif":"","Comic Sans MS, cursive":"","Courier New, monospace":"","Georgia, serif":"","Impact, Charcoal, sans-serif":"","Lucida Console, Monaco, monospace":"","Lucida Sans Unicode, Lucida Grande, sans-serif":"","Palatino Linotype, Book Antiqua, Palatino, serif":"","Tahoma, Geneva, sans-serif":"","Times New Roman, Times, serif":"","Trebuchet MS, sans-serif":"",
"Verdana, Geneva, sans-serif":"","MS Sans Serif, Geneva, sans-serif":"","MS Serif, New York, serif":""}},textDecoration:{type:"enum",version:"2.6",description:"Specifies the decoration added to text",members:{overline:"","line-through":"",underline:"","underline overline":""}},cursor:{type:"enum",description:"Specifies a mouse cursor icon.",members:{none:"No cursor icon","default":"The default cursor",pointer:"Hand poiter cursor icon indicative of a clickable object",help:"Indicates help is available.",
crosshair:"Renders as a crosshair.",wait:"Indicates the program is busy.",progress:"Indicates the program is in progress.",text:"Indicates text.","n-resize":"Indicates the edge can be moved up.","ne-resize":"Indicates the edge can be moved up right.","nw-resize":"Indicates the edge can be moved up left.","e-resize":"Indicates the edge can be moved right.","s-resize":"Indicates the edge can be moved down.","se-resize":"Indicates the edge can be moved down right.","sw-resize":"Indicates the edge can be moved down left.",
"w-resize":"Indicates the edge can be moved left."}},dashStyle:{type:"enum",description:"Specifies the line style of a line.",caseInsensitive:!0,members:{Solid:"Specifies a solid line.",ShortDash:"Specifies a short dashed line.",ShortDot:"Specifies a short dotted line.",ShortDashDot:"Specifies an alternating short dash-dot line.",ShortDashDotDot:"Specifies an alternating short dash-dot-dot line. ",Dot:"Specifies a dotted line",Dash:"Specifies a dashed line.",LongDash:"Specifies a long dashed line.",
DashDot:"Specifies an alternating dash-dot line. ",DashDotDot:"Specifies an alternating dash-dot-dot line. ",LongDashDot:"Specifies an alternating long dash-dot line. ",LongDashDotDot:"Specifies an alternating long dash-dot-dot line. "}},boxCornerType:{type:"enum",version:"2.0",description:"Describes a box corner style.",members:{square:"Square corner type",cut:"Cut corner",round:"Round corner"}},mimeType:{type:"enum",description:"Image mime types used when exporting to image formats.",members:{"image/png":"PNG Image Format",
"image/jpeg":"JPEG Image Format","application/pdf":"PDF Image Format","image/svg+xml":"SVG Image Format"}},animationEasing:{type:"enum",description:"Specifies an animation easing algorithm.",members:{easeInQuad:"",easeOutQuad:"",easeInCubic:"",easeOutCubic:"",easeInOutCubic:"",easeInQuart:"",easeOutQuart:"",easeInOutQuart:"",easeInQuint:"",easeOutQuint:"",easeInOutQuint:"",easeInSine:"",easeOutSine:"",easeInOutSine:"",easeInExpo:"",easeOutExpo:"",easeInOutExpo:"",easeInCirc:"",easeOutCirc:"",easeInOutCirc:"",
easeInElastic:"",easeOutElastic:"",easeInOutElastic:"",easeInBack:"",easeOutBack:"",easeInOutBack:"",easeInBounce:"",easeOutBounce:"",easeInOutBounce:""}},calculation:{type:"enum",version:"2.6",description:"Specifies a calculation.",members:{sum:"",average:"",min:"",max:""}},funnelNozzleType:{type:"enum",version:"1.2",inline:!0,isInlined:!0,members:{nozzle:{isDefault:!0},noNozzle:{}}},seriesLayout:{type:"enum",version:"1.2",inline:!0,hide:!0,hidden:!0,isInlined:!0,members:{XY:{isDefault:!0,description:"Cone shaped funnel.",
chain:"enum_funnelOrientationType"},visualShape:{description:"Pyramid shaped funnel.",chain:"enum_funnelOrientationType"}}}},utils:{getType:function(b){if("undefined"!==typeof b){if("boolean"===typeof b)return"boolean";if("number"===typeof b)return"number";if("function"===typeof b)return"function";if(b.pop)return"array";if("string"===typeof b)return"string"}return"undefined"}}}},g={point:[["%name","Point's Name"],["%yValue","Point's Y value."],["%yStart","Point's yStart value."],["%xValue","Point's X value"],
["%zValue","Point's Z value"],["%open","Open price value."],["%high","High price value."],["%low","Low price value."],["%close","Close price value."],["%icon","Renders an icon that references the point appearance."],["%parentName","(v1.3) The parent point's name or the series name. Used with tree data where points have parent points."],["%seriesName","Series name point belongs to."],["%color",'Point color as a hex value such as "#EB1AC2".'],["%id","Point's ID"],["%yAxisLabel","Label text of the y axis this point is plotted on."],
["%xAxisLabel","Label text of the x axis this point is plotted on."],["%seriesPointCount","Number of points in series."],["%__","Custom point attribute key values can be used to retrieve additional point data. This data can be defined through point.attributes ."],["%percentile","The y value percentile calculation of this point in relation to other points within the parent series."],["%percentOfTotal","The percentage of all the series on the chart this point represents."],["%percentOfSeries","The percentage of the series this point represents."],
["%percentOfGroup","The percentage of all the elements with the same name this point represents."],["%percentOfSeriesMax","The point's y value percentage of the maximum point value on the chart. point represents."],["%percentOfSeriesRange","The point's y value percentage of the range between the parent series minimum and maximum point."],["%xPercentile","The x value percentile calculation of this point in relation to other points within the parent series."],["%xPercentOfTotal","The percentage of x values of all the series on the chart this point represents."],
["%xPercentOfSeries","The percentage of x values of the series this point represents."],["%xPercentOfGroup","The percentage of x values of all the elements with the same name this point represents."],["%xPercentOfSeriesMax","The point's x value percentage of the maximum point value on the chart. point represents."],["%xPercentOfSeriesRange","The point's x value percentage of the range between the parent series minimum and maximum point."],["%zPercentile","The z value percentile calculation of this point in relation to other points within the parent series."],
["%zPercentOfTotal","The percentage of z values of all the series on the chart this point represents."],["%zPercentOfSeries","The percentage of z values of the series this point represents."],["%zPercentOfGroup","The percentage of z values of all the elements with the same name this point represents."],["%zPercentOfSeriesMax","The point's z value percentage of the maximum point value on the chart. point represents."],["%zPercentOfSeriesRange","The point's z value percentage of the range between the parent series minimum and maximum point."],
["%yPercentOfAxisRange","(v1.2) Percentage of y axis range."],["%xPercentOfAxisRange","(v1.2) Percentage of x axis range."],["%PercentOfDataMax","(v1.2) Percentage of the max y value of all series."],["%xPercentOfDataMax","(v1.2) Percentage of the max x value of all series."],["%zPercentOfDataMax","(v1.2) Percentage of the max z value of all series."],["%PercentOfDataRange","(v1.2) Percentage of the range of y values in all series."],["%xPercentOfDataRange","(v1.2) Percentage of the range of x values in all series."],
["%zPercentOfDataRange","(v1.2) Percentage of the range of z values in all series."],["%subValueList","(v2.7) A comma delimited list  of subvalues associated with the point."]],series:[["%name","Series name."],["%id","Series ID"],["%color","Series color."],["%yAxisLabel","Label text of the y axis this point is plotted on."],["%xAxisLabel","Label text of the x axis this point is plotted on."],["%pointCount","Number of points in series."],["%lastY","Y value of the last point in the series"],["%lastX",
"X value of the last point in the series"],["%lastZ","Z value of the last point in the series"],["%maxPointName","Name of the point with the largest y value."],["%minPointName","Name of the point with the smallest y value."],["%xMaxPointName","Name of the point with the largest x value."],["%xMinPointName","Name of the point with the smallest x value."],["%zMaxPointName","Name of the point with the largest z value."],["%zMinPointName","Name of the point with the smallest z value."],["%sum","Sum of series point y values."],
["%max","Largest point y value."],["%min","Smallest point y value"],["%average","Average of series point y values."],["%median","Mode of series point y values."],["%mode","Mode of series point y values."],["%rangeSum","Sums of differences between point y and yStart values."],["%percentOfTotal","Percentage of all series on the chart this series represents."],["%xSum","Sum of series point x values."],["%xMax","Largest point x value."],["%xMin","Smallest point x value"],["%xAverage","Average of series point x values."],
["%xMedian","Mode of series point x values."],["%xMode","Mode of series point x values."],["%xPercentOfTotal","The x value percentage of all series on the chart this series represents."],["%zSum","Sum of series point z values."],["%zMax","Largest point z value."],["%zMin","Smallest point z value"],["%zAverage","Average of series point z values."],["zMedian","Mode of series point z values."],["%zMode","Mode of series point z values."],["%xPercentOfTotal","The z value percentage of all series on the chart this series represents."],
["%xMaxSum","The x value sum of the series with the highest x value sum."],["%yMaxSum","The y value sum of the series with the highest y value sum."],["%zMaxSum","The z value sum of the series with the highest z value sum."],["%xMinSum","The x value sum of the series with the lowest x value sum."],["%yMinSum","The y value sum of the series with the lowest y value sum."],["%zMinSum","The z value sum of the series with the lowest z value sum."],["%xMaxAverage","The x value average of the series with the highest x value average."],
["%yMaxAverage","The y value average of the series with the highest y value average."],["%zMaxAverage","The z value average of the series with the highest z value average."],["%xMinAverage","The x value average of the series with the lowest x value average."],["%yMinAverage","The y value average of the series with the lowest y value average."],["%zMinAverage","The z value average of the series with the lowest z value average."],["%zMaxOfSeries","The maximum z value of points on the chart."],["%zMinOfSeries",
"The minimum z value of points on the chart."],["%zSumOfSeries","The z value sum of all points on the chart."],["%zRangeOfSeries","The sum of all range z values of all points on the chart."],["%zAbsMaxOfSeries","The absolute max z value of all points on the chart."],["%yList","A comma delimited list of y values for each point in this series."],["%xList","A comma delimited list of x values for each point in this series."],["%zList","A comma delimited list of z values for each point in this series."]],
seriesCollection:[["%pointCount","Number of points in all series.."],["%sum","Sum of all y values on the chart."],["%max","Maximum y value of the chart data."],["%min","Minimum y value of the chart data."],["%average","Average y value of chart data."],["%median","Median y value of chart data."],["%mode","Mode y value of chart data."],["%rangeSum","Sums of differences between point y and yStart values."],["%maxSeriesName","Name of the series with the largest y value point."],["%minSeriesName","Name of the series with the smallest y value point."],
["%maxPointName","Name of the point with the largest y value."],["%minPointName","Name of the point with the smallest y value."],["%xMaxSeriesName","Name of the series with the largest x value point."],["%xMinSeriesName","Name of the series with the smallest x value point."],["%xMaxPointName","Name of the point with the largest x value."],["%xMinPointName","Name of the point with the smallest x value."],["%zMaxSeriesName","Name of the series with the largest z value point."],["%zMinSeriesName","Name of the series with the smallest z value point."],
["%zMaxPointName","Name of the point with the largest z value."],["%zMinPointName","Name of the point with the smallest z value."],["%xSum","Sum of all x values on the chart."],["%xMax","Maximum x value of the chart data."],["%xMin","Minimum x value of the chart data."],["%xAverage","Average x value of chart data."],["%xMedian","Median x value of chart data."],["%xMode","Mode x value of chart data."],["%zSum","Sum of all z values on the chart."],["%zMax","Maximum z value of the chart data."],["%zMin",
"Minimum z value of the chart data."],["%zAverage","Average z value of chart data."],["%zMedian","Median z value of chart data."],["%zMode","Mode z value of chart data."],["%xMaxSum","The x value sum of the series with the highest x value sum."],["%yMaxSum","The y value sum of the series with the highest y value sum."],["%zMaxSum","The z value sum of the series with the highest z value sum."],["%xMinSum","The x value sum of the series with the lowest x value sum."],["%yMinSum","The y value sum of the series with the lowest y value sum."],
["%zMinSum","The z value sum of the series with the lowest z value sum."],["%xMaxAverage","The x value average of the series with the highest x value average."],["%yMaxAverage","The y value average of the series with the highest y value average."],["%zMaxAverage","The z value average of the series with the highest z value average."],["%xMinAverage","The x value average of the series with the lowest x value average."],["%yMinAverage","The y value average of the series with the lowest y value average."],
["%zMinAverage","The z value average of the series with the lowest z value average."],["%sumList","A comma delimited list of y value sums for each series on the chart."],["%xSumList","A comma delimited list of x value sums for each series on the chart."],["%zSumList","A comma delimited list of z value sums for each series on the chart."]],value:[["%value","Represents the value."]],pointList:[["%xValue","Points shared x value"],["%yList","A comma delimited list of y values for each point in this list."],
["%colors","A comma delimited list of the colors associated with each point."],["%ysum","Sum of all y values on the chart."],["%sum","Sum of all y values on the chart."],["%ymax","Maximum y value of the related points."],["%max","Maximum y value of the related points."],["%ymin","Minimum y value of the related points."],["%min","Minimum y value of the related points."],["%pointCount","Number of points in this list."],["%count","Number of points in this list."],["%points","The tooltips of each individual point."]]};
c();window.JSCL=jQuery.extend(!0,window.JSCL,{mainIndex:{Tutorials:{type:"html",description:"Tutorials describing how to use the chart.",listMode:"recurse",label:"Tutorials",html:{"Getting Started":{label:"Getting Started",type:"html",description:"Explains how to setup your first chart.",url:"gettingStarted.html"},"Exploring Samples":{type:"html",label:"Exploring Samples",description:"Describes how to find samples for features of interest.",url:"sampleExplorer.html"},Editor:{type:"html",label:"JSCharting Editor",
description:"The editor provides an advanced design time environment for exploring and configuring chart settings to get the exact results for your specific needs and to further tune chart settings and visuals.  It is also a great tool for learning JSCharting by exploring and interacting with the various settings and immediately seeing the result of your updates. The editor is broken into different windows, or panes, with specific functionality.",url:"editor.html"},"Chart Types":{type:"html",label:"Chart Types",
description:"Describes how to construct different chart types.",url:"chartTypes.html"},Axis:{type:"html",label:"Axis Tutorials",description:"Axis related features overview",url:"Axis.html",html:{Scales:{type:"html",url:"axisScales.html",version:"1.5",description:"todo:"},TicksMarkers:{type:"html",url:"axisTicksMarkers.html",version:"1.5",description:"todo:"}},version:"1.5"},"Code Expansion":{type:"html",label:"Code Expansion",description:"The code expansion feature makes writing chart settings much easier.",
url:"codeExpansion.html"},"Colors And Fills":{type:"html",label:"Colors And Fills",description:"Describes how colors and gradient fills can be set.",url:"fills.html"},Interactivity:{type:"html",description:"Describes built in chart interactivity features and events.",url:"interactivity.html",html:{States:{type:"html",description:"Describes chart element state settings and related features.",url:"states.html"}}},Legend:{type:"html",description:"This tutorial describes how the legend can be manipulated.",
url:"legend.html"},"Finance Navigator":{type:"html",label:"Finance Navigator",description:"Describes Finance Navigator features.",url:"navigator.html"},Labels:{type:"html",description:"Describes label related topics including formatting, label tokens, and more.",url:"labels.html",html:{"Token Reference":{type:"html",label:"Token Reference",description:"Label token reference.",url:"tokenReference.html"}}},"Data Population":{type:"html",description:"Demonstrates how to populate the chart with data.",
url:"populateData.html",html:{"Custom Attributes":{label:"Custom Attributes",type:"html",description:"Using custom point attributes.",url:"customAttributes.html"},"Statistics And Calculations":{label:"Statistics And Calculations",type:"html",description:"Describes how to perform calculations on data in the chart.",url:"calculations.html"}}}}},OtherMainLevel:{About:{type:"html",description:"JSCharting info.",listMode:"recurse",children:{Features:{description:"JSCharting Feature list"},Contact:{description:"Contact information.",
children:{Support:{label:"Online Support",url:"OnlineSupport.html",description:"Online Support Details."}}},LicenseAgreement:{label:"Licensing Agreement",url:"LicensingAgreement.html",description:"The complete licensing agreement."}}}},"API Reference":{type:"category",label:"API Reference",description:"Describes the API used to create and manipulate charts.",children:{"JSON objects":{label:"JSON Objects",type:"JSONObjectList",description:"Predefined JSON configuration objects used to specify settings for the chart.",
children:{Types:{label:"Types",description:"Additional JSON configuration objects used with the main chart."}}},"JSON enums":{label:"Enums",type:"JSONEnumList",description:"Predefined string values used with settings for the chart."},Objects:{label:"JS Objects",type:"iObjectList",description:"JS Objects related to the chart library."}}}},JSONapi:{},InteractiveAPI:{},getJSONapi:c,getApiObjCurrent:function(b){var a=e[b];if(a&&-1<a.indexOf("{"))return JSON.parse(a);var a=c().objects[b],d=JSON.stringify(a,
function(b,a){return"function"===typeof a?a.toString():a});d&&(e[b]=d);return a},getApiObj:function(b){var a;a=c().objects[b];"label"===b&&(a=Object.create(a));return a},getApiEnum:function(b){var a=f[b];if(a&&-1<a.indexOf("{"))return JSON.parse(a);var a=c().enums[b],d=JSON.stringify(a,function(b,a){return"function"===typeof a?a.toString():a});d&&(f[b]=d);return a},getTokens:function(b){return g[b]}});var h=c();window.JSCL.JSONapi=h;window.JSCL.InteractiveAPI={objects:{JSC:{type:"iObject",description:"A global object that provides methods not specific to any particular chart.",
remarks:"",iObject:{Chart:{type:"method",description:"Initializes and returns a new instance of the JS chart object.",parameters:{targetElement:{type:"string,object",description:"Specifies the ID of the HTML element to which this chart is added, or the element object itself."},chartConfig:{type:"obj_chart",description:"Chart options"},callback:{type:"method",description:'A callback function called when the chart load is complete. This function is called in the context of the chart object, hence, the "this" keyword can be used in the function to refer to the <a href="iObject.chart">chart</a>.',
required:!1}},returns:{type:"iobj_chart",description:"Returns a chart JS object."},example:"var chart = new JSC.Chart('targetDiv',options,callback);"},Grid:{type:"method",version:"2.8",description:"Initializes and returns a new instance of the JSC DataGrid object.",parameters:{targetElement:{type:"string,object",description:"Specifies the ID of the HTML element to which this chart is added, or the element object itself."},gridConfig:{type:"obj_grid",description:"Grid options"},callback:{type:"method",
description:'A callback function called when the grid load is complete. This function is called in the context of the grid object, hence, the "this" keyword can be used in the function to refer to the <a href="iObject.grid">grid</a>.',required:!1}},returns:{type:"iobj_promise",generic:[{forType:"iobj_promise",type:"iobj_grid"}],description:"Returns a grid JS promise object."},example:"var grid = new JSC.Grid('targetDiv',options,callback);"},chart:{type:"method",hide:!0,description:"Initializes and returns a new instance of the JS chart object.",
parameters:{targetElement:{type:"string,object",description:"Specifies the ID of the HTML element to which this chart is added, or the element object itself."},chartConfig:{type:"obj_chart",description:"Chart options"},callback:{type:"method",description:'A callback function called when the chart load is complete. This function is called in the context of the chart object, hence, the "this" keyword can be used in the function to refer to the <a href="iObject.chart">chart</a>.',required:!1}},returns:{type:"iobj_chart",
description:"Returns a chart JS object."},example:"var chart = JSC.chart('targetDiv',options,callback);"},formatString:{type:"method",description:"A static method providing number and date formatting by passing a value and using standard or custom format strings.",parameters:{val:{type:"number,date",description:"The value to be formatted based on the given format string.",number:{description:"A numeric value to format."},date:{description:"A date value to format."},required:!0},format:{type:"string",
description:"Format string.",required:!0},culture:{type:"any",description:"Culture.",required:!1}},returns:{type:"string",description:"Returns a string with the value formatted according to the specified format."},seealso:"Samples.callbackFormatting|Tutorials.Labels:Includes information on formatStrings."},formatNumber:{type:"method",version:"2.0",description:"Formats a number based on specified format string.",parameters:{val:{type:"number",description:"The value to be formatted based on the given format string.",
number:{description:"A numeric value to format."},required:!0},format:{type:"string",description:"Format string.",required:!0},culture:{type:"any",description:"Culture.",required:!1}},returns:{type:"string",description:"Returns a string with the value formatted according to the specified format."},seealso:"Samples.callbackFormatting|Tutorials.Labels:Includes information on formatStrings."},formatDate:{type:"method",version:"2.0",description:"Formats a date based on specified format string.",parameters:{val:{type:"string,date",
description:"The value to be formatted based on the given format string.",string:{description:"A string date value to format."},date:{description:"A date value to format."},required:!0},format:{type:"string",description:"Format string.",required:!0},culture:{type:"any",description:"Culture.",required:!1}},returns:{type:"string",description:"Returns a string with the value formatted according to the specified format."},seealso:"Samples.callbackFormatting|Tutorials.Labels:Includes information on formatStrings."},
clearApiCache:{type:"method",hide:!0,description:"A static method that clears the API cache. This cache is used to improve config object processing and expansion performance. It is most useful when there are more than one charts on a page. Clearing this cache can decrease memory usage in the browser if necessary."},pointsFromArray:{type:"method",version:"1.1",hide:!0,description:"A static method used to populate points from array data with the goal of reducing the amount of overhead (string data size) when data is passed to JSCharting.",
example:"var arrayOfPoints = JSC.pointsFromArray('name,y', [ ['Jan', 196], ['Feb', 178], ['Mar', 169] ])",parameters:{properties:{type:"string",description:"A comma delimited list of properties the data argument arrays map to.",remarks:"Properties can be specified with as paths such as 'attribute.distance', which is similar to setting point.attribute.distance = x",example:"'name,y'",required:!0},data:{type:"array",description:"Data to map to the properies for each point.",required:!0,array:{arrayType:"specific",
types:[{type:"array",array:{0:{arrayType:"specific",example:"['Greg',50]",description:"Each tuple creates a new point where each value in the array is mapped to a property named in the properties argument.",types:[{name:"valueN",type:"string,number,date",multi:!0,description:"Value mapped to the properties defined in the first argument."}]}}}]}}},returns:{type:"array",description:"Returns an array of point config objects.",array:{arrayType:"specific",types:[{type:"obj_point"}]}},seealso:"Tutorials.staticData"},
parsePoints:{type:"method",hide:!0,version:"2.0",description:"Series points property can take an object which allows a more efficient format for data transfer. This function can take this points object and expand it into an array of point config objects client-side if needed.",parameters:{pointsObj:{type:"object",description:"Point object data to expand.",required:!0}},returns:{type:"array",description:"Returns an array of point config objects.",array:{arrayType:"specific",types:[{type:"obj_point"}]}},
seealso:"Tutorials.staticData"},getPalette:{type:"method",version:"1.1",description:"A static method used to get the colors of a specified palette.",parameters:{id:{type:"enum_palette,number",description:"The name or index of the palette to get.",required:!1}},returns:{type:"array",description:"An array of colors",array:{arrayType:"specific",types:[{type:"obj_color"}]}}},colorToPalette:{type:"method",hide:!0,version:"1.4",description:"Generates a specified number of colors based on the given base color and range of HSL variations.",
seealso:"Samples.mapPaletteDesigner",parameters:{base:{type:"obj_color",description:"A base color to use as a starting point.",required:!0},variations:{type:"object",description:"A set of 0-1 values defining the range of variation of each HSL component in the resulting color palettte.",object:{hue:{type:"number",description:"A value between 0-1 that indicates the amount of the hue spectrum that is used in resulting colors."},saturation:{type:"number",description:"A value between 0-1 that indicates the amount of the saturation range that is used in resulting colors."},
lightness:{type:"number",description:"A value between 0-1 that indicates the amount of the lightness range that is used in resulting colors."}}},count:{type:"number",description:"Number of color to create."},sort:{type:"number",description:"-1 = Random shuffling. 0 = Linear sort. 1 = Random seed."}},returns:{type:"array",description:"An array of colors",array:{arrayType:"specific",types:[{type:"obj_color"}]}}},nest:{type:"method",version:"2.7",description:"Creates an instance of nest object.",parameters:{},
returns:{type:"iobj_nest",description:"A new instance of the nesting object."}},map:{type:"method",hide:!0,version:"2.8",description:"Wraps the array.map() function.",parameters:{data:{type:"any",description:"Array to iterate."},iteratee:{type:"method",description:"Iterates each item in the array."}},returns:{type:"any",description:"An array with results of iteratee on each item."}},fetch:{type:"method",version:"2.6",description:"Provides a shortcut to the window.fetch() function or a polyfill when browser does not support it natively.",
parameters:{fileName:{type:"string",description:"Filename to load."},callback:{type:"any",description:"Callback.",required:!1}},returns:{type:"iobj_promise",generic:[{forType:"iobj_promise",type:"any"}],description:"A promise returned by fetch()."}},parseCsv:{type:"method",version:"2.6",description:"A utility function to parse csv file content. ",parameters:{text:{type:"string",description:"Csv file content string.",require:!0},options:{type:"object",description:"Csv parsing options",object:{delimiter:{type:"string",
description:"Manually specified delimiter character"},newline:{type:"string",description:"Manually specified newline character"}},required:!1}},returns:{type:"object",description:"The original and parsed data including information about detected headers and data types.",object:{raw:{type:"string",description:"The original raw csv file content text."},headers:{type:"array",description:"An array of header row content. The chart will detect header rows automatically and return the rows in this property.",
array:{arrayType:"specific",description:"An array of header rows split into columns.",types:[{type:"array",description:"A row array of string column items.",array:{arrayType:"specific",description:"A row array of string column items.",types:[{type:"string",description:"String and numeric values."}]}}]}},split:{type:"array",description:"Csv data processed into arrays of strings before individual values are parsed.",array:{arrayType:"specific",description:"An array of rows and column string values before they are coerced into native data types.",
types:[{type:"array",description:"A row array of string column items.",array:{arrayType:"specific",description:"A row array of string/numeric column items.",types:[{type:"string",description:"String and numeric values."}]}}]}},data:{type:"array",description:"Csv data processed into column and row arrays of numeric and string values.",array:{arrayType:"specific",description:"An array of rows.",types:[{type:"array",description:"A row array of string/numeric column items.",array:{arrayType:"specific",
description:"A row array of string/numeric column items.",types:[{type:"string,number",description:"String and numeric values."}]}}]}},types:{type:"array",description:"An array of data types detected for each data column. Resulting values include number, date, string, and undefined. ",array:{arrayType:"specific",description:"An array of detected types.",types:[{type:"string"}]}}}},example:'JSC.parseCsv(\'Name,Age\\nart,23\') -> \n<br>{\n<br>  &nbsp;&nbsp;raw: "Name,Age\\nart,23",\n<br>  &nbsp;&nbsp;headers: [ [ "Name", "Age" ] ],\n<br>  &nbsp;&nbsp;split: [ [ "art", "23" ] ],\n<br>  &nbsp;&nbsp;data: [ [ "art", 23 ] ],\n<br>  &nbsp;&nbsp;types: [ "string", "number" ]\n<br>}'},
merge:{type:"method",version:"2.7",description:"Recursively merges own and inherited enumerable string keyed properties of source objects into the destination object. Source properties that resolve to undefined are skipped if a destination value exists. Array and plain object properties are merged recursively.",parameters:{target:{type:"object",description:"Object to merge sources into.",required:!0,object:{"*":{type:"string",description:"Manually specified delimiter character"}}},sources:{type:"object",
description:"(...object) Sources to merge",object:{"*":{type:"string",description:"Manually specified delimiter character"}},required:!1}},returns:{type:"any",description:"The result of merged objects."}},label:{type:"method",version:"2.7",description:"Provides JSCharting label support for any DIV elements on a page. Supported features include microchart, and icon tag syntax.",example:'JSC.label("divID", "Microchart: &#x3C;chart type=column data=1,5,3,4&#x3E;")',parameters:{targetElement:{type:"string,object",
description:"Specifies the ID of the HTML element to which this chart is added, or the element object itself.",required:!0},labelText:{type:"string",description:"String content to render in the targetElement.",required:!0},options:{type:"obj_label",description:"Label options.",required:!1}}},sum:{type:"method",version:"2.7",description:"A utility math function to sum values of arrays or objects. Null values are ignored.",example:"JSC.sum( [{a: 5}, {a: 10}], 'a' ); // -> 15<br>JSC.sum( [{a: 5}, {a: 10}], v => v.a ); // -> 15<br>JSC.sum( [5, 10] ); // -> 15",
parameters:{array:{type:"array",description:"Array of numbers of object to process.",array:{arrayType:"specific",types:[{type:"number",description:"An array of numbers."},{type:"object",description:"",object:{"*":"Data objects"}}]}},iterator:{type:"string,method",required:!1,description:"When used with an array of objects, it identifies a specific numeric property of each object to sum.",string:{description:"The numeric property name in the given objects."},method:{description:"Invoked on each object in the array to get the numeric value to sum."}}},
returns:{type:"number",description:"Numeric result of the calcualtion."}},mean:{type:"method",version:"2.7",description:"A utility math function to calculate the average of an array of numbers or objects. Null values are ignored.",example:"JSC.mean( [{a: 5}, {a: 10}], 'a' ); // -> 7.5<br>JSC.mean( [{a: 5}, {a: 10}], v => v.a ); // -> 7.5<br>JSC.mean( [5, 10] ); // -> 7.5",parameters:{array:{type:"array",description:"Array of numbers of object to process.",array:{arrayType:"specific",types:[{type:"number",
description:"An array of numbers."},{type:"object",description:"",object:{"*":"Data objects"}}]}},iterator:{type:"string,method",required:!1,description:"When used with an array of objects, it identifies a specific numeric property of each object to use in the calculation.",string:{description:"The numeric property name in the given objects."},method:{description:"Invoked on each object in the array to get the numeric values to average."}}},returns:{type:"number",description:"Numeric result of the calcualtion."}},
min:{type:"method",version:"2.7",description:"A utility math function to calculate the minimum value of an array of numbers or objects. Null values are ignored.",example:"JSC.min( [{a: 5}, {a: 10}], 'a' ); // -> 5<br>JSC.min( [{a: 5}, {a: 10}], v => v.a ); // -> 5<br>JSC.min( [5, 10] ); // -> 5",parameters:{array:{type:"array",description:"Array of numbers of object to process.",array:{arrayType:"specific",types:[{type:"number",description:"An array of numbers."},{type:"object",description:"",object:{"*":"Data objects"}}]}},
iterator:{type:"string,method",required:!1,description:"When used with an array of objects, it identifies a specific numeric property of each object to use in the calculation.",string:{description:"The numeric property name in the given objects."},method:{description:"Invoked on each object in the array to get the numeric values to use in the calculation."}}},returns:{type:"number",description:"Numeric result of the calcualtion."}},max:{type:"method",version:"2.7",description:"A utility math function to calculate the minimum value of an array of numbers or objects. Null values are ignored.",
example:"JSC.max( [{a: 5}, {a: 10}], 'a' ); // -> 10<br>JSC.max( [{a: 5}, {a: 10}], v => v.a ); // -> 10<br>JSC.max( [5, 10] ); // -> 10",parameters:{array:{type:"array",description:"Array of numbers of object to process.",array:{arrayType:"specific",types:[{type:"number",description:"An array of numbers."},{type:"object",description:"",object:{"*":"Data objects"}}]}},iterator:{type:"string,method",required:!1,description:"When used with an array of objects, it identifies a specific numeric property of each object to use in the calculation.",
string:{description:"The numeric property name in the given objects."},method:{description:"Invoked on each object in the array to get the numeric values to use in the calculation."}}},returns:{type:"number",description:"Numeric result of the calcualtion."}},csv2Json:{type:"method",version:"2.7",seealso:"Tutorials.gettingData",description:"Converts a string of comma separated values into JSON objects. The first rows can include property names or property names can be specified in the options columns property.",
parameters:{csvText:{type:"string",description:"File content of the comma separated values to convert."},options:{type:"object",required:!1,description:"Options used when converting to JSON objects.",object:{coerce:{type:"method",description:"A function that receives the row data object with all property values as strings. Coerce is invoked with (row, index, types) arguments.",remarks:"When both map and coerce options are specified, the row argument passed to the coerce function will be the result of the map function."},
columns:{type:"array",description:"Specifies an array of property names to use instead of the first row or when the first row does not specify property names. ",array:{arrayType:"specific",types:[{type:"string",multi:!0,description:"Column names to use when mapping to JSON objects."}]}},map:{type:"method",description:"Function that remaps property names. Applied internally with items.map(options.map) after processing.",example:'JSC.csv2Json("Date,Actual\\n1/1/2018,4535", {map: (d, i) => {return { date: d.Date, steps: d.Actual);}})'}}}},
returns:{type:"array",description:"An array of JSON objects",array:{arrayType:"specific",types:[{type:"object",description:"",object:{"*":"Data objects"}}]}}},tsv2Json:{type:"method",version:"2.7",seealso:"Tutorials.gettingData",description:"Converts a string of tab separated values into JSON objects. The first rows can include property names or property names can be specified in the options columns property.",parameters:{tsvText:{type:"string",description:"File content of the tab separated values to convert."},
options:{type:"object",required:!1,description:"Options used when converting to JSON objects.",object:{coerce:{type:"method",description:"A function that receives the row data object with all property values as strings. Coerce is invoked with (row, index, types) arguments.",remarks:"When both map and coerce options are specified, the row argument passed to the coerce function will be the result of the map function."},columns:{type:"array",description:"Specifies an array of property names to use instead of the first row or when the first row does not specify property names. ",
array:{arrayType:"specific",types:[{type:"string",multi:!0,description:"Column names to use when mapping to JSON objects."}]}},map:{type:"method",description:"Function that remaps property names. Applied internally with items.map(options.map) after processing."}}}},returns:{type:"array",description:"An array of JSON objects",array:{arrayType:"specific",types:[{type:"object",description:"",object:{"*":"Data objects"}}]}}},dsv2Json:{type:"method",version:"2.7",seealso:"Tutorials.gettingData",description:"Converts a string of custom delimiter separated values into JSON objects. The first rows can include property names or property names can be specified in the options columns property.",
parameters:{dsvText:{type:"string",description:"File content of the custom delimiter separated values to convert."},delimiter:{type:"string",description:"The custom delimiter character."},options:{type:"object",required:!1,description:"Options used when converting to JSON objects.",object:{coerce:{type:"method",description:"A function that receives the row data object with all property values as strings. Coerce is invoked with (row, index, types) arguments.",remarks:"When both map and coerce options are specified, the row argument passed to the coerce function will be the result of the map function."},
columns:{type:"array",description:"Specifies an array of property names to use instead of the first row or when the first row does not specify property names. ",array:{arrayType:"specific",types:[{type:"string",multi:!0,description:"Column names to use when mapping to JSON objects."}]}},map:{type:"method",description:"Function that remaps property names. Applied internally with items.map(options.map) after processing."}}}},returns:{type:"array",description:"An array of JSON objects",array:{arrayType:"specific",
types:[{type:"object",description:"",object:{"*":"Data objects"}}]}}},json2Csv:{type:"method",version:"2.7",seealso:"Tutorials.gettingData",description:"Converts an array of JSON objects into a comma separated values format string.",parameters:{items:{type:"array",description:"An array of JSON objects",array:{arrayType:"specific",types:[{type:"object",description:"",object:{"*":"Data objects"}}]}},options:{type:"object",required:!1,description:"Options used when converting to the delimiter separated value string.",
object:{map:{type:"method",description:"Function that remaps property names. Applied internally with items.map(options.map) before processing."}}}},returns:{type:"string",description:"The resulting comma separated values string."}},json2Tsv:{type:"method",version:"2.7",seealso:"Tutorials.gettingData",description:"Converts an array of JSON objects into a tab separated values format string.",parameters:{items:{type:"array",description:"An array of JSON objects",array:{arrayType:"specific",types:[{type:"object",
description:"",object:{"*":"Data objects"}}]}},options:{type:"object",required:!1,description:"Options used when converting to the delimiter separated value string.",object:{map:{type:"method",description:"Function that remaps property names. Applied internally with items.map(options.map) before processing."}}}},returns:{type:"string",description:"The resulting tab separated values string."}},json2Dsv:{type:"method",version:"2.7",seealso:"Tutorials.gettingData",description:"Converts an array of JSON objects into a custom delimiter separated values format string.",
parameters:{items:{type:"array",description:"An array of JSON objects.",array:{arrayType:"specific",types:[{type:"object",description:"",object:{"*":"Data objects"}}]}},delimiter:{type:"string",description:"The custom delimiter character."},options:{type:"object",required:!1,description:"Options used when converting to the delimiter separated value string.",object:{map:{type:"method",description:"Function that remaps property names. Applied internally with items.map(options.map) before processing."}}}},
returns:{type:"string",description:"The resulting custom delimiter separated values string."}},fontsReady:{type:"method",version:"2.9",description:"Returns a promise indicating that all web fonts have been loaded.",parameters:{fonts:{type:"string,array",description:"Font or font list to load",array:{arrayType:"specific",types:[{description:"Font name to load",type:"string"}]}}},returns:{type:"iobj_promise",generic:[{forType:"iobj_promise",type:"any"}],description:"A promise returned when fonts are loaded."}},
ready:{type:"method",version:"2.9",description:"Returns a promise indicating that all targets have been loaded.",parameters:{"...args":{description:"Font names or/and document object"}},returns:{type:"iobj_promise",generic:[{forType:"iobj_promise",type:"any"}],description:"A promise returned when all targets have been loaded."}},defaults:{type:"method",version:"2.8",description:"A method that establishes chart option defaults that will apply to all subsequent charts. ",parameters:{config:{type:"obj_chart",
description:"Default chart options that will be applied to all subsequent charts. Passing a null value will clear all default options."}},returns:{type:"obj_chart",description:"The current default options."}}}},chart:{type:"iObject",description:"Represents a chart JS object providing methods to manipulate and analyze the chart in real-time.",iObject:{series:{type:"iobj_collectionFactory",generic:[{forType:"iobj_collectionFactory",type:"iobj_seriesCollection,iobj_series"}],description:"A collection used to get/update/set series data and options.",
example:"chart.series().points(p=>p.y>200).options({color:'red'}),",version:"2.0"},annotations:{type:"iobj_collectionFactory",generic:[{forType:"iobj_collectionFactory",type:"iobj_collection,iobj_annotation",generic:[{forType:"iobj_collection",type:"iobj_annotation"}]}],description:"A collection used to get/update/set annotations and options.",example:'chart.annotations.add( {label:{text:"labelText"}} ) - Adds an annotaton.<br/>chart.annotations().options({fill:"none"}) - Set fill for all annotations to none.',
version:"2.0"},chartAreas:{type:"iobj_collectionFactory",generic:[{forType:"iobj_collectionFactory",type:"iobj_collection,iobj_chartArea",generic:[{forType:"iobj_collection",type:"iobj_chartArea"}]}],description:"A collection used to get/update/set chartArea and options.",example:"chart.chartAreas(0) - Get the chartArea.",version:"2.0"},axes:{type:"iobj_collectionFactory",generic:[{forType:"iobj_collectionFactory",type:"iobj_axisCollection,iobj_axis"}],description:"A collection used to get and update axes on the chart.",
example:'chart.axes( { prefix: "x" } ) - Get all x axes.<br/>chart.axes( "x" ) - Get the main x axis.',version:"2.0"},legends:{type:"iobj_collectionFactory",generic:[{forType:"iobj_collectionFactory",type:"iobj_legendCollection,iobj_legend"}],description:"A collection legends on the chart.",version:"2.0"},uiItems:{type:"iobj_collectionFactory",generic:[{forType:"iobj_collectionFactory",type:"iobj_collection,iobj_uiItem",generic:[{forType:"iobj_collection",type:"iobj_uiItem"}]}],description:"A collection used to get and update UI items  on the chart.",
example:"chart.uiItems() - Get all UI Items.",version:"2.0"},destroy:{type:"method",description:"Destroy chart and release resources.",version:"1.0"},options:{type:"method",description:"Function used to get and set chart options.",version:"2.0",remarks:"With no arguments, all options are returned.",parameters:{chartOptions:{type:"obj_chart,string",description:"The setting to update on the chart.",string:{description:"Gets options of the specified property name."},required:!1},updateOptions:{type:"obj_updateOptions,bool",
version:"1.1",description:"Update options used when the chart redraws.",inline:!0,required:!1}},returns:{type:"obj_chart",description:"The collection."}},toGrid:{type:"method",version:"2.8",description:"Initialize and return a grid object that is connected to and displays chart data in the specified div element.",parameters:{targetDiv:{type:"string",description:"A string containing tokens and expression to evaluate."},options:{type:"obj_grid",description:"Grid options.",required:!1}},returns:{type:"iobj_promise",
generic:[{forType:"iobj_promise",type:"any"}],description:"Returns a new grid object promise."}},replaceTokens:{type:"method",description:"Takes a string with tokens and expressions and returns a processed string where tokens are replaced with calculated values. Tokens are evaluated based on data of all series (series Collection).",remarks:"This method can be used to populate a template string with tokens that describe the data in this chart. Label expressions also enable inline formatting.",parameters:{str:{type:"string",
description:"A string containing tokens and expression to evaluate."}},returns:{type:"string",description:"The resulting string after tokens are replaced with values and expressions are evaluated."},seealso:"Tutorials.labelExpressions|Tutorials.tokenReference:List of available label tokens.",example:"chart.replaceTokens('%sum') // returns a string with sum of chart data such as: '543'."},tokenValue:{type:"method",version:"1.1",description:"Returns the value of the specified token in it's native data type. Tokens are evaluated based on data of all series (series Collection).",
remarks:"Only one token or expression should be used with this method.",parameters:{str:{type:"string",description:"A string containing a single token to evaluate."}},returns:{type:"number,date,string,bool",description:"The value of the specified token.",number:{description:"A numeric value represented by the specified token."},date:{description:"A date value represented by the specified token."},string:{description:"A string value represented by the specified token."},bool:{description:"A bool value represented by the specified token."}},
seealso:"Tutorials.tokenReference:List of available label tokens.",example:"chart.tokenValue('%sum') // returns a number with sum of chart data such as: 543."},exportImage:{type:"method",description:"Initiates the conversion of the chart SVG to an image file.",parameters:{exportOptions:{type:"obj_exportOptions",description:"Export options."},chartOptions:{type:"obj_chart",description:"Chart settings to apply before the chart is exported.",required:!1}}},print:{type:"method",description:"Sends the chart image to the printer."},
dispose:{type:"method",description:"Removes the chart and clears its memory. This method can be used when the chart is not required or is discarded to reduce memory usage."},redraw:{type:"method",description:"Causes the chart to redraw.",remarks:"This should typically not be necessary as any updates will automatically redraw the chart. This can be used to force  chart redraw sooner than waiting for any additional data updates. The normal delay may be between 4 and 10 milliseconds.",parameters:{updateOptions:{type:"obj_updateOptions",
version:"1.1",description:"Update options used when the chart redraws.",inline:!0,required:!1}}},getSVG:{type:"method",description:"Returns an SVG image string of the chart.",parameters:{options:{type:"obj_chart",description:"Chart settings applied before the SVG is rendered.",required:!1}},returns:{type:"string",description:"A string containing the SVG content of this chart image."}},zoom:{type:"method",version:"2.1",updated:"2.6",description:"Specifies the chart zoom. Passing no parameters returns to the initial view. With calendar charts, passing a date will show the calendar item related to this date.",
parameters:{zoomConfig:{type:"obj_zoomConfig",description:"Zooming configuration."},updateOptions:{type:"obj_updateOptions",inline:!0,description:"Options used when this chart is updating.",required:!1}},seealso:"Samples.mapZoomTo",returns:{type:"bool,array",description:"Will return false if a provided point filter did not find any matches. Otherwise, the current view bbox is given.",bool:{description:"Will return false if a provided point filter did not find any matches."},array:{0:{description:"A bbox of the current view returned if zoom arguments are empty or valid.",
arrayType:"specific",types:[{name:"X",type:"number",description:"X coordinate"},{name:"Y",type:"number",description:"Y coordinate"},{name:"Width",type:"number",description:"Width of the bbox."},{name:"Height",type:"number",description:"Height of the bbox."}],example:"[5,8,9,3]"}}}},loading:{type:"method",version:"2.8",description:"Options to manipulate the chart loading animation.",parameters:{messageOrState:{type:"string,boolean",description:"A message or loading state setting."},delay:{type:"number",
inline:!0,description:"The loading animation delay.",required:!1}}},toolbar:{type:"method",hide:!0,version:"2.8",description:"Returns the toolbar object.",returns:{type:"iobj_toolbar",description:"The toobar object."}}}},point:{type:"iObject",description:"Represents a point on the chart providing properties and method that enable manipulating the point in real-time.",iObject:{chart:{type:"iobj_chart",description:"A reference to the parent chart object."},series:{type:"iobj_series",description:"The point's parent series JS object."},
color:{type:"obj_color",description:"The point's color."},name:{type:"string",description:"The point's name."},id:{type:"string",description:"The point's id that was specified or generated internally. All points will have an ID based on either of these two methods."},x:{type:"number,date,string",description:"The point's x value.",number:{description:"Numeric x value."},date:{description:"Time based x value."},string:{description:"Time based string value used with xAxis scale type set to time."}},
y:{type:"number",description:"The point's y value.",number:{description:"Numeric y value."}},z:{type:"number",description:"The point's z value.",version:"1.1"},options:{type:"method",description:"Function used to get and set series options.",version:"2.0",remarks:"With no arguments, all options are returned.",parameters:{pointOptions:{type:"obj_point,string",description:"The setting to update on the series.",string:{description:"Gets options of the specified property name."},required:!1},updateOptions:{type:"obj_updateOptions,bool",
inline:!0,description:"Options used when this series is updating.",required:!1,bool:{description:"Using false value will prevent the chart from redrawing."}}},returns:{type:"iobj_point,any",description:"Returns the point, or point options."}},remove:{type:"method",description:"Removes this point from the chart in real-time.",parameters:{updateOptions:{type:"obj_updateOptions",version:"1.1",inline:!0,description:"Options used when this point is removed.",required:!1}}},select:{type:"method",description:"Toggles or sets the select state for this point depending on the specified argument options.",
parameters:{isSelected:{type:"bool",description:"Specifies whether the point is selected. When not set, or if set with the value of undefined, the selected state toggles.",required:!1},accumulate:{type:"bool",description:"When true, the point is selected without affecting other point selection state. When false, all other points are deselected.",required:!1}}},zoomTo:{type:"method",version:"2.1",description:"Zooms this point into view. ",parameters:{updateOptions:{type:"obj_updateOptions",inline:!0,
description:"Options used when this point zoom occurs.",required:!1}}},replaceTokens:{type:"method",description:'Evaluates the specified string containing point tokens and expressions such as "%name  %yValue" against this data point and returns the result. (See token reference below for a list of available tokens)',remarks:"This method can be used to populate a template string with tokens that describe this point. Label expressions also enable inline formatting.",parameters:{str:{type:"string",description:"A string containing tokens and expression to evaluate."}},
returns:{type:"string",description:"The resulting string after tokens are replaced with values and expressions are evaluated."},seealso:"Tutorials.labelExpressions|Tutorials.tokenReference:List of available label tokens|Samples.HoverSideInfo"},tokenValue:{type:"method",version:"1.1",description:"Returns the value of the specified token associated with this data point in it's native data type. For example, if the token represents a number, the result of this function will be a number. (See token reference below for a list of available tokens)",
remarks:"Only one token or expression should be used with this method.",example:"pointObj.tokenValue('%percentOfSeries')",parameters:{str:{type:"string",description:"A string containing a single token to evaluate."}},returns:{type:"number,date,string,bool",description:"The value of the specified token.",number:{description:"A numeric value represented by the specified token."},date:{description:"A date value represented by the specified token."},string:{description:"A string value represented by the specified token."},
bool:{description:"A bool value represented by the specified token."}},seealso:"Tutorials.tokenReference:List of available label tokens"}}},series:{type:"iObject",description:"Represents a series on the chart by providing properties and methods to manipulate and measure it in real-time.",iObject:{id:{type:"string",description:"The series id that was specified or generated internally. All series will have an ID based on either of these two methods."},color:{type:"obj_color",description:"The series's color."},
name:{type:"string",description:"The series's name."},chart:{type:"iobj_chart",description:"A reference to the parent chart JS object."},visible:{type:"method",hide:!0,description:"Toggles or sets series visibility.",parameters:{visible:{type:"bool",required:!1,description:"Visibility setting."}},returns:{type:"iobj_series",description:"The returned series."}},points:{type:"iobj_collectionFactory",generic:[{forType:"iobj_collectionFactory",type:"iobj_collection,iobj_point",generic:[{forType:"iobj_collection",
type:"iobj_point"}]}],description:"A collection used to get/update/set points of this series.",example:"chart.series().points().options( { color: 'red' } )",version:"2.0"},options:{type:"method",description:"Function used to get and set series options.",version:"2.0",remarks:"With no arguments, all options are returned.",parameters:{seriesOptions:{type:"obj_series,string",description:"The setting to update on the series.",string:{description:"Gets options of the specified property name."},required:!1},
updateOptions:{type:"obj_updateOptions,bool",inline:!0,description:"Options used when this series is updating.",required:!1,bool:{description:"Using false value will prevent the chart from redrawing."}}},returns:{type:"iobj_series,any",description:"Returns the series, or series options."}},show:{type:"method",description:"Sets or toggles the visibility of this series.",parameters:{isShown:{type:"bool",description:"Specifies whether the series is visible. When not set, the visible state toggles.",
required:!1}},returns:{type:"bool",description:"Value that indicates whether the series is visible or not."}},remove:{type:"method",description:"Removes this series from the chart.",parameters:{updateOptions:{type:"obj_updateOptions",version:"1.1",inline:!0,description:"Update options used when this series is removed.",required:!1}}},select:{type:"method",description:'Sets or toggles the series "select" state.',parameters:{isSelected:{type:"bool",description:"Specifies whether the series is selected. When not set, the selected state toggles.",
required:!1}}},zoomTo:{type:"method",version:"2.1",description:"Zooms this series into view. (Mapping/Calendar)",parameters:{updateOptions:{type:"obj_updateOptions",inline:!0,description:"Options used when this series zoom occurs.",required:!1}}},replaceTokens:{type:"method",description:'Evaluates the specified string containing series tokens and expressions such as "%name  %sum" against this data series and returns the result. (See token reference below for a list of available tokens)',remarks:"This method can be used to populate a template string with tokens that describe this point. Label expressions also enable inline formatting.",
parameters:{str:{type:"string",description:"A string containing tokens and expression to evaluate."}},returns:{type:"string",description:"The resulting string after tokens are replaced with values and expressions are evaluated."},seealso:"Tutorials.labelExpressions|Tutorials.tokenReference:List of available label tokens."},tokenValue:{type:"method",version:"1.1",description:"Returns the value of the specified token associated with this data series in it's native data type. For example, if the token represents a number, the result of this function will be a number. (See token reference below for a list of available tokens)",
remarks:"Only one token or expression should be used with this method.",example:"seriesObj.tokenValue('%sum')",parameters:{str:{type:"string",description:"A string containing a single token to evaluate."}},returns:{type:"number,date,string,bool",description:"The value of the specified token.",number:{description:"A numeric value represented by the specified token."},date:{description:"A date value represented by the specified token."},string:{description:"A string value represented by the specified token."},
bool:{description:"A bool value represented by the specified token."}},seealso:"Tutorials.tokenReference:List of available label tokens"},yAt:{type:"method",version:"2.1",description:"Returns the interpolated y value based on a given x value.",seealso:"Samples.ZoomSelection",parameters:{x:{type:"string,number,date",description:"The x value to match to a y value."}},returns:{type:"number",description:"The interpolated y value.",number:{description:"A numeric value."}}}}},nest:{type:"iObject",description:"The nest object provides a mechanism to define a list of operations that can be used to arrange an array of data objects into a nested hierarchy that maps to the chart data hierarchy of series, x values, and y values. ",
seealso:"Tutorials.nesting",version:"2.7",iObject:{key:{type:"method",description:"Specifies a key by which data is grouped and nested into a data hierarchy. A single key() call will designate the property as point x values. A second key call will designate the properties as series name and point x values respectively.",version:"2.7",parameters:{iteratee:{type:"method,object,string",description:"Specifies a key name or function key getter by which data is grouped and nested.",string:{description:"A property name that is a property iteratee shorthand. The 'prop' value is equivalent to v => v.prop."},
object:{key:{type:"string",description:"A property name that is a property iteratee shorthand."},pattern:{type:"obj_calendarPattern",description:"A CalendarPattern that describes a date grouping. For example, setting 'month' will result in dates being grouped into months.",seealso:"Tutorials.calendarPatterns"},range:{type:"array",description:"When specified, these values are used to define the date grouping limits. Values outside this range are ignored.",array:{0:{arrayType:"specific",description:"Date range used by the date grouping pattern property.",
types:[{name:"start",type:"number,string,date",date:{description:"A Date object starting date."},string:{description:"Date time string parsed with Date()."},description:"The starting date."},{name:"end",type:"number,string,date",date:{description:"A Date object end date."},string:{description:"Date time string parsed with Date()."},description:"The end date."}]}}}},method:{description:"Function is invoked with each data entry to retrieve the key value and can also be used to modify the key values to implement a custom date grouping or to define another grouping like by rounding values."}}},
returns:{type:"iobj_nest",description:"The nest object instance."}},rollup:{type:"method",description:"A property name or function used to summarize a values of data entries for each resulting grouping. Using a property name will map the grouping into point y values.",version:"2.7",parameters:{iteratee:{type:"method,string",description:"Iteratee is invoked on each grouping with (collection) array of data entries.",string:{description:"String is a property iteratee shorthand where the 'prop' setting is equivalent to  v=>JSC.sum(v,e => e.prop). Provided the calculation argument is not specified or set to 'sum'"},
method:{description:"A function invoked an array of data entries for each grouping. This can be used to reduce and summarize the array of data entries into a single numeric point y value or an array of values which will be processed using the sum or specified calculation. "}},calculation:{type:"enum_calculation",required:!1,description:"The calculation applied when the rollup() call results in an array of numbers."}},returns:{type:"iobj_nest",description:"The nest object instance."}},pointRollup:{type:"method",
description:"Defines a function that returns the resulting point objects.",version:"2.7",parameters:{iteratee:{type:"method",description:"Iteratee is invoked with key and values for each data point grouping and can be used to customize how values are applied to point properties.",method:{description:"Invoked with (key:string, values:array) given the data related to each point."}}},returns:{type:"iobj_nest",description:"The nest object instance."}},series:{type:"method",version:"2.7",description:"Applies the nesting call chain on the specified data entries generating an array of series. The result can be applied to the chart series config property directly.",
parameters:{data:{type:"array",description:"An array of data entries to process.",array:{arrayType:"specific",types:[{type:"object",description:"",object:{"*":"Data objects"}}]}}},returns:{type:"array",description:"An array of series given the specified data.",array:{arrayType:"specific",types:[{type:"iobj_series"}]}}},points:{type:"method",version:"2.7",description:"Applies the nesting call chain on the specified data entries generating an array of points. Should only be used when the nesting call chain contains a single key() call which generates a single series..",
parameters:{data:{type:"array",description:"An array of data entries to process.",array:{arrayType:"specific",types:[{type:"object",description:"",object:{"*":"Data objects"}}]}}},returns:{type:"array",description:"An array of points given the specified data.",array:{arrayType:"specific",types:[{type:"iobj_point"}]}}},entries:{type:"method",version:"2.7",description:"Applies the nesting call chain on the specified data entries and returns the raw nested data without converting it to series or point configurations.",
parameters:{data:{type:"array",description:"An array of data entries to process.",array:{arrayType:"specific",types:[{type:"object",description:"",object:{"*":"Data objects"}}]}}},returns:{type:"array",description:"Direct result of the given data and nesting.",array:{arrayType:"specific",types:[{type:"iobj_legendEntry"}]}}}}},grid:{type:"iObject",version:"2.8",description:"Represents a grid JS object providing methods to manipulate the grid in real-time.",iObject:{options:{type:"method",description:"Function used to get and set chart options.",
version:"2.8",remarks:"With no arguments, all options are returned.",parameters:{gridOptions:{type:"obj_grid,string",description:"The setting to update on the chart.",string:{description:"Gets options of the specified property name."},required:!1}},returns:{type:"any",description:"The grid instance or specified grid option."}},dispose:{type:"method",version:"2.8",description:"Removes the chart and clears its memory. This method can be used when the chart is not required or is discarded to reduce memory usage."}}},
axis:{type:"iObject",description:"Represents an axis JS object providing methods to manipulate and measure the axis.",iObject:{id:{type:"string",version:"2.0",description:"A runique ID provided by user of generated randomly."},markers:{type:"iobj_collectionFactory",generic:[{forType:"iobj_collectionFactory",type:"iobj_collection,iobj_axisMarker",generic:[{forType:"iobj_collection",type:"iobj_axisMarker"}]}],description:"A collection used to get/update/set axis markers.",example:"chart.axes('x').markers.add( {value:[5,10],label:{text:\"labelText\"}} ) - Adds an axis marker.<br/>chart.axes('x').markers().options({fill:\"none\"}) - Modifies options for all markers on this axis.",
version:"2.0"},options:{type:"method",description:"Function used to get and set axis options.",version:"2.0",remarks:"With no arguments, all options are returned.",parameters:{axisOptions:{type:"obj_axis,string",description:"The setting to update on the axis.",string:{description:"Gets options of the specified property name."},required:!1},updateOptions:{type:"obj_updateOptions,bool",inline:!0,description:"Options used when this axis is updating.",required:!1,bool:{description:"Using false value will prevent the chart from redrawing."}}},
returns:{type:"any",description:"The axis instance or specified axis option."}},zoom:{type:"method",description:"Makes the axis zoom to the specified range.",remarks:"When called without arguments, the axis will zoom out.",version:"2.0",parameters:{min:{type:"number,string",description:"The minimum value of the range to zoom.",string:{description:"."},required:!1},max:{type:"number,string",description:"The maximum value of the range to zoom.",string:{description:"."},required:!1},updateOptions:{type:"obj_updateOptions",
inline:!0,description:"Options used when this axis is updating.",required:!1}}},getRange:{type:"method",description:"Gets range information of this axis.",returns:{type:"object",isInlined:!0,description:"Axis range information.",object:{min:{type:"number,date",description:"Axis minimum",number:{description:"Numeric axis minimum value."},date:{description:"Time based axis minimum value."}},max:{type:"number,date",description:"Axis maximum",number:{description:"Numeric axis maximum value."},date:{description:"Time based axis maximum value."}},
dataMin:{type:"number,date",description:"Minimum value of data on this axis.",number:{description:"Minimum numeric value of data on this axis."},date:{description:"Minimum time based value of data on this axis."}},dataMax:{type:"number,date",description:"Maximum value of data on this axis.",number:{description:"Maximum numeric value of data on this axis."},date:{description:"Maximum time based value of data on this axis."}},userMin:{type:"number,date",description:"The minimum value applied programmatically if a range was set with the setRange method.",
number:{description:"Minimum numeric value set with the setRange method."},date:{description:"Minimum time based value set with the setRange method."}},userMax:{type:"number,date",description:"The maximum value applied programmatically if a range was set with the setRange method.",number:{description:"Maximum numeric value set with the setRange method."},date:{description:"Maximum time based value set with the setRange method."}}}},remarks:"A range can be set for a category scale, however, numbers are used to represent each axis tick starting with 0.",
seealso:"Samples.AxisInteractiveExtremes"},getCategories:{type:"method",description:"When used with category axes, it returns an array of category names. Otherwise, it returns undefined",version:"2.0",returns:{type:"array",isInlined:!0,description:"Axis categories.",array:{arrayType:"specific",types:[{type:"string"}],description:"Array of categories."}}}}},chartArea:{type:"iObject",description:"A chartArea object.",version:"2.8",hide:!0,iObject:{options:{type:"method",description:"Gets or sets the specified options.",
version:"2.8",parameters:{itemOptions:{type:"obj_chartArea,string",description:"ChartArea options to set.",string:{description:"Gets the specified option."},required:!1},updateOptions:{type:"obj_updateOptions,bool",inline:!0,description:"Options used when this chartArea is updating.",required:!1,bool:{description:"Using false value will prevent the chart from redrawing."}}},returns:{type:"iobj_chartArea,any",description:"The chartArea instance or specified chartArea option."}},remove:{type:"method",
description:"Removes and destroys the chartArea.",version:"2.8"},on:{type:"method",description:"Binds an event handler to chartArea events.",version:"2.8",hide:!0,parameters:{event:{type:"string",description:"The event name."},callback:{type:"method",description:"The event handler."}}}}},annotation:{type:"iObject",description:"An annotation object.",version:"2.8",iObject:{options:{type:"method",description:"Gets or sets annotation options.",version:"2.8",parameters:{itemOptions:{type:"obj_annotation,string",
description:"Annotation options to set.",string:{description:"Gets the specified option."},required:!1},updateOptions:{type:"obj_updateOptions,bool",inline:!0,description:"Options used when this annotation is updating.",required:!1,bool:{description:"Using false value will prevent the chart from redrawing."}}},returns:{type:"iobj_annotation,any",description:"The annotation instance or specified annotation option."}},remove:{type:"method",description:"Removes and destroys the annotation.",version:"2.8"}}},
uiItem:{type:"iObject","extends":{type:"iobj_annotation"},description:"UiItem object with methods to update and remove it.",version:"2.8",iObject:{items:{type:"iobj_collectionFactory",generic:[{forType:"iobj_collectionFactory",type:"iobj_collection,iobj_uiItem",generic:[{forType:"iobj_collection",type:"iobj_uiItem"}]}],version:"2.8",description:"Child items collection."},visible:{type:"method",hide:!0,description:"Toggles or sets the item visibility.",version:"2.8",parameters:{visible:{type:"bool",
description:"The visibility setting."}}}}},toolbar:{type:"iObject","extends":{type:"iobj_uiItem"},description:"Toolbar object with methods to update and remove it.",version:"2.8"},legend:{type:"iObject",description:"Legend object with methods to update and remove it.",version:"2.8",hide:!0,iObject:{options:{type:"method",description:"Gets or sets the specified options.",version:"2.8",parameters:{itemOptions:{type:"obj_legend,string",description:"Legend options to set.",string:{description:"Gets the specified option."},
required:!1},updateOptions:{type:"obj_updateOptions,bool",inline:!0,description:"Options used when this legend is updating.",required:!1,bool:{description:"Using false value will prevent the chart from redrawing."}}},returns:{type:"iobj_legend,any",description:"The legend instance or specified legend option."}},remove:{type:"method",hide:!0,description:"Removes and destroys the legend.",version:"2.8"}}},axisTick:{type:"iObject",description:"AxisTick object with methods to update and remove it.",version:"2.8",
hide:!0,iObject:{options:{type:"method",description:"Gets or sets the specified options.",version:"2.8",parameters:{itemOptions:{type:"obj_axisTick,string",description:"axisTick options to set.",string:{description:"Gets the specified option."},required:!1},updateOptions:{type:"obj_updateOptions,bool",inline:!0,description:"Options used when this axisTick is updating.",required:!1,bool:{description:"Using false value will prevent the chart from redrawing."}}},returns:{type:"any",description:"The axisTick instance or specified legend option."}},
remove:{type:"method",description:"Removes and destroys the axisTick.",version:"2.8"}}},axisMarker:{type:"iObject",description:"AxisMarker object with methods to update and remove it.",version:"2.8",hide:!0,iObject:{options:{type:"method",description:"Gets or sets the specified options.",version:"2.8",parameters:{itemOptions:{type:"obj_axisMarker,string",description:"AxisMarker options to set.",string:{description:"Gets the specified option."},required:!1},updateOptions:{type:"obj_updateOptions,bool",
inline:!0,description:"Options used when this axisMarker is updating.",required:!1,bool:{description:"Using false value will prevent the chart from redrawing."}}},returns:{type:"iobj_axisMarker,any",description:"The axisMarker instance or specified axisMarker option."}},remove:{type:"method",description:"Removes and destroys the axisMarker.",version:"2.8"}}},legendEntry:{type:"iObject",description:"LegendEntry object with methods to update and remove it.",version:"2.8",hide:!0,iObject:{options:{type:"method",
description:"Gets or sets the specified options.",version:"2.8",parameters:{itemOptions:{type:"obj_legendEntry,string",description:"LegendEntry options to set.",string:{description:"Gets the specified option."},required:!1},updateOptions:{type:"obj_updateOptions,bool",inline:!0,description:"Options used when this legendEntry is updating.",required:!1,bool:{description:"Using false value will prevent the chart from redrawing."}}},returns:{type:"iobj_legendEntry,any",description:"The legendEntry instance or specified legendEntry option."}},
remove:{type:"method",description:"Removes and destroys the legendEntry.",version:"2.8"}}},promise:{type:"iObject",version:"2.8",generic:"T",hide:!0,description:"Initializes and returns a new instance of the Promise object.",iObject:{then:{type:"method",description:"The then() method returns a Promise. It takes up to two arguments: callback functions for the success and failure cases of the Promise.",version:"2.8",parameters:{onFulfilled:{type:"method",description:"A Function called if the Promise is fulfilled.",
required:!0},onRejected:{type:"method",description:"A Function called if the Promise is rejected.",required:!1}},returns:{type:"iobj_promise",generic:[{forType:"iobj_promise",type:"T"}],description:"A Promise object."}},"catch":{type:"method",description:"The catch() method returns a Promise and deals with rejected cases only.",version:"2.8",parameters:{onRejected:{type:"method",description:"A Function called if the Promise is rejected.",required:!0}},returns:{type:"iobj_promise",generic:[{forType:"iobj_promise",
type:"T"}],description:"A Promise object."}}}},collectionFactory:{type:"iObject",description:"Provides a mechanism to get a specific item, to create a collection of selected items, or to modify the list of items in the base collection.",version:"2.8",generic:"T,U",iObject:{"":{type:"method",description:"Creates a collection based on the specified filter or object with properties to match.",version:"2.8",example:"chart.axes({ prefix: 'x' });",parameters:{predicate:{type:"method,object",description:"Select specific items within this collection.",
inline:!0,required:!1,method:{description:"Returns a collection of items for which the function returns true.<br/>chart.series( s => s.name === 'Series 1' ) - returns series named 'Series 1'."},object:{"*":{type:"any",description:"Filters the collection down to only items with the same property values specified by this object.<br/>chart.series( { name: 'Series 1' } ) - returns series named 'Series 1'.<br/>chart.axes( { prefix: 'x' } ) - returns all x axes."}}}},returns:{type:"iobj_collection",generic:[{isResult:!0,
type:"T"}],description:"A collection of items."}}," ":{type:"method",description:"Returns a specific item of the collection based on the id, name, numeric index or other identifying strings.",version:"2.8",example:'chart.axes("x");  -> The main x axis even if multiple x axes exist',parameters:{id:{type:"string,number",description:"The identifyer of a specific item in the collection.",inline:!0,required:!0,string:{description:"Id, name or other identifier of collection item to return."},number:{description:"Index of the collection item to return."}}},
returns:{type:"any",generic:[{isResult:!0,type:"U"}],description:"A collection of items."}},add:{type:"method",description:"This collectionFactory method adds an item with the specified options and returns a new collection.",version:"2.8",example:"chart.series.add({seriesOptions})",parameters:{itemOptions:{description:"An item to add to the collection."}},returns:{type:"iobj_collection",generic:[{isResult:!0,type:"T"}],description:"A collection of items."}},splice:{type:"method",description:"Modifies the collection using an array.splice() function and returns a new collection.",
version:"2.0",example:"chart.series.splice( 1, 0, {seriesOptions})",remarks:"Not all collections support this function.",parameters:{index:{type:"number",description:"Index at which to add the item."},delCount:{type:"number",description:"Number of items to delete at this index before adding the item."},itemOptions:{type:"object",description:"The function invoked on each item to get the comparable value to sort by. The item is passed in the first argument of this function.",object:{"*":{description:"Options of the item to add."}}}},
returns:{type:"iobj_collection",generic:[{isResult:!0,type:"T"}],description:"A collection of items."}}}},collection:{type:"iObject",description:"Wraps a list of items and provides methods to simultaneously update all items in the collection.",version:"2.0",generic:"T",iObject:{find:{type:"method",description:"Iterates over items in this collection and returns the first item the predicate returns truthly for.",example:"chart.series().find( predicate )",version:"2.0",parameters:{predicate:{type:"method,object",
description:"The predicate that must match or return truthly.",object:{"*":{type:"",description:"Filters the collection down to only items with the same property values specified by this object."}},method:{description:"Returns a collection of items for which the function returns true."}}},returns:{type:"any",generic:[{isResult:!0,type:"T"}],description:"First item the predicate returns truthly for."}},each:{type:"method",description:"Iterates over each item in this collection and invokes iteratee for each item.",
example:"chart.series().each( (series) => { ... } )",version:"2.0",parameters:{iteratee:{type:"method",generic:[{isArgument:!0,type:"T"}],description:"The function invoked on each iteration.",method:{description:"The iteratee function. The item is passed in the first argument of this function."}}},returns:{type:"iobj_collection",generic:[{forType:"iobj_collection",type:"T"}],description:"Returns the collection."}},map:{type:"method",generic:[{isArgument:!0,type:"T"}],description:"Iterates over each item in this collection and returns an array of results from iteratee.",
example:"chart.series().points().map( p => p.x); ->  returns an array of x values",version:"2.1",parameters:{iteratee:{type:"method",description:"The function invoked on each iteration.",method:{description:"The iteratee function. The item is passed in the first argument of this function."}}},returns:{type:"array",description:"Array of items resulting from running iteratee on each original item.",array:{arrayType:"specific",types:[{type:"any",description:"Item of the resulting array."}]}}},sortBy:{type:"method",
description:"Creates an array of items, sorted in ascending order based on the results of running each item through each iteratee.",example:"chart.series().sortBy( s => s.name ).each(console.log)",version:"2.0",parameters:{iteratee:{type:"method",generic:[{isArgument:!0,type:"T"}],description:"The function invoked on each item to get the comparable value to sort by. ",method:{description:"The iteratee function. The item is passed in the first argument of this function."}}},returns:{type:"iobj_collection",
generic:[{forType:"iobj_collection",type:"T"}],description:"Returns the collection."}},reverse:{type:"method",description:"Creates an array of items in reverse order. ",example:"chart.series().reverse().each(console.log)",version:"2.0",returns:{type:"iobj_collection",generic:[{forType:"iobj_collection",type:"T"}],description:"Returns the collection."}},remove:{type:"method",description:"Call collection items remove method and returns current collection.",example:"chart.series().remove(false); -> Removes all series from the chart",
version:"2.8",parameters:{updateOptions:{type:"any",description:"The update options which are passed to items remove method.",required:!1}},returns:{type:"iobj_collection",generic:[{forType:"iobj_collection",type:"T"}],description:"Returns the collection."}}}},axisCollection:{type:"iObject",description:"Wraps an array of axis objects to provide a simpler way to get/set items and options.",version:"2.8","extends":{type:"iobj_collection",generic:[{forType:"iobj_collection",type:"iobj_axis"}]},iObject:{markers:{type:"iobj_collectionFactory",
generic:[{forType:"iobj_collectionFactory",type:"iobj_collection,iobj_axisMarker",generic:[{forType:"iobj_collection",type:"iobj_axisMarker"}]}],description:"Returns a collection of axisMarkes.",example:"chart.axes().markers()",version:"2.8"},ticks:{type:"iobj_collectionFactory",generic:[{forType:"iobj_collectionFactory",type:"iobj_collection,iobj_axisTick",generic:[{forType:"iobj_collection",type:"iobj_axisTick"}]}],description:"Returns a collection of axisTick objects.",example:"chart.axes().ticks()",
version:"2.8"}}},seriesCollection:{type:"iObject",description:"Wraps an array of series items to provide a simpler way to get/set items and options.",version:"2.8","extends":{type:"iobj_collection",generic:[{forType:"iobj_collection",type:"iobj_series"}]},iObject:{points:{type:"iobj_collectionFactory",generic:[{forType:"iobj_collectionFactory",type:"iobj_collection,iobj_point",generic:[{forType:"iobj_collection",type:"iobj_point"}]}],description:"Returns a collection of points.",example:"chart.series().points()",
version:"2.8"}}},legendCollection:{type:"iObject",description:"Wraps an array of legend items to provide a simpler way to get/set items and options.",version:"2.8","extends":{type:"iobj_collection",generic:[{forType:"iobj_collection",type:"iobj_legend"}]},iObject:{entries:{type:"iobj_collectionFactory",generic:[{forType:"iobj_collectionFactory",type:"iobj_collection,iobj_legendEntry",generic:[{forType:"iobj_collection",type:"iobj_legendEntry"}]}],description:"Returns a collection of legendEntry objects.",
example:"chart.legends().entries()",version:"2.8"}}}}}})();
 
/** START OF firebase **/
/*! @license Firebase v7.11.0 - License: https://www.firebase.com/terms/terms-of-service.html */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).firebase=e()}(this,function(){"use strict";!function(t){if(!t.fetch){var e="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,s="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),r="FormData"in t,i="ArrayBuffer"in t;if(i)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=function(t){return t&&DataView.prototype.isPrototypeOf(t)},u=ArrayBuffer.isView||function(t){return t&&-1<o.indexOf(Object.prototype.toString.call(t))};d.prototype.append=function(t,e){t=l(t),e=f(e);var n=this.map[t];this.map[t]=n?n+","+e:e},d.prototype.delete=function(t){delete this.map[l(t)]},d.prototype.get=function(t){return t=l(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(l(t))},d.prototype.set=function(t,e){this.map[l(t)]=f(e)},d.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},d.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),p(n)},d.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),p(e)},d.prototype.entries=function(){var n=[];return this.forEach(function(t,e){n.push([e,t])}),p(n)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries);var c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},w.call(b.prototype),w.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},E.error=function(){var t=new E(null,{status:0,statusText:""});return t.type="error",t};var h=[301,302,303,307,308];E.redirect=function(t,e){if(-1===h.indexOf(e))throw new RangeError("Invalid status code");return new E(null,{status:e,headers:{location:t}})},t.Headers=d,t.Request=b,t.Response=E,t.fetch=function(i,o){return new Promise(function(n,t){var e=new b(i,o),r=new XMLHttpRequest;r.onload=function(){var t={status:r.status,statusText:r.statusText,headers:function(t){var i=new d;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e=t.split(":"),n=e.shift().trim();if(n){var r=e.join(":").trim();i.append(n,r)}}),i}(r.getAllResponseHeaders()||"")};t.url="responseURL"in r?r.responseURL:t.headers.get("X-Request-URL");var e="response"in r?r.response:r.responseText;n(new E(e,t))},r.onerror=function(){t(new TypeError("Network request failed"))},r.ontimeout=function(){t(new TypeError("Network request failed"))},r.open(e.method,e.url,!0),"include"===e.credentials?r.withCredentials=!0:"omit"===e.credentials&&(r.withCredentials=!1),"responseType"in r&&s&&(r.responseType="blob"),e.headers.forEach(function(t,e){r.setRequestHeader(e,t)}),r.send(void 0===e._bodyInit?null:e._bodyInit)})},t.fetch.polyfill=!0}function l(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function f(t){return"string"!=typeof t&&(t=String(t)),t}function p(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function v(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function y(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function g(t){var e=new FileReader,n=y(e);return e.readAsArrayBuffer(t),n}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function w(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(s&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(r&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(i&&s&&a(t))this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(t)&&!u(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=m(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var t=v(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?v(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var t=v(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader,n=y(e);return e.readAsText(t),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}function b(t,e){var n=(e=e||{}).body;if(t instanceof b){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=function(t){var e=t.toUpperCase();return-1<c.indexOf(e)?e:t}(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function _(t){var i=new FormData;return t.trim().split("&").forEach(function(t){if(t){var e=t.split("="),n=e.shift().replace(/\+/g," "),r=e.join("=").replace(/\+/g," ");i.append(decodeURIComponent(n),decodeURIComponent(r))}}),i}function E(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:void 0);var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t,e){return t(e={exports:{}},e.exports),e.exports}function n(t){return t&&t.Math==Math&&t}function y(t){try{return!!t()}catch(t){return!0}}function g(t){return"object"==typeof t?null!==t:"function"==typeof t}function r(t){return l?u.createElement(t):{}}function d(t){if(!g(t))throw TypeError(String(t)+" is not an object");return t}function o(t,e){if(!g(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!g(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!g(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!g(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function m(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function h(e,n){try{_(w,e,n)}catch(t){w[e]=n}return n}function c(t,e){return S.call(t,e)}function a(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++C+N).toString(36)}function i(t){return c(O,t)||(A&&c(R,t)?O[t]=R[t]:O[t]=D("Symbol."+t)),O[t]}var w=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||Function("return this")(),s=!1,f=!y(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),u=w.document,l=g(u)&&g(u.createElement),p=!f&&!y(function(){return 7!=Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}),v=Object.defineProperty,b={f:f?v:function(t,e,n){if(d(t),e=o(e,!0),d(n),p)try{return v(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},_=f?function(t,e,n){return b.f(t,e,m(1,n))}:function(t,e,n){return t[e]=n,t},E="__core-js_shared__",I=w[E]||h(E,{}),T=e(function(t){(t.exports=function(t,e){return I[t]||(I[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.4",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})}),S={}.hasOwnProperty,C=0,N=Math.random(),A=!!Object.getOwnPropertySymbols&&!y(function(){return!String(Symbol())}),k=A&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,O=T("wks"),R=w.Symbol,D=k?R:R&&R.withoutSetter||a,P={};P[i("toStringTag")]="z";var x="[object z]"===String(P),L=Function.toString;"function"!=typeof I.inspectSource&&(I.inspectSource=function(t){return L.call(t)});function M(t){return W[t]||(W[t]=a(t))}var F,U,j,q=I.inspectSource,V=w.WeakMap,B="function"==typeof V&&/native code/.test(q(V)),W=T("keys"),H={},G=w.WeakMap;if(B){var z=new G,K=z.get,Q=z.has,Y=z.set;F=function(t,e){return Y.call(z,t,e),e},U=function(t){return K.call(z,t)||{}},j=function(t){return Q.call(z,t)}}else{var X=M("state");H[X]=!0,F=function(t,e){return _(t,X,e),e},U=function(t){return c(t,X)?t[X]:{}},j=function(t){return c(t,X)}}function J(t){return tt.call(t).slice(8,-1)}var $={set:F,get:U,has:j,enforce:function(t){return j(t)?U(t):F(t,{})},getterFor:function(n){return function(t){var e;if(!g(t)||(e=U(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},Z=e(function(t){var e=$.get,a=$.enforce,u=String(String).split("String");(t.exports=function(t,e,n,r){var i=!!r&&!!r.unsafe,o=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||c(n,"name")||_(n,"name",e),a(n).source=u.join("string"==typeof e?e:"")),t!==w?(i?!s&&t[e]&&(o=!0):delete t[e],o?t[e]=n:_(t,e,n)):o?t[e]=n:h(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||q(this)})}),tt={}.toString,et=i("toStringTag"),nt="Arguments"==J(function(){return arguments}()),rt=x?J:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),et))?n:nt?J(e):"Object"==(r=J(e))&&"function"==typeof e.callee?"Arguments":r},it=x?{}.toString:function(){return"[object "+rt(this)+"]"};x||Z(Object.prototype,"toString",it,{unsafe:!0});function ot(t){return isNaN(t=+t)?0:(0<t?Et:_t)(t)}function st(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function at(a){return function(t,e){var n,r,i=String(st(t)),o=ot(e),s=i.length;return o<0||s<=o?a?"":void 0:(n=i.charCodeAt(o))<55296||56319<n||o+1===s||(r=i.charCodeAt(o+1))<56320||57343<r?a?i.charAt(o):n:a?i.slice(o,o+2):r-56320+(n-55296<<10)+65536}}function ut(t){return At(st(t))}function ct(t){return"function"==typeof t?t:void 0}function ht(t,e){return arguments.length<2?ct(Rt[t])||ct(w[t]):Rt[t]&&Rt[t][e]||w[t]&&w[t][e]}function lt(t){return 0<t?Dt(ot(t),9007199254740991):0}function ft(a){return function(t,e,n){var r,i=ut(t),o=lt(i.length),s=function(t,e){var n=ot(t);return n<0?Pt(n+e,0):xt(n,e)}(n,o);if(a&&e!=e){for(;s<o;)if((r=i[s++])!=r)return!0}else for(;s<o;s++)if((a||s in i)&&i[s]===e)return a||s||0;return!a&&-1}}function pt(t,e){var n,r=ut(t),i=0,o=[];for(n in r)!c(H,n)&&c(r,n)&&o.push(n);for(;e.length>i;)c(r,n=e[i++])&&(~Lt(o,n)||o.push(n));return o}function dt(t,e){for(var n=qt(e),r=b.f,i=Ot.f,o=0;o<n.length;o++){var s=n[o];c(t,s)||r(t,s,i(e,s))}}function vt(t,e){var n=Wt[Bt(t)];return n==Gt||n!=Ht&&("function"==typeof e?y(e):!!e)}function yt(t,e){var n,r,i,o,s,a=t.target,u=t.global,c=t.stat;if(n=u?w:c?w[a]||h(a,{}):(w[a]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(s=Kt(n,r))&&s.value:n[r],!zt(u?r:a+(c?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;dt(o,i)}(t.sham||i&&i.sham)&&_(o,"sham",!0),Z(n,r,o,t)}}function gt(t){return Object(st(t))}var mt,wt,bt,_t=Math.ceil,Et=Math.floor,It={codeAt:at(!1),charAt:at(!0)},Tt={}.propertyIsEnumerable,St=Object.getOwnPropertyDescriptor,Ct={f:St&&!Tt.call({1:2},1)?function(t){var e=St(this,t);return!!e&&e.enumerable}:Tt},Nt="".split,At=y(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==J(t)?Nt.call(t,""):Object(t)}:Object,kt=Object.getOwnPropertyDescriptor,Ot={f:f?kt:function(t,e){if(t=ut(t),e=o(e,!0),p)try{return kt(t,e)}catch(t){}if(c(t,e))return m(!Ct.f.call(t,e),t[e])}},Rt=w,Dt=Math.min,Pt=Math.max,xt=Math.min,Lt={includes:ft(!0),indexOf:ft(!1)}.indexOf,Mt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ft=Mt.concat("length","prototype"),Ut={f:Object.getOwnPropertyNames||function(t){return pt(t,Ft)}},jt={f:Object.getOwnPropertySymbols},qt=ht("Reflect","ownKeys")||function(t){var e=Ut.f(d(t)),n=jt.f;return n?e.concat(n(t)):e},Vt=/#|\.prototype\./,Bt=vt.normalize=function(t){return String(t).replace(Vt,".").toLowerCase()},Wt=vt.data={},Ht=vt.NATIVE="N",Gt=vt.POLYFILL="P",zt=vt,Kt=Ot.f,Qt=!y(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Yt=M("IE_PROTO"),Xt=Object.prototype,Jt=Qt?Object.getPrototypeOf:function(t){return t=gt(t),c(t,Yt)?t[Yt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Xt:null},$t=i("iterator"),Zt=!1;[].keys&&("next"in(bt=[].keys())?(wt=Jt(Jt(bt)))!==Object.prototype&&(mt=wt):Zt=!0),null==mt&&(mt={}),c(mt,$t)||_(mt,$t,function(){return this});function te(){}function ee(t){return"<script>"+t+"</"+ue+">"}var ne,re={IteratorPrototype:mt,BUGGY_SAFARI_ITERATORS:Zt},ie=Object.keys||function(t){return pt(t,Mt)},oe=f?Object.defineProperties:function(t,e){d(t);for(var n,r=ie(e),i=r.length,o=0;o<i;)b.f(t,n=r[o++],e[n]);return t},se=ht("document","documentElement"),ae="prototype",ue="script",ce=M("IE_PROTO"),he=function(){try{ne=document.domain&&new ActiveXObject("htmlfile")}catch(t){}he=ne?function(t){t.write(ee("")),t.close();var e=t.parentWindow.Object;return t=null,e}(ne):function(){var t,e=r("iframe");return e.style.display="none",se.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(ee("document.F=Object")),t.close(),t.F}();for(var t=Mt.length;t--;)delete he[ae][Mt[t]];return he()};H[ce]=!0;function le(t,e,n){t&&!c(t=n?t:t.prototype,ge)&&ye(t,ge,{configurable:!0,value:e})}function fe(){return this}function pe(){return this}function de(t,e,n,r,i,o,s){function a(t){if(t===i&&v)return v;if(!Ee&&t in p)return p[t];switch(t){case"keys":case Te:case Se:return function(){return new n(this,t)}}return function(){return new n(this)}}!function(t,e,n){var r=e+" Iterator";t.prototype=ve(we,{next:m(1,n)}),le(t,r,!1),me[r]=fe}(n,e,r);var u,c,h,l=e+" Iterator",f=!1,p=t.prototype,d=p[Ie]||p["@@iterator"]||i&&p[i],v=!Ee&&d||a(i),y="Array"==e&&p.entries||d;if(y&&(u=Jt(y.call(new t)),_e!==Object.prototype&&u.next&&(Jt(u)!==_e&&(be?be(u,_e):"function"!=typeof u[Ie]&&_(u,Ie,pe)),le(u,l,!0))),i==Te&&d&&d.name!==Te&&(f=!0,v=function(){return d.call(this)}),p[Ie]!==v&&_(p,Ie,v),me[e]=v,i)if(c={values:a(Te),keys:o?v:a("keys"),entries:a(Se)},s)for(h in c)!Ee&&!f&&h in p||Z(p,h,c[h]);else yt({target:e,proto:!0,forced:Ee||f},c);return c}var ve=Object.create||function(t,e){var n;return null!==t?(te[ae]=d(t),n=new te,te[ae]=null,n[ce]=t):n=he(),void 0===e?n:oe(n,e)},ye=b.f,ge=i("toStringTag"),me={},we=re.IteratorPrototype,be=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return d(t),function(t){if(!g(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(e),r?n.call(t,e):t.__proto__=e,t}}():void 0),_e=re.IteratorPrototype,Ee=re.BUGGY_SAFARI_ITERATORS,Ie=i("iterator"),Te="values",Se="entries",Ce=It.charAt,Ne="String Iterator",Ae=$.set,ke=$.getterFor(Ne);de(String,"String",function(t){Ae(this,{type:Ne,string:String(t),index:0})},function(){var t,e=ke(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=Ce(n,r),e.index+=t.length,{value:t,done:!1})});var Oe={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Re=i("unscopables"),De=Array.prototype;null==De[Re]&&b.f(De,Re,{configurable:!0,value:ve(null)});function Pe(t){De[Re][t]=!0}var xe="Array Iterator",Le=$.set,Me=$.getterFor(xe),Fe=de(Array,"Array",function(t,e){Le(this,{type:xe,target:ut(t),index:0,kind:e})},function(){var t=Me(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");me.Arguments=me.Array,Pe("keys"),Pe("values"),Pe("entries");var Ue=i("iterator"),je=i("toStringTag"),qe=Fe.values;for(var Ve in Oe){var Be=w[Ve],We=Be&&Be.prototype;if(We){if(We[Ue]!==qe)try{_(We,Ue,qe)}catch(nu){We[Ue]=qe}if(We[je]||_(We,je,Ve),Oe[Ve])for(var He in Fe)if(We[He]!==Fe[He])try{_(We,He,Fe[He])}catch(nu){We[He]=Fe[He]}}}function Ge(t,e,n){for(var r in e)Z(t,r,e[r],n);return t}function ze(t){var e=ht(t),n=b.f;f&&e&&!e[tn]&&n(e,tn,{configurable:!0,get:function(){return this}})}function Ke(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function Qe(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}function Ye(t){return void 0!==t&&(me.Array===t||nn[en]===t)}function Xe(r,i,t){if(Ke(r),void 0===i)return r;switch(t){case 0:return function(){return r.call(i)};case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}function Je(t){if(null!=t)return t[rn]||t["@@iterator"]||me[rt(t)]}function $e(e,t,n,r){try{return r?t(d(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&d(i.call(e)),t}}var Ze=w.Promise,tn=i("species"),en=i("iterator"),nn=Array.prototype,rn=i("iterator"),on=e(function(t){function p(t,e){this.stopped=t,this.result=e}(t.exports=function(t,e,n,r,i){var o,s,a,u,c,h,l,f=Xe(e,n,r?2:1);if(i)o=t;else{if("function"!=typeof(s=Je(t)))throw TypeError("Target is not iterable");if(Ye(s)){for(a=0,u=lt(t.length);a<u;a++)if((c=r?f(d(l=t[a])[0],l[1]):f(t[a]))&&c instanceof p)return c;return new p(!1)}o=s.call(t)}for(h=o.next;!(l=h.call(o)).done;)if("object"==typeof(c=$e(o,f,l.value,r))&&c&&c instanceof p)return c;return new p(!1)}).stop=function(t){return new p(!0,t)}}),sn=i("iterator"),an=!1;try{var un=0,cn={next:function(){return{done:!!un++}},return:function(){an=!0}};cn[sn]=function(){return this},Array.from(cn,function(){throw 2})}catch(nu){}function hn(t,e){if(!e&&!an)return!1;var n=!1;try{var r={};r[sn]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}function ln(t,e){var n,r=d(t).constructor;return void 0===r||null==(n=d(r)[wn])?e:Ke(n)}function fn(t){if(kn.hasOwnProperty(t)){var e=kn[t];delete kn[t],e()}}function pn(t){return function(){fn(t)}}function dn(t){fn(t.data)}function vn(t){w.postMessage(t+"",En.protocol+"//"+En.host)}var yn,gn,mn,wn=i("species"),bn=ht("navigator","userAgent")||"",_n=/(iphone|ipod|ipad).*applewebkit/i.test(bn),En=w.location,In=w.setImmediate,Tn=w.clearImmediate,Sn=w.process,Cn=w.MessageChannel,Nn=w.Dispatch,An=0,kn={},On="onreadystatechange";In&&Tn||(In=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return kn[++An]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},yn(An),An},Tn=function(t){delete kn[t]},"process"==J(Sn)?yn=function(t){Sn.nextTick(pn(t))}:Nn&&Nn.now?yn=function(t){Nn.now(pn(t))}:Cn&&!_n?(mn=(gn=new Cn).port2,gn.port1.onmessage=dn,yn=Xe(mn.postMessage,mn,1)):!w.addEventListener||"function"!=typeof postMessage||w.importScripts||y(vn)?yn=On in r("script")?function(t){se.appendChild(r("script"))[On]=function(){se.removeChild(this),fn(t)}}:function(t){setTimeout(pn(t),0)}:(yn=vn,w.addEventListener("message",dn,!1)));var Rn,Dn,Pn,xn,Ln,Mn,Fn,Un,jn={set:In,clear:Tn},qn=Ot.f,Vn=jn.set,Bn=w.MutationObserver||w.WebKitMutationObserver,Wn=w.process,Hn=w.Promise,Gn="process"==J(Wn),zn=qn(w,"queueMicrotask"),Kn=zn&&zn.value;Kn||(Rn=function(){var t,e;for(Gn&&(t=Wn.domain)&&t.exit();Dn;){e=Dn.fn,Dn=Dn.next;try{e()}catch(t){throw Dn?xn():Pn=void 0,t}}Pn=void 0,t&&t.enter()},xn=Gn?function(){Wn.nextTick(Rn)}:Bn&&!_n?(Ln=!0,Mn=document.createTextNode(""),new Bn(Rn).observe(Mn,{characterData:!0}),function(){Mn.data=Ln=!Ln}):Hn&&Hn.resolve?(Fn=Hn.resolve(void 0),Un=Fn.then,function(){Un.call(Fn,Rn)}):function(){Vn.call(w,Rn)});function Qn(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=Ke(n),this.reject=Ke(r)}function Yn(t,e){if(d(t),g(e)&&e.constructor===t)return e;var n=tr.f(t);return(0,n.resolve)(e),n.promise}function Xn(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}var Jn,$n,Zn=Kn||function(t){var e={fn:t,next:void 0};Pn&&(Pn.next=e),Dn||(Dn=e,xn()),Pn=e},tr={f:function(t){return new Qn(t)}},er=w.process,nr=er&&er.versions,rr=nr&&nr.v8;rr?$n=(Jn=rr.split("."))[0]+Jn[1]:bn&&(!(Jn=bn.match(/Edge\/(\d+)/))||74<=Jn[1])&&(Jn=bn.match(/Chrome\/(\d+)/))&&($n=Jn[1]);function ir(t){var e;return!(!g(t)||"function"!=typeof(e=t.then))&&e}function or(l,f,p){if(!f.notified){f.notified=!0;var d=f.reactions;Zn(function(){for(var t=f.value,e=1==f.state,n=0;d.length>n;){var r,i,o,s=d[n++],a=e?s.ok:s.fail,u=s.resolve,c=s.reject,h=s.domain;try{a?(e||(2===f.rejection&&xr(l,f),f.rejection=1),!0===a?r=t:(h&&h.enter(),r=a(t),h&&(h.exit(),o=!0)),r===s.promise?c(_r("Promise-chain cycle")):(i=ir(r))?i.call(r,u,c):u(r)):c(t)}catch(t){h&&!o&&h.exit(),c(t)}}f.reactions=[],f.notified=!1,p&&!f.rejection&&Dr(l,f)})}}function sr(t,e,n){var r,i;Ar?((r=Er.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),w.dispatchEvent(r)):r={promise:e,reason:n},(i=w["on"+t])?i(r):t===kr&&function(t,e){var n=w.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function ar(e,n,r,i){return function(t){e(n,r,t,i)}}function ur(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,or(t,e,!0))}var cr,hr,lr,fr,pr=$n&&+$n,dr=jn.set,vr=i("species"),yr="Promise",gr=$.get,mr=$.set,wr=$.getterFor(yr),br=Ze,_r=w.TypeError,Er=w.document,Ir=w.process,Tr=ht("fetch"),Sr=tr.f,Cr=Sr,Nr="process"==J(Ir),Ar=!!(Er&&Er.createEvent&&w.dispatchEvent),kr="unhandledrejection",Or=zt(yr,function(){if(!(q(br)!==String(br))){if(66===pr)return!0;if(!Nr&&"function"!=typeof PromiseRejectionEvent)return!0}if(51<=pr&&/native code/.test(br))return!1;function t(t){t(function(){},function(){})}var e=br.resolve(1);return(e.constructor={})[vr]=t,!(e.then(function(){})instanceof t)}),Rr=Or||!hn(function(t){br.all(t).catch(function(){})}),Dr=function(n,r){dr.call(w,function(){var t,e=r.value;if(Pr(r)&&(t=Xn(function(){Nr?Ir.emit("unhandledRejection",e,n):sr(kr,n,e)}),r.rejection=Nr||Pr(r)?2:1,t.error))throw t.value})},Pr=function(t){return 1!==t.rejection&&!t.parent},xr=function(t,e){dr.call(w,function(){Nr?Ir.emit("rejectionHandled",t):sr("rejectionhandled",t,e.value)})},Lr=function(n,r,t,e){if(!r.done){r.done=!0,e&&(r=e);try{if(n===t)throw _r("Promise can't be resolved itself");var i=ir(t);i?Zn(function(){var e={done:!1};try{i.call(t,ar(Lr,n,e,r),ar(ur,n,e,r))}catch(t){ur(n,e,t,r)}}):(r.value=t,r.state=1,or(n,r,!1))}catch(t){ur(n,{done:!1},t,r)}}};Or&&(br=function(t){Qe(this,br,yr),Ke(t),cr.call(this);var e=gr(this);try{t(ar(Lr,this,e),ar(ur,this,e))}catch(t){ur(this,e,t)}},(cr=function(t){mr(this,{type:yr,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Ge(br.prototype,{then:function(t,e){var n=wr(this),r=Sr(ln(this,br));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Nr?Ir.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&or(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),hr=function(){var t=new cr,e=gr(t);this.promise=t,this.resolve=ar(Lr,t,e),this.reject=ar(ur,t,e)},tr.f=Sr=function(t){return t===br||t===lr?new hr(t):Cr(t)},"function"==typeof Ze&&(fr=Ze.prototype.then,Z(Ze.prototype,"then",function(t,e){var n=this;return new br(function(t,e){fr.call(n,t,e)}).then(t,e)},{unsafe:!0}),"function"==typeof Tr&&yt({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return Yn(br,Tr.apply(w,arguments))}}))),yt({global:!0,wrap:!0,forced:Or},{Promise:br}),le(br,yr,!1),ze(yr),lr=ht(yr),yt({target:yr,stat:!0,forced:Or},{reject:function(t){var e=Sr(this);return e.reject.call(void 0,t),e.promise}}),yt({target:yr,stat:!0,forced:Or},{resolve:function(t){return Yn(this,t)}}),yt({target:yr,stat:!0,forced:Rr},{all:function(t){var a=this,e=Sr(a),u=e.resolve,c=e.reject,n=Xn(function(){var r=Ke(a.resolve),i=[],o=0,s=1;on(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]=t,--s||u(i))},c)}),--s||u(i)});return n.error&&c(n.value),e.promise},race:function(t){var n=this,r=Sr(n),i=r.reject,e=Xn(function(){var e=Ke(n.resolve);on(t,function(t){e.call(n,t).then(r.resolve,i)})});return e.error&&i(e.value),r.promise}}),yt({target:"Promise",stat:!0},{allSettled:function(t){var a=this,e=tr.f(a),u=e.resolve,n=e.reject,r=Xn(function(){var r=Ke(a.resolve),i=[],o=0,s=1;on(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]={status:"fulfilled",value:t},--s||u(i))},function(t){n||(n=!0,i[e]={status:"rejected",reason:t},--s||u(i))})}),--s||u(i)});return r.error&&n(r.value),e.promise}});var Mr=!!Ze&&y(function(){Ze.prototype.finally.call({then:function(){}},function(){})});yt({target:"Promise",proto:!0,real:!0,forced:Mr},{finally:function(e){var n=ln(this,ht("Promise")),t="function"==typeof e;return this.then(t?function(t){return Yn(n,e()).then(function(){return t})}:e,t?function(t){return Yn(n,e()).then(function(){throw t})}:e)}}),"function"!=typeof Ze||Ze.prototype.finally||Z(Ze.prototype,"finally",ht("Promise").prototype.finally);Rt.Promise;var Fr=$.set,Ur=$.getterFor("AggregateError"),jr=function(t,e){var n=this;if(!(n instanceof jr))return new jr(t,e);be&&(n=be(new Error(e),Jt(n)));var r=[];return on(t,r.push,r),f?Fr(n,{errors:r,type:"AggregateError"}):n.errors=r,void 0!==e&&_(n,"message",String(e)),n};jr.prototype=ve(Error.prototype,{constructor:m(5,jr),message:m(5,""),name:m(5,"AggregateError")}),f&&b.f(jr.prototype,"errors",{get:function(){return Ur(this).errors},configurable:!0}),yt({global:!0},{AggregateError:jr}),yt({target:"Promise",stat:!0},{try:function(t){var e=tr.f(this),n=Xn(t);return(n.error?e.reject:e.resolve)(n.value),e.promise}});var qr="No one promise resolved";yt({target:"Promise",stat:!0},{any:function(t){var u=this,e=tr.f(u),c=e.resolve,h=e.reject,n=Xn(function(){var r=Ke(u.resolve),i=[],o=0,s=1,a=!1;on(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(u,t).then(function(t){n||a||(a=!0,c(t))},function(t){n||a||(n=!0,i[e]=t,--s||h(new(ht("AggregateError"))(i,qr)))})}),--s||h(new(ht("AggregateError"))(i,qr))});return n.error&&h(n.value),e.promise}});function Vr(t,e){var n;return Gr(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Gr(n.prototype)?g(n)&&null===(n=n[zr])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}function Br(p){var d=1==p,v=2==p,y=3==p,g=4==p,m=6==p,w=5==p||m;return function(t,e,n,r){for(var i,o,s=gt(t),a=At(s),u=Xe(e,n,3),c=lt(a.length),h=0,l=r||Vr,f=d?l(t,c):v?l(t,0):void 0;h<c;h++)if((w||h in a)&&(o=u(i=a[h],h,s),p))if(d)f[h]=o;else if(o)switch(p){case 3:return!0;case 5:return i;case 6:return h;case 2:Kr.call(f,i)}else if(g)return!1;return m?-1:y||g?g:f}}function Wr(t){throw t}function Hr(t,e){if(c(Xr,t))return Xr[t];var n=[][t],r=!!c(e=e||{},"ACCESSORS")&&e.ACCESSORS,i=c(e,0)?e[0]:Wr,o=c(e,1)?e[1]:void 0;return Xr[t]=!!n&&!y(function(){if(r&&!f)return!0;var t={length:-1};r?Yr(t,1,{enumerable:!0,get:Wr}):t[1]=1,n.call(t,i,o)})}var Gr=Array.isArray||function(t){return"Array"==J(t)},zr=i("species"),Kr=[].push,Qr={forEach:Br(0),map:Br(1),filter:Br(2),some:Br(3),every:Br(4),find:Br(5),findIndex:Br(6)},Yr=Object.defineProperty,Xr={},Jr=Qr.find,$r="find",Zr=!0,ti=Hr($r);$r in[]&&Array(1)[$r](function(){Zr=!1}),yt({target:"Array",proto:!0,forced:Zr||!ti},{find:function(t,e){return Jr(this,t,1<arguments.length?e:void 0)}}),Pe($r);function ei(t,e,n){return Xe(ni,w[t].prototype[e],n)}var ni=Function.call,ri=(ei("Array","find"),Qr.findIndex),ii="findIndex",oi=!0,si=Hr(ii);ii in[]&&Array(1)[ii](function(){oi=!1}),yt({target:"Array",proto:!0,forced:oi||!si},{findIndex:function(t,e){return ri(this,t,1<arguments.length?e:void 0)}}),Pe(ii);function ai(t,e,n){var r=o(e);r in t?b.f(t,r,m(0,n)):t[r]=n}ei("Array","findIndex");var ui=!hn(function(t){Array.from(t)});yt({target:"Array",stat:!0,forced:ui},{from:function(t,e,n){var r,i,o,s,a,u,c=gt(t),h="function"==typeof this?this:Array,l=arguments.length,f=1<l?e:void 0,p=void 0!==f,d=Je(c),v=0;if(p&&(f=Xe(f,2<l?n:void 0,2)),null==d||h==Array&&Ye(d))for(i=new h(r=lt(c.length));v<r;v++)u=p?f(c[v],v):c[v],ai(i,v,u);else for(a=(s=d.call(c)).next,i=new h;!(o=a.call(s)).done;v++)u=p?$e(s,f,[o.value,v],!0):o.value,ai(i,v,u);return i.length=v,i}});Rt.Array.from;var ci,hi,li=Qr.some,fi=!!(hi=[]["some"])&&y(function(){hi.call(null,ci||function(){throw 1},1)}),pi=Hr("some");yt({target:"Array",proto:!0,forced:!fi||!pi},{some:function(t,e){return li(this,t,1<arguments.length?e:void 0)}});ei("Array","some");function di(t){return g(t)&&c(Ai,rt(t))}var vi,yi="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,gi=b.f,mi=w.Int8Array,wi=mi&&mi.prototype,bi=w.Uint8ClampedArray,_i=bi&&bi.prototype,Ei=mi&&Jt(mi),Ii=wi&&Jt(wi),Ti=Object.prototype,Si=(Ti.isPrototypeOf,i("toStringTag")),Ci=a("TYPED_ARRAY_TAG"),Ni=yi&&!!be&&"Opera"!==rt(w.opera),Ai={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(vi in Ai)w[vi]||(Ni=!1);if((!Ni||"function"!=typeof Ei||Ei===Function.prototype)&&(Ei=function(){throw TypeError("Incorrect invocation")},Ni))for(vi in Ai)w[vi]&&be(w[vi],Ei);if((!Ni||!Ii||Ii===Ti)&&(Ii=Ei.prototype,Ni))for(vi in Ai)w[vi]&&be(w[vi].prototype,Ii);if(Ni&&Jt(_i)!==Ii&&be(_i,Ii),f&&!c(Ii,Si))for(vi in!0,gi(Ii,Si,{get:function(){return g(this)?this[Ci]:void 0}}),Ai)w[vi]&&_(w[vi],Ci,vi);function ki(){return xi.call(Fi(this))}var Oi=function(t){if(di(t))return t;throw TypeError("Target is not a typed array")},Ri=function(t,e,n){if(f){if(n)for(var r in Ai){var i=w[r];i&&c(i.prototype,t)&&delete i.prototype[t]}Ii[t]&&!n||Z(Ii,t,n?e:Ni&&wi[t]||e)}},Di=i("iterator"),Pi=w.Uint8Array,xi=Fe.values,Li=Fe.keys,Mi=Fe.entries,Fi=Oi,Ui=Ri,ji=Pi&&Pi.prototype[Di],qi=!!ji&&("values"==ji.name||null==ji.name);Ui("entries",function(){return Mi.call(Fi(this))}),Ui("keys",function(){return Li.call(Fi(this))}),Ui("values",ki,!qi),Ui(Di,ki,!qi);var Vi=Object.assign,Bi=Object.defineProperty,Wi=!Vi||y(function(){if(f&&1!==Vi({b:1},Vi(Bi({},"a",{enumerable:!0,get:function(){Bi(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=Vi({},t)[n]||ie(Vi({},e)).join("")!=r})?function(t,e){for(var n=gt(t),r=arguments.length,i=1,o=jt.f,s=Ct.f;i<r;)for(var a,u=At(arguments[i++]),c=o?ie(u).concat(o(u)):ie(u),h=c.length,l=0;l<h;)a=c[l++],f&&!s.call(u,a)||(n[a]=u[a]);return n}:Vi;yt({target:"Object",stat:!0,forced:Object.assign!==Wi},{assign:Wi});Rt.Object.assign;function Hi(a){return function(t){for(var e,n=ut(t),r=ie(n),i=r.length,o=0,s=[];o<i;)e=r[o++],f&&!Gi.call(n,e)||s.push(a?[e,n[e]]:n[e]);return s}}var Gi=Ct.f,zi={entries:Hi(!0),values:Hi(!1)},Ki=zi.entries;yt({target:"Object",stat:!0},{entries:function(t){return Ki(t)}});Rt.Object.entries;var Qi=zi.values;yt({target:"Object",stat:!0},{values:function(t){return Qi(t)}});Rt.Object.values;function Yi(t){if(function(t){var e;return g(t)&&(void 0!==(e=t[Ji])?!!e:"RegExp"==J(t))}(t))throw TypeError("The method doesn't accept regular expressions");return t}function Xi(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[$i]=!1,"/./"[e](n)}catch(t){}}return!1}var Ji=i("match"),$i=i("match");yt({target:"String",proto:!0,forced:!Xi("includes")},{includes:function(t,e){return!!~String(st(this)).indexOf(Yi(t),1<arguments.length?e:void 0)}});ei("String","includes");var Zi,to=Ot.f,eo="".startsWith,no=Math.min,ro=Xi("startsWith"),io=!(ro||(!(Zi=to(String.prototype,"startsWith"))||Zi.writable));yt({target:"String",proto:!0,forced:!io&&!ro},{startsWith:function(t,e){var n=String(st(this));Yi(t);var r=lt(no(1<arguments.length?e:void 0,n.length)),i=String(t);return eo?eo.call(n,i,r):n.slice(r,r+i.length)===i}});ei("String","startsWith");yt({target:"String",proto:!0},{repeat:"".repeat||function(t){var e=String(st(this)),n="",r=ot(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}});ei("String","repeat");function oo(t){if(!g(t))return!1;var e=t[uo];return void 0!==e?!!e:Gr(t)}var so,ao=i("species"),uo=i("isConcatSpreadable"),co=9007199254740991,ho="Maximum allowed index exceeded",lo=51<=pr||!y(function(){var t=[];return t[uo]=!1,t.concat()[0]!==t}),fo=(so="concat",51<=pr||!y(function(){var t=[];return(t.constructor={})[ao]=function(){return{foo:1}},1!==t[so](Boolean).foo}));yt({target:"Array",proto:!0,forced:!lo||!fo},{concat:function(t){var e,n,r,i,o,s=gt(this),a=Vr(s,0),u=0;for(e=-1,r=arguments.length;e<r;e++)if(oo(o=-1===e?s:arguments[e])){if(i=lt(o.length),co<u+i)throw TypeError(ho);for(n=0;n<i;n++,u++)n in o&&ai(a,u,o[n])}else{if(co<=u)throw TypeError(ho);ai(a,u++,o)}return a.length=u,a}});function po(t){var e=Rt.Symbol||(Rt.Symbol={});c(e,t)||To(e,t,{value:Io.f(t)})}function vo(t,e){var n=jo[t]=ve(Po[Ao]);return Oo(n,{type:No,tag:t,description:e}),f||(n.description=e),n}function yo(e,t){d(e);var n=ut(t),r=ie(n).concat(Xo(n));return So(r,function(t){f&&!Yo.call(n,t)||Qo(e,t,n[t])}),e}function go(t,e){var n=ut(t),r=o(e,!0);if(n!==Do||!c(jo,r)||c(qo,r)){var i=Lo(n,r);return!i||!c(jo,r)||c(n,Co)&&n[Co][r]||(i.enumerable=!0),i}}function mo(t){var e=Fo(ut(t)),n=[];return So(e,function(t){c(jo,t)||c(H,t)||n.push(t)}),n}var wo=Ut.f,bo={}.toString,_o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Eo={f:function(t){return _o&&"[object Window]"==bo.call(t)?function(t){try{return wo(t)}catch(t){return _o.slice()}}(t):wo(ut(t))}},Io={f:i},To=b.f,So=Qr.forEach,Co=M("hidden"),No="Symbol",Ao="prototype",ko=i("toPrimitive"),Oo=$.set,Ro=$.getterFor(No),Do=Object[Ao],Po=w.Symbol,xo=ht("JSON","stringify"),Lo=Ot.f,Mo=b.f,Fo=Eo.f,Uo=Ct.f,jo=T("symbols"),qo=T("op-symbols"),Vo=T("string-to-symbol-registry"),Bo=T("symbol-to-string-registry"),Wo=T("wks"),Ho=w.QObject,Go=!Ho||!Ho[Ao]||!Ho[Ao].findChild,zo=f&&y(function(){return 7!=ve(Mo({},"a",{get:function(){return Mo(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=Lo(Do,e);r&&delete Do[e],Mo(t,e,n),r&&t!==Do&&Mo(Do,e,r)}:Mo,Ko=k?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof Po},Qo=function(t,e,n){t===Do&&Qo(qo,e,n),d(t);var r=o(e,!0);return d(n),c(jo,r)?(n.enumerable?(c(t,Co)&&t[Co][r]&&(t[Co][r]=!1),n=ve(n,{enumerable:m(0,!1)})):(c(t,Co)||Mo(t,Co,m(1,{})),t[Co][r]=!0),zo(t,r,n)):Mo(t,r,n)},Yo=function(t){var e=o(t,!0),n=Uo.call(this,e);return!(this===Do&&c(jo,e)&&!c(qo,e))&&(!(n||!c(this,e)||!c(jo,e)||c(this,Co)&&this[Co][e])||n)},Xo=function(t){var e=t===Do,n=Fo(e?qo:ut(t)),r=[];return So(n,function(t){!c(jo,t)||e&&!c(Do,t)||r.push(jo[t])}),r};if(A||(Z((Po=function(t){if(this instanceof Po)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==t?String(t):void 0,n=a(e),r=function(t){this===Do&&r.call(qo,t),c(this,Co)&&c(this[Co],n)&&(this[Co][n]=!1),zo(this,n,m(1,t))};return f&&Go&&zo(Do,n,{configurable:!0,set:r}),vo(n,e)})[Ao],"toString",function(){return Ro(this).tag}),Z(Po,"withoutSetter",function(t){return vo(a(t),t)}),Ct.f=Yo,b.f=Qo,Ot.f=go,Ut.f=Eo.f=mo,jt.f=Xo,Io.f=function(t){return vo(i(t),t)},f&&(Mo(Po[Ao],"description",{configurable:!0,get:function(){return Ro(this).description}}),Z(Do,"propertyIsEnumerable",Yo,{unsafe:!0}))),yt({global:!0,wrap:!0,forced:!A,sham:!A},{Symbol:Po}),So(ie(Wo),function(t){po(t)}),yt({target:No,stat:!0,forced:!A},{for:function(t){var e=String(t);if(c(Vo,e))return Vo[e];var n=Po(e);return Vo[e]=n,Bo[n]=e,n},keyFor:function(t){if(!Ko(t))throw TypeError(t+" is not a symbol");if(c(Bo,t))return Bo[t]},useSetter:function(){Go=!0},useSimple:function(){Go=!1}}),yt({target:"Object",stat:!0,forced:!A,sham:!f},{create:function(t,e){return void 0===e?ve(t):yo(ve(t),e)},defineProperty:Qo,defineProperties:yo,getOwnPropertyDescriptor:go}),yt({target:"Object",stat:!0,forced:!A},{getOwnPropertyNames:mo,getOwnPropertySymbols:Xo}),yt({target:"Object",stat:!0,forced:y(function(){jt.f(1)})},{getOwnPropertySymbols:function(t){return jt.f(gt(t))}}),xo){var Jo=!A||y(function(){var t=Po();return"[null]"!=xo([t])||"{}"!=xo({a:t})||"{}"!=xo(Object(t))});yt({target:"JSON",stat:!0,forced:Jo},{stringify:function(t,e,n){for(var r,i=[t],o=1;o<arguments.length;)i.push(arguments[o++]);if((g(r=e)||void 0!==t)&&!Ko(t))return Gr(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!Ko(e))return e}),i[1]=e,xo.apply(null,i)}})}Po[Ao][ko]||_(Po[Ao],ko,Po[Ao].valueOf),le(Po,No),H[Co]=!0,po("asyncIterator");var $o=b.f,Zo=w.Symbol;if(!(!f||"function"!=typeof Zo||"description"in Zo.prototype&&void 0===Zo().description)){var ts={},es=function(t){var e=arguments.length<1||void 0===t?void 0:String(t),n=this instanceof es?new Zo(e):void 0===e?Zo():Zo(e);return""===e&&(ts[n]=!0),n};dt(es,Zo);var ns=es.prototype=Zo.prototype;ns.constructor=es;var rs=ns.toString,is="Symbol(test)"==String(Zo("test")),os=/^Symbol\((.*)\)[^)]+$/;$o(ns,"description",{configurable:!0,get:function(){var t=g(this)?this.valueOf():this,e=rs.call(t);if(c(ts,t))return"";var n=is?e.slice(7,-1):e.replace(os,"$1");return""===n?void 0:n}}),yt({global:!0,forced:!0},{Symbol:es})}po("hasInstance"),po("isConcatSpreadable"),po("iterator"),po("match"),po("matchAll"),po("replace"),po("search"),po("species"),po("split"),po("toPrimitive"),po("toStringTag"),po("unscopables"),le(Math,"Math",!0),le(w.JSON,"JSON",!0);Rt.Symbol;po("asyncDispose"),po("dispose"),po("observable"),po("patternMatch"),po("replaceAll");Io.f("iterator");function ss(r,t,e){function n(t){var n=u[t];Z(u,t,"add"==t?function(t){return n.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(o&&!g(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!g(t)?void 0:n.call(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!g(t))&&n.call(this,0===t?0:t)}:function(t,e){return n.call(this,0===t?0:t,e),this})}var i=-1!==r.indexOf("Map"),o=-1!==r.indexOf("Weak"),s=i?"set":"add",a=w[r],u=a&&a.prototype,c=a,h={};if(zt(r,"function"!=typeof a||!(o||u.forEach&&!y(function(){(new a).entries().next()}))))c=e.getConstructor(t,r,i,s),cs.REQUIRED=!0;else if(zt(r,!0)){var l=new c,f=l[s](o?{}:-0,1)!=l,p=y(function(){l.has(1)}),d=hn(function(t){new a(t)}),v=!o&&y(function(){for(var t=new a,e=5;e--;)t[s](e,e);return!t.has(-0)});d||(((c=t(function(t,e){Qe(t,c,r);var n=function(t,e,n){var r,i;return be&&"function"==typeof(r=e.constructor)&&r!==n&&g(i=r.prototype)&&i!==n.prototype&&be(t,i),t}(new a,t,c);return null!=e&&on(e,n[s],n,i),n})).prototype=u).constructor=c),(p||v)&&(n("delete"),n("has"),i&&n("get")),(v||f)&&n(s),o&&u.clear&&delete u.clear}return h[r]=c,yt({global:!0,forced:c!=a},h),le(c,r),o||e.setStrong(c,r,i),c}function as(t,e,n){var r,i,o,s,a=arguments.length,u=1<a?e:void 0;return Ke(this),(r=void 0!==u)&&Ke(u),null==t?new this:(i=[],r?(o=0,s=Xe(u,2<a?n:void 0,2),on(t,function(t){i.push(s(t,o++))})):on(t,i.push,i),new this(i))}var us=!y(function(){return Object.isExtensible(Object.preventExtensions({}))}),cs=e(function(t){function n(t){e(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var e=b.f,r=a("meta"),i=0,o=Object.isExtensible||function(){return!0},s=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!g(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!c(t,r)){if(!o(t))return"F";if(!e)return"E";n(t)}return t[r].objectID},getWeakData:function(t,e){if(!c(t,r)){if(!o(t))return!0;if(!e)return!1;n(t)}return t[r].weakData},onFreeze:function(t){return us&&s.REQUIRED&&o(t)&&!c(t,r)&&n(t),t}};H[r]=!0}),hs=(cs.REQUIRED,cs.fastKey,cs.getWeakData,cs.onFreeze,b.f),ls=cs.fastKey,fs=$.set,ps=$.getterFor,ds={getConstructor:function(t,n,r,i){function o(t,e,n){var r,i,o=a(t),s=u(t,e);return s?s.value=n:(o.last=s={index:i=ls(e,!0),key:e,value:n,previous:r=o.last,next:void 0,removed:!1},o.first||(o.first=s),r&&(r.next=s),f?o.size++:t.size++,"F"!==i&&(o.index[i]=s)),t}var s=t(function(t,e){Qe(t,s,n),fs(t,{type:n,index:ve(null),first:void 0,last:void 0,size:0}),f||(t.size=0),null!=e&&on(e,t[i],t,r)}),a=ps(n),u=function(t,e){var n,r=a(t),i=ls(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return Ge(s.prototype,{clear:function(){for(var t=a(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,f?t.size=0:this.size=0},delete:function(t){var e=a(this),n=u(this,t);if(n){var r=n.next,i=n.previous;delete e.index[n.index],n.removed=!0,i&&(i.next=r),r&&(r.previous=i),e.first==n&&(e.first=r),e.last==n&&(e.last=i),f?e.size--:this.size--}return!!n},forEach:function(t,e){for(var n,r=a(this),i=Xe(t,1<arguments.length?e:void 0,3);n=n?n.next:r.first;)for(i(n.value,n.key,this);n&&n.removed;)n=n.previous},has:function(t){return!!u(this,t)}}),Ge(s.prototype,r?{get:function(t){var e=u(this,t);return e&&e.value},set:function(t,e){return o(this,0===t?0:t,e)}}:{add:function(t){return o(this,t=0===t?0:t,t)}}),f&&hs(s.prototype,"size",{get:function(){return a(this).size}}),s},setStrong:function(t,e,n){var r=e+" Iterator",i=ps(e),o=ps(r);de(t,e,function(t,e){fs(this,{type:r,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}},n?"entries":"values",!n,!0),ze(e)}};ss("Map",function(e){return function(t){return e(this,arguments.length?t:void 0)}},ds),Rt.Map;yt({target:"Map",stat:!0},{from:as});function vs(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}yt({target:"Map",stat:!0},{of:vs});function ys(){for(var t,e=d(this),n=Ke(e.delete),r=!0,i=0,o=arguments.length;i<o;i++)t=n.call(e,arguments[i]),r=r&&t;return!!r}yt({target:"Map",proto:!0,real:!0,forced:s},{deleteAll:function(){return ys.apply(this,arguments)}});function gs(t){return Map.prototype.entries.call(t)}yt({target:"Map",proto:!0,real:!0,forced:s},{every:function(t,e){var n=d(this),r=gs(n),i=Xe(t,1<arguments.length?e:void 0,3);return!on(r,function(t,e){if(!i(e,t,n))return on.stop()},void 0,!0,!0).stopped}}),yt({target:"Map",proto:!0,real:!0,forced:s},{filter:function(t,e){var n=d(this),r=gs(n),i=Xe(t,1<arguments.length?e:void 0,3),o=new(ln(n,ht("Map"))),s=Ke(o.set);return on(r,function(t,e){i(e,t,n)&&s.call(o,t,e)},void 0,!0,!0),o}}),yt({target:"Map",proto:!0,real:!0,forced:s},{find:function(t,e){var n=d(this),r=gs(n),i=Xe(t,1<arguments.length?e:void 0,3);return on(r,function(t,e){if(i(e,t,n))return on.stop(e)},void 0,!0,!0).result}}),yt({target:"Map",proto:!0,real:!0,forced:s},{findKey:function(t,e){var n=d(this),r=gs(n),i=Xe(t,1<arguments.length?e:void 0,3);return on(r,function(t,e){if(i(e,t,n))return on.stop(t)},void 0,!0,!0).result}}),yt({target:"Map",stat:!0},{groupBy:function(t,n){var r=new this;Ke(n);var i=Ke(r.has),o=Ke(r.get),s=Ke(r.set);return on(t,function(t){var e=n(t);i.call(r,e)?o.call(r,e).push(t):s.call(r,e,[t])}),r}});yt({target:"Map",proto:!0,real:!0,forced:s},{includes:function(n){return on(gs(d(this)),function(t,e){if(function(t,e){return t===e||t!=t&&e!=e}(e,n))return on.stop()},void 0,!0,!0).stopped}}),yt({target:"Map",stat:!0},{keyBy:function(t,e){var n=new this;Ke(e);var r=Ke(n.set);return on(t,function(t){r.call(n,e(t),t)}),n}}),yt({target:"Map",proto:!0,real:!0,forced:s},{keyOf:function(n){return on(gs(d(this)),function(t,e){if(e===n)return on.stop(t)},void 0,!0,!0).result}}),yt({target:"Map",proto:!0,real:!0,forced:s},{mapKeys:function(t,e){var n=d(this),r=gs(n),i=Xe(t,1<arguments.length?e:void 0,3),o=new(ln(n,ht("Map"))),s=Ke(o.set);return on(r,function(t,e){s.call(o,i(e,t,n),e)},void 0,!0,!0),o}}),yt({target:"Map",proto:!0,real:!0,forced:s},{mapValues:function(t,e){var n=d(this),r=gs(n),i=Xe(t,1<arguments.length?e:void 0,3),o=new(ln(n,ht("Map"))),s=Ke(o.set);return on(r,function(t,e){s.call(o,t,i(e,t,n))},void 0,!0,!0),o}}),yt({target:"Map",proto:!0,real:!0,forced:s},{merge:function(t){for(var e=d(this),n=Ke(e.set),r=0;r<arguments.length;)on(arguments[r++],n,e,!0);return e}}),yt({target:"Map",proto:!0,real:!0,forced:s},{reduce:function(n,t){var r=d(this),e=gs(r),i=arguments.length<2,o=i?void 0:t;if(Ke(n),on(e,function(t,e){o=i?(i=!1,e):n(o,e,t,r)},void 0,!0,!0),i)throw TypeError("Reduce of empty map with no initial value");return o}}),yt({target:"Map",proto:!0,real:!0,forced:s},{some:function(t,e){var n=d(this),r=gs(n),i=Xe(t,1<arguments.length?e:void 0,3);return on(r,function(t,e){if(i(e,t,n))return on.stop()},void 0,!0,!0).stopped}}),yt({target:"Map",proto:!0,real:!0,forced:s},{update:function(t,e,n){var r=d(this),i=arguments.length;Ke(e);var o=r.has(t);if(!o&&i<3)throw TypeError("Updating absent value");var s=o?r.get(t):Ke(2<i?n:void 0)(t,r);return r.set(t,e(s,t,r)),r}});function ms(t,e,n){var r,i=d(this),o=2<arguments.length?n:void 0;if("function"!=typeof e&&"function"!=typeof o)throw TypeError("At least one callback required");return i.has(t)?(r=i.get(t),"function"==typeof e&&(r=e(r),i.set(t,r))):"function"==typeof o&&(r=o(),i.set(t,r)),r}yt({target:"Map",proto:!0,real:!0,forced:s},{upsert:ms}),yt({target:"Map",proto:!0,real:!0,forced:s},{updateOrInsert:ms});ss("Set",function(e){return function(t){return e(this,arguments.length?t:void 0)}},ds),Rt.Set;yt({target:"Set",stat:!0},{from:as}),yt({target:"Set",stat:!0},{of:vs});yt({target:"Set",proto:!0,real:!0,forced:s},{addAll:function(){return function(){for(var t=d(this),e=Ke(t.add),n=0,r=arguments.length;n<r;n++)e.call(t,arguments[n]);return t}.apply(this,arguments)}}),yt({target:"Set",proto:!0,real:!0,forced:s},{deleteAll:function(){return ys.apply(this,arguments)}});function ws(t){return Set.prototype.values.call(t)}yt({target:"Set",proto:!0,real:!0,forced:s},{every:function(t,e){var n=d(this),r=ws(n),i=Xe(t,1<arguments.length?e:void 0,3);return!on(r,function(t){if(!i(t,t,n))return on.stop()},void 0,!1,!0).stopped}}),yt({target:"Set",proto:!0,real:!0,forced:s},{difference:function(t){var e=d(this),n=new(ln(e,ht("Set")))(e),r=Ke(n.delete);return on(t,function(t){r.call(n,t)}),n}}),yt({target:"Set",proto:!0,real:!0,forced:s},{filter:function(t,e){var n=d(this),r=ws(n),i=Xe(t,1<arguments.length?e:void 0,3),o=new(ln(n,ht("Set"))),s=Ke(o.add);return on(r,function(t){i(t,t,n)&&s.call(o,t)},void 0,!1,!0),o}}),yt({target:"Set",proto:!0,real:!0,forced:s},{find:function(t,e){var n=d(this),r=ws(n),i=Xe(t,1<arguments.length?e:void 0,3);return on(r,function(t){if(i(t,t,n))return on.stop(t)},void 0,!1,!0).result}}),yt({target:"Set",proto:!0,real:!0,forced:s},{intersection:function(t){var e=d(this),n=new(ln(e,ht("Set"))),r=Ke(e.has),i=Ke(n.add);return on(t,function(t){r.call(e,t)&&i.call(n,t)}),n}}),yt({target:"Set",proto:!0,real:!0,forced:s},{isDisjointFrom:function(t){var e=d(this),n=Ke(e.has);return!on(t,function(t){if(!0===n.call(e,t))return on.stop()}).stopped}}),yt({target:"Set",proto:!0,real:!0,forced:s},{isSubsetOf:function(t){var e=function(t){var e=Je(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return d(e.call(t))}(this),n=d(t),r=n.has;return"function"!=typeof r&&(n=new(ht("Set"))(t),r=Ke(n.has)),!on(e,function(t){if(!1===r.call(n,t))return on.stop()},void 0,!1,!0).stopped}}),yt({target:"Set",proto:!0,real:!0,forced:s},{isSupersetOf:function(t){var e=d(this),n=Ke(e.has);return!on(t,function(t){if(!1===n.call(e,t))return on.stop()}).stopped}}),yt({target:"Set",proto:!0,real:!0,forced:s},{join:function(t){var e=d(this),n=ws(e),r=void 0===t?",":String(t),i=[];return on(n,i.push,i,!1,!0),i.join(r)}}),yt({target:"Set",proto:!0,real:!0,forced:s},{map:function(t,e){var n=d(this),r=ws(n),i=Xe(t,1<arguments.length?e:void 0,3),o=new(ln(n,ht("Set"))),s=Ke(o.add);return on(r,function(t){s.call(o,i(t,t,n))},void 0,!1,!0),o}}),yt({target:"Set",proto:!0,real:!0,forced:s},{reduce:function(e,t){var n=d(this),r=ws(n),i=arguments.length<2,o=i?void 0:t;if(Ke(e),on(r,function(t){o=i?(i=!1,t):e(o,t,t,n)},void 0,!1,!0),i)throw TypeError("Reduce of empty set with no initial value");return o}}),yt({target:"Set",proto:!0,real:!0,forced:s},{some:function(t,e){var n=d(this),r=ws(n),i=Xe(t,1<arguments.length?e:void 0,3);return on(r,function(t){if(i(t,t,n))return on.stop()},void 0,!1,!0).stopped}}),yt({target:"Set",proto:!0,real:!0,forced:s},{symmetricDifference:function(t){var e=d(this),n=new(ln(e,ht("Set")))(e),r=Ke(n.delete),i=Ke(n.add);return on(t,function(t){r.call(n,t)||i.call(n,t)}),n}}),yt({target:"Set",proto:!0,real:!0,forced:s},{union:function(t){var e=d(this),n=new(ln(e,ht("Set")))(e);return on(t,Ke(n.add),n),n}});var bs=Math.floor;yt({target:"Number",stat:!0},{isInteger:function(t){return!g(t)&&isFinite(t)&&bs(t)===t}});Rt.Number.isInteger;var _s=function(t,e){return(_s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Es(t,e){function n(){this.constructor=t}_s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Is=function(){return(Is=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Ts(t,s,a,u){return new(a=a||Promise)(function(e,n){function r(t){try{o(u.next(t))}catch(t){n(t)}}function i(t){try{o(u.throw(t))}catch(t){n(t)}}function o(t){t.done?e(t.value):function(e){return e instanceof a?e:new a(function(t){t(e)})}(t.value).then(r,i)}o((u=u.apply(t,s||[])).next())})}function Ss(n,r){var i,o,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function Cs(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ns(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function As(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ns(arguments[e]));return t}function ks(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function Os(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function Rs(t){try{return Ls.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var Ds={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Ps=function(t,e){if(!t)throw xs(e)},xs=function(t){return new Error("Firebase Database ("+Ds.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},Ls={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Os(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(191<i&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var h=s<<4&240|a>>2;if(r.push(h),64!==u){var l=a<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function Ms(t){return Fs(void 0,t)}function Fs(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=Fs(t[n],e[n]));return t}var Us=(js.prototype.wrapCallback=function(n){var r=this;return function(t,e){t?r.reject(t):r.resolve(e),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(t):n(t,e))}},js);function js(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}function qs(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Vs(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qs())}function Bs(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ws(){return!0===Ds.NODE_ADMIN}var Hs,Gs=(Es(zs,Hs=Error),zs);function zs(t,e){var n=Hs.call(this,e)||this;return n.code=t,n.name="FirebaseError",Object.setPrototypeOf(n,zs.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,Ks.prototype.create),n}var Ks=(Qs.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?function(t,r){return t.replace(Ys,function(t,e){var n=r[e];return null!=n?n.toString():"<"+e+"?>"})}(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new Gs(i,a),c=0,h=Object.keys(r);c<h.length;c++){var l=h[c];"_"!==l.slice(-1)&&(l in u&&console.warn('Overwriting FirebaseError base field "'+l+'" can cause unexpected behavior.'),u[l]=r[l])}return u},Qs);function Qs(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var Ys=/\{\$([^}]+)}/g;function Xs(t){return JSON.parse(t)}function Js(t){return JSON.stringify(t)}function $s(t){var e={},n={},r={},i="";try{var o=t.split(".");e=Xs(Rs(o[0])||""),n=Xs(Rs(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}function Zs(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ta(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function ea(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function na(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}var ra=(ia.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},ia.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++)s=r<40?r<20?(o=h^u&(c^h),1518500249):(o=u^c^h,1859775393):r<60?(o=u&c|h&(u|c),2400959708):(o=u^c^h,3395469782),i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},ia.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},ia.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},ia);function ia(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}function oa(t,e){var n=new sa(t,e);return n.subscribe.bind(n)}var sa=(aa.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},aa.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},aa.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},aa.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=ua),void 0===r.error&&(r.error=ua),void 0===r.complete&&(r.complete=ua);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},aa.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},aa.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},aa.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},aa.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},aa);function aa(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}function ua(){}function ca(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function ha(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}function la(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(ha(t,e,r)+"must be a valid function.")}function fa(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(ha(t,e,r)+"must be a valid context object.")}function pa(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e}var da=(va.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},va.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},va.prototype.setServiceProps=function(t){return this.serviceProps=t,this},va);function va(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var ya="[DEFAULT]",ga=(ma.prototype.get=function(t){void 0===t&&(t=ya);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new Us;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},ma.prototype.getImmediate=function(t){var e=Is({identifier:ya,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(o)return o;if(r)return null;throw Error("Service "+this.name+" is not available")}catch(t){if(r)return null;throw t}},ma.prototype.getComponent=function(){return this.component},ma.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(function(t){return"EAGER"===t.instantiationMode}(this.component=t))try{this.getOrInitializeService(ya)}catch(t){}try{for(var r=Cs(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=Ns(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},ma.prototype.clearInstance=function(t){void 0===t&&(t=ya),this.instancesDeferred.delete(t),this.instances.delete(t)},ma.prototype.delete=function(){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(e.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))];case 1:return t.sent(),[2]}})})},ma.prototype.isComponentSet=function(){return null!=this.component},ma.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===ya?void 0:t}(t)),this.instances.set(t,e)),e||null},ma.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:ya:t},ma);function ma(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}var wa,ba,_a=(Ea.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},Ea.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},Ea.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new ga(t,this);return this.providers.set(t,e),e},Ea.prototype.getProviders=function(){return Array.from(this.providers.values())},Ea);function Ea(t){this.name=t,this.providers=new Map}function Ia(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}(ba=wa=wa||{})[ba.DEBUG=0]="DEBUG",ba[ba.VERBOSE=1]="VERBOSE",ba[ba.INFO=2]="INFO",ba[ba.WARN=3]="WARN",ba[ba.ERROR=4]="ERROR",ba[ba.SILENT=5]="SILENT";function Ta(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString();switch(e){case wa.DEBUG:case wa.VERBOSE:console.log.apply(console,Ia(["["+i+"]  "+t.name+":"],n));break;case wa.INFO:console.info.apply(console,Ia(["["+i+"]  "+t.name+":"],n));break;case wa.WARN:console.warn.apply(console,Ia(["["+i+"]  "+t.name+":"],n));break;case wa.ERROR:console.error.apply(console,Ia(["["+i+"]  "+t.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}}var Sa,Ca=wa.INFO,Na=(Object.defineProperty(Aa.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in wa))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(Aa.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),Aa.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,Ia([this,wa.DEBUG],t))},Aa.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,Ia([this,wa.VERBOSE],t))},Aa.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,Ia([this,wa.INFO],t))},Aa.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,Ia([this,wa.WARN],t))},Aa.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,Ia([this,wa.ERROR],t))},Aa);function Aa(t){this.name=t,this._logLevel=Ca,this._logHandler=Ta}var ka,Oa=((Sa={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Sa["bad-app-name"]="Illegal App name: '{$appName}",Sa["duplicate-app"]="Firebase App named '{$appName}' already exists",Sa["app-deleted"]="Firebase App named '{$appName}' already deleted",Sa["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Sa),Ra=new Ks("app","Firebase",Oa),Da="@firebase/app",Pa="[DEFAULT]",xa=((ka={})[Da]="fire-core",ka["@firebase/analytics"]="fire-analytics",ka["@firebase/auth"]="fire-auth",ka["@firebase/database"]="fire-rtdb",ka["@firebase/functions"]="fire-fn",ka["@firebase/installations"]="fire-iid",ka["@firebase/messaging"]="fire-fcm",ka["@firebase/performance"]="fire-perf",ka["@firebase/remote-config"]="fire-rc",ka["@firebase/storage"]="fire-gcs",ka["@firebase/firestore"]="fire-fst",ka["fire-js"]="fire-js",ka["firebase-wrapper"]="fire-js-all",ka),La=new Na("@firebase/app"),Ma=(Object.defineProperty(Fa.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(Fa.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(Fa.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),Fa.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(t){return t.delete()}))}).then(function(){e.isDeleted_=!0})},Fa.prototype._getService=function(t,e){return void 0===e&&(e=Pa),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},Fa.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=Pa),this.container.getProvider(t).clearInstance(e)},Fa.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){La.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},Fa.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},Fa.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Ra.create("app-deleted",{appName:this.name_})},Fa);function Fa(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Ms(t),this.container=new _a(e.name),this._addComponent(new da("app",function(){return o},"PUBLIC"));try{for(var s=Cs(this.firebase_.INTERNAL.components.values()),a=s.next();!a.done;a=s.next()){var u=a.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}Ma.prototype.name&&Ma.prototype.options||Ma.prototype.delete||console.log("dc");var Ua="7.11.0";function ja(u){var c={},h=new Map,l={__esModule:!0,initializeApp:function(t,e){void 0===e&&(e={});if("object"!=typeof e||null===e){e={name:e}}var n=e;void 0===n.name&&(n.name=Pa);var r=n.name;if("string"!=typeof r||!r)throw Ra.create("bad-app-name",{appName:String(r)});if(Zs(c,r))throw Ra.create("duplicate-app",{appName:r});var i=new u(t,n,l);return c[r]=i},app:f,registerVersion:function(t,e,n){var r,i=null!==(r=xa[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var a=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&a.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&a.push("and"),s&&a.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void La.warn(a.join(" "))}p(new da(i+"-version",function(){return{library:i,version:e}},"VERSION"))},apps:null,SDK_VERSION:Ua,INTERNAL:{registerComponent:p,removeApp:function(t){delete c[t]},components:h,useAsService:function(t,e){return"serverAuth"!==e?e:null}}};function f(t){if(!Zs(c,t=t||Pa))throw Ra.create("no-app",{appName:t});return c[t]}function p(n){var e,t,r=n.name;if(h.has(r))return La.debug("There were multiple attempts to register component "+r+"."),"PUBLIC"===n.type?l[r]:null;if(h.set(r,n),"PUBLIC"===n.type){var i=function(t){if(void 0===t&&(t=f()),"function"!=typeof t[r])throw Ra.create("invalid-app-argument",{appName:r});return t[r]()};void 0!==n.serviceProps&&Fs(i,n.serviceProps),l[r]=i,u.prototype[r]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,r).apply(this,n.multipleInstances?t:[])}}try{for(var o=Cs(Object.keys(c)),s=o.next();!s.done;s=o.next()){var a=s.value;c[a]._addComponent(n)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return"PUBLIC"===n.type?l[r]:null}return l.default=l,Object.defineProperty(l,"apps",{get:function(){return Object.keys(c).map(function(t){return c[t]})}}),f.App=u,l}var qa=function t(){var e=ja(Ma);return e.INTERNAL=Is(Is({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Fs(e,t)},createSubscribe:oa,ErrorFactory:Ks,deepExtend:Fs}),e}(),Va=(Ba.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},Ba);function Ba(t){this.container=t}if("object"==typeof self&&self.self===self&&void 0!==self.firebase){La.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Wa=self.firebase.SDK_VERSION;Wa&&0<=Wa.indexOf("LITE")&&La.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Ha=qa.initializeApp;qa.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}()&&La.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),Ha.apply(void 0,t)};var Ga,za,Gl=qa;(Ga=Gl).INTERNAL.registerComponent(new da("platform-logger",function(t){return new Va(t)},"PRIVATE")),Ga.registerVersion(Da,"0.5.6",za),Ga.registerVersion("fire-js","");Gl.registerVersion("firebase","7.11.0","app");(function(){var t,o="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var s=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function c(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:function(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}(t)}}!function(t,e){if(e){var n=s;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&o(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",function(t){function a(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.a=null}function u(e){return e instanceof a?e:new a(function(t){t(e)})}if(t)return t;e.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var n=s.setTimeout;e.prototype.c=function(t){n(t,0)},e.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},e.prototype.f=function(t){this.c(function(){throw t})},a.prototype.f=function(){function t(e){return function(t){r||(r=!0,e.call(n,t))}}var n=this,r=!1;return{resolve:t(this.m),reject:t(this.g)}},a.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof a)this.s(t);else{t:switch(typeof t){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.u(t):this.h(t)}},a.prototype.u=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.w(e,t):this.h(t)},a.prototype.g=function(t){this.i(2,t)},a.prototype.h=function(t){this.i(1,t)},a.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},a.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)i.b(this.a[t]);this.a=null}};var i=new e;return a.prototype.s=function(t){var e=this.f();t.Oa(e.resolve,e.reject)},a.prototype.w=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},a.prototype.then=function(t,e){function n(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(t){i(t)}}:t}var r,i,o=new a(function(t,e){r=t,i=e});return this.Oa(n(t,r),n(e,i)),o},a.prototype.catch=function(t){return this.then(void 0,t)},a.prototype.Oa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?i.b(n):this.a.push(n)},a.resolve=u,a.reject=function(n){return new a(function(t,e){e(n)})},a.race=function(i){return new a(function(t,e){for(var n=c(i),r=n.next();!r.done;r=n.next())u(r.value).Oa(t,e)})},a.all=function(t){var o=c(t),s=o.next();return s.done?u([]):new a(function(n,t){function e(e){return function(t){r[e]=t,0==--i&&n(r)}}for(var r=[],i=0;r.push(void 0),i++,u(s.value).Oa(e(r.length-1),t),!(s=o.next()).done;);})},a});var u=u||{},l=this||self,a=/^[\w+/_-]+[=]{0,2}$/,h=null;function f(){}function n(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function p(t){var e=n(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==n(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var e="closure_uid_"+(1e9*Math.random()>>>0),r=0;function i(t,e,n){return t.call.apply(t.bind,arguments)}function y(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function g(t,e,n){return(g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:y).apply(null,arguments)}function m(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var w=Date.now||function(){return+new Date};function b(t,e){function n(){}n.prototype=e.prototype,t.Za=e.prototype,t.prototype=new n,t.prototype.constructor=t}function _(t,e,n){this.code=T+t,this.message=e||S[t]||"",this.a=n||null}function E(t){var e=t&&t.code;return e?new _(e.substring(T.length),t.message,t.serverResponse):null}b(_,Error),_.prototype.v=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},_.prototype.toJSON=function(){return this.v()};var I,T="auth/",S={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},C={hd:{Ra:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},pd:{Ra:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://securetoken.googleapis.com/v1/token",Ua:"https://identitytoolkit.googleapis.com/v2/",id:"p"},rd:{Ra:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},sd:{Ra:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Xa:"https://test-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function N(t){for(var e in C)if(C[e].id===t)return{firebaseEndpoint:(t=C[e]).Ra,secureTokenEndpoint:t.Xa,identityPlatformEndpoint:t.Ua};return null}function A(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function k(t){if(Error.captureStackTrace)Error.captureStackTrace(this,k);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function O(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");k.call(this,n+t[r])}function R(t,e){throw new O("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function D(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function P(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function x(){this.b=this.a=null}I=N("__EID__")?"__EID__":void 0,b(k,Error),k.prototype.name="CustomError",b(O,k),O.prototype.name="AssertionError",D.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var L=new D(function(){return new M},function(t){t.reset()});function M(){this.next=this.b=this.a=null}x.prototype.add=function(t,e){var n=L.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},M.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},M.prototype.reset=function(){this.next=this.b=this.a=null};var F=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},U=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var j=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},q=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},V=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function B(t,e){return 0<=F(t,e)}function W(t,e){var n;return(n=0<=(e=F(t,e)))&&Array.prototype.splice.call(t,e,1),n}function H(n,r){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(n,function(t,e){r.call(void 0,t,e,n)&&1==Array.prototype.splice.call(n,e,1).length&&0})}function G(t){return Array.prototype.concat.apply([],arguments)}function z(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var K,Q=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},Y=/&/g,X=/</g,J=/>/g,$=/"/g,Z=/'/g,tt=/\x00/g,et=/[\x00&<>"']/;function nt(t,e){return-1!=t.indexOf(e)}function rt(t,e){return t<e?-1:e<t?1:0}t:{var it=l.navigator;if(it){var ot=it.userAgent;if(ot){K=ot;break t}}K=""}function st(t){return nt(K,t)}function at(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ut(t){for(var e in t)return!1;return!0}function ct(t){var e,n={};for(e in t)n[e]=t[e];return n}var ht="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<ht.length;o++)n=ht[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ft(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||l).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(v(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;R("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function pt(t,e){this.a=t===yt&&e||"",this.b=vt}function dt(t){return t instanceof pt&&t.constructor===pt&&t.b===vt?t.a:(R("expected object of type Const, got '"+t+"'"),"type_error:Const")}pt.prototype.ra=!0,pt.prototype.qa=function(){return this.a},pt.prototype.toString=function(){return"Const{"+this.a+"}"};var vt={},yt={},gt=new pt(yt,"");function mt(t,e){this.a=t===Tt&&e||"",this.b=It}function wt(t){return t instanceof mt&&t.constructor===mt&&t.b===It?t.a:(R("expected object of type TrustedResourceUrl, got '"+t+"' of type "+n(t)),"type_error:TrustedResourceUrl")}function bt(t,n){var r=dt(t);if(!Et.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return t=r.replace(_t,function(t,e){if(!Object.prototype.hasOwnProperty.call(n,e))throw Error('Found marker, "'+e+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(n));return(t=n[e])instanceof pt?dt(t):encodeURIComponent(String(t))}),new mt(Tt,t)}mt.prototype.ra=!0,mt.prototype.qa=function(){return this.a.toString()},mt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var _t=/%{(\w+)}/g,Et=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,It={},Tt={};function St(t,e){this.a=t===Ot&&e||"",this.b=kt}function Ct(t){return t instanceof St&&t.constructor===St&&t.b===kt?t.a:(R("expected object of type SafeUrl, got '"+t+"' of type "+n(t)),"type_error:SafeUrl")}St.prototype.ra=!0,St.prototype.qa=function(){return this.a.toString()},St.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Nt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function At(t){return t instanceof St?t:(t="object"==typeof t&&t.ra?t.qa():String(t),Nt.test(t)||(t="about:invalid#zClosurez"),new St(Ot,t))}var kt={},Ot={};function Rt(){this.a="",this.b=Pt}function Dt(t){return t instanceof Rt&&t.constructor===Rt&&t.b===Pt?t.a:(R("expected object of type SafeHtml, got '"+t+"' of type "+n(t)),"type_error:SafeHtml")}Rt.prototype.ra=!0,Rt.prototype.qa=function(){return this.a.toString()},Rt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Pt={};function xt(t){var e=new Rt;return e.a=t,e}xt("<!DOCTYPE html>");var Lt=xt("");function Mt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ft(t){return et.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(Y,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(X,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(J,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace($,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(Z,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(tt,"&#0;"))),t}function Ut(t){return Ut[" "](t),t}xt("<br>"),Ut[" "]=f;var jt,qt,Vt=st("Opera"),Bt=st("Trident")||st("MSIE"),Wt=st("Edge"),Ht=Wt||Bt,Gt=st("Gecko")&&!(nt(K.toLowerCase(),"webkit")&&!st("Edge"))&&!(st("Trident")||st("MSIE"))&&!st("Edge"),zt=nt(K.toLowerCase(),"webkit")&&!st("Edge");function Kt(){var t=l.document;return t?t.documentMode:void 0}t:{var Qt="",Yt=(qt=K,Gt?/rv:([^\);]+)(\)|;)/.exec(qt):Wt?/Edge\/([\d\.]+)/.exec(qt):Bt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(qt):zt?/WebKit\/(\S+)/.exec(qt):Vt?/(?:Version)[ \/]?(\S+)/.exec(qt):void 0);if(Yt&&(Qt=Yt?Yt[1]:""),Bt){var Xt=Kt();if(null!=Xt&&Xt>parseFloat(Qt)){jt=String(Xt);break t}}jt=Qt}var Jt,$t={};function Zt(a){return function(t,e){var n=$t;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(a,function(){for(var t=0,e=Q(String(jt)).split("."),n=Q(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=rt(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||rt(0==o[2].length,0==s[2].length)||rt(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t})}Jt=l.document&&Bt?Kt():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var te=!Bt||9<=Number(Jt);function ee(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ne(n,t){at(t,function(t,e){t&&"object"==typeof t&&t.ra&&(t=t.qa()),"style"==e?n.style.cssText=t:"class"==e?n.className=t:"for"==e?n.htmlFor=t:oe.hasOwnProperty(e)?n.setAttribute(oe[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?n.setAttribute(e,t):n[e]=t})}var re,ie,oe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function se(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!te&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Ft(s.name),'"'),s.type){o.push(' type="',Ft(s.type),'"');var a={};lt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=ae(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ne(o,s)),2<r.length&&function(e,n,t){function r(t){t&&n.appendChild("string"==typeof t?e.createTextNode(t):t)}for(var i=2;i<t.length;i++){var o=t[i];!p(o)||v(o)&&0<o.nodeType?r(o):U(ue(o)?z(o):o,r)}}(i,o,r),o}function ae(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ue(t){if(t&&"number"==typeof t.length){if(v(t))return"function"==typeof t.item||"string"==typeof t.item;if(d(t))return"function"==typeof t.item}return!1}function ce(t){l.setTimeout(function(){throw t},0)}function he(){var t=l.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!st("Presto")&&(t=function(){var t=ae(document,"IFRAME");t.style.display="none",function(t){var e=new mt(Tt,dt(gt));ft(t,"HTMLIFrameElement"),t.src=wt(e).toString()}(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(Dt(Lt)),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=g(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0===t||st("Trident")||st("MSIE"))return function(t){l.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Db;n.Db=null,t()}},function(t){r.next={Db:t},r=r.next,e.port2.postMessage(0)}}function le(t,e){ie||function(){if(l.Promise&&l.Promise.resolve){var t=l.Promise.resolve(void 0);ie=function(){t.then(de)}}else ie=function(){var t=de;!d(l.setImmediate)||l.Window&&l.Window.prototype&&!st("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(re=re||he())(t):l.setImmediate(t)}}(),fe||(ie(),fe=!0),pe.add(t,e)}var fe=!1,pe=new x;function de(){for(var t;n=e=void 0,n=null,(e=pe).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){ce(t)}P(L,t)}var e,n;fe=!1}function ve(t,e){if(this.a=ye,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=f)try{var n=this;t.call(e,function(t){Ae(n,ge,t)},function(t){if(!(t instanceof Le))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Ae(n,me,t)})}catch(t){Ae(this,me,t)}}var ye=0,ge=2,me=3;function we(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}we.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var be=new D(function(){return new we},function(t){t.reset()});function _e(t,e,n){var r=be.get();return r.g=t,r.b=e,r.f=n,r}function Ee(t){if(t instanceof ve)return t;var e=new ve(f);return Ae(e,ge,t),e}function Ie(n){return new ve(function(t,e){e(n)})}function Te(t,e,n){ke(t,e,n,null)||le(m(e,t))}function Se(n){return new ve(function(r){var i=n.length,o=[];if(i)for(var t=function(t,e,n){i--,o[t]=e?{Mb:!0,value:n}:{Mb:!1,reason:n},0==i&&r(o)},e=0;e<n.length;e++)Te(n[e],m(t,e,!0),m(t,e,!1));else r(o)})}function Ce(t,e){t.b||t.a!=ge&&t.a!=me||Oe(t),t.f?t.f.next=e:t.b=e,t.f=e}function Ne(t,i,o,s){var e=_e(null,null,null);return e.a=new ve(function(n,r){e.g=i?function(t){try{var e=i.call(s,t);n(e)}catch(t){r(t)}}:n,e.b=o?function(t){try{var e=o.call(s,t);void 0===e&&t instanceof Le?r(t):n(e)}catch(t){r(t)}}:r}),Ce(e.a.c=t,e),e.a}function Ae(t,e,n){t.a==ye&&(t===n&&(e=me,n=new TypeError("Promise cannot resolve to itself")),t.a=1,ke(n,t.Yc,t.Zc,t)||(t.i=n,t.a=e,t.c=null,Oe(t),e!=me||n instanceof Le||function(t,e){t.g=!0,le(function(){t.g&&xe.call(null,e)})}(t,n)))}function ke(t,e,n,r){if(t instanceof ve)return Ce(t,_e(e||f,n||null,r)),!0;if(A(t))return t.then(e,n,r),!0;if(v(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Oe(t){t.h||(t.h=!0,le(t.ec,t))}function Re(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function De(t,e,n,r){if(n==me&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Pe(e,n,r);else try{e.c?e.g.call(e.f):Pe(e,n,r)}catch(t){xe.call(null,t)}P(be,e)}function Pe(t,e,n){e==ge?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}ve.prototype.then=function(t,e,n){return Ne(this,d(t)?t:null,d(e)?e:null,n)},ve.prototype.$goog_Thenable=!0,(t=ve.prototype).ma=function(t,e){return(t=_e(t,t,e)).c=!0,Ce(this,t),this},t.o=function(t,e){return Ne(this,null,t,e)},t.cancel=function(t){if(this.a==ye){var e=new Le(t);le(function(){!function t(e,n){if(e.a==ye)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==ye&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):Re(r),De(r,o,me,n)))}e.c=null}else Ae(e,me,n)}(this,e)},this)}},t.Yc=function(t){this.a=ye,Ae(this,ge,t)},t.Zc=function(t){this.a=ye,Ae(this,me,t)},t.ec=function(){for(var t;t=Re(this);)De(this,t,this.a,this.i);this.h=!1};var xe=ce;function Le(t){k.call(this,t)}function Me(){this.wa=this.wa,this.na=this.na}b(Le,k);var Fe=0;function Ue(t){if(!t.wa&&(t.wa=!0,t.Ba(),0!=Fe))(function(t){Object.prototype.hasOwnProperty.call(t,e)&&t[e]||(t[e]=++r)})(t)}Me.prototype.wa=!(Le.prototype.name="cancel"),Me.prototype.Ba=function(){if(this.na)for(;this.na.length;)this.na.shift()()};var je=Object.freeze||function(t){return t},qe=!Bt||9<=Number(Jt),Ve=Bt&&!Zt("9"),Be=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",f,e),l.removeEventListener("test",f,e)}catch(t){}return t}();function We(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function He(t,e){if(We.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Gt){t:{try{Ut(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ge[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}We.prototype.preventDefault=function(){this.defaultPrevented=!0},b(He,We);var Ge=je({2:"touch",3:"pen",4:"mouse"});He.prototype.preventDefault=function(){He.Za.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ve)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},He.prototype.f=function(){return this.a};var ze="closure_listenable_"+(1e6*Math.random()|0),Ke=0;function Qe(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ta=i,this.key=++Ke,this.ua=this.Na=!1}function Ye(t){t.ua=!0,t.listener=null,t.proxy=null,t.src=null,t.Ta=null}function Xe(t){this.src=t,this.a={},this.b=0}function Je(t,e){var n=e.type;n in t.a&&W(t.a[n],e)&&(Ye(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function $e(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ua&&o.listener==e&&o.capture==!!n&&o.Ta==r)return i}return-1}Xe.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=$e(t,e,r,i);return-1<s?(e=t[s],n||(e.Na=!1)):((e=new Qe(e,this.src,o,!!r,i)).Na=n,t.push(e)),e};var Ze="closure_lm_"+(1e6*Math.random()|0),tn={};function en(t,e,n,r,i){if(r&&r.once)rn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)en(t,e[o],n,r,i);else n=pn(n),t&&t[ze]?vn(t,e,n,v(r)?!!r.capture:!!r,i):nn(t,e,n,!1,r,i)}function nn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=v(i)?!!i.capture:!!i,a=ln(t);if(a||(t[Ze]=a=new Xe(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var e=hn,n=qe?function(t){return e.call(n.src,n.listener,t)}:function(t){if(!(t=e.call(n.src,n.listener,t)))return t};return n}(),(n.proxy=r).src=t,r.listener=n,t.addEventListener)Be||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(an(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function rn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)rn(t,e[o],n,r,i);else n=pn(n),t&&t[ze]?yn(t,e,n,v(r)?!!r.capture:!!r,i):nn(t,e,n,!0,r,i)}function on(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)on(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=pn(n),t&&t[ze]?(t=t.u,(e=String(e).toString())in t.a&&(-1<(n=$e(o=t.a[e],n,r,i))&&(Ye(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):(t=t&&ln(t))&&(e=t.a[e.toString()],t=-1,e&&(t=$e(e,n,r,i)),(n=-1<t?e[t]:null)&&sn(n))}function sn(t){if("number"!=typeof t&&t&&!t.ua){var e=t.src;if(e&&e[ze])Je(e.u,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(an(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ln(e))?(Je(n,t),0==n.b&&(n.src=null,e[Ze]=null)):Ye(t)}}}function an(t){return t in tn?tn[t]:tn[t]="on"+t}function un(t,e,n,r){var i=!0;if((t=ln(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ua&&(o=cn(o,r),i=i&&!1!==o)}return i}function cn(t,e){var n=t.listener,r=t.Ta||t.src;return t.Na&&sn(t),n.call(r,e)}function hn(t,e){if(t.ua)return!0;if(qe)return cn(t,new He(e,this));if(!e)t:{e=["window","event"];for(var n=l,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new He(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=un(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=un(r[i],t,!1,e),n=n&&o}return n}function ln(t){return(t=t[Ze])instanceof Xe?t:null}var fn="__closure_events_fn_"+(1e9*Math.random()>>>0);function pn(e){return d(e)?e:(e[fn]||(e[fn]=function(t){return e.handleEvent(t)}),e[fn])}function dn(){Me.call(this),this.u=new Xe(this),(this.Yb=this).eb=null}function vn(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function yn(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function gn(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ua&&s.capture==n){var a=s.listener,u=s.Ta||s.src;s.Na&&Je(t.u,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function mn(t,e,n){if(d(t))n&&(t=g(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=g(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function wn(n){var r=null;return new ve(function(t,e){-1==(r=mn(function(){t(void 0)},n))&&e(Error("Failed to schedule timer."))}).o(function(t){throw l.clearTimeout(r),t})}function bn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function _n(t){if(t.X&&"function"==typeof t.X)return t.X();if(!t.V||"function"!=typeof t.V){if(p(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function En(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof En)for(n=t.X(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function In(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Tn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Tn(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function Tn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}b(dn,Me),dn.prototype[ze]=!0,dn.prototype.addEventListener=function(t,e,n,r){en(this,t,e,n,r)},dn.prototype.removeEventListener=function(t,e,n,r){on(this,t,e,n,r)},dn.prototype.dispatchEvent=function(t){var e,n=this.eb;if(n)for(e=[];n;n=n.eb)e.push(n);n=this.Yb;var r=t.type||t;if("string"==typeof t)t=new We(t,n);else if(t instanceof We)t.target=t.target||n;else{var i=t;lt(t=new We(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=gn(s,r,!0,t)&&i}if(i=gn(s=t.b=n,r,!0,t)&&i,i=gn(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=gn(s=t.b=e[o],r,!1,t)&&i;return i},dn.prototype.Ba=function(){if(dn.Za.Ba.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ye(n[r]);delete e.a[t],e.b--}}this.eb=null},(t=En.prototype).V=function(){In(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.X=function(){return In(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Tn(this.b,t)?this.b[t]:e},t.set=function(t,e){Tn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Sn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Cn(t,e){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,t instanceof Cn?(this.h=void 0!==e?e:t.h,Nn(this,t.f),this.i=t.i,this.b=t.b,An(this,t.l),this.c=t.c,kn(this,Qn(t.a)),this.g=t.g):t&&(n=String(t).match(Sn))?(this.h=!!e,Nn(this,n[1]||"",!0),this.i=xn(n[2]||""),this.b=xn(n[3]||"",!0),An(this,n[4]),this.c=xn(n[5]||"",!0),kn(this,n[6]||"",!0),this.g=xn(n[7]||"")):(this.h=!!e,this.a=new Bn(null,this.h))}function Nn(t,e,n){t.f=n?xn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function An(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.l=e}else t.l=null}function kn(t,e,n){e instanceof Bn?(t.a=e,function(t,e){e&&!t.f&&(Wn(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Gn(this,e),Kn(this,n,t))},t)),t.f=e}(t.a,t.h)):(n||(e=Ln(e,qn)),t.a=new Bn(e,t.h))}function On(t,e,n){t.a.set(e,n)}function Rn(t,e){return t.a.get(e)}function Dn(t){return t instanceof Cn?new Cn(t):new Cn(t,void 0)}function Pn(t,e){var n=new Cn(null,void 0);return Nn(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function xn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ln(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Mn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Mn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Cn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ln(e,Fn,!0),":");var n=this.b;return!n&&"file"!=e||(t.push("//"),(e=this.i)&&t.push(Ln(e,Fn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ln(n,"/"==n.charAt(0)?jn:Un,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",Ln(n,Vn)),t.join("")},Cn.prototype.resolve=function(t){var e=new Cn(this),n=!!t.f;n?Nn(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.l;var r=t.c;if(n)An(e,t.l);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(nt(i,"./")||nt(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.a.toString(),n?kn(e,Qn(t.a)):n=!!t.g,n&&(e.g=t.g),e};var Fn=/[#\/\?@]/g,Un=/[#\?:]/g,jn=/[#\?]/g,qn=/[#\?@]/g,Vn=/#/g;function Bn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Wn(n){n.a||(n.a=new En,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Hn(t){var e=_n(t);if(void 0===e)throw Error("Keys are undefined");var n=new Bn(null,void 0);t=bn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Kn(n,i,o):n.add(i,o)}return n}function Gn(t,e){Wn(t),e=Yn(t,e),Tn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Tn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&In(t)))}function zn(t,e){return Wn(t),e=Yn(t,e),Tn(t.a.b,e)}function Kn(t,e,n){Gn(t,e),0<n.length&&(t.c=null,t.a.set(Yn(t,e),z(n)),t.b+=n.length)}function Qn(t){var e=new Bn;return e.c=t.c,t.a&&(e.a=new En(t.a),e.b=t.b),e}function Yn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Xn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&("function"!=typeof(s=n[i])&&(r.push(o),tr(i,r),r.push(":"),t(e,s,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":tr(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Jn,t,e),e.join("")}function Jn(){}(t=Bn.prototype).add=function(t,e){Wn(this),this.c=null,t=Yn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(n,r){Wn(this),this.a.forEach(function(t,e){U(t,function(t){n.call(r,t,e,this)},this)},this)},t.X=function(){Wn(this);for(var t=this.a.V(),e=this.a.X(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.V=function(t){Wn(this);var e=[];if("string"==typeof t)zn(this,t)&&(e=G(e,this.a.get(Yn(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=G(e,t[n])}return e},t.set=function(t,e){return Wn(this),this.c=null,zn(this,t=Yn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.X(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.V(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var $n={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Zn=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function tr(t,e){e.push('"',t.replace(Zn,function(t){var e=$n[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),$n[t]=e),e}),'"')}function er(){var t=br();return Bt&&!!Jt&&11==Jt||/Edge\/\d+/.test(t)}function nr(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function rr(t,e){e=e||l.window;var n="about:blank";t&&(n=Ct(At(t))),e.location.href=n}function ir(t){return!!((t=(t||br()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function or(t){t=t||l.window;try{t.close()}catch(t){}}function sr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=br().toLowerCase(),r&&(e.target=r,nt(n,"crios/")&&(e.target="_blank")),gr(br())==vr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof St?n:At(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((st("iPhone")&&!st("iPod")&&!st("iPad")||st("iPad")||st("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(ft(s=ae(document,"A"),"HTMLAnchorElement"),e instanceof St||e instanceof St||(e="object"==typeof e&&e.ra?e.qa():String(e),Nt.test(e)||(e="about:invalid#zClosurez"),e=new St(Ot,e)),s.href=Ct(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=r.open("",n,s),t=Ct(e),s&&(Ht&&nt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t=xt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ft(t)+'">'),r=s.document)&&(r.write(Dt(t)),r.close())):(s=r.open(Ct(e),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var ar=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ur=/^[^@]+@[^@]+$/;function cr(){var e=null;return new ve(function(t){"complete"==l.document.readyState?t():(e=function(){t()},rn(window,"load",e))}).o(function(t){throw on(window,"load",e),t})}function hr(t){return t=t||br(),!("file:"!==Sr()&&"ionic:"!==Sr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function lr(){var t=l.window;try{return!(!t||t==t.top)}catch(t){return!1}}function fr(){return void 0!==l.WorkerGlobalScope&&"function"==typeof l.importScripts}function pr(){return Gl.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Gl.INTERNAL.hasOwnProperty("node")?"Node":fr()?"Worker":"Browser"}function dr(){var t=pr();return"ReactNative"===t||"Node"===t}var vr="Firefox",yr="Chrome";function gr(t){var e=t.toLowerCase();return nt(e,"opera/")||nt(e,"opr/")||nt(e,"opios/")?"Opera":nt(e,"iemobile")?"IEMobile":nt(e,"msie")||nt(e,"trident/")?"IE":nt(e,"edge/")?"Edge":nt(e,"firefox/")?vr:nt(e,"silk/")?"Silk":nt(e,"blackberry")?"Blackberry":nt(e,"webos")?"Webos":!nt(e,"safari/")||nt(e,"chrome/")||nt(e,"crios/")||nt(e,"android")?!nt(e,"chrome/")&&!nt(e,"crios/")||nt(e,"edge/")?nt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":yr:"Safari"}var mr={jd:"FirebaseCore-web",ld:"FirebaseUI-web"};function wr(t,e){e=e||[];var n,r=[],i={};for(n in mr)i[mr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=pr())?r=gr(i=br()):"Worker"===r&&(r=gr(i=br())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function br(){return l.navigator&&l.navigator.userAgent||""}function _r(t,e){t=t.split("."),e=e||l;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Er(){try{var t=l.localStorage,e=Or();if(t)return t.setItem(e,"1"),t.removeItem(e),!er()||!!l.indexedDB}catch(t){return fr()&&!!l.indexedDB}return!1}function Ir(){return(Tr()||"chrome-extension:"===Sr()||hr())&&!dr()&&Er()&&!fr()}function Tr(){return"http:"===Sr()||"https:"===Sr()}function Sr(){return l.location&&l.location.protocol||null}function Cr(t){return!ir(t=t||br())&&gr(t)!=vr}function Nr(t){return void 0===t?null:Xn(t)}function Ar(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function kr(t){if(null!==t)return JSON.parse(t)}function Or(t){return t||Math.floor(1e9*Math.random()).toString()}function Rr(t){return"Safari"!=gr(t=t||br())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Dr(){var t=l.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Pr(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=br(),e=pr(),this.b=ir(t)||"ReactNative"===e}function xr(){var t=l.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Lr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Mr(){return!(!_r("fireauth.oauthhelper",l)&&!_r("fireauth.iframe",l))}Pr.prototype.get=function(){var t=l.navigator;return!t||"boolean"!=typeof t.onLine||!Tr()&&"chrome-extension:"!==Sr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Fr,Ur={};function jr(t){Ur[t]||(Ur[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var qr={};Object.defineProperty(qr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(qr,"abcd",{configurable:!0,enumerable:!0,value:2}),Fr=2==qr.abcd}catch(t){Fr=!1}function Vr(t,e,n){Fr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Br(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Vr(t,n,e[n])}function Wr(t){var e={};return Br(e,t),e}function Hr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Vr(e,n,Hr(t[n]));return e}function Gr(t){var e=t&&(t[Xr]?"phone":null);if(!(e&&t&&t[Yr]))throw new _("internal-error","Internal assert: invalid MultiFactorInfo object");Vr(this,"uid",t[Yr]),Vr(this,"displayName",t[Kr]||null);var n=null;t[Qr]&&(n=new Date(t[Qr]).toUTCString()),Vr(this,"enrollmentTime",n),Vr(this,"factorId",e)}function zr(t){try{var e=new Jr(t)}catch(t){e=null}return e}Gr.prototype.v=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Kr="displayName",Qr="enrolledAt",Yr="mfaEnrollmentId",Xr="phoneInfo";function Jr(t){Gr.call(this,t),Vr(this,"phoneNumber",t[Xr])}function $r(t){var e={},n=t[ni],r=t[ii],i=t[oi];if(t=zr(t[ri]),!i||i!=ti&&i!=ei&&!n||i==ei&&!r||i==Zr&&!t)throw Error("Invalid checkActionCode response!");i==ei?(e[ai]=n||null,e[ci]=n||null,e[si]=r):(e[ai]=r||null,e[ci]=r||null,e[si]=n||null),e[ui]=t||null,Vr(this,li,i),Vr(this,hi,Hr(e))}b(Jr,Gr),Jr.prototype.v=function(){var t=Jr.Za.v.call(this);return t.phoneNumber=this.phoneNumber,t};var Zr="REVERT_SECOND_FACTOR_ADDITION",ti="EMAIL_SIGNIN",ei="VERIFY_AND_CHANGE_EMAIL",ni="email",ri="mfaInfo",ii="newEmail",oi="requestType",si="email",ai="fromEmail",ui="multiFactorInfo",ci="previousEmail",hi="data",li="operation";function fi(t){var e=Rn(t=Dn(t),pi)||null,n=Rn(t,di)||null,r=Rn(t,gi)||null;if(r=r&&wi[r]||null,!e||!n||!r)throw new _("argument-error",pi+", "+di+"and "+gi+" are required in a valid action code URL.");Br(this,{apiKey:e,operation:r,code:n,continueUrl:Rn(t,vi)||null,languageCode:Rn(t,yi)||null,tenantId:Rn(t,mi)||null})}var pi="apiKey",di="oobCode",vi="continueUrl",yi="languageCode",gi="mode",mi="tenantId",wi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Zr,signIn:ti,verifyAndChangeEmail:ei,verifyEmail:"VERIFY_EMAIL"};function bi(t){try{return new fi(t)}catch(t){return null}}function _i(t){var e=t[Ci];if(void 0===e)throw new _("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new _("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Ei];if(n&&"object"==typeof n){e=n[ki];var r=n[Ni];if(n=n[Ai],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new _("argument-error",Ni+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new _("argument-error",Ai+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new _("argument-error",ki+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new _("missing-android-pkg-name")}}else if(void 0!==n)throw new _("argument-error",Ei+" property must be a non null object when specified.");if(this.f=null,(e=t[Si])&&"object"==typeof e){if("string"==typeof(e=e[Oi])&&e.length)this.f=e;else if(void 0!==e)throw new _("argument-error",Oi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new _("argument-error",Si+" property must be a non null object when specified.");if(void 0!==(e=t[Ti])&&"boolean"!=typeof e)throw new _("argument-error",Ti+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Ii])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new _("argument-error",Ii+" property must be a non empty string when specified.");this.i=t||null}var Ei="android",Ii="dynamicLinkDomain",Ti="handleCodeInApp",Si="iOS",Ci="url",Ni="installApp",Ai="minimumVersion",ki="packageName",Oi="bundleId";function Ri(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Di=null;function Pi(t){var e="";return function(r,t){function e(t){for(;i<r.length;){var e=r.charAt(i++),n=Di[e];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return t}!function(){if(!Di){Di={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Di[o]&&(Di[o]=i)}}}();for(var i=0;;){var n=e(-1),o=e(0),s=e(64),a=e(64);if(64===a&&-1===n)break;t(n<<2|o>>4),64!=s&&(t(o<<4&240|s>>2),64!=a&&t(s<<6&192|a))}}(t,function(t){e+=String.fromCharCode(t)}),e}function xi(t){var e=Mi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Li(t){try{return new xi(t)}catch(t){return null}}function Mi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(Pi(t))}catch(t){}return null}xi.prototype.S=function(){return this.f},xi.prototype.i=function(){return this.b},xi.prototype.toString=function(){return this.g};var Fi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Ui=["client_id","response_type","scope","redirect_uri","state"],ji={kd:{Ha:"locale",ta:700,sa:600,ea:"facebook.com",Va:Ui},md:{Ha:null,ta:500,sa:750,ea:"github.com",Va:Ui},nd:{Ha:"hl",ta:515,sa:680,ea:"google.com",Va:Ui},td:{Ha:"lang",ta:485,sa:705,ea:"twitter.com",Va:Fi},gd:{Ha:"locale",ta:600,sa:600,ea:"apple.com",Va:[]}};function qi(t){for(var e in ji)if(ji[e].ea==t)return ji[e];return null}function Vi(t){var e={};e["facebook.com"]=zi,e["google.com"]=Qi,e["github.com"]=Ki,e["twitter.com"]=Yi;var n=t&&t[Wi];try{if(n)return e[n]?new e[n](t):new Gi(t);if(void 0!==t[Bi])return new Hi(t)}catch(t){}return null}var Bi="idToken",Wi="providerId";function Hi(t){var e=t[Wi];if(!e&&t[Bi]){var n=Li(t[Bi]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Vr(this,"providerId",e),Vr(this,"isNewUser",n)}function Gi(t){Hi.call(this,t),Vr(this,"profile",Hr((t=kr(t.rawUserInfo||"{}"))||{}))}function zi(t){if(Gi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Ki(t){if(Gi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Vr(this,"username",this.profile&&this.profile.login||null)}function Qi(t){if(Gi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Yi(t){if(Gi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Vr(this,"username",t.screenName||null)}function Xi(t){var e=Dn(t),n=Rn(e,"link"),r=Rn(Dn(n),"link");return Rn(Dn(e=Rn(e,"deep_link_id")),"link")||e||r||n||t}function Ji(t,e){if(!t&&!e)throw new _("internal-error","Internal assert: no raw session string available");if(t&&e)throw new _("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?$i:Zi}b(Gi,Hi),b(zi,Gi),b(Ki,Gi),b(Qi,Gi),b(Yi,Gi);var $i="enroll",Zi="signin";function to(){}function eo(t,n){return t.then(function(t){if(t[Hs]){var e=Li(t[Hs]);if(!e||n!=e.h)throw new _("user-mismatch");return t}throw new _("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==T+"user-not-found"?new _("user-mismatch"):t})}function no(t,e){if(!e)throw new _("internal-error","failed to construct a credential");this.a=e,Vr(this,"providerId",t),Vr(this,"signInMethod",t)}function ro(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function io(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new no(t.providerId,t.pendingToken)}catch(t){}return null}function oo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Vr(this,"idToken",e.idToken),e.accessToken&&Vr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Vr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new _("internal-error","failed to construct a credential");Vr(this,"accessToken",e.oauthToken),Vr(this,"secret",e.oauthTokenSecret)}Vr(this,"providerId",t),Vr(this,"signInMethod",n)}function so(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Hn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function ao(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new oo(t.providerId,e,t.signInMethod)}catch(t){}}return null}function uo(t,e){this.Oc=e||[],Br(this,{providerId:t,isOAuthProvider:!0}),this.Fb={},this.lb=(qi(t)||{}).Ha||null,this.kb=null}function co(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new _("argument-error",'SAML provider IDs must be prefixed with "saml."');uo.call(this,t,[])}function ho(t){uo.call(this,t,Ui),this.a=[]}function lo(){ho.call(this,"facebook.com")}function fo(t){if(!t)throw new _("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new lo).credential({accessToken:e})}function po(){ho.call(this,"github.com")}function vo(t){if(!t)throw new _("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new po).credential({accessToken:e})}function yo(){ho.call(this,"google.com"),this.Aa("profile")}function go(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new yo).credential({idToken:n,accessToken:e})}function mo(){uo.call(this,"twitter.com",Fi)}function wo(t,e){var n=t;if(v(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new _("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new oo("twitter.com",n,"twitter.com")}function bo(t,e,n){this.a=t,this.f=e,Vr(this,"providerId","password"),Vr(this,"signInMethod",n===Eo.EMAIL_LINK_SIGN_IN_METHOD?Eo.EMAIL_LINK_SIGN_IN_METHOD:Eo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function _o(t){return t&&t.email&&t.password?new bo(t.email,t.password,t.signInMethod):null}function Eo(){Br(this,{providerId:"password",isOAuthProvider:!1})}function Io(t,e){if(!(e=To(e)))throw new _("argument-error","Invalid email link!");return new bo(t,e.code,Eo.EMAIL_LINK_SIGN_IN_METHOD)}function To(t){return(t=bi(t=Xi(t)))&&t.operation===ti?t:null}function So(t){if(!(t.bb&&t.ab||t.Ja&&t.da))throw new _("internal-error");this.a=t,Vr(this,"providerId","phone"),this.ea="phone",Vr(this,"signInMethod","phone")}function Co(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var n={};return U(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(t){e[t]&&(n[t]=e[t])}),new So(n)}return null}function No(t){return t.a.Ja&&t.a.da?{temporaryProof:t.a.Ja,phoneNumber:t.a.da}:{sessionInfo:t.a.bb,code:t.a.ab}}function Ao(t){try{this.a=t||Gl.auth()}catch(t){throw new _("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Br(this,{providerId:"phone",isOAuthProvider:!1})}function ko(t,e){if(!t)throw new _("missing-verification-id");if(!e)throw new _("missing-verification-code");return new So({bb:t,ab:e})}function Oo(t){if(t.temporaryProof&&t.phoneNumber)return new So({Ja:t.temporaryProof,da:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return go(o,n);case"facebook.com":return fo(n);case"github.com":return vo(n);case"twitter.com":return wo(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new no(e,s):new oo(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new ho(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Ro(t){if(!t.isOAuthProvider)throw new _("invalid-oauth-provider")}function Do(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new _("invalid-auth-event");if(this.g&&this.a)throw new _("invalid-auth-event");if(this.g&&!this.f)throw new _("invalid-auth-event")}function Po(t){return(t=t||{}).type?new Do(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&E(t.error),t.postBody,t.tenantId):null}function xo(){this.b=null,this.a=[]}Ji.prototype.Fa=function(){return this.a?Ee(this.a):Ee(this.b)},Ji.prototype.v=function(){return this.type==$i?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},to.prototype.ia=function(){},to.prototype.b=function(){},to.prototype.c=function(){},to.prototype.v=function(){},no.prototype.ia=function(t){return ha(t,ro(this))},no.prototype.b=function(t,e){var n=ro(this);return n.idToken=e,la(t,n)},no.prototype.c=function(t,e){return eo(fa(t,ro(this)),e)},no.prototype.v=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},oo.prototype.ia=function(t){return ha(t,so(this))},oo.prototype.b=function(t,e){var n=so(this);return n.idToken=e,la(t,n)},oo.prototype.c=function(t,e){return eo(fa(t,so(this)),e)},oo.prototype.v=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},uo.prototype.Ia=function(t){return this.Fb=ct(t),this},b(co,uo),b(ho,uo),ho.prototype.Aa=function(t){return B(this.a,t)||this.a.push(t),this},ho.prototype.Nb=function(){return z(this.a)},ho.prototype.credential=function(t,e){var n;if(!(n=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new _("argument-error","credential failed: must provide the ID token and/or the access token.");return new oo(this.providerId,n,this.providerId)},b(lo,ho),Vr(lo,"PROVIDER_ID","facebook.com"),Vr(lo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),b(po,ho),Vr(po,"PROVIDER_ID","github.com"),Vr(po,"GITHUB_SIGN_IN_METHOD","github.com"),b(yo,ho),Vr(yo,"PROVIDER_ID","google.com"),Vr(yo,"GOOGLE_SIGN_IN_METHOD","google.com"),b(mo,uo),Vr(mo,"PROVIDER_ID","twitter.com"),Vr(mo,"TWITTER_SIGN_IN_METHOD","twitter.com"),bo.prototype.ia=function(t){return this.signInMethod==Eo.EMAIL_LINK_SIGN_IN_METHOD?Ka(t,ba,{email:this.a,oobCode:this.f}):Ka(t,Ba,{email:this.a,password:this.f})},bo.prototype.b=function(t,e){return this.signInMethod==Eo.EMAIL_LINK_SIGN_IN_METHOD?Ka(t,_a,{idToken:e,email:this.a,oobCode:this.f}):Ka(t,xa,{idToken:e,email:this.a,password:this.f})},bo.prototype.c=function(t,e){return eo(this.ia(t),e)},bo.prototype.v=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Br(Eo,{PROVIDER_ID:"password"}),Br(Eo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Br(Eo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),So.prototype.ia=function(t){return t.cb(No(this))},So.prototype.b=function(t,e){var n=No(this);return n.idToken=e,Ka(t,Ha,n)},So.prototype.c=function(t,e){var n=No(this);return n.operation="REAUTH",eo(t=Ka(t,Ga,n),e)},So.prototype.v=function(){var t={providerId:"phone"};return this.a.bb&&(t.verificationId=this.a.bb),this.a.ab&&(t.verificationCode=this.a.ab),this.a.Ja&&(t.temporaryProof=this.a.Ja),this.a.da&&(t.phoneNumber=this.a.da),t},Ao.prototype.cb=function(r,i){var o=this.a.b;return Ee(i.verify()).then(function(e){if("string"!=typeof e)throw new _("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(i.type){case"recaptcha":var t=v(r)?r.session:null,n=v(r)?r.phoneNumber:r;return(t&&t.type==$i?t.Fa().then(function(t){return function(t,e){return Ka(t,Ma,e).then(function(t){return t.phoneSessionInfo.sessionInfo})}(o,{idToken:t,phoneEnrollmentInfo:{phoneNumber:n,recaptchaToken:e}})}):t&&t.type==Zi?t.Fa().then(function(t){return function(t,e){return Ka(t,Fa,e).then(function(t){return t.phoneResponseInfo.sessionInfo})}(o,{mfaPendingCredential:t,mfaEnrollmentId:r.multiFactorHint&&r.multiFactorHint.uid||r.multiFactorUid,phoneSignInInfo:{recaptchaToken:e}})}):function(t,e){return Ka(t,Da,e)}(o,{phoneNumber:n,recaptchaToken:e})).then(function(t){return"function"==typeof i.reset&&i.reset(),t},function(t){throw"function"==typeof i.reset&&i.reset(),t});default:throw new _("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Br(Ao,{PROVIDER_ID:"phone"}),Br(Ao,{PHONE_SIGN_IN_METHOD:"phone"}),Do.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Do.prototype.S=function(){return this.h},Do.prototype.v=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.v()}};var Lo,Mo=null;function Fo(t){var e="unauthorized-domain",n=void 0,r=Dn(t);t=r.b,"chrome-extension"==(r=r.f)?n=Mt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Mt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",_.call(this,e,n)}function Uo(t,e,n){_.call(this,t,n),(t=e||{}).Gb&&Vr(this,"email",t.Gb),t.da&&Vr(this,"phoneNumber",t.da),t.credential&&Vr(this,"credential",t.credential),t.Wb&&Vr(this,"tenantId",t.Wb)}function jo(t){if(t.code){var e=t.code||"";0==e.indexOf(T)&&(e=e.substring(T.length));var n={credential:Oo(t),Wb:t.tenantId};if(t.email)n.Gb=t.email;else if(t.phoneNumber)n.da=t.phoneNumber;else if(!n.credential)return new _(e,t.message||void 0);return new Uo(e,n,t.message)}return null}function qo(){}function Vo(t){return t.c||(t.c=t.b())}function Bo(){}function Wo(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function Ho(){}function Go(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=g(this.oc,this),this.a.onerror=g(this.Pb,this),this.a.onprogress=g(this.pc,this),this.a.ontimeout=g(this.tc,this)}function zo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Ko(t,e,n){this.reset(t,e,n,void 0,void 0)}function Qo(t){this.f=t,this.b=this.c=this.a=null}function Yo(t,e){this.name=t,this.value=e}b(Fo,_),b(Uo,_),Uo.prototype.v=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.v();return e&&lt(t,e),t},Uo.prototype.toJSON=function(){return this.v()},qo.prototype.c=null,b(Bo,qo),Bo.prototype.a=function(){var t=Wo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Bo.prototype.b=function(){var t={};return Wo(this)&&(t[0]=!0,t[1]=!0),t},Lo=new Bo,b(Ho,qo),Ho.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Go;throw Error("Unsupported browser")},Ho.prototype.b=function(){return{}},(t=Go.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.oc=function(){this.status=200,this.response=this.responseText=this.a.responseText,zo(this,4)},t.Pb=function(){this.status=500,this.response=this.responseText="",zo(this,4)},t.tc=function(){this.Pb()},t.pc=function(){this.status=200,zo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Ko.prototype.a=null,Ko.prototype.reset=function(t,e,n,r,i){delete this.a},Yo.prototype.toString=function(){return this.name};var Xo=new Yo("SEVERE",1e3),Jo=new Yo("WARNING",900),$o=new Yo("CONFIG",700),Zo=new Yo("FINE",500);Qo.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(R("Root logger has no level set."),null)}(this).value)for(d(e)&&(e=e()),t=new Ko(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var ts,es={},ns=null;function rs(t){var e;if(ns||(ns=new Qo(""),(es[""]=ns).c=$o),!(e=es[t])){e=new Qo(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=rs(t.substr(0,n))).b||(n.b={}),(n.b[r]=e).a=n,es[t]=e}return e}function is(t,e){t&&t.log(Zo,e,void 0)}function os(t){this.f=t}function ss(t){dn.call(this),this.s=t,this.readyState=as,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=rs("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}b(os,qo),os.prototype.a=function(){return new ss(this.f)},os.prototype.b=(ts={},function(){return ts}),b(ss,dn);var as=0;function us(t){t.c.read().then(t.nc.bind(t)).catch(t.Sa.bind(t))}function cs(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,hs(t)}function hs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ls(t){dn.call(this),this.headers=new En,this.D=t||null,this.c=!1,this.B=this.a=null,this.h=this.P=this.l="",this.f=this.O=this.i=this.N=!1,this.g=0,this.s=null,this.m=fs,this.w=this.R=!1}(t=ss.prototype).open=function(t,e){if(this.readyState!=as)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,hs(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.s.fetch(new Request(this.g,e)).then(this.sc.bind(this),this.Sa.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,cs(this,!1)),this.readyState=as},t.sc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,hs(this)),this.a&&(this.readyState=3,hs(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.qc.bind(this),this.Sa.bind(this)):void 0!==l.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,us(this)):t.text().then(this.rc.bind(this),this.Sa.bind(this)))))},t.nc=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?cs(this,!0):hs(this),3==this.readyState&&us(this)}},t.rc=function(t){this.a&&(this.response=this.responseText=t,cs(this,!0))},t.qc=function(t){this.a&&(this.response=t,cs(this,!0))},t.Sa=function(t){var e=this.h;e&&e.log(Jo,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&cs(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(Jo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(Jo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},b(ls,dn);var fs="";ls.prototype.b=rs("goog.net.XhrIo");var ps=/^https?$/i,ds=["POST","PUT"];function vs(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.P=n,e.N=!1,e.c=!0,e.a=e.D?e.D.a():Lo.a(),e.B=e.D?Vo(e.D):Vo(Lo),e.a.onreadystatechange=g(e.Sb,e);try{is(e.b,Ts(e,"Opening Xhr")),e.O=!0,e.a.open(n,String(t),!0),e.O=!1}catch(t){return is(e.b,Ts(e,"Error opening Xhr: "+t.message)),void gs(e,t)}t=r||"";var o=new En(e.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"==typeof t)U(t,e,void 0);else for(var n=_n(t),r=bn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){o.set(e,t)}),i=function(t){t:{for(var e=ys,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.X()),r=l.FormData&&t instanceof l.FormData,!B(ds,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.R&&(e.a.withCredentials=e.R);try{_s(e),0<e.g&&(e.w=function(t){return Bt&&Zt(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(e.a),is(e.b,Ts(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.w)),e.w?(e.a.timeout=e.g,e.a.ontimeout=g(e.Ka,e)):e.s=mn(e.Ka,e.g,e)),is(e.b,Ts(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){is(e.b,Ts(e,"Send error: "+t.message)),gs(e,t)}}function ys(t){return"content-type"==t.toLowerCase()}function gs(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ms(t),bs(t)}function ms(t){t.N||(t.N=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ws(e){if(e.c&&void 0!==u)if(e.B[1]&&4==Es(e)&&2==Is(e))is(e.b,Ts(e,"Local request error detected and ignored"));else if(e.i&&4==Es(e))mn(e.Sb,0,e);else if(e.dispatchEvent("readystatechange"),4==Es(e)){is(e.b,Ts(e,"Request complete")),e.c=!1;try{var t,n=Is(e);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.l).match(Sn)[1]||null;if(!o&&l.self&&l.self.location){var s=l.self.location.protocol;o=s.substr(0,s.length-1)}i=!ps.test(o?o.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var a=2<Es(e)?e.a.statusText:""}catch(t){is(e.b,"Can not get status: "+t.message),a=""}e.h=a+" ["+Is(e)+"]",ms(e)}}finally{bs(e)}}}function bs(e,t){if(e.a){_s(e);var n=e.a,r=e.B[0]?f:null;e.a=null,e.B=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(Xo,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function _s(t){t.a&&t.w&&(t.a.ontimeout=null),t.s&&(l.clearTimeout(t.s),t.s=null)}function Es(t){return t.a?t.a.readyState:0}function Is(t){try{return 2<Es(t)?t.a.status:-1}catch(t){return-1}}function Ts(t,e){return e+" ["+t.P+" "+t.l+" "+Is(t)+"]"}function Ss(t){var e=Ms;this.g=[],this.w=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.B=this.i=!1,this.h=0,this.b=null,this.l=0}function Cs(t,e,n){t.a=!0,t.c=n,t.f=!e,Os(t)}function Ns(t){if(t.a){if(!t.u)throw new Rs(t);t.u=!1}}function As(t,e,n,r){t.g.push([e,n,r]),t.a&&Os(t)}function ks(t){return V(t.g,function(t){return d(t[1])})}function Os(e){if(e.h&&e.a&&ks(e)){var n=e.h,r=xs[n];r&&(l.clearTimeout(r.a),delete xs[n]),e.h=0}e.b&&(e.b.l--,delete e.b),n=e.c;for(var t=r=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],s=i[1];if(i=i[2],o=e.f?s:o)try{var a=o.call(i||e.s,n);void 0!==a&&(e.f=e.f&&(a==n||a instanceof Error),e.c=n=a),(A(n)||"function"==typeof l.Promise&&n instanceof l.Promise)&&(t=!0,e.i=!0)}catch(t){n=t,e.f=!0,ks(e)||(r=!0)}}e.c=n,t&&(a=g(e.m,e,!0),t=g(e.m,e,!1),n instanceof Ss?(As(n,a,t),n.B=!0):n.then(a,t)),r&&(n=new Ps(n),xs[n.a]=n,e.h=n.a)}function Rs(){k.call(this)}function Ds(){k.call(this)}function Ps(t){this.a=l.setTimeout(g(this.c,this),0),this.b=t}(t=ls.prototype).Ka=function(){void 0!==u&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",is(this.b,Ts(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(is(this.b,Ts(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),bs(this))},t.Ba=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),bs(this,!0)),ls.Za.Ba.call(this)},t.Sb=function(){this.wa||(this.O||this.i||this.f?ws(this):this.Hc())},t.Hc=function(){ws(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case fs:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Xo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return is(this.b,"Can not get response: "+t.message),null}},Ss.prototype.cancel=function(t){if(this.a)this.c instanceof Ss&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())}this.w?this.w.call(this.s,this):this.u=!0,this.a||(t=new Ds(this),Ns(this),Cs(this,!1,t))}},Ss.prototype.m=function(t,e){this.i=!1,Cs(this,t,e)},Ss.prototype.then=function(t,e,n){var r,i,o=new ve(function(t,e){r=t,i=e});return As(this,r,function(t){t instanceof Ds?o.cancel():i(t)}),o.then(t,e,n)},Ss.prototype.$goog_Thenable=!0,b(Rs,k),Rs.prototype.message="Deferred has already fired",Rs.prototype.name="AlreadyCalledError",b(Ds,k),Ds.prototype.message="Deferred was canceled",Ds.prototype.name="CanceledError",Ps.prototype.c=function(){throw delete xs[this.a],this.b};var xs={};function Ls(t){var e,n=document,r=wt(t).toString(),i=ae(document,"SCRIPT"),o={Tb:i,Ka:void 0},s=new Ss(o);return e=window.setTimeout(function(){Fs(i,!0);var t=new qs(js,"Timeout reached for loading script "+r);Ns(s),Cs(s,!1,t)},5e3),o.Ka=e,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Fs(i,!1,e),Ns(s),Cs(s,!0,null))},i.onerror=function(){Fs(i,!0,e);var t=new qs(Us,"Error while loading script "+r);Ns(s),Cs(s,!1,t)},lt(o={},{type:"text/javascript",charset:"UTF-8"}),ne(i,o),function(t,e){ft(t,"HTMLScriptElement"),t.src=wt(e),null===h&&(h=(e=(e=l.document).querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&a.test(e)?e:""),(e=h)&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function Ms(){if(this&&this.Tb){var t=this.Tb;t&&"SCRIPT"==t.tagName&&Fs(t,!0,this.Ka)}}function Fs(t,e,n){null!=n&&l.clearTimeout(n),t.onload=f,t.onerror=f,t.onreadystatechange=f,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Us=0,js=1;function qs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),k.call(this,n),this.code=t}function Vs(t){this.f=t}function Bs(t,e,n){if(this.c=t,t=e||{},this.u=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Gs,this.g=ct(t.secureTokenHeaders||zs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.l=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.i=t.firebaseTimeout||Ks,this.a=ct(t.firebaseHeaders||Qs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==pr(),!(n=l.XMLHttpRequest||n&&Gl.INTERNAL.node&&Gl.INTERNAL.node.XMLHttpRequest)&&!fr())throw new _("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,fr()?this.f=new os(self):dr()?this.f=new Vs(n):this.f=new Ho,this.b=null}b(qs,k),b(Vs,qo),Vs.prototype.a=function(){return new this.f},Vs.prototype.b=function(){return{}};var Ws,Hs="idToken",Gs=new Pr(3e4,6e4),zs={"Content-Type":"application/x-www-form-urlencoded"},Ks=new Pr(3e4,6e4),Qs={"Content-Type":"application/json"};function Ys(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Xs(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Js(t,e,n,r,i,o,s){(t=function(){var t=br();return!((t=gr(t)!=yr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&t<30)&&(!Bt||!Jt||9<Jt)}()||fr()?g(t.w,t):(Ws=Ws||new ve(function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{l[Zs]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){As(t,null,e,void 0)}(Ls(bt($s,{onload:Zs})),function(){e(Error("CORS_UNSUPPORTED"))})}}(t,e)}),g(t.s,t)))(e,n,r,i,o,s)}Bs.prototype.S=function(){return this.b},Bs.prototype.w=function(t,n,e,r,i,o){if(fr()&&(void 0===l.fetch||void 0===l.Headers||void 0===l.Request))throw new _("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new ls(this.f);if(o){s.g=Math.max(0,o);var a=setTimeout(function(){s.dispatchEvent("timeout")},o)}vn(s,"complete",function(){a&&clearTimeout(a);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return is(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}n&&n(e)}),yn(s,"ready",function(){a&&clearTimeout(a),Ue(this)}),yn(s,"timeout",function(){a&&clearTimeout(a),Ue(this),n&&n(null)}),vs(s,t,e,r,i)};var $s=new pt(yt,"https://apis.google.com/js/client.js?onload=%{onload}"),Zs="__fcb"+Math.floor(1e6*Math.random()).toString();function ta(t,e,n,r,i,o,s){var a=Dn(e+n);On(a,"key",t.c),s&&On(a,"cb",w().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&On(a,c,i[c]);return new ve(function(e,n){Js(t,a.toString(),function(t){t?t.error?n(Ya(t,o||{})):e(t):n(new _("network-request-failed"))},r,u?void 0:Xn(Ar(i)),t.a,t.i.get())})}function ea(t){if("string"!=typeof(t=t.email)||!ur.test(t))throw new _("invalid-email")}function na(t){"email"in t&&ea(t)}function ra(t){if(!t[Hs]){if(t.mfaPendingCredential)throw new _("multi-factor-auth-required",null,ct(t));throw new _("internal-error")}}function ia(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new _("internal-error")}else{if(!t.sessionInfo)throw new _("missing-verification-id");if(!t.code)throw new _("missing-verification-code")}}Bs.prototype.s=function(t,n,r,i,o){var s=this;Ws.then(function(){window.gapi.client.setApiKey(s.c);var e=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:r,body:i,headers:o,authType:"none",callback:function(t){window.gapi.auth.setToken(e),n&&n(t)}})}).o(function(t){n&&n({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Bs.prototype.vb=function(){return Ka(this,La,{})},Bs.prototype.xb=function(t,e){return Ka(this,Pa,{idToken:t,email:e})},Bs.prototype.yb=function(t,e){return Ka(this,xa,{idToken:t,password:e})};var oa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function sa(t){if(!t.phoneVerificationInfo)throw new _("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new _("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new _("missing-verification-code")}function aa(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new _("internal-error")}function ua(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(zn(t=new Bn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function ca(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=jo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=jo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=jo(t)):t.errorMessage&&(e=Qa(t.errorMessage)),e)throw e;ra(t)}function ha(t,e){return e.returnIdpCredential=!0,Ka(t,Ua,e)}function la(t,e){return e.returnIdpCredential=!0,Ka(t,qa,e)}function fa(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Ka(t,ja,e)}function pa(t){if(!t.oobCode)throw new _("invalid-action-code")}(t=Bs.prototype).zb=function(t,r){var i={idToken:t},o=[];return at(oa,function(t,e){var n=r[e];null===n?o.push(t):e in r&&(i[e]=n)}),o.length&&(i.deleteAttribute=o),Ka(this,Pa,i)},t.rb=function(t,e){return lt(t={requestType:"PASSWORD_RESET",email:t},e),Ka(this,Aa,t)},t.sb=function(t,e){return lt(t={requestType:"EMAIL_SIGNIN",email:t},e),Ka(this,Sa,t)},t.qb=function(t,e){return lt(t={requestType:"VERIFY_EMAIL",idToken:t},e),Ka(this,Ca,t)},t.Ab=function(t,e,n){return lt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Ka(this,Na,t)},t.cb=function(t){return Ka(this,Wa,t)},t.jb=function(t,e){return Ka(this,Ra,{oobCode:t,newPassword:e})},t.Pa=function(t){return Ka(this,va,{oobCode:t})},t.fb=function(t){return Ka(this,da,{oobCode:t})};var da={endpoint:"setAccountInfo",A:pa,Y:"email",C:!0},va={endpoint:"resetPassword",A:pa,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new _("internal-error")},C:!0},ya={endpoint:"signupNewUser",A:function(t){if(ea(t),!t.password)throw new _("weak-password")},G:ra,U:!0,C:!0},ga={endpoint:"createAuthUri",C:!0},ma={endpoint:"deleteAccount",M:["idToken"]},wa={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],A:function(t){if("array"!=n(t.deleteProvider))throw new _("internal-error")}},ba={endpoint:"emailLinkSignin",M:["email","oobCode"],A:ea,G:ra,U:!0,C:!0},_a={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],A:ea,G:ra,U:!0},Ea={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],A:sa,G:ra,C:!0,La:!0},Ia={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],A:sa,G:ra,C:!0,La:!0},Ta={endpoint:"getAccountInfo"},Sa={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new _("internal-error");ea(t)},Y:"email",C:!0},Ca={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new _("internal-error")},Y:"email",C:!0},Na={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new _("internal-error")},Y:"email",C:!0},Aa={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new _("internal-error");ea(t)},Y:"email",C:!0},ka={hb:!0,endpoint:"getProjectConfig",Rb:"GET"},Oa={hb:!0,endpoint:"getRecaptchaParam",Rb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new _("internal-error")}},Ra={endpoint:"resetPassword",A:pa,Y:"email",C:!0},Da={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Y:"sessionInfo",C:!0},Pa={endpoint:"setAccountInfo",M:["idToken"],A:na,U:!0},xa={endpoint:"setAccountInfo",M:["idToken"],A:function(t){if(na(t),!t.password)throw new _("weak-password")},G:ra,U:!0},La={endpoint:"signupNewUser",G:ra,U:!0,C:!0},Ma={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new _("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new _("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new _("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new _("internal-error")},C:!0,La:!0},Fa={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new _("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new _("internal-error")},C:!0,La:!0},Ua={endpoint:"verifyAssertion",A:aa,Wa:ua,G:ca,U:!0,C:!0},ja={endpoint:"verifyAssertion",A:aa,Wa:ua,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new _("user-not-found");if(t.errorMessage)throw Qa(t.errorMessage);ra(t)},U:!0,C:!0},qa={endpoint:"verifyAssertion",A:function(t){if(aa(t),!t.idToken)throw new _("internal-error")},Wa:ua,G:ca,U:!0},Va={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new _("invalid-custom-token")},G:ra,U:!0,C:!0},Ba={endpoint:"verifyPassword",A:function(t){if(ea(t),!t.password)throw new _("wrong-password")},G:ra,U:!0,C:!0},Wa={endpoint:"verifyPhoneNumber",A:ia,G:ra,C:!0},Ha={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new _("internal-error");ia(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",jo(t);ra(t)}},Ga={Eb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ia,G:ra,C:!0},za={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Hs]^!!t.refreshToken)throw new _("internal-error")},C:!0,La:!0};function Ka(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.M))return Ie(new _("internal-error"));var r,i=!!e.La,o=e.Rb||"POST";return Ee(n).then(e.A).then(function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),ta(t,i?t.l:t.h,e.endpoint,o,n,e.Eb,e.hb||!1)}).then(function(t){return r=t,e.Wa?e.Wa(n,r):r}).then(e.G).then(function(){if(!e.Y)return r;if(!(e.Y in r))throw new _("internal-error");return r[e.Y]})}function Qa(t){return Ya({error:{errors:[{message:t}],code:400,message:t}})}function Ya(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new _(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",lt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new _(r[i],e);return!e&&t&&(e=Nr(t)),new _("internal-error",e)}function Xa(t){this.b=t,this.a=null,this.nb=function(o){return(tu=tu||new ve(function(t,e){function n(){Dr(),_r("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Dr(),e(Error("Network Error"))},timeout:$a.get()})}if(_r("gapi.iframes.Iframe"))t();else if(_r("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();l[r]=function(){_r("gapi.load")?n():e(Error("Network Error"))},Ee(Ls(r=bt(Ja,{onload:r}))).o(function(){e(Error("Network Error"))})}}).o(function(t){throw tu=null,t})).then(function(){return new ve(function(r,i){_r("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:_r("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(t){function e(){clearTimeout(n),r()}o.a=t,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){i(Error("Network Error"))},Za.get());t.ping(e).then(e,function(){i(Error("Network Error"))})})})})}(this)}var Ja=new pt(yt,"https://apis.google.com/js/api.js?onload=%{onload}"),$a=new Pr(3e4,6e4),Za=new Pr(5e3,15e3),tu=null;function eu(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=Pn(this.i,"/__/auth/iframe"),On(this.a,"apiKey",this.g),On(this.a,"appName",this.h),this.b=null,this.c=[]}function nu(t,e,n,r,i){this.s=t,this.m=e,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function ru(t){try{return Gl.app(t).auth().Ea()}catch(t){return[]}}function iu(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.s=this.w=null,this.g=[],this.l=this.a=null}function ou(t){var a=nr();return function(t){return Ka(t,ka,{}).then(function(t){return t.authorizedDomains||[]})}(t).then(function(t){t:{var e=Dn(a),n=e.f;e=e.b;for(var r=0;r<t.length;r++){var i=t[r],o=e,s=n;if(o=0==i.indexOf("chrome-extension://")?Dn(i).b==o&&"chrome-extension"==s:("http"==s||"https"==s)&&(ar.test(i)?o==i:(i=i.split(".").join("\\."),new RegExp("^(.+\\."+i+"|"+i+")$","i").test(o)))){t=!0;break t}}t=!1}if(!t)throw new Fo(nr())})}function su(i){return i.l||(i.l=cr().then(function(){if(!i.s){var t=i.c,e=i.h,n=ru(i.b),r=new eu(i.u,i.f,i.b);r.f=t,r.b=e,r.c=z(n||[]),i.s=r.toString()}i.i=new Xa(i.s),function(r){if(!r.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.nb.then(function(){t.a.register("authEvent",e,_r("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(r.i,function(t){var e={};if(t&&t.authEvent){var n=!1;for(t=Po(t.authEvent),e=0;e<r.g.length;e++)n=r.g[e](t)||n;return(e={}).status=n?"ACK":"ERROR",Ee(e)}return e.status="ERROR",Ee(e)})}(i)})),i.l}function au(t){return t.m||(t.w=t.c?wr(t.c,ru(t.b)):null,t.m=new Bs(t.f,N(t.h),t.w)),t.m}function uu(t,e,n,r,i,o,s,a,u,c,h){return(t=new nu(t,e,n,r,i)).l=o,t.g=s,t.i=a,t.b=ct(u||null),t.f=c,t.ub(h).toString()}function cu(t){if(this.a=t||Gl.INTERNAL.reactNative&&Gl.INTERNAL.reactNative.AsyncStorage,!this.a)throw new _("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function hu(t){this.b=t,this.a={},this.f=g(this.c,this)}eu.prototype.toString=function(){return this.f?On(this.a,"v",this.f):Gn(this.a.a,"v"),this.b?On(this.a,"eid",this.b):Gn(this.a.a,"eid"),this.c.length?On(this.a,"fw",this.c.join(",")):Gn(this.a.a,"fw"),this.a.toString()},nu.prototype.ub=function(t){return this.h=t,this},nu.prototype.toString=function(){var t=Pn(this.s,"/__/auth/handler");if(On(t,"apiKey",this.m),On(t,"appName",this.c),On(t,"authType",this.u),this.a.isOAuthProvider){var e=this.a;try{var n=Gl.app(this.c).auth().ja()}catch(t){n=null}for(var r in e.kb=n,On(t,"providerId",this.a.providerId),n=Ar((e=this.a).Fb))n[r]=n[r].toString();r=e.Oc,n=ct(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}e.lb&&e.kb&&!n[e.lb]&&(n[e.lb]=e.kb),ut(n)||On(t,"customParameters",Nr(n))}if("function"==typeof this.a.Nb&&((e=this.a.Nb()).length&&On(t,"scopes",e.join(","))),this.l?On(t,"redirectUrl",this.l):Gn(t.a,"redirectUrl"),this.g?On(t,"eventId",this.g):Gn(t.a,"eventId"),this.i?On(t,"v",this.i):Gn(t.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Rn(t,s)&&On(t,s,this.b[s]);return this.h?On(t,"tid",this.h):Gn(t.a,"tid"),this.f?On(t,"eid",this.f):Gn(t.a,"eid"),(s=ru(this.c)).length&&On(t,"fw",s.join(",")),t.toString()},(t=iu.prototype).Lb=function(e,n,t){var r=new _("popup-closed-by-user"),i=new _("web-storage-unsupported"),o=this,s=!1;return this.ka().then(function(){(function(t){var e={type:"webStorageSupport"};return su(t).then(function(){return function(e,n){return e.nb.then(function(){return new ve(function(t){e.a.send(n.type,n,t,_r("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(t.i,e)}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})})(o).then(function(t){t||(e&&or(e),n(i),s=!0)})}).o(function(){}).then(function(){if(!s)return function(n){return new ve(function(e){return function t(){wn(2e3).then(function(){if(n&&!n.closed)return t();e()})}()})}(e)}).then(function(){if(!s)return wn(t).then(function(){n(r)})})},t.Ub=function(){var t=br();return!Cr(t)&&!Rr(t)},t.Qb=function(){return!1},t.Jb=function(e,t,n,r,i,o,s,a){if(!e)return Ie(new _("popup-blocked"));if(s&&!Cr())return this.ka().o(function(t){or(e),i(t)}),r(),Ee();this.a||(this.a=ou(au(this)));var u=this;return this.a.then(function(){var t=u.ka().o(function(t){throw or(e),i(t),t});return r(),t}).then(function(){Ro(n),s||rr(uu(u.u,u.f,u.b,t,n,null,o,u.c,void 0,u.h,a),e)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Kb=function(t,e,n,r){this.a||(this.a=ou(au(this)));var i=this;return this.a.then(function(){Ro(e),rr(uu(i.u,i.f,i.b,t,e,nr(),n,i.c,void 0,i.h,r))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ka=function(){var t=this;return su(this).then(function(){return t.i.nb}).o(function(){throw t.a=null,new _("network-request-failed")})},t.Xb=function(){return!0},t.Ca=function(t){this.g.push(t)},t.Qa=function(e){H(this.g,function(t){return t==e})},(t=cu.prototype).get=function(t){return Ee(this.a.getItem(t)).then(function(t){return t&&kr(t)})},t.set=function(t,e){return Ee(this.a.setItem(t,Nr(e)))},t.T=function(t){return Ee(this.a.removeItem(t))},t.ba=function(){},t.ha=function(){};var lu,fu=[];function pu(t,e,n){ut(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function du(t){this.a=t}function vu(t){this.c=t,this.b=!1,this.a=[]}function yu(r,t,e,n){var i,o,s,a,u=e||{},c=null;if(r.b)return Ie(Error("connection_unavailable"));var h=n?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new ve(function(e,n){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout(function(){n(Error("unsupported_event"))},h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){n(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?e(t.data.response):n(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),n(Error("invalid_response"))))}},r.a.push(c),l.port1.addEventListener("message",o),r.c.postMessage({eventType:t,eventId:i,data:u},[l.port2])):n(Error("connection_unavailable"))}).then(function(t){return gu(r,c),t}).o(function(t){throw gu(r,c),t})}function gu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),H(t.a,function(t){return t==e})}}function mu(){if(!_u())throw new _("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=l.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.s=!1,this.h=null;var r=this;fr()&&self?(this.l=function(){var e=fr()?self:null;if(U(fu,function(t){t.b==e&&(n=t)}),!n){var n=new hu(e);fu.push(n)}return n}(),pu(this.l,"keyChanged",function(t,n){return Cu(r).then(function(e){return 0<e.length&&U(r.a,function(t){t(e)}),{keyProcessed:B(e,n.key)}})}),pu(this.l,"ping",function(){return Ee(["keyChanged"])})):function(){var t=l.navigator;return t&&t.serviceWorker?Ee().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):Ee(null)}().then(function(t){(r.h=t)&&(r.g=new vu(new du(t)),yu(r.g,"ping",null,!0).then(function(t){t[0].fulfilled&&B(t[0].value,"keyChanged")&&(r.s=!0)}).o(function(){}))})}function wu(r){return new ve(function(e,n){var t=r.u.open("firebaseLocalStorageDb",1);t.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},t.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},t.onsuccess=function(t){(t=t.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(t):function(r){return new ve(function(t,e){var n=r.u.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}})}(r).then(function(){return wu(r)}).then(function(t){e(t)}).o(function(t){n(t)})}})}function bu(t){return t.m||(t.m=wu(t)),t.m}function _u(){try{return!!l.indexedDB}catch(t){return!1}}function Eu(t){return t.objectStore("firebaseLocalStorage")}function Iu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Tu(t){return new ve(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Su(t,e){return t.g&&t.h&&function(){var t=l.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?yu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):Ee()}function Cu(r){return bu(r).then(function(t){var i=Eu(Iu(t,!1));return i.getAll?Tu(i.getAll()):new ve(function(e,n){var r=[],t=i.openCursor();t.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},t.onerror=function(t){n(t.target.error)}})}).then(function(t){var e={},n=[];if(0==r.b){for(n=0;n<t.length;n++)e[t[n].fbase_key]=t[n].value;n=function t(e,n){var r,i=[];for(r in e)r in n?typeof e[r]!=typeof n[r]?i.push(r):"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(r.c,e),r.c=e}return n})}function Nu(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Au(t){var r=this,i=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ee().then(function(){if(_u()){var e=Or(),n="__sak"+e;return lu=lu||new mu,(i=lu).set(n,e).then(function(){return i.get(n)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return i.T(n)}).then(function(){return i}).o(function(){return r.c})}return r.c}).then(function(t){return r.type=t.type,t.ba(function(e){U(r.a,function(t){t(e)})}),t})}function ku(){this.a={},this.type="inMemory"}function Ou(){if(!function(){var t="Node"==pr();if(!(t=Ru()||t&&Gl.INTERNAL.node&&Gl.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==pr())throw new _("internal-error","The LocalStorage compatibility library was not found.");throw new _("web-storage-unsupported")}this.a=Ru()||Gl.INTERNAL.node.localStorage,this.type="localStorage"}function Ru(){try{var t=l.localStorage,e=Or();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Du(){this.type="nullStorage"}function Pu(){if(!function(){var t="Node"==pr();if(!(t=xu()||t&&Gl.INTERNAL.node&&Gl.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==pr())throw new _("internal-error","The SessionStorage compatibility library was not found.");throw new _("web-storage-unsupported")}this.a=xu()||Gl.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function xu(){try{var t=l.sessionStorage,e=Or();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Lu(){var t={};t.Browser=Uu,t.Node=ju,t.ReactNative=qu,t.Worker=Vu,this.a=t[pr()]}hu.prototype.c=function(n){var r=n.data.eventType,i=n.data.eventId,t=this.a[r];if(t&&0<t.length){n.ports[0].postMessage({status:"ack",eventId:i,eventType:r,response:null});var e=[];U(t,function(t){e.push(Ee().then(function(){return t(n.origin,n.data.data)}))}),Se(e).then(function(t){var e=[];U(t,function(t){e.push({fulfilled:t.Mb,value:t.value,reason:t.reason?t.reason.message:void 0})}),U(e,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:e})})}},du.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},vu.prototype.close=function(){for(;0<this.a.length;)gu(this,this.a[0]);this.b=!0},(t=mu.prototype).set=function(n,r){var i,o=!1,s=this;return bu(this).then(function(t){return Tu((t=Eu(Iu(i=t,!0))).get(n))}).then(function(t){var e=Eu(Iu(i,!0));return t?(t.value=r,Tu(e.put(t))):(s.b++,o=!0,(t={}).fbase_key=n,t.value=r,Tu(e.add(t)))}).then(function(){return s.c[n]=r,Su(s,n)}).ma(function(){o&&s.b--})},t.get=function(e){return bu(this).then(function(t){return Tu(Eu(Iu(t,!1)).get(e))}).then(function(t){return t&&t.value})},t.T=function(e){var n=!1,r=this;return bu(this).then(function(t){return n=!0,r.b++,Tu(Eu(Iu(t,!0)).delete(e))}).then(function(){return delete r.c[e],Su(r,e)}).ma(function(){n&&r.b--})},t.ba=function(t){0==this.a.length&&function(t){Nu(t),function e(){t.f=setTimeout(function(){t.i=Cu(t).then(function(e){0<e.length&&U(t.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()}(this),this.a.push(t)},t.ha=function(e){H(this.a,function(t){return t==e}),0==this.a.length&&Nu(this)},(t=Au.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},t.set=function(e,n){return this.b.then(function(t){return t.set(e,n)})},t.T=function(e){return this.b.then(function(t){return t.T(e)})},t.ba=function(t){this.a.push(t)},t.ha=function(e){H(this.a,function(t){return t==e})},(t=ku.prototype).get=function(t){return Ee(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ee()},t.T=function(t){return delete this.a[t],Ee()},t.ba=function(){},t.ha=function(){},(t=Ou.prototype).get=function(t){var e=this;return Ee().then(function(){return kr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return Ee().then(function(){var t=Nr(n);null===t?r.T(e):r.a.setItem(e,t)})},t.T=function(t){var e=this;return Ee().then(function(){e.a.removeItem(t)})},t.ba=function(t){l.window&&en(l.window,"storage",t)},t.ha=function(t){l.window&&on(l.window,"storage",t)},(t=Du.prototype).get=function(){return Ee(null)},t.set=function(){return Ee()},t.T=function(){return Ee()},t.ba=function(){},t.ha=function(){},(t=Pu.prototype).get=function(t){var e=this;return Ee().then(function(){return kr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return Ee().then(function(){var t=Nr(n);null===t?r.T(e):r.a.setItem(e,t)})},t.T=function(t){var e=this;return Ee().then(function(){e.a.removeItem(t)})},t.ba=function(){},t.ha=function(){};var Mu,Fu,Uu={F:Ou,$a:Pu},ju={F:Ou,$a:Pu},qu={F:cu,$a:Du},Vu={F:Ou,$a:Du},Bu={od:"local",NONE:"none",qd:"session"};function Wu(){var t=!(Rr(br())||!lr()),e=Cr(),n=Er();this.m=t,this.h=e,this.l=n,this.a={},t=Mu=Mu||new Lu;try{this.g=!er()&&Mr()||!l.indexedDB?new t.a.F:new Au(fr()?new ku:new t.a.F)}catch(t){this.g=new ku,this.h=!0}try{this.i=new t.a.$a}catch(t){this.i=new ku}this.u=new ku,this.f=g(this.Vb,this),this.b={}}function Hu(){return Fu=Fu||new Wu}function Gu(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function zu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Ku(t,e,n){return n=zu(e,n),"local"==e.F&&(t.b[n]=null),Gu(t,e.F).T(n)}function Qu(t){t.c&&(clearInterval(t.c),t.c=null)}function Yu(t){this.a=t,this.b=Hu()}(t=Wu.prototype).get=function(t,e){return Gu(this,t.F).get(zu(t,e))},t.set=function(e,t,n){var r=zu(e,n),i=this,o=Gu(this,e.F);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.F&&(i.b[r]=t)})},t.addListener=function(t,e,n){t=zu(t,e),this.l&&(this.b[t]=l.localStorage.getItem(t)),ut(this.a)&&(Gu(this,"local").ba(this.f),this.h||(er()||!Mr())&&l.indexedDB||!this.l||function(r){Qu(r),r.c=setInterval(function(){for(var t in r.a){var e=l.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new He({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Vb(e))}},1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=zu(t,e),this.a[t]&&(H(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),ut(this.a)&&(Gu(this,"local").ha(this.f),Qu(this))},t.Vb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=l.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.ib(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Gu(this,"local").ha(this.f):Qu(this),this.m)if(n=l.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?l.localStorage.setItem(e,r):l.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===l.localStorage.getItem(e)||(o.b[e]=l.localStorage.getItem(e),o.ib(e))},Bt&&Jt&&10==Jt&&l.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else U(t,g(this.ib,this))},t.ib=function(t){this.a[t]&&U(this.a[t],function(t){t()})};var Xu,Ju={name:"authEvent",F:"local"};function $u(){this.a=Hu()}function Zu(t,e){this.b=tc,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===Xu&&(Xu=l.Int32Array?new Int32Array(ac):ac),this.reset()}b(Zu,function(){this.b=-1});for(var tc=64,ec=tc-1,nc=[],rc=0;rc<ec;rc++)nc[rc]=0;var ic=G(128,nc);function oc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|Xu[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function sc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(oc(t),i=0);else{if(!p(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(oc(t),i=0)}}t.c=i,t.g+=n}Zu.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):z(this.h)};var ac=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function uc(){Zu.call(this,8,cc)}b(uc,Zu);var cc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function hc(t,e,n,r,i){this.u=t,this.i=e,this.l=n,this.m=r||null,this.s=i||null,this.h=e+":"+n,this.w=new $u,this.g=new Yu(this.h),this.f=null,this.b=[],this.a=this.c=null}function lc(t){return new _("invalid-cordova-configuration",t)}function fc(t){var e=new uc;sc(e,t),t=[];var n=8*e.g;e.c<56?sc(e,ic,56-e.c):sc(e,ic,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(oc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return q(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(t)}function pc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function dc(r){return r.f||(r.f=r.ka().then(function(){return new ve(function(n){r.Ca(function t(e){return n(e),r.Qa(t),!1}),function(i){function e(r){t=!0,n&&n.cancel(),vc(i).then(function(t){var e=o;if(t&&r&&r.url){var n=null;-1!=(e=Xi(r.url)).indexOf("/__/auth/callback")&&(n=(n="object"==typeof(n=kr(Rn(n=Dn(e),"firebaseError")||null))?E(n):null)?new Do(t.c,t.b,null,null,n,null,t.S()):new Do(t.c,t.b,e,t.f,null,null,t.S())),e=n||o}pc(i,e)})}var o=new Do("unknown",null,null,null,new _("no-auth-event")),t=!1,n=wn(500).then(function(){return vc(i).then(function(){t||pc(i,o)})}),r=l.handleOpenURL;l.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(_r("BuildInfo.packageName",l).toLowerCase()+"://")&&e({url:t}),"function"==typeof r)try{r(t)}catch(t){console.error(t)}},Mo=Mo||new xo,function(t){var n=Mo;n.a.push(t),n.b||(n.b=function(t){for(var e=0;e<n.a.length;e++)n.a[e](t)},"function"==typeof(t=_r("universalLinks.subscribe",l))&&t(null,n.b))}(e)}(r)})})),r.f}function vc(e){var n=null;return function(t){return t.b.get(Ju,t.a).then(function(t){return Po(t)})}(e.g).then(function(t){return n=t,Ku((t=e.g).b,Ju,t.a)}).then(function(){return n})}function yc(t){this.a=t,this.b=Hu()}(t=hc.prototype).ka=function(){return this.Ga?this.Ga:this.Ga=(hr(void 0)?cr().then(function(){return new ve(function(t,e){var n=l.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):Ie(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof _r("universalLinks.subscribe",l))throw lc("cordova-universal-links-plugin-fix is not installed");if(void 0===_r("BuildInfo.packageName",l))throw lc("cordova-plugin-buildinfo is not installed");if("function"!=typeof _r("cordova.plugins.browsertab.openUrl",l))throw lc("cordova-plugin-browsertab is not installed");if("function"!=typeof _r("cordova.InAppBrowser.open",l))throw lc("cordova-plugin-inappbrowser is not installed")},function(){throw new _("cordova-not-ready")})},t.Lb=function(t,e){return e(new _("operation-not-supported-in-this-environment")),Ee()},t.Jb=function(){return Ie(new _("operation-not-supported-in-this-environment"))},t.Xb=function(){return!1},t.Ub=function(){return!0},t.Qb=function(){return!0},t.Kb=function(t,e,n,r){if(this.c)return Ie(new _("redirect-operation-pending"));var i=this,o=l.document,s=null,a=null,u=null,c=null;return this.c=Ee().then(function(){return Ro(e),dc(i)}).then(function(){return function(n,t,e,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Do(t,r,null,o,new _("no-auth-event"),null,i),a=_r("BuildInfo.packageName",l);if("string"!=typeof a)throw new _("invalid-cordova-configuration");var u=_r("BuildInfo.displayName",l),c={};if(br().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=a;else{if(!br().toLowerCase().match(/android/))return Ie(new _("operation-not-supported-in-this-environment"));c.apn=a}u&&(c.appDisplayName=u),o=fc(o),c.sessionId=o;var h=uu(n.u,n.i,n.l,t,e,null,r,n.m,c,n.s,i);return n.ka().then(function(){var t=n.h;return n.w.a.set(Ju,s.v(),t)}).then(function(){var t=_r("cordova.plugins.browsertab.isAvailable",l);if("function"!=typeof t)throw new _("invalid-cordova-configuration");var e=null;t(function(t){if(t){if("function"!=typeof(e=_r("cordova.plugins.browsertab.openUrl",l)))throw new _("invalid-cordova-configuration");e(h)}else{if("function"!=typeof(e=_r("cordova.InAppBrowser.open",l)))throw new _("invalid-cordova-configuration");t=br(),n.a=e(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new ve(function(e,t){a=function(){var t=_r("cordova.plugins.browsertab.close",l);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ca(a),u=function(){s=s||wn(2e3).then(function(){t(new _("redirect-cancelled-by-user"))})},c=function(){xr()&&u()},o.addEventListener("resume",u,!1),br().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).o(function(t){return vc(i).then(function(){throw t})})}).ma(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),s&&s.cancel(),a&&i.Qa(a),i.c=null})},t.Ca=function(e){this.b.push(e),dc(this).o(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Do("unknown",null,null,null,new _("no-auth-event")),e(t))})},t.Qa=function(e){H(this.b,function(t){return t==e})};var gc={name:"pendingRedirect",F:"session"};function mc(t){return Ku(t.b,gc,t.a)}function wc(t,e,n){this.i={},this.w=0,this.D=t,this.u=e,this.m=n,this.h=[],this.f=!1,this.l=g(this.s,this),this.b=new Pc,this.B=new Uc,this.g=new yc(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.B,this.c.linkViaPopup=this.B,this.c.reauthViaPopup=this.B,this.a=bc(this.D,this.u,this.m,I)}function bc(t,e,n,r){var i=Gl.SDK_VERSION||null;return hr()?new hc(t,e,n,i,r):new iu(t,e,n,i,r)}function _c(e){e.f||(e.f=!0,e.a.Ca(e.l));var n=e.a;return e.a.ka().o(function(t){throw e.a==n&&e.reset(),t})}function Ec(n){n.a.Ub()&&_c(n).o(function(t){var e=new Do("unknown",null,null,null,new _("operation-not-supported-in-this-environment"));Ac(t)&&n.s(e)}),n.a.Qb()||xc(n.b)}function Ic(n,t){B(n.h,t)||n.h.push(t),n.f||function(t){return t.b.get(gc,t.a).then(function(t){return"pending"==t})}(n.g).then(function(t){t?mc(n.g).then(function(){_c(n).o(function(t){var e=new Do("unknown",null,null,null,new _("operation-not-supported-in-this-environment"));Ac(t)&&n.s(e)})}):Ec(n)}).o(function(){Ec(n)})}function Tc(t,e){H(t.h,function(t){return t==e})}wc.prototype.reset=function(){this.f=!1,this.a.Qa(this.l),this.a=bc(this.D,this.u,this.m),this.i={}},wc.prototype.s=function(t){if(!t)throw new _("invalid-auth-event");if(6e5<=w()-this.w&&(this.i={},this.w=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Cb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.w=w())),e=!0;break}}return xc(this.b),e};var Sc=new Pr(2e3,1e4),Cc=new Pr(3e4,6e4);function Nc(t,e,n,r,i,o,s){return t.a.Jb(e,n,r,function(){t.f||(t.f=!0,t.a.Ca(t.l))},function(){t.reset()},i,o,s)}function Ac(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function kc(e,t,n,r,i){var o;return function(t){return t.b.set(gc,"pending",t.a)}(e.g).then(function(){return e.a.Kb(t,n,r,i).o(function(t){if(Ac(t))throw new _("operation-not-supported-in-this-environment");return o=t,mc(e.g).then(function(){throw o})}).then(function(){return e.a.Xb()?new ve(function(){}):mc(e.g).then(function(){return e.pa()}).then(function(){}).o(function(){})})})}function Oc(t,e,n,r,i){return t.a.Lb(r,function(t){e.la(n,null,t,i)},Sc.get())}wc.prototype.pa=function(){return this.b.pa()};var Rc={};function Dc(t,e,n){var r=e+":"+n;return Rc[r]||(Rc[r]=new wc(t,e,n)),Rc[r]}function Pc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function xc(t){t.g||(t.g=!0,Fc(t,!1,null,null))}function Lc(t){t.g&&!t.i&&Fc(t,!1,null,null)}function Mc(t,e){if(t.b=function(){return Ee(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Fc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ie(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Mc(t,n):Mc(t,{user:null}),t.f=[],t.c=[]}function Uc(){}function jc(){this.Bb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.Bb},set:function(t){this.Bb=t},enumerable:!1})}function qc(t,e){this.a=e,Vr(this,"verificationId",t)}function Vc(t,e,n,r){return new Ao(t).cb(e,n).then(function(t){return new qc(t,r)})}function Bc(t){var e=Mi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new _("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Br(this,{token:t,expirationTime:Lr(1e3*e.exp),authTime:Lr(1e3*e.auth_time),issuedAtTime:Lr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Wc(t,e,n){var r=e&&e[Gc];if(!r)throw new _("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ct(e),this.g=n,this.c=new Ji(null,r),this.b=[];var i=this;U(e[Hc]||[],function(t){(t=zr(t))&&i.b.push(t)}),Vr(this,"auth",this.a),Vr(this,"session",this.c),Vr(this,"hints",this.b)}Pc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Pc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Fc(this,!0,null,t.a),Ee()):e.Da(n,r)?function(e,t,n){n=n.Da(t.c,t.b);var r=t.g,i=t.f,o=t.i,s=t.S(),a=!!t.c.match(/Redirect$/);n(r,i,s,o).then(function(t){Fc(e,a,t,null)}).o(function(t){Fc(e,a,null,t)})}(this,t,e):Ie(new _("invalid-auth-event")):(Fc(this,!1,null,null),Ee())}else Ie(new _("invalid-auth-event"))},Pc.prototype.pa=function(){var n=this;return new ve(function(t,e){n.b?n.b().then(t,e):(n.f.push(t),n.c.push(e),function(t){var e=new _("timeout");t.a&&t.a.cancel(),t.a=wn(Cc.get()).then(function(){t.b||(t.g=!0,Fc(t,!0,null,e))})}(n))})},Uc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.la(t.c,null,t.a,t.b),Ee()):e.Da(n,r)?function(t,e){var n=t.b,r=t.c;e.Da(r,n)(t.g,t.f,t.S(),t.i).then(function(t){e.la(r,t,null,n)}).o(function(t){e.la(r,null,t,n)})}(t,e):Ie(new _("invalid-auth-event"))}else Ie(new _("invalid-auth-event"))},qc.prototype.confirm=function(t){return t=ko(this.verificationId,t),this.a(t)};var Hc="mfaInfo",Gc="mfaPendingCredential";function zc(t,e,n,r){_.call(this,"multi-factor-auth-required",r,e),this.b=new Wc(t,e,n),Vr(this,"resolver",this.b)}function Kc(t,e,n){if(t&&v(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new zc(e,t.serverResponse,n,t.message)}catch(t){}return null}function Qc(){}function Yc(t){Vr(this,"factorId",t.ea),this.a=t}function Xc(t){if(Yc.call(this,t),this.a.ea!=Ao.PROVIDER_ID)throw new _("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Jc(t,e){for(var n in We.call(this,t),e)this[n]=e[n]}function $c(t,e){this.a=t,this.b=[],this.c=g(this.wc,this),en(this.a,"userReloaded",this.c);var r=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&U(e.multiFactor.enrolledFactors,function(t){var e=null,n={};if(t){t.uid&&(n[Yr]=t.uid),t.displayName&&(n[Kr]=t.displayName),t.enrollmentTime&&(n[Qr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(n[Xr]=t.phoneNumber);try{e=new Jr(n)}catch(t){}t=e}else t=null;t&&r.push(t)}),Zc(this,r)}function Zc(t,e){t.b=e,Vr(t,"enrolledFactors",e)}function th(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function eh(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function nh(t){this.c=t,this.b=this.a=null}function rh(t){return t.b&&1e3*t.b.c||0}function ih(t,e){var n=e.refreshToken;t.b=Li(e[Hs]||""),t.a=n}function oh(e,t){return function(t,r){return new ve(function(e,n){"refresh_token"==r.grant_type&&r.refresh_token||"authorization_code"==r.grant_type&&r.code?Js(t,t.u+"?key="+encodeURIComponent(t.c),function(t){t?t.error?n(Ya(t)):t.access_token&&t.refresh_token?e(t):n(new _("internal-error")):n(new _("network-request-failed"))},"POST",Hn(r).toString(),t.g,t.m.get()):n(new _("internal-error"))})}(e.c,t).then(function(t){return e.b=Li(t.access_token),e.a=t.refresh_token,{accessToken:e.b.toString(),refreshToken:e.a}}).o(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t})}function sh(t,e){this.a=t||null,this.b=e||null,Br(this,{lastSignInTime:Lr(e||null),creationTime:Lr(t||null)})}function ah(t,e,n,r,i,o){Br(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function uh(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null,t=Gl.SDK_VERSION?wr(Gl.SDK_VERSION):null,this.a=new Bs(this.l,N(I),t),this.b=new nh(this.a),vh(this,e[Hs]),ih(this.b,e),Vr(this,"refreshToken",this.b.a),mh(this,n||{}),dn.call(this),this.P=!1,this.s&&Ir()&&(this.i=Dc(this.s,this.l,this.m)),this.R=[],this.h=null,this.B=function(e){return new th(function(){return e.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var t=rh(e.b)-w()-3e5;return 0<t?t:0})}(this),this.Z=g(this.Ma,this);var r=this;this.oa=null,this.za=function(t){r.va(t.g)},this.aa=null,this.W=[],this.ya=function(t){hh(r,t.c)},this.$=null,this.O=new $c(this,n),Vr(this,"multiFactor",this.O)}function ch(t,e){t.aa&&on(t.aa,"languageCodeChanged",t.za),(t.aa=e)&&en(e,"languageCodeChanged",t.za)}function hh(t,e){t.W=e,Xs(t.a,Gl.SDK_VERSION?wr(Gl.SDK_VERSION,t.W):null)}function lh(t,e){t.$&&on(t.$,"frameworkChanged",t.ya),(t.$=e)&&en(e,"frameworkChanged",t.ya)}function fh(e){try{return Gl.app(e.m).auth()}catch(t){throw new _("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function ph(t){t.D||t.B.b||(t.B.start(),on(t,"tokenChanged",t.Z),en(t,"tokenChanged",t.Z))}function dh(t){on(t,"tokenChanged",t.Z),t.B.stop()}function vh(t,e){t.xa=e,Vr(t,"_lat",e)}function yh(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return Se(e).then(function(){return t})}function gh(t){t.i&&!t.P&&(t.P=!0,Ic(t.i,t))}function mh(t,e){Br(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new sh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function wh(){}function bh(t){return Ee().then(function(){if(t.D)throw new _("app-deleted")})}function _h(t){return q(t.providerData,function(t){return t.providerId})}function Eh(t,e){e&&(Ih(t,e.providerId),t.providerData.push(e))}function Ih(t,e){H(t.providerData,function(t){return t.providerId==e})}function Th(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Vr(t,e,n)}function Sh(e,t){e!=t&&(Br(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Vr(e,"metadata",function(t){return new sh(t.a,t.b)}(t.metadata)):Vr(e,"metadata",new sh),U(t.providerData,function(t){Eh(e,t)}),function(t,e){t.b=e.b,t.a=e.a}(e.b,t.b),Vr(e,"refreshToken",e.b.a),Zc(e.O,t.O.b))}function Ch(n){return n.I().then(function(t){var e=n.isAnonymous;return function(t,e){return Ka(t.a,Ta,{idToken:e}).then(g(t.Ic,t))}(n,t).then(function(){return e||Th(n,"isAnonymous",!1),t})})}function Nh(t,e){e[Hs]&&t.xa!=e[Hs]&&(ih(t.b,e),t.dispatchEvent(new Jc("tokenChanged")),vh(t,e[Hs]),Th(t,"refreshToken",t.b.a))}function Ah(t,e){return Ch(t).then(function(){if(B(_h(t),e))return yh(t).then(function(){throw new _("provider-already-linked")})})}function kh(t,e,n){return Wr({user:t,credential:Oo(e),additionalUserInfo:e=Vi(e),operationType:n})}function Oh(t,e){return Nh(t,e),t.reload().then(function(){return t})}function Rh(n,r,t,e,i){if(!Ir())return Ie(new _("operation-not-supported-in-this-environment"));if(n.h&&!i)return Ie(n.h);var o=qi(t.providerId),s=Or(n.uid+":::"),a=null;(!Cr()||lr())&&n.s&&t.isOAuthProvider&&(a=uu(n.s,n.l,n.m,r,t,null,s,Gl.SDK_VERSION||null,null,null,n.tenantId));var u=sr(a,o&&o.ta,o&&o.sa);return e=e().then(function(){if(Ph(n),!i)return n.I().then(function(){})}).then(function(){return Nc(n.i,u,r,t,s,!!a,n.tenantId)}).then(function(){return new ve(function(t,e){n.la(r,null,new _("cancelled-popup-request"),n.g||null),n.f=t,n.w=e,n.g=s,n.c=Oc(n.i,n,r,u,s)})}).then(function(t){return u&&or(u),t?Wr(t):null}).o(function(t){throw u&&or(u),t}),xh(n,e,i)}function Dh(e,t,n,r,i){if(!Ir())return Ie(new _("operation-not-supported-in-this-environment"));if(e.h&&!i)return Ie(e.h);var o=null,s=Or(e.uid+":::");return r=r().then(function(){if(Ph(e),!i)return e.I().then(function(){})}).then(function(){return e.fa=s,yh(e)}).then(function(t){return e.ga&&(t=(t=e.ga).b.set(Fh,e.v(),t.a)),t}).then(function(){return kc(e.i,t,n,s,e.tenantId)}).o(function(t){if(o=t,e.ga)return Uh(e.ga);throw o}).then(function(){if(o)throw o}),xh(e,r,i)}function Ph(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new _("internal-error");throw new _("auth-domain-config-required")}}function xh(n,t,e){var r=function(e,t,n){return e.h&&!n?(t.cancel(),Ie(e.h)):t.o(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.h||e.dispatchEvent(new Jc("userInvalidated")),e.h=t),t})}(n,t,e);return n.N.push(r),r.ma(function(){W(n.N,r)}),r.o(function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=Kc(t.v(),fh(n),g(n.hc,n))),e||t})}function Lh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Hs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new uh(e,n,t);return t.providerData&&U(t.providerData,function(t){t&&Eh(r,Wr(t))}),t.redirectEventId&&(r.fa=t.redirectEventId),r}function Mh(t){this.a=t,this.b=Hu()}Wc.prototype.Pc=function(t){var n=this;return t.ob(this.a.b,this.c).then(function(t){var e=ct(n.f);return delete e[Hc],delete e[Gc],lt(e,t),n.g(e)})},b(zc,_),Qc.prototype.ob=function(t,e,n){return e.type==$i?function(e,n,t,r){return t.Fa().then(function(t){return t={idToken:t},void 0!==r&&(t.displayName=r),lt(t,{phoneVerificationInfo:No(e.a)}),Ka(n,Ea,t)})}(this,t,e,n):function(e,n,t){return t.Fa().then(function(t){return lt(t={mfaPendingCredential:t},{phoneVerificationInfo:No(e.a)}),Ka(n,Ia,t)})}(this,t,e)},b(Yc,Qc),b(Xc,Yc),b(Jc,We),(t=$c.prototype).wc=function(t){Zc(this,function(t){var e=[];return U(t.mfaInfo||[],function(t){(t=zr(t))&&e.push(t)}),e}(t.ed))},t.Ob=function(){return this.a.I().then(function(t){return new Ji(t,null)})},t.dc=function(e,n){var r=this,i=this.a.a;return this.Ob().then(function(t){return e.ob(i,t,n)}).then(function(t){return Nh(r.a,t),r.a.reload()})},t.$c=function(t){var n=this,r="string"==typeof t?t:t.uid,e=this.a.a;return this.a.I().then(function(t){return Ka(e,za,{idToken:t,mfaEnrollmentId:r})}).then(function(t){var e=j(n.b,function(t){return t.uid!=r});return Zc(n,e),Nh(n.a,t),n.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.v=function(){return{multiFactor:{enrolledFactors:q(this.b,function(t){return t.v()})}}},th.prototype.start=function(){this.a=this.c,function e(n,t){n.stop();n.b=wn(eh(n,t)).then(function(){return e=l.document,n=null,xr()||!e?Ee():new ve(function(t){n=function(){xr()&&(e.removeEventListener("visibilitychange",n,!1),t())},e.addEventListener("visibilitychange",n,!1)}).o(function(t){throw e.removeEventListener("visibilitychange",n,!1),t});var e,n}).then(function(){return n.h()}).then(function(){e(n,!0)}).o(function(t){n.i(t)&&e(n,!1)})}(this,!0)},th.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},nh.prototype.v=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:rh(this)}},nh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ie(new _("user-token-expired")):t||!this.b||w()>rh(this)-3e4?this.a?oh(this,{grant_type:"refresh_token",refresh_token:this.a}):Ee(null):Ee({accessToken:this.b.toString(),refreshToken:this.a})},sh.prototype.v=function(){return{lastLoginAt:this.b,createdAt:this.a}},b(uh,dn),uh.prototype.va=function(t){this.oa=t,Ys(this.a,t)},uh.prototype.ja=function(){return this.oa},uh.prototype.Ea=function(){return z(this.W)},uh.prototype.Ma=function(){this.B.b&&(this.B.stop(),this.B.start())},Vr(uh.prototype,"providerId","firebase"),(t=uh.prototype).reload=function(){var t=this;return xh(this,bh(this).then(function(){return Ch(t).then(function(){return yh(t)}).then(wh)}))},t.mc=function(t){return this.I(t).then(function(t){return new Bc(t)})},t.I=function(t){var e=this;return xh(this,bh(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new _("internal-error");return t.accessToken!=e.xa&&(vh(e,t.accessToken),e.dispatchEvent(new Jc("tokenChanged"))),Th(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Ic=function(t){if(!(t=t.users)||!t.length)throw new _("internal-error");mh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?q(t,function(t){return new ah(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[]}(t),n=0;n<e.length;n++)Eh(this,e[n]);Th(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new Jc("userReloaded",{ed:t}))},t.Jc=function(t){return jr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.pb(t)},t.pb=function(t){var e=this,n=null;return xh(this,t.c(this.a,this.uid).then(function(t){return Nh(e,t),n=kh(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.Ac=function(t){return jr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.mb(t)},t.mb=function(e){var n=this,r=null;return xh(this,Ah(this,e.providerId).then(function(){return n.I()}).then(function(t){return e.b(n.a,t)}).then(function(t){return r=kh(n,t,"link"),Oh(n,t)}).then(function(){return r}))},t.Bc=function(t,e){var n=this;return xh(this,Ah(this,"phone").then(function(){return Vc(fh(n),t,e,g(n.mb,n))}))},t.Kc=function(t,e){var n=this;return xh(this,Ee().then(function(){return Vc(fh(n),t,e,g(n.pb,n))}),!0)},t.xb=function(e){var n=this;return xh(this,this.I().then(function(t){return n.a.xb(t,e)}).then(function(t){return Nh(n,t),n.reload()}))},t.cd=function(e){var n=this;return xh(this,this.I().then(function(t){return e.b(n.a,t)}).then(function(t){return Nh(n,t),n.reload()}))},t.yb=function(e){var n=this;return xh(this,this.I().then(function(t){return n.a.yb(t,e)}).then(function(t){return Nh(n,t),n.reload()}))},t.zb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return bh(this);var n=this;return xh(this,this.I().then(function(t){return n.a.zb(t,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(t){return Nh(n,t),Th(n,"displayName",t.displayName||null),Th(n,"photoURL",t.photoUrl||null),U(n.providerData,function(t){"password"===t.providerId&&(Vr(t,"displayName",n.displayName),Vr(t,"photoURL",n.photoURL))}),yh(n)}).then(wh))},t.ad=function(e){var n=this;return xh(this,Ch(this).then(function(t){return B(_h(n),e)?function(t,e,n){return Ka(t,wa,{idToken:e,deleteProvider:n})}(n.a,t,[e]).then(function(t){var e={};return U(t.providerUserInfo||[],function(t){e[t.providerId]=!0}),U(_h(n),function(t){e[t]||Ih(n,t)}),e[Ao.PROVIDER_ID]||Vr(n,"phoneNumber",null),yh(n)}):yh(n).then(function(){throw new _("no-such-provider")})}))},t.delete=function(){var e=this;return xh(this,this.I().then(function(t){return Ka(e.a,ma,{idToken:t})}).then(function(){e.dispatchEvent(new Jc("userDeleted"))})).then(function(){for(var t=0;t<e.N.length;t++)e.N[t].cancel("app-deleted");ch(e,null),lh(e,null),e.N=[],e.D=!0,dh(e),Vr(e,"refreshToken",null),e.i&&Tc(e.i,e)})},t.Cb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.fa||null)==e||"reauthViaRedirect"==t&&(this.fa||null)==e)},t.la=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?g(this.Hb,this):"reauthViaPopup"==t&&e==(this.g||null)?g(this.Ib,this):"linkViaRedirect"==t&&(this.fa||null)==e?g(this.Hb,this):"reauthViaRedirect"==t&&(this.fa||null)==e?g(this.Ib,this):null},t.Cc=function(t){var e=this;return Rh(this,"linkViaPopup",t,function(){return Ah(e,t.providerId).then(function(){return yh(e)})},!1)},t.Lc=function(t){return Rh(this,"reauthViaPopup",t,function(){return Ee()},!0)},t.Dc=function(t){var e=this;return Dh(this,"linkViaRedirect",t,function(){return Ah(e,t.providerId)},!1)},t.Mc=function(t){return Dh(this,"reauthViaRedirect",t,function(){return Ee()},!0)},t.Hb=function(e,n,t,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return t=this.I().then(function(t){return la(i.a,{requestUri:e,postBody:r,sessionId:n,idToken:t})}).then(function(t){return o=kh(i,t,"link"),Oh(i,t)}).then(function(){return o}),xh(this,t)},t.Ib=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return xh(this,Ee().then(function(){return eo(fa(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=kh(i,t,"reauthenticate"),Nh(i,t),i.h=null,i.reload()}).then(function(){return o}),!0)},t.qb=function(e){var n=this,r=null;return xh(this,this.I().then(function(t){return r=t,void 0===e||ut(e)?{}:Ri(new _i(e))}).then(function(t){return n.a.qb(r,t)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.Ab=function(e,n){var r=this,i=null;return xh(this,this.I().then(function(t){return i=t,void 0===n||ut(n)?{}:Ri(new _i(n))}).then(function(t){return r.a.Ab(i,e,t)}).then(function(t){if(r.email!=t)return r.reload()}).then(function(){}))},t.hc=function(t){var e=null,n=this;return xh(this,t=eo(Ee(t),n.uid).then(function(t){return e=kh(n,t,"reauthenticate"),Nh(n,t),n.h=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.v()},t.v=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.v(),redirectEventId:this.fa||null};return this.metadata&&lt(e,this.metadata.v()),U(this.providerData,function(t){e.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(t))}),lt(e,this.O.v()),e};var Fh={name:"redirectUser",F:"session"};function Uh(t){return Ku(t.b,Fh,t.a)}function jh(t){this.a=t,this.b=Hu(),this.c=null,this.f=function(e){var n=Bh("local"),r=Bh("session"),i=Bh("none");return function(n,r,i){var o=zu(r,i),s=Gu(n,r.F);return n.get(r,i).then(function(t){var e=null;try{e=kr(l.localStorage.getItem(o))}catch(t){}if(e&&!t)return l.localStorage.removeItem(o),n.set(r,e,i);e&&t&&"localStorage"!=s.type&&l.localStorage.removeItem(o)})}(e.b,n,e.a).then(function(){return e.b.get(r,e.a)}).then(function(t){return t?r:e.b.get(i,e.a).then(function(t){return t?i:e.b.get(n,e.a).then(function(t){return t?n:e.b.get(Vh,e.a).then(function(t){return t?Bh(t):n})})})}).then(function(t){return e.c=t,qh(e,t.F)}).o(function(){e.c||(e.c=n)})}(this),this.b.addListener(Bh("local"),this.a,g(this.g,this))}function qh(t,e){var n,r=[];for(n in Bu)Bu[n]!==e&&r.push(Ku(t.b,Bh(Bu[n]),t.a));return r.push(Ku(t.b,Vh,t.a)),function(a){return new ve(function(n,e){var r=a.length,i=[];if(r)for(var t=function(t,e){r--,i[t]=e,0==r&&n(i)},o=function(t){e(t)},s=0;s<a.length;s++)Te(a[s],m(t,s),o);else n(i)})}(r)}jh.prototype.g=function(){var e=this,n=Bh("local");zh(this,function(){return Ee().then(function(){return e.c&&"local"!=e.c.F?e.b.get(n,e.a):null}).then(function(t){if(t)return qh(e,"local").then(function(){e.c=n})})})};var Vh={name:"persistence",F:"session"};function Bh(t){return{name:"authUser",F:t}}function Wh(t,e){return zh(t,function(){return t.b.set(t.c,e.v(),t.a)})}function Hh(t){return zh(t,function(){return Ku(t.b,t.c,t.a)})}function Gh(t,e){return zh(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),Lh(t||{})})})}function zh(t,e){return t.f=t.f.then(e,e),t.f}function Kh(t){if(this.l=!1,Vr(this,"settings",new jc),Vr(this,"app",t),!el(this).options||!el(this).options.apiKey)throw new _("invalid-api-key");t=Gl.SDK_VERSION?wr(Gl.SDK_VERSION):null,this.b=new Bs(el(this).options&&el(this).options.apiKey,N(I),t),this.P=[],this.m=[],this.O=[],this.$b=Gl.INTERNAL.createSubscribe(g(this.xc,this)),this.W=void 0,this.ac=Gl.INTERNAL.createSubscribe(g(this.yc,this)),Zh(this,null),this.i=new jh(el(this).options.apiKey+":"+el(this).name),this.B=new Mh(el(this).options.apiKey+":"+el(this).name),this.Z=ol(this,function(n){var t=el(n).options.authDomain,e=function(e){var t=function(t,e){return t.b.get(Fh,t.a).then(function(t){return t&&e&&(t.authDomain=e),Lh(t||{})})}(e.B,el(e).options.authDomain).then(function(t){return(e.D=t)&&(t.ga=e.B),Uh(e.B)});return ol(e,t)}(n).then(function(){return Gh(n.i,t)}).then(function(e){return e?(e.ga=n.B,n.D&&(n.D.fa||null)==(e.fa||null)?e:e.reload().then(function(){return Wh(n.i,e).then(function(){return e})}).o(function(t){return"auth/network-request-failed"==t.code?e:Hh(n.i)})):null}).then(function(t){Zh(n,t||null)});return ol(n,e)}(this)),this.h=ol(this,function(e){return e.Z.then(function(){return Jh(e)}).o(function(){}).then(function(){if(!e.l)return e.oa()}).o(function(){}).then(function(){if(!e.l){e.aa=!0;var t=e.i;t.b.addListener(Bh("local"),t.a,e.oa)}})}(this)),this.aa=!1,this.oa=g(this.Xc,this),this.Ma=g(this.ca,this),this.xa=g(this.jc,this),this.ya=g(this.uc,this),this.za=g(this.vc,this),this.a=null,function(e){var n=el(e).options.authDomain,r=el(e).options.apiKey;n&&Ir()&&(e.Zb=e.Z.then(function(){if(!e.l){if(e.a=Dc(n,r,el(e).name),Ic(e.a,e),nl(e)&&gh(nl(e)),e.D){gh(e.D);var t=e.D;t.va(e.ja()),ch(t,e),hh(t=e.D,e.N),lh(t,e),e.D=null}return e.a}}))}(this),this.INTERNAL={},this.INTERNAL.delete=g(this.delete,this),this.INTERNAL.logFramework=g(this.Ec,this),this.s=0,dn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ja()},set:function(t){this.va(t)},enumerable:!1}),t.$=null,Object.defineProperty(t,"ti",{get:function(){return this.S()},set:function(t){this.ub(t)},enumerable:!1}),t.R=null}(this),this.N=[]}function Qh(t){We.call(this,"languageCodeChanged"),this.g=t}function Yh(t){We.call(this,"frameworkChanged"),this.c=t}function Xh(t){return t.Zb||Ie(new _("auth-domain-config-required"))}function Jh(t){if(!Ir())return Ie(new _("operation-not-supported-in-this-environment"));var e=Xh(t).then(function(){return t.a.pa()}).then(function(t){return t?Wr(t):null});return ol(t,e)}function $h(e,t){var n={};return n.apiKey=el(e).options.apiKey,n.authDomain=el(e).options.authDomain,n.appName=el(e).name,e.Z.then(function(){return function(t,e,n,r){var i=new uh(t,e);return n&&(i.ga=n),r&&hh(i,r),i.reload().then(function(){return i})}(n,t,e.B,e.Ea())}).then(function(t){return nl(e)&&t.uid==nl(e).uid?Sh(nl(e),t):(Zh(e,t),gh(t)),e.ca(t)}).then(function(){il(e)})}function Zh(t,e){nl(t)&&(function(t,e){H(t.R,function(t){return t==e})}(nl(t),t.Ma),on(nl(t),"tokenChanged",t.xa),on(nl(t),"userDeleted",t.ya),on(nl(t),"userInvalidated",t.za),dh(nl(t))),e&&(e.R.push(t.Ma),en(e,"tokenChanged",t.xa),en(e,"userDeleted",t.ya),en(e,"userInvalidated",t.za),0<t.s&&ph(e)),Vr(t,"currentUser",e),e&&(e.va(t.ja()),ch(e,t),hh(e,t.N),lh(e,t))}function tl(n,t){var e=null,r=null;return ol(n,t.then(function(t){return e=Oo(t),r=Vi(t),$h(n,t)},function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=Kc(t.v(),n,g(n.ic,n))),e||t}).then(function(){return Wr({user:nl(n),credential:e,additionalUserInfo:r,operationType:"signIn"})}))}function el(t){return t.app}function nl(t){return t.currentUser}function rl(t){return nl(t)&&nl(t)._lat||null}function il(t){if(t.aa){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](rl(t));if(t.W!==t.getUid()&&t.O.length)for(t.W=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](rl(t))}}function ol(t,e){return t.P.push(e),e.ma(function(){W(t.P,e)}),e}function sl(){}function al(){this.a={},this.b=1e12}jh.prototype.tb=function(e){var n=null,r=this;return function(t){var e=new _("invalid-persistence-type"),n=new _("unsupported-persistence-type");t:{for(r in Bu)if(Bu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(pr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!Er()&&"none"!==t)throw n}}(e),zh(this,function(){return e!=r.c.F?r.b.get(r.c,r.a).then(function(t){return n=t,qh(r,e)}).then(function(){if(r.c=Bh(e),n)return r.b.set(r.c,n,r.a)}):Ee()})},b(Kh,dn),b(Qh,We),b(Yh,We),(t=Kh.prototype).tb=function(t){return t=this.i.tb(t),ol(this,t)},t.va=function(t){this.$===t||this.l||(this.$=t,Ys(this.b,this.$),this.dispatchEvent(new Qh(this.ja())))},t.ja=function(){return this.$},t.dd=function(){var t=l.navigator;this.va(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.Ec=function(t){this.N.push(t),Xs(this.b,Gl.SDK_VERSION?wr(Gl.SDK_VERSION,this.N):null),this.dispatchEvent(new Yh(this.N))},t.Ea=function(){return z(this.N)},t.ub=function(t){this.R===t||this.l||(this.R=t,this.b.b=this.R)},t.S=function(){return this.R},t.toJSON=function(){return{apiKey:el(this).options.apiKey,authDomain:el(this).options.authDomain,appName:el(this).name,currentUser:nl(this)&&nl(this).v()}},t.Cb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.la=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?g(this.gc,this):null},t.gc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.Z.then(function(){return tl(i,ha(i.b,o))})},t.Vc=function(e){if(!Ir())return Ie(new _("operation-not-supported-in-this-environment"));var n=this,t=qi(e.providerId),r=Or(),i=null;(!Cr()||lr())&&el(this).options.authDomain&&e.isOAuthProvider&&(i=uu(el(this).options.authDomain,el(this).options.apiKey,el(this).name,"signInViaPopup",e,null,r,Gl.SDK_VERSION||null,null,null,this.S()));var o=sr(i,t&&t.ta,t&&t.sa);return ol(this,t=Xh(this).then(function(t){return Nc(t,o,"signInViaPopup",e,r,!!i,n.S())}).then(function(){return new ve(function(t,e){n.la("signInViaPopup",null,new _("cancelled-popup-request"),n.g),n.f=t,n.w=e,n.g=r,n.c=Oc(n.a,n,"signInViaPopup",o,r)})}).then(function(t){return o&&or(o),t?Wr(t):null}).o(function(t){throw o&&or(o),t}))},t.Wc=function(t){if(!Ir())return Ie(new _("operation-not-supported-in-this-environment"));var e=this;return ol(this,Xh(this).then(function(){return function(t){return zh(t,function(){return t.b.set(Vh,t.c.F,t.a)})}(e.i)}).then(function(){return kc(e.a,"signInViaRedirect",t,void 0,e.S())}))},t.pa=function(){var e=this;return Jh(this).then(function(t){return e.a&&Lc(e.a.b),t}).o(function(t){throw e.a&&Lc(e.a.b),t})},t.bd=function(t){if(!t)return Ie(new _("null-user"));if(this.R!=t.tenantId)return Ie(new _("tenant-id-mismatch"));var e=this,n={};n.apiKey=el(this).options.apiKey,n.authDomain=el(this).options.authDomain,n.appName=el(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Hs]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new uh(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ga=n),r&&hh(e,r),Sh(e,t),e}(t,n,e.B,e.Ea());return ol(this,this.h.then(function(){if(el(e).options.apiKey!=t.l)return r.reload()}).then(function(){return nl(e)&&t.uid==nl(e).uid?(Sh(nl(e),t),e.ca(t)):(Zh(e,r),gh(r),e.ca(r))}).then(function(){il(e)}))},t.wb=function(){var t=this,e=this.h.then(function(){return t.a&&Lc(t.a.b),nl(t)?(Zh(t,null),Hh(t.i).then(function(){il(t)})):Ee()});return ol(this,e)},t.Xc=function(){var r=this;return Gh(this.i,el(this).options.authDomain).then(function(t){if(!r.l){var e;if(e=nl(r)&&t){e=nl(r).uid;var n=t.uid;e=null!=e&&""!==e&&null!=n&&""!==n&&e==n}if(e)return Sh(nl(r),t),nl(r).I();(nl(r)||t)&&(Zh(r,t),t&&(gh(t),t.ga=r.B),r.a&&Ic(r.a,r),il(r))}})},t.ca=function(t){return Wh(this.i,t)},t.jc=function(){il(this),this.ca(nl(this))},t.uc=function(){this.wb()},t.vc=function(){this.wb()},t.ic=function(t){var e=this;return this.h.then(function(){return tl(e,Ee(t))})},t.xc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(nl(e))})},t.yc=function(t){var e=this;!function(t,e){t.O.push(e),ol(t,t.h.then(function(){!t.l&&B(t.O,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(rl(t)))}))}(this,function(){t.next(nl(e))})},t.Gc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then(function(){d(t)?t(nl(r)):d(t.next)&&t.next(nl(r))}),this.$b(t,e,n)},t.Fc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then(function(){r.W=r.getUid(),d(t)?t(nl(r)):d(t.next)&&t.next(nl(r))}),this.ac(t,e,n)},t.kc=function(t){var e=this,n=this.h.then(function(){return nl(e)?nl(e).I(t).then(function(t){return{accessToken:t}}):null});return ol(this,n)},t.Rc=function(t){var n=this;return this.h.then(function(){return tl(n,Ka(n.b,Va,{token:t}))}).then(function(t){var e=t.user;return Th(e,"isAnonymous",!1),n.ca(e),t})},t.Sc=function(t,e){var n=this;return this.h.then(function(){return tl(n,Ka(n.b,Ba,{email:t,password:e}))})},t.cc=function(t,e){var n=this;return this.h.then(function(){return tl(n,Ka(n.b,ya,{email:t,password:e}))})},t.Ya=function(t){var e=this;return this.h.then(function(){return tl(e,t.ia(e.b))})},t.Qc=function(t){return jr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ya(t)},t.vb=function(){var n=this;return this.h.then(function(){var t=nl(n);return t&&t.isAnonymous?Wr({user:t,credential:null,additionalUserInfo:Wr({providerId:null,isNewUser:!1}),operationType:"signIn"}):tl(n,n.b.vb()).then(function(t){var e=t.user;return Th(e,"isAnonymous",!0),n.ca(e),t})})},t.getUid=function(){return nl(this)&&nl(this).uid||null},t.bc=function(t){this.addAuthTokenListener(t),this.s++,0<this.s&&nl(this)&&ph(nl(this))},t.Nc=function(e){var n=this;U(this.m,function(t){t==e&&n.s--}),this.s<0&&(this.s=0),0==this.s&&nl(this)&&dh(nl(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(t){var e=this;this.m.push(t),ol(this,this.h.then(function(){e.l||B(e.m,t)&&t(rl(e))}))},t.removeAuthTokenListener=function(e){H(this.m,function(t){return t==e})},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(Bh("local"),t.a,this.oa),this.a&&(Tc(this.a,this),Lc(this.a.b)),Promise.resolve()},t.fc=function(t){return ol(this,function(t,e){return Ka(t,ga,{identifier:e,continueUri:Tr()?nr():"http://localhost"}).then(function(t){return t.signinMethods||[]})}(this.b,t))},t.zc=function(t){return!!To(t)},t.sb=function(e,n){var r=this;return ol(this,Ee().then(function(){var t=new _i(n);if(!t.c)throw new _("argument-error",Ti+" must be true when sending sign in link to email");return Ri(t)}).then(function(t){return r.b.sb(e,t)}).then(function(){}))},t.fd=function(t){return this.Pa(t).then(function(t){return t.data.email})},t.jb=function(t,e){return ol(this,this.b.jb(t,e).then(function(){}))},t.Pa=function(t){return ol(this,this.b.Pa(t).then(function(t){return new $r(t)}))},t.fb=function(t){return ol(this,this.b.fb(t).then(function(){}))},t.rb=function(e,t){var n=this;return ol(this,Ee().then(function(){return void 0===t||ut(t)?{}:Ri(new _i(t))}).then(function(t){return n.b.rb(e,t)}).then(function(){}))},t.Uc=function(t,e){return ol(this,Vc(this,t,e,g(this.Ya,this)))},t.Tc=function(n,r){var i=this;return ol(this,Ee().then(function(){var t=r||nr(),e=Io(n,t);if(!(t=To(t)))throw new _("argument-error","Invalid email link!");if(t.tenantId!==i.S())throw new _("tenant-id-mismatch");return i.Ya(e)}))},sl.prototype.render=function(){},sl.prototype.reset=function(){},sl.prototype.getResponse=function(){},sl.prototype.execute=function(){};var ul=null;function cl(t,e){return(e=hl(e))&&t.a[e]||null}function hl(t){return(t=void 0===t?1e12:t)?t.toString():null}function ll(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ee(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():en(this.f,"click",this.i)}function fl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function pl(){}function dl(){}al.prototype.render=function(t,e){return this.a[this.b.toString()]=new ll(t,e),this.b++},al.prototype.reset=function(t){var e=cl(this,t);t=hl(t),e&&t&&(e.delete(),delete this.a[t])},al.prototype.getResponse=function(t){return(t=cl(this,t))?t.getResponse():null},al.prototype.execute=function(t){(t=cl(this,t))&&t.execute()},ll.prototype.getResponse=function(){return fl(this),this.b},ll.prototype.execute=function(){fl(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var t=n.c.callback,e=n.c["expired-callback"];if(t)try{t(n.b)}catch(t){}n.a=setTimeout(function(){if(n.a=null,n.b=null,e)try{e()}catch(t){}n.h&&n.execute()},6e4)},500))},ll.prototype.delete=function(){fl(this),this.g=!0,clearTimeout(this.a),this.a=null,on(this.f,"click",this.i)},Vr(pl,"FACTOR_ID","phone"),dl.prototype.g=function(){return Ee(ul=ul||new al)},dl.prototype.c=function(){};var vl=null;function yl(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var gl=new pt(yt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),ml=new Pr(3e4,6e4);yl.prototype.g=function(i){var o=this;return new ve(function(t,e){var r=setTimeout(function(){e(new _("network-request-failed"))},ml.get());!l.grecaptcha||i!==o.f&&!o.b?(l[o.a]=function(){if(l.grecaptcha){o.f=i;var n=l.grecaptcha.render;l.grecaptcha.render=function(t,e){return t=n(t,e),o.b++,t},clearTimeout(r),t(l.grecaptcha)}else clearTimeout(r),e(new _("internal-error"));delete l[o.a]},Ee(Ls(bt(gl,{onload:o.a,hl:i||""}))).o(function(){clearTimeout(r),e(new _("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),t(l.grecaptcha))})},yl.prototype.c=function(){this.b--};var wl=null;function bl(t,e,n,r,i,o,s){if(Vr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.u=e,this.g=null,s=s?vl=vl||new dl:wl=wl||new yl,this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Il])throw new _("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Tl],!l.document)throw new _("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ee(e)||!this.i&&ee(e).hasChildNodes())throw new _("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Bs(t,o||null,i||null),this.w=r||function(){return null};var a=this;this.l=[];var u=this.a[_l];this.a[_l]=function(t){if(Sl(a,t),"function"==typeof u)u(t);else if("string"==typeof u){var e=_r(u,l);"function"==typeof e&&e(t)}};var c=this.a[El];this.a[El]=function(){if(Sl(a,null),"function"==typeof c)c();else if("string"==typeof c){var t=_r(c,l);"function"==typeof t&&t()}}}var _l="callback",El="expired-callback",Il="sitekey",Tl="size";function Sl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Cl(t,e){return t.h.push(e),e.ma(function(){W(t.h,e)}),e}function Nl(t){if(t.D)throw new _("internal-error","RecaptchaVerifier instance has been destroyed.")}function Al(t,e,n){var r=!1;try{this.b=n||Gl.app()}catch(t){throw new _("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new _("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ea()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Gl.SDK_VERSION?wr(Gl.SDK_VERSION,o):null,bl.call(this,n,t,e,function(){try{var e=i.b.auth().ja()}catch(t){e=null}return e},o,N(I),r)}function kl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new _("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],i<0||i>=Ol.length)throw new _("internal-error","Argument validator received an unsupported number of arguments.");n=Ol[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new _("argument-error",t+" failed: "+r)}(t=bl.prototype).Ga=function(){var e=this;return this.f?this.f:this.f=Cl(this,Ee().then(function(){if(Tr()&&!fr())return cr();throw new _("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.m.g(e.w())}).then(function(t){return e.g=t,Ka(e.s,Oa,{})}).then(function(t){e.a[Il]=t.recaptchaSiteKey}).o(function(t){throw e.f=null,t}))},t.render=function(){Nl(this);var n=this;return Cl(this,this.Ga().then(function(){if(null===n.c){var t=n.u;if(!n.i){var e=ee(t);t=se("DIV"),e.appendChild(t)}n.c=n.g.render(t,n.a)}return n.c}))},t.verify=function(){Nl(this);var i=this;return Cl(this,this.render().then(function(r){return new ve(function(e){var t=i.g.getResponse(r);if(t)e(t);else{var n=function(t){t&&(function(t,e){H(t.l,function(t){return t==e})}(i,n),e(t))};i.l.push(n),i.i&&i.g.execute(i.c)}})}))},t.reset=function(){Nl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Nl(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ee(this.u);for(var e;e=t.firstChild;)t.removeChild(e)}},b(Al,bl);var Ol="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Rl(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function Dl(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function Pl(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:v}}function xl(t,e){return{name:t||"",J:"a function",optional:!!e,K:d}}function Ll(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Ml(n){return{name:n?n+"Credential":"credential",J:n?"a valid "+n+" credential":"a valid credential",optional:!1,K:function(t){if(!t)return!1;var e=!n||t.providerId===n;return!(!t.ia||!e)}}}function Fl(t,e){return v(t)&&"string"==typeof t.type&&t.type===e&&d(t.Fa)}function Ul(t){return v(t)&&"string"==typeof t.uid}function jl(){return{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||!d(t.verify))}}}function ql(e,n,t,r){return{name:t||"",J:e.J+" or "+n.J,optional:!!r,K:function(t){return e.K(t)||n.K(t)}}}function Vl(t,e){for(var n in e){var r=e[n].name;t[r]=Hl(r,t[n],e[n].j)}}function Bl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:m(function(t){return this[t]},n),set:m(function(t,e,n,r){kl(t,[n],[r],!0),this[e]=r},r,n,e[n].gb),enumerable:!0})}}function Wl(t,e,n,r){t[e]=Hl(e,n,r)}function Hl(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return kl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Vl(Kh.prototype,{fb:{name:"applyActionCode",j:[Rl("code")]},Pa:{name:"checkActionCode",j:[Rl("code")]},jb:{name:"confirmPasswordReset",j:[Rl("code"),Rl("newPassword")]},cc:{name:"createUserWithEmailAndPassword",j:[Rl("email"),Rl("password")]},fc:{name:"fetchSignInMethodsForEmail",j:[Rl("email")]},pa:{name:"getRedirectResult",j:[]},zc:{name:"isSignInWithEmailLink",j:[Rl("emailLink")]},Fc:{name:"onAuthStateChanged",j:[ql(Pl(),xl(),"nextOrObserver"),xl("opt_error",!0),xl("opt_completed",!0)]},Gc:{name:"onIdTokenChanged",j:[ql(Pl(),xl(),"nextOrObserver"),xl("opt_error",!0),xl("opt_completed",!0)]},rb:{name:"sendPasswordResetEmail",j:[Rl("email"),ql(Pl("opt_actionCodeSettings",!0),Ll(null,!0),"opt_actionCodeSettings",!0)]},sb:{name:"sendSignInLinkToEmail",j:[Rl("email"),Pl("actionCodeSettings")]},tb:{name:"setPersistence",j:[Rl("persistence")]},Qc:{name:"signInAndRetrieveDataWithCredential",j:[Ml()]},vb:{name:"signInAnonymously",j:[]},Ya:{name:"signInWithCredential",j:[Ml()]},Rc:{name:"signInWithCustomToken",j:[Rl("token")]},Sc:{name:"signInWithEmailAndPassword",j:[Rl("email"),Rl("password")]},Tc:{name:"signInWithEmailLink",j:[Rl("email"),Rl("emailLink",!0)]},Uc:{name:"signInWithPhoneNumber",j:[Rl("phoneNumber"),jl()]},Vc:{name:"signInWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Wc:{name:"signInWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},bd:{name:"updateCurrentUser",j:[ql({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof uh)}},Ll(),"user")]},wb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Rl(null,!0)]},dd:{name:"useDeviceLanguage",j:[]},fd:{name:"verifyPasswordResetCode",j:[Rl("code")]}}),Bl(Kh.prototype,{lc:{name:"languageCode",gb:ql(Rl(),Ll(),"languageCode")},ti:{name:"tenantId",gb:ql(Rl(),Ll(),"tenantId")}}),(Kh.Persistence=Bu).LOCAL="local",Kh.Persistence.SESSION="session",Kh.Persistence.NONE="none",Vl(uh.prototype,{delete:{name:"delete",j:[]},mc:{name:"getIdTokenResult",j:[Dl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Dl("opt_forceRefresh",!0)]},Ac:{name:"linkAndRetrieveDataWithCredential",j:[Ml()]},mb:{name:"linkWithCredential",j:[Ml()]},Bc:{name:"linkWithPhoneNumber",j:[Rl("phoneNumber"),jl()]},Cc:{name:"linkWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"linkWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Jc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Ml()]},pb:{name:"reauthenticateWithCredential",j:[Ml()]},Kc:{name:"reauthenticateWithPhoneNumber",j:[Rl("phoneNumber"),jl()]},Lc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},qb:{name:"sendEmailVerification",j:[ql(Pl("opt_actionCodeSettings",!0),Ll(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Rl(null,!0)]},ad:{name:"unlink",j:[Rl("provider")]},xb:{name:"updateEmail",j:[Rl("email")]},yb:{name:"updatePassword",j:[Rl("password")]},cd:{name:"updatePhoneNumber",j:[Ml("phone")]},zb:{name:"updateProfile",j:[Pl("profile")]},Ab:{name:"verifyBeforeUpdateEmail",j:[Rl("email"),ql(Pl("opt_actionCodeSettings",!0),Ll(null,!0),"opt_actionCodeSettings",!0)]}}),Vl(al.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Vl(sl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Vl(ve.prototype,{ma:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Bl(jc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",gb:Dl("appVerificationDisabledForTesting")}}),Vl(qc.prototype,{confirm:{name:"confirm",j:[Rl("verificationCode")]}}),Wl(to,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[ao,_o,Co,io],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[ql(Rl(),Pl(),"json")]),Wl(Eo,"credential",function(t,e){return new bo(t,e)},[Rl("email"),Rl("password")]),Vl(bo.prototype,{v:{name:"toJSON",j:[Rl(null,!0)]}}),Vl(lo.prototype,{Aa:{name:"addScope",j:[Rl("scope")]},Ia:{name:"setCustomParameters",j:[Pl("customOAuthParameters")]}}),Wl(lo,"credential",fo,[ql(Rl(),Pl(),"token")]),Wl(Eo,"credentialWithLink",Io,[Rl("email"),Rl("emailLink")]),Vl(po.prototype,{Aa:{name:"addScope",j:[Rl("scope")]},Ia:{name:"setCustomParameters",j:[Pl("customOAuthParameters")]}}),Wl(po,"credential",vo,[ql(Rl(),Pl(),"token")]),Vl(yo.prototype,{Aa:{name:"addScope",j:[Rl("scope")]},Ia:{name:"setCustomParameters",j:[Pl("customOAuthParameters")]}}),Wl(yo,"credential",go,[ql(Rl(),ql(Pl(),Ll()),"idToken"),ql(Rl(),Ll(),"accessToken",!0)]),Vl(mo.prototype,{Ia:{name:"setCustomParameters",j:[Pl("customOAuthParameters")]}}),Wl(mo,"credential",wo,[ql(Rl(),Pl(),"token"),Rl("secret",!0)]),Vl(ho.prototype,{Aa:{name:"addScope",j:[Rl("scope")]},credential:{name:"credential",j:[ql(Rl(),ql(Pl(),Ll()),"optionsOrIdToken"),ql(Rl(),Ll(),"accessToken",!0)]},Ia:{name:"setCustomParameters",j:[Pl("customOAuthParameters")]}}),Vl(oo.prototype,{v:{name:"toJSON",j:[Rl(null,!0)]}}),Vl(no.prototype,{v:{name:"toJSON",j:[Rl(null,!0)]}}),Wl(Ao,"credential",ko,[Rl("verificationId"),Rl("verificationCode")]),Vl(Ao.prototype,{cb:{name:"verifyPhoneNumber",j:[ql(Rl(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Fl(t.session,$i)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Fl(t.session,Zi)&&Ul(t.multiFactorHint):t.session&&t.multiFactorUid?Fl(t.session,Zi)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),jl()]}}),Vl(So.prototype,{v:{name:"toJSON",j:[Rl(null,!0)]}}),Vl(_.prototype,{toJSON:{name:"toJSON",j:[Rl(null,!0)]}}),Vl(Uo.prototype,{toJSON:{name:"toJSON",j:[Rl(null,!0)]}}),Vl(Fo.prototype,{toJSON:{name:"toJSON",j:[Rl(null,!0)]}}),Vl(zc.prototype,{toJSON:{name:"toJSON",j:[Rl(null,!0)]}}),Vl(Wc.prototype,{Pc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.ob}}]}}),Vl($c.prototype,{Ob:{name:"getSession",j:[]},dc:{name:"enroll",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.ob}},Rl("displayName",!0)]},$c:{name:"unenroll",j:[ql({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Ul},Rl(),"multiFactorInfoIdentifier")]}}),Vl(Al.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Wl(fi,"parseLink",bi,[Rl("link")]),Wl(pl,"assertion",function(t){return new Xc(t)},[Ml("phone")]),function(){if(void 0===Gl||!Gl.INTERNAL||!Gl.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ti,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Zr,VERIFY_AND_CHANGE_EMAIL:ei,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Kh,AuthCredential:to,Error:_};Wl(t,"EmailAuthProvider",Eo,[]),Wl(t,"FacebookAuthProvider",lo,[]),Wl(t,"GithubAuthProvider",po,[]),Wl(t,"GoogleAuthProvider",yo,[]),Wl(t,"TwitterAuthProvider",mo,[]),Wl(t,"OAuthProvider",ho,[Rl("providerId")]),Wl(t,"SAMLAuthProvider",co,[Rl("providerId")]),Wl(t,"PhoneAuthProvider",Ao,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof Kh)}}]),Wl(t,"RecaptchaVerifier",Al,[ql(Rl(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Pl("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof Gl.app.App)}}]),Wl(t,"ActionCodeURL",fi,[]),Wl(t,"PhoneMultiFactorGenerator",pl,[]),Gl.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new Kh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Gl.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:g((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:g(t.kc,t),addAuthTokenListener:g(t.bc,t),removeAuthTokenListener:g(t.Nc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Gl.registerVersion("@firebase/auth","0.14.0"),Gl.INTERNAL.extendNamespace({User:uh})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Ka=(Qa.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Js(e))},Qa.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Xs(e)},Qa.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},Qa.prototype.prefixedName_=function(t){return this.prefix_+t},Qa.prototype.toString=function(){return this.domStorage_.toString()},Qa);function Qa(t){this.domStorage_=t,this.prefix_="firebase:"}var Ya=(Xa.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},Xa.prototype.get=function(t){return Zs(this.cache_,t)?this.cache_[t]:null},Xa.prototype.remove=function(t){delete this.cache_[t]},Xa);function Xa(){this.cache_={},this.isInMemoryStorage=!0}function Ja(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ka(e)}}catch(t){}return new Ya}function $a(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(55296<=i&&i<=56319){var o=i-55296;Ps(++r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(i<65536?e[n++]=i>>12|224:(e[n++]=i>>18|240,e[n++]=i>>12&63|128),e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}(t),n=new ra;n.update(e);var r=n.digest();return Ls.encodeByteArray(r)}function Za(t,e){Ps(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(fu.logLevel=wa.VERBOSE,vu=fu.log.bind(fu),e&&lu.set("logging_enabled",!0)):"function"==typeof t?vu=t:(vu=null,lu.remove("logging_enabled"))}function tu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===yu&&(yu=!1,null===vu&&!0===lu.get("logging_enabled")&&Za(!0)),vu){var n=du.apply(null,t);vu(n)}}function eu(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];tu.apply(void 0,As([n],t))}}function nu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+du.apply(void 0,As(t));fu.error(n)}function ru(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+du.apply(void 0,As(t));throw fu.error(n),new Error(n)}function iu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+du.apply(void 0,As(t));fu.warn(n)}function ou(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function su(t,e){return t===e?0:t<e?-1:1}function au(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Js(e))}function uu(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r}var cu,hu=Ja("localStorage"),lu=Ja("sessionStorage"),fu=new Na("@firebase/database"),pu=(cu=1,function(){return cu++}),du=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=du.apply(null,i):n+="object"==typeof i?Js(i):i,n+=" "}return n},vu=null,yu=!0,gu="[MIN_NAME]",mu="[MAX_NAME]",wu=function(t,e){if(t===e)return 0;if(t===gu||e===mu)return-1;if(e===gu||t===mu)return 1;var n=Cu(t),r=Cu(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},bu=function(t){if("object"!=typeof t||null===t)return Js(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Js(e[i]),r+=":",r+=bu(t[e[i]]);return r+="}"};function _u(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function Eu(t){var e,n,r,i,o;Ps(!ou(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));var s=[];for(o=52;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse();var a=s.join(""),u="";for(o=0;o<64;o+=8){var c=parseInt(a.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()}function Iu(t){try{t()}catch(e){setTimeout(function(){var t=e.stack||"";throw iu("Exception was thrown by user callback.",t),e},Math.floor(0))}}function Tu(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n}var Su=new RegExp("^-?(0*)\\d{1,10}$"),Cu=function(t){if(Su.test(t)){var e=Number(t);if(-2147483648<=e&&e<=2147483647)return e}return null},Nu=(Object.defineProperty(Au,"Empty",{get:function(){return new Au("")},enumerable:!0,configurable:!0}),Au.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},Au.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},Au.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new Au(this.pieces_,t)},Au.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},Au.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},Au.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},Au.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},Au.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],e=this.pieceNum_;e<this.pieces_.length-1;e++)t.push(this.pieces_[e]);return new Au(t,0)},Au.prototype.child=function(t){for(var e=[],n=this.pieceNum_;n<this.pieces_.length;n++)e.push(this.pieces_[n]);if(t instanceof Au)for(n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);else{var r=t.split("/");for(n=0;n<r.length;n++)0<r[n].length&&e.push(r[n])}return new Au(e,0)},Au.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},Au.relativePath=function(t,e){var n=t.getFront(),r=e.getFront();if(null===n)return e;if(n===r)return Au.relativePath(t.popFront(),e.popFront());throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")},Au.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=wu(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},Au.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},Au.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},Au);function Au(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}var ku=(Object.defineProperty(Ou,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(Ou,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),Ou.prototype.push=function(t){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=pa(t),this.checkValid_()},Ou.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=pa(t),0<this.parts_.length&&(this.byteLength_-=1)},Ou.prototype.checkValid_=function(){if(this.byteLength_>Ou.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+Ou.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>Ou.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Ou.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},Ou.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},Ou);function Ou(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=pa(this.parts_[n]);this.checkValid_()}var Ru="firebaseio.com",Du="websocket",Pu="long_polling",xu=(Lu.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},Lu.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},Lu.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},Lu.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},Lu.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&hu.set("host:"+this.host,this.internalHost))},Lu.prototype.connectionURL=function(t,e){var n;if(Ps("string"==typeof t,"typeof type must == string"),Ps("object"==typeof e,"typeof params must == object"),t===Du)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==Pu)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return _u(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},Lu.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},Lu.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},Lu);function Lu(t,e,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=hu.get("host:"+t)||this.host}function Mu(t){var e=Qu(t),n=e.namespace;"firebase"===e.domain&&ru(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===e.domain||ru("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&iu("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===e.scheme||"wss"===e.scheme;return{repoInfo:new xu(e.host,e.secure,n,r,"",n!==e.subdomain),path:new Nu(e.pathString)}}function Fu(t){return"string"==typeof t&&0!==t.length&&!Yu.test(t)}function Uu(t){return"string"==typeof t&&0!==t.length&&!Xu.test(t)}function ju(t){return null===t||"string"==typeof t||"number"==typeof t&&!ou(t)||t&&"object"==typeof t&&Zs(t,".sv")}function qu(t,e,n,r,i){i&&void 0===n||$u(ha(t,e,i),n,r)}function Vu(t,e,n,r,i){if(!i||void 0!==n){var o=ha(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];_u(n,function(t,e){var n=new Nu(t);if($u(o,e,r.child(n)),".priority"===n.getBack()&&!ju(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Fu(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Nu.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}}function Bu(t,e,n,r){if(!r||void 0!==n){if(ou(n))throw new Error(ha(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ju(n))throw new Error(ha(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function Wu(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(ha(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function Hu(t,e,n,r){if(!(r&&void 0===n||Fu(n)))throw new Error(ha(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function Gu(t,e,n,r){if(!(r&&void 0===n||Uu(n)))throw new Error(ha(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function zu(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")}function Ku(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Fu(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t=t&&t.replace(/^\/*\.info(\/|$)/,"/"),Uu(t)}(r))throw new Error(ha(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')}var Qu=function(t){var e="",n="",r="",i="",o="",s=!0,a="https",u=443;if("string"==typeof t){var c=t.indexOf("//");0<=c&&(a=t.substring(0,c-1),t=t.substring(c+2));var h=t.indexOf("/");-1===h&&(h=t.length);var l=t.indexOf("?");-1===l&&(l=t.length),e=t.substring(0,Math.min(h,l)),h<l&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(h,l)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Cs(t.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var a=s.split("=");2===a.length?r[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):iu("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,l)));0<=(c=e.indexOf(":"))?(s="https"===a||"wss"===a,u=parseInt(e.substring(c+1),10)):c=t.length;var p=e.split(".");3===p.length?(n=p[1],o=r=p[0].toLowerCase()):2===p.length?n=p[0]:"localhost"===p[0].slice(0,c).toLowerCase()&&(n="localhost"),"ns"in f&&(o=f.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},Yu=/[\[\].#$\/\u0000-\u001F\u007F]/,Xu=/[\[\].#$\u0000-\u001F\u007F]/,Ju=10485760,$u=function(n,t,e){var r=e instanceof Nu?new ku(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+r.toErrorString());if("function"==typeof t)throw new Error(n+"contains a function "+r.toErrorString()+" with contents = "+t.toString());if(ou(t))throw new Error(n+"contains "+t.toString()+" "+r.toErrorString());if("string"==typeof t&&t.length>Ju/3&&pa(t)>Ju)throw new Error(n+"contains a string greater than "+Ju+" utf8 bytes "+r.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,o=!1;if(_u(t,function(t,e){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!Fu(t)))throw new Error(n+" contains an invalid key ("+t+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(t),$u(n,e,r),r.pop()}),i&&o)throw new Error(n+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},Zu=(tc.prototype.cancel=function(t){ca("OnDisconnect.cancel",0,1,arguments.length),la("OnDisconnect.cancel",1,t,!0);var e=new Us;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},tc.prototype.remove=function(t){ca("OnDisconnect.remove",0,1,arguments.length),zu("OnDisconnect.remove",this.path_),la("OnDisconnect.remove",1,t,!0);var e=new Us;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},tc.prototype.set=function(t,e){ca("OnDisconnect.set",1,2,arguments.length),zu("OnDisconnect.set",this.path_),qu("OnDisconnect.set",1,t,this.path_,!1),la("OnDisconnect.set",2,e,!0);var n=new Us;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},tc.prototype.setWithPriority=function(t,e,n){ca("OnDisconnect.setWithPriority",2,3,arguments.length),zu("OnDisconnect.setWithPriority",this.path_),qu("OnDisconnect.setWithPriority",1,t,this.path_,!1),Bu("OnDisconnect.setWithPriority",2,e,!1),la("OnDisconnect.setWithPriority",3,n,!0);var r=new Us;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},tc.prototype.update=function(t,e){if(ca("OnDisconnect.update",1,2,arguments.length),zu("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,iu("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Vu("OnDisconnect.update",1,t,this.path_,!1),la("OnDisconnect.update",2,e,!0);var i=new Us;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},tc);function tc(t,e){this.repo_=t,this.path_=e}var ec=(nc.prototype.toJSON=function(){return ca("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},nc);function nc(t,e){this.committed=t,this.snapshot=e}var rc,ic,oc,sc=(rc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ic=0,oc=[],function(t){var e,n=t===ic;ic=t;var r=new Array(8);for(e=7;0<=e;e--)r[e]=rc.charAt(t%64),t=Math.floor(t/64);Ps(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;0<=e&&63===oc[e];e--)oc[e]=0;oc[e]++}else for(e=0;e<12;e++)oc[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=rc.charAt(oc[e]);return Ps(20===i.length,"nextPushId: Length should be 20."),i}),ac=(uc.Wrap=function(t,e){return new uc(t,e)},uc);function uc(t,e){this.name=t,this.node=e}var cc,hc=(lc.prototype.getCompare=function(){return this.compare.bind(this)},lc.prototype.indexedValueChanged=function(t,e){var n=new ac(gu,t),r=new ac(gu,e);return 0!==this.compare(n,r)},lc.prototype.minPost=function(){return ac.MIN},lc);function lc(){}var fc,pc=(Es(dc,fc=hc),Object.defineProperty(dc,"__EMPTY_NODE",{get:function(){return cc},set:function(t){cc=t},enumerable:!0,configurable:!0}),dc.prototype.compare=function(t,e){return wu(t.name,e.name)},dc.prototype.isDefinedOn=function(t){throw xs("KeyIndex.isDefinedOn not expected to be called.")},dc.prototype.indexedValueChanged=function(t,e){return!1},dc.prototype.minPost=function(){return ac.MIN},dc.prototype.maxPost=function(){return new ac(mu,cc)},dc.prototype.makePost=function(t,e){return Ps("string"==typeof t,"KeyIndex indexValue must always be a string."),new ac(t,cc)},dc.prototype.toString=function(){return".key"},dc);function dc(){return null!==fc&&fc.apply(this,arguments)||this}var vc,yc=new pc;function gc(t){return"number"==typeof t?"number:"+Eu(t):"string:"+t}function mc(t){if(t.isLeafNode()){var e=t.val();Ps("string"==typeof e||"number"==typeof e||"object"==typeof e&&Zs(e,".sv"),"Priority must be a string or number.")}else Ps(t===vc||t.isEmpty(),"priority of unexpected type.");Ps(t===vc||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")}var wc,bc,_c,Ec,Ic=(Object.defineProperty(Tc,"__childrenNodeConstructor",{get:function(){return wc},set:function(t){wc=t},enumerable:!0,configurable:!0}),Tc.prototype.isLeafNode=function(){return!0},Tc.prototype.getPriority=function(){return this.priorityNode_},Tc.prototype.updatePriority=function(t){return new Tc(this.value_,t)},Tc.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:Tc.__childrenNodeConstructor.EMPTY_NODE},Tc.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:Tc.__childrenNodeConstructor.EMPTY_NODE},Tc.prototype.hasChild=function(){return!1},Tc.prototype.getPredecessorChildName=function(t,e){return null},Tc.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:Tc.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},Tc.prototype.updateChild=function(t,e){var n=t.getFront();return null===n?e:e.isEmpty()&&".priority"!==n?this:(Ps(".priority"!==n||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,Tc.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),e)))},Tc.prototype.isEmpty=function(){return!1},Tc.prototype.numChildren=function(){return 0},Tc.prototype.forEachChild=function(t,e){return!1},Tc.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},Tc.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+gc(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"==e?Eu(this.value_):this.value_,this.lazyHash_=$a(t)}return this.lazyHash_},Tc.prototype.getValue=function(){return this.value_},Tc.prototype.compareTo=function(t){return t===Tc.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Tc.__childrenNodeConstructor?-1:(Ps(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},Tc.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=Tc.VALUE_TYPE_ORDER.indexOf(e),i=Tc.VALUE_TYPE_ORDER.indexOf(n);return Ps(0<=r,"Unknown leaf type: "+e),Ps(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},Tc.prototype.withIndex=function(){return this},Tc.prototype.isIndexed=function(){return!0},Tc.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},Tc.VALUE_TYPE_ORDER=["object","boolean","number","string"],Tc);function Tc(t,e){void 0===e&&(e=Tc.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,Ps(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),mc(this.priorityNode_)}function Sc(){return null!==Ec&&Ec.apply(this,arguments)||this}var Cc=new(Es(Sc,Ec=hc),Sc.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?wu(t.name,e.name):i},Sc.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},Sc.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},Sc.prototype.minPost=function(){return ac.MIN},Sc.prototype.maxPost=function(){return new ac(mu,new Ic("[PRIORITY-POST]",_c))},Sc.prototype.makePost=function(t,e){var n=bc(t);return new ac(e,new Ic("[PRIORITY-POST]",n))},Sc.prototype.toString=function(){return".priority"},Sc),Nc=(Ac.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},Ac.prototype.hasNext=function(){return 0<this.nodeStack_.length},Ac.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},Ac);function Ac(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var kc=(Oc.prototype.copy=function(t,e,n,r,i){return new Oc(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Oc.prototype.count=function(){return this.left.count()+1+this.right.count()},Oc.prototype.isEmpty=function(){return!1},Oc.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},Oc.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},Oc.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},Oc.prototype.minKey=function(){return this.min_().key},Oc.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},Oc.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},Oc.prototype.removeMin_=function(){if(this.left.isEmpty())return Pc.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},Oc.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Pc.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},Oc.prototype.isRed_=function(){return this.color},Oc.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},Oc.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},Oc.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},Oc.prototype.rotateLeft_=function(){var t=this.copy(null,null,Oc.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},Oc.prototype.rotateRight_=function(){var t=this.copy(null,null,Oc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},Oc.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},Oc.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},Oc.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},Oc.RED=!0,Oc.BLACK=!1,Oc);function Oc(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Oc.RED,this.left=null!=r?r:Pc.EMPTY_NODE,this.right=null!=i?i:Pc.EMPTY_NODE}var Rc=(Dc.prototype.copy=function(t,e,n,r,i){return this},Dc.prototype.insert=function(t,e,n){return new kc(t,e,null)},Dc.prototype.remove=function(t,e){return this},Dc.prototype.count=function(){return 0},Dc.prototype.isEmpty=function(){return!0},Dc.prototype.inorderTraversal=function(t){return!1},Dc.prototype.reverseTraversal=function(t){return!1},Dc.prototype.minKey=function(){return null},Dc.prototype.maxKey=function(){return null},Dc.prototype.check_=function(){return 0},Dc.prototype.isRed_=function(){return!1},Dc);function Dc(){}var Pc=(xc.prototype.insert=function(t,e){return new xc(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,kc.BLACK,null,null))},xc.prototype.remove=function(t){return new xc(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,kc.BLACK,null,null))},xc.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},xc.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},xc.prototype.isEmpty=function(){return this.root_.isEmpty()},xc.prototype.count=function(){return this.root_.count()},xc.prototype.minKey=function(){return this.root_.minKey()},xc.prototype.maxKey=function(){return this.root_.maxKey()},xc.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},xc.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},xc.prototype.getIterator=function(t){return new Nc(this.root_,null,this.comparator_,!1,t)},xc.prototype.getIteratorFrom=function(t,e){return new Nc(this.root_,t,this.comparator_,!1,e)},xc.prototype.getReverseIteratorFrom=function(t,e){return new Nc(this.root_,t,this.comparator_,!0,e)},xc.prototype.getReverseIterator=function(t){return new Nc(this.root_,null,this.comparator_,!0,t)},xc.EMPTY_NODE=new Rc,xc);function xc(t,e){void 0===e&&(e=xc.EMPTY_NODE),this.comparator_=t,this.root_=e}var Lc=Math.log(2),Mc=(Fc.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},Fc);function Fc(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Lc,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}var Uc,jc,qc=function(c,t,h,e){c.sort(t);var l=function(t,e){var n,r,i=e-t;if(0==i)return null;if(1==i)return n=c[t],r=h?h(n):n,new kc(r,n.node,kc.BLACK,null,null);var o=parseInt(i/2,10)+t,s=l(t,o),a=l(o+1,e);return n=c[o],r=h?h(n):n,new kc(r,n.node,kc.BLACK,s,a)},n=function(t){for(var e=null,n=null,a=c.length,r=function(t,e){var n=a-t,r=a;a-=t;var i=l(1+n,r),o=c[n],s=h?h(o):o;u(new kc(s,o.node,e,null,i))},u=function(t){e=e?e.left=t:n=t},i=0;i<t.count;++i){var o=t.nextBitIsOne(),s=Math.pow(2,t.count-(i+1));o?r(s,kc.BLACK):(r(s,kc.BLACK),r(s,kc.RED))}return n}(new Mc(c.length));return new Pc(e||t,n)},Vc={},Bc=(Object.defineProperty(Wc,"Default",{get:function(){return Ps(Cc,"ChildrenNode.ts has not been loaded"),Uc=Uc||new Wc({".priority":Vc},{".priority":Cc})},enumerable:!0,configurable:!0}),Wc.prototype.get=function(t){var e=ta(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Pc?e:null},Wc.prototype.hasIndex=function(t){return Zs(this.indexSet_,t.toString())},Wc.prototype.addIndex=function(t,e){Ps(t!==yc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],i=!1,o=e.getIterator(ac.Wrap),s=o.getNext();s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();n=i?qc(r,t.getCompare()):Vc;var a=t.toString(),u=Is({},this.indexSet_);u[a]=t;var c=Is({},this.indexes_);return c[a]=n,new Wc(c,u)},Wc.prototype.addToIndexes=function(u,c){var h=this;return new Wc(na(this.indexes_,function(t,e){var n=ta(h.indexSet_,e);if(Ps(n,"Missing index implementation for "+e),t===Vc){if(n.isDefinedOn(u.node)){for(var r=[],i=c.getIterator(ac.Wrap),o=i.getNext();o;)o.name!==u.name&&r.push(o),o=i.getNext();return r.push(u),qc(r,n.getCompare())}return Vc}var s=c.get(u.name),a=t;return s&&(a=a.remove(new ac(u.name,s))),a.insert(u,u.node)}),this.indexSet_)},Wc.prototype.removeFromIndexes=function(n,r){return new Wc(na(this.indexes_,function(t){if(t===Vc)return t;var e=r.get(n.name);return e?t.remove(new ac(n.name,e)):t}),this.indexSet_)},Wc);function Wc(t,e){this.indexes_=t,this.indexSet_=e}function Hc(t,e){return wu(t.name,e.name)}function Gc(t,e){return wu(t,e)}var zc,Kc=(Object.defineProperty(Qc,"EMPTY_NODE",{get:function(){return jc=jc||new Qc(new Pc(Gc),null,Bc.Default)},enumerable:!0,configurable:!0}),Qc.prototype.isLeafNode=function(){return!1},Qc.prototype.getPriority=function(){return this.priorityNode_||jc},Qc.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new Qc(this.children_,t,this.indexMap_)},Qc.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?jc:e},Qc.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},Qc.prototype.hasChild=function(t){return null!==this.children_.get(t)},Qc.prototype.updateImmediateChild=function(t,e){if(Ps(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new ac(t,e),r=void 0,i=void 0;i=e.isEmpty()?(r=this.children_.remove(t),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),this.indexMap_.addToIndexes(n,this.children_));var o=r.isEmpty()?jc:this.priorityNode_;return new Qc(r,o,i)},Qc.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Ps(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},Qc.prototype.isEmpty=function(){return this.children_.isEmpty()},Qc.prototype.numChildren=function(){return this.children_.count()},Qc.prototype.val=function(n){if(this.isEmpty())return null;var r={},i=0,o=0,s=!0;if(this.forEachChild(Cc,function(t,e){r[t]=e.val(n),i++,s&&Qc.INTEGER_REGEXP_.test(t)?o=Math.max(o,Number(t)):s=!1}),!n&&s&&o<2*i){var t=[];for(var e in r)t[e]=r[e];return t}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},Qc.prototype.hash=function(){if(null===this.lazyHash_){var r="";this.getPriority().isEmpty()||(r+="priority:"+gc(this.getPriority().val())+":"),this.forEachChild(Cc,function(t,e){var n=e.hash();""!==n&&(r+=":"+t+":"+n)}),this.lazyHash_=""===r?"":$a(r)}return this.lazyHash_},Qc.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new ac(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},Qc.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},Qc.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new ac(e,this.children_.get(e)):null},Qc.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},Qc.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new ac(e,this.children_.get(e)):null},Qc.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},Qc.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},Qc.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,ac.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},Qc.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},Qc.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,ac.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},Qc.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Xc?-1:0},Qc.prototype.withIndex=function(t){if(t===yc||this.indexMap_.hasIndex(t))return this;var e=this.indexMap_.addIndex(t,this.children_);return new Qc(this.children_,this.priorityNode_,e)},Qc.prototype.isIndexed=function(t){return t===yc||this.indexMap_.hasIndex(t)},Qc.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()!==e.children_.count())return!1;for(var n=this.getIterator(Cc),r=e.getIterator(Cc),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1},Qc.prototype.resolveIndex_=function(t){return t===yc?null:this.indexMap_.get(t.toString())},Qc.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,Qc);function Qc(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&mc(this.priorityNode_),this.children_.isEmpty()&&Ps(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function Yc(){return zc.call(this,new Pc(Gc),Kc.EMPTY_NODE,Bc.Default)||this}var Xc=new(Es(Yc,zc=Kc),Yc.prototype.compareTo=function(t){return t===this?0:1},Yc.prototype.equals=function(t){return t===this},Yc.prototype.getPriority=function(){return this},Yc.prototype.getImmediateChild=function(t){return Kc.EMPTY_NODE},Yc.prototype.isEmpty=function(){return!1},Yc);Object.defineProperties(ac,{MIN:{value:new ac(gu,Kc.EMPTY_NODE)},MAX:{value:new ac(mu,Xc)}}),pc.__EMPTY_NODE=Kc.EMPTY_NODE,Ic.__childrenNodeConstructor=Kc,vc=Xc,_c=Xc;var Jc,$c=!0;function Zc(r,t){if(void 0===t&&(t=null),null===r)return Kc.EMPTY_NODE;if("object"==typeof r&&".priority"in r&&(t=r[".priority"]),Ps(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof r&&".value"in r&&null!==r[".value"]&&(r=r[".value"]),"object"!=typeof r||".sv"in r)return new Ic(r,Zc(t));if(r instanceof Array||!$c){var i=Kc.EMPTY_NODE;return _u(r,function(t,e){if(Zs(r,t)&&"."!==t.substring(0,1)){var n=Zc(e);!n.isLeafNode()&&n.isEmpty()||(i=i.updateImmediateChild(t,n))}}),i.updatePriority(Zc(t))}var o=[],s=!1;if(_u(r,function(t,e){if("."!==t.substring(0,1)){var n=Zc(e);n.isEmpty()||(s=s||!n.getPriority().isEmpty(),o.push(new ac(t,n)))}}),0===o.length)return Kc.EMPTY_NODE;var e=qc(o,Hc,function(t){return t.name},Gc);if(s){var n=qc(o,Cc.getCompare());return new Kc(e,Zc(t),new Bc({".priority":n},{".priority":Cc}))}return new Kc(e,Zc(t),Bc.Default)}function th(){return null!==Jc&&Jc.apply(this,arguments)||this}bc=Zc;var eh,nh=new(Es(th,Jc=hc),th.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?wu(t.name,e.name):n},th.prototype.isDefinedOn=function(t){return!0},th.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},th.prototype.minPost=function(){return ac.MIN},th.prototype.maxPost=function(){return ac.MAX},th.prototype.makePost=function(t,e){var n=Zc(t);return new ac(e,n)},th.prototype.toString=function(){return".value"},th),rh=(Es(ih,eh=hc),ih.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},ih.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},ih.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?wu(t.name,e.name):i},ih.prototype.makePost=function(t,e){var n=Zc(t),r=Kc.EMPTY_NODE.updateChild(this.indexPath_,n);return new ac(e,r)},ih.prototype.maxPost=function(){var t=Kc.EMPTY_NODE.updateChild(this.indexPath_,Xc);return new ac(mu,t)},ih.prototype.toString=function(){return this.indexPath_.slice().join("/")},ih);function ih(t){var e=eh.call(this)||this;return e.indexPath_=t,Ps(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),e}var oh=(sh.prototype.val=function(){return ca("DataSnapshot.val",0,0,arguments.length),this.node_.val()},sh.prototype.exportVal=function(){return ca("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},sh.prototype.toJSON=function(){return ca("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},sh.prototype.exists=function(){return ca("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},sh.prototype.child=function(t){ca("DataSnapshot.child",0,1,arguments.length),t=String(t),Gu("DataSnapshot.child",1,t,!1);var e=new Nu(t),n=this.ref_.child(e);return new sh(this.node_.getChild(e),n,Cc)},sh.prototype.hasChild=function(t){ca("DataSnapshot.hasChild",1,1,arguments.length),Gu("DataSnapshot.hasChild",1,t,!1);var e=new Nu(t);return!this.node_.getChild(e).isEmpty()},sh.prototype.getPriority=function(){return ca("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},sh.prototype.forEach=function(n){var r=this;return ca("DataSnapshot.forEach",1,1,arguments.length),la("DataSnapshot.forEach",1,n,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(t,e){return n(new sh(e,r.ref_.child(t),Cc))})},sh.prototype.hasChildren=function(){return ca("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(sh.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),sh.prototype.numChildren=function(){return ca("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},sh.prototype.getRef=function(){return ca("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(sh.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),sh);function sh(t,e,n){this.node_=t,this.ref_=e,this.index_=n}var ah=(uh.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},uh.prototype.getEventType=function(){return this.eventType},uh.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},uh.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Js(this.snapshot.exportVal())},uh);function uh(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var ch=(hh.prototype.getPath=function(){return this.path},hh.prototype.getEventType=function(){return"cancel"},hh.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},hh.prototype.toString=function(){return this.path.toString()+":cancel"},hh);function hh(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var lh=(fh.prototype.respondsTo=function(t){return"value"===t},fh.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new ah("value",this,new oh(t.snapshotNode,e.getRef(),n))},fh.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Ps(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},fh.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new ch(this,t,e):null},fh.prototype.matches=function(t){return t instanceof fh&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},fh.prototype.hasAnyCallback=function(){return null!==this.callback_},fh);function fh(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}var ph,dh=(vh.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Zs(this.callbacks_,e)},vh.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new ch(this,t,e):null},vh.prototype.createEvent=function(t,e){Ps(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new ah(t.type,this,new oh(t.snapshotNode,n,r),t.prevName)},vh.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Ps(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},vh.prototype.matches=function(e){var n=this;if(e instanceof vh){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var t=Object.keys(e.callbacks_),r=Object.keys(this.callbacks_),i=t.length;if(i===r.length){if(1!==i)return r.every(function(t){return e.callbacks_[t]===n.callbacks_[t]});var o=t[0],s=r[0];return!(s!==o||e.callbacks_[o]&&this.callbacks_[s]&&e.callbacks_[o]!==this.callbacks_[s])}}}return!1},vh.prototype.hasAnyCallback=function(){return null!==this.callbacks_},vh);function vh(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}var yh=(Object.defineProperty(gh,"__referenceConstructor",{get:function(){return Ps(ph,"Reference.ts has not been loaded"),ph},set:function(t){ph=t},enumerable:!0,configurable:!0}),gh.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===yc){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==gu)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==mu)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Cc){if(null!=e&&!ju(e)||null!=n&&!ju(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Ps(t.getIndex()instanceof rh||t.getIndex()===nh,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},gh.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},gh.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},gh.prototype.getQueryParams=function(){return this.queryParams_},gh.prototype.getRef=function(){return ca("Query.ref",0,0,arguments.length),new gh.__referenceConstructor(this.repo,this.path)},gh.prototype.on=function(t,e,n,r){ca("Query.on",2,4,arguments.length),Wu("Query.on",1,t,!1),la("Query.on",2,e,!1);var i=gh.getCancelAndContextArgs_("Query.on",n,r);if("value"===t)this.onValueEvent(e,i.cancel,i.context);else{var o={};o[t]=e,this.onChildEvent(o,i.cancel,i.context)}return e},gh.prototype.onValueEvent=function(t,e,n){var r=new lh(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},gh.prototype.onChildEvent=function(t,e,n){var r=new dh(t,e,n);this.repo.addEventCallbackForQuery(this,r)},gh.prototype.off=function(t,e,n){ca("Query.off",0,3,arguments.length),Wu("Query.off",1,t,!0),la("Query.off",2,e,!0),fa("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new lh(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new dh(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},gh.prototype.once=function(e,n,t,r){var i=this;ca("Query.once",1,4,arguments.length),Wu("Query.once",1,e,!1),la("Query.once",2,n,!0);var o=gh.getCancelAndContextArgs_("Query.once",t,r),s=!0,a=new Us;a.promise.catch(function(){});var u=function(t){s&&(s=!1,i.off(e,u),n&&n.bind(o.context)(t),a.resolve(t))};return this.on(e,u,function(t){i.off(e,u),o.cancel&&o.cancel.bind(o.context)(t),a.reject(t)}),a.promise},gh.prototype.limitToFirst=function(t){if(ca("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new gh(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},gh.prototype.limitToLast=function(t){if(ca("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new gh(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},gh.prototype.orderByChild=function(t){if(ca("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Gu("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var e=new Nu(t);if(e.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var n=new rh(e),r=this.queryParams_.orderBy(n);return gh.validateQueryEndpoints_(r),new gh(this.repo,this.path,r,!0)},gh.prototype.orderByKey=function(){ca("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(yc);return gh.validateQueryEndpoints_(t),new gh(this.repo,this.path,t,!0)},gh.prototype.orderByPriority=function(){ca("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(Cc);return gh.validateQueryEndpoints_(t),new gh(this.repo,this.path,t,!0)},gh.prototype.orderByValue=function(){ca("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(nh);return gh.validateQueryEndpoints_(t),new gh(this.repo,this.path,t,!0)},gh.prototype.startAt=function(t,e){void 0===t&&(t=null),ca("Query.startAt",0,2,arguments.length),qu("Query.startAt",1,t,this.path,!0),Hu("Query.startAt",2,e,!0);var n=this.queryParams_.startAt(t,e);if(gh.validateLimit_(n),gh.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(e=t=null),new gh(this.repo,this.path,n,this.orderByCalled_)},gh.prototype.endAt=function(t,e){void 0===t&&(t=null),ca("Query.endAt",0,2,arguments.length),qu("Query.endAt",1,t,this.path,!0),Hu("Query.endAt",2,e,!0);var n=this.queryParams_.endAt(t,e);if(gh.validateLimit_(n),gh.validateQueryEndpoints_(n),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new gh(this.repo,this.path,n,this.orderByCalled_)},gh.prototype.equalTo=function(t,e){if(ca("Query.equalTo",1,2,arguments.length),qu("Query.equalTo",1,t,this.path,!1),Hu("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},gh.prototype.toString=function(){return ca("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},gh.prototype.toJSON=function(){return ca("Query.toJSON",0,1,arguments.length),this.toString()},gh.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},gh.prototype.queryIdentifier=function(){var t=this.queryObject(),e=bu(t);return"{}"===e?"default":e},gh.prototype.isEqual=function(t){if(ca("Query.isEqual",1,1,arguments.length),!(t instanceof gh))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var e=this.repo===t.repo,n=this.path.equals(t.path),r=this.queryIdentifier()===t.queryIdentifier();return e&&n&&r},gh.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,la(t,3,r.cancel,!0),r.context=n,fa(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(ha(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(gh.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),gh);function gh(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}var mh=(wh.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&0<this.children.size){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},wh.prototype.remember=function(t,e){if(t.isEmpty())this.value=e,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(t,e);else{var n=t.getFront();this.children.has(n)||this.children.set(n,new wh);var r=this.children.get(n);t=t.popFront(),r.remember(t,e)}},wh.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Cc,function(t,e){n.remember(new Nu(t),e)}),this.forget(t)}if(0<this.children.size){var r=t.getFront();return t=t.popFront(),!this.children.has(r)||this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},wh.prototype.forEachTree=function(r,i){null!==this.value?i(r,this.value):this.forEachChild(function(t,e){var n=new Nu(r.toString()+"/"+t);e.forEachTree(n,i)})},wh.prototype.forEachChild=function(n){this.children.forEach(function(t,e){n(e,t)})},wh);function wh(){this.value=null,this.children=new Map}function bh(t,e){return t&&"object"==typeof t?(Ps(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t}var _h,Eh,Ih=function(t,r){var i,e=t.getPriority().val(),n=bh(e,r);if(t.isLeafNode()){var o=t,s=bh(o.getValue(),r);return s!==o.getValue()||n!==o.getPriority().val()?new Ic(s,Zc(n)):t}var a=t;return n!==(i=a).getPriority().val()&&(i=i.updatePriority(new Ic(n))),a.forEachChild(Cc,function(t,e){var n=Ih(e,r);n!==e&&(i=i.updateImmediateChild(t,n))}),i};(Eh=_h=_h||{})[Eh.OVERWRITE=0]="OVERWRITE",Eh[Eh.MERGE=1]="MERGE",Eh[Eh.ACK_USER_WRITE=2]="ACK_USER_WRITE",Eh[Eh.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var Th=(Sh.User=new Sh(!0,!1,null,!1),Sh.Server=new Sh(!1,!0,null,!1),Sh.forServerTaggedQuery=function(t){return new Sh(!1,!0,t,!0)},Sh);function Sh(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Ps(!r||e,"Tagged queries must be from server.")}var Ch,Nh=(Ah.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Ps(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new Nu(t));return new Ah(Nu.Empty,e,this.revert)}return Ps(this.path.getFront()===t,"operationForChild called for unrelated child."),new Ah(this.path.popFront(),this.affectedTree,this.revert)},Ah);function Ah(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=_h.ACK_USER_WRITE,this.source=Th.User}var kh=(Oh.fromObject=function(t){var n=Oh.Empty;return _u(t,function(t,e){n=n.set(new Nu(t),e)}),n},Oh.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},Oh.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Nu.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null===r)return null;var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null==i?null:{path:new Nu(n).child(i.path),value:i.value}},Oh.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},Oh.prototype.subtree=function(t){if(t.isEmpty())return this;var e=t.getFront(),n=this.children.get(e);return null!==n?n.subtree(t.popFront()):Oh.Empty},Oh.prototype.set=function(t,e){if(t.isEmpty())return new Oh(e,this.children);var n=t.getFront(),r=(this.children.get(n)||Oh.Empty).set(t.popFront(),e),i=this.children.insert(n,r);return new Oh(this.value,i)},Oh.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?Oh.Empty:new Oh(null,this.children);var e=t.getFront(),n=this.children.get(e);if(n){var r=n.remove(t.popFront()),i=void 0;return i=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&i.isEmpty()?Oh.Empty:new Oh(this.value,i)}return this},Oh.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},Oh.prototype.setTree=function(t,e){if(t.isEmpty())return e;var n=t.getFront(),r=(this.children.get(n)||Oh.Empty).setTree(t.popFront(),e),i=void 0;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new Oh(this.value,i)},Oh.prototype.fold=function(t){return this.fold_(Nu.Empty,t)},Oh.prototype.fold_=function(n,r){var i={};return this.children.inorderTraversal(function(t,e){i[t]=e.fold_(n.child(t),r)}),r(n,this.value,i)},Oh.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Nu.Empty,e)},Oh.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},Oh.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Nu.Empty,e)},Oh.prototype.foreachOnPath_=function(t,e,n){if(t.isEmpty())return this;this.value&&n(e,this.value);var r=t.getFront(),i=this.children.get(r);return i?i.foreachOnPath_(t.popFront(),e.child(r),n):Oh.Empty},Oh.prototype.foreach=function(t){this.foreach_(Nu.Empty,t)},Oh.prototype.foreach_=function(n,r){this.children.inorderTraversal(function(t,e){e.foreach_(n.child(t),r)}),this.value&&r(n,this.value)},Oh.prototype.foreachChild=function(n){this.children.inorderTraversal(function(t,e){e.value&&n(t,e.value)})},Oh.Empty=new Oh(null),Oh);function Oh(t,e){void 0===e&&(e=Ch=Ch||new Pc(su)),this.value=t,this.children=e}var Rh=(Dh.prototype.operationForChild=function(t){return this.path.isEmpty()?new Dh(this.source,Nu.Empty):new Dh(this.source,this.path.popFront())},Dh);function Dh(t,e){this.source=t,this.path=e,this.type=_h.LISTEN_COMPLETE}var Ph=(xh.prototype.operationForChild=function(t){return this.path.isEmpty()?new xh(this.source,Nu.Empty,this.snap.getImmediateChild(t)):new xh(this.source,this.path.popFront(),this.snap)},xh);function xh(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=_h.OVERWRITE}var Lh=(Mh.prototype.operationForChild=function(t){if(this.path.isEmpty()){var e=this.children.subtree(new Nu(t));return e.isEmpty()?null:e.value?new Ph(this.source,Nu.Empty,e.value):new Mh(this.source,Nu.Empty,e)}return Ps(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new Mh(this.source,this.path.popFront(),this.children)},Mh.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},Mh);function Mh(t,e,n){this.source=t,this.path=e,this.children=n,this.type=_h.MERGE}var Fh=(Uh.prototype.isFullyInitialized=function(){return this.fullyInitialized_},Uh.prototype.isFiltered=function(){return this.filtered_},Uh.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},Uh.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},Uh.prototype.getNode=function(){return this.node_},Uh);function Uh(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}var jh=(qh.prototype.updateEventSnap=function(t,e,n){return new qh(new Fh(t,e,n),this.serverCache_)},qh.prototype.updateServerSnap=function(t,e,n){return new qh(this.eventCache_,new Fh(t,e,n))},qh.prototype.getEventCache=function(){return this.eventCache_},qh.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},qh.prototype.getServerCache=function(){return this.serverCache_},qh.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},qh.Empty=new qh(new Fh(Kc.EMPTY_NODE,!1,!1),new Fh(Kc.EMPTY_NODE,!1,!1)),qh);function qh(t,e){this.eventCache_=t,this.serverCache_=e}var Vh=(Bh.valueChange=function(t){return new Bh(Bh.VALUE,t)},Bh.childAddedChange=function(t,e){return new Bh(Bh.CHILD_ADDED,e,t)},Bh.childRemovedChange=function(t,e){return new Bh(Bh.CHILD_REMOVED,e,t)},Bh.childChangedChange=function(t,e,n){return new Bh(Bh.CHILD_CHANGED,e,t,n)},Bh.childMovedChange=function(t,e){return new Bh(Bh.CHILD_MOVED,e,t)},Bh.CHILD_ADDED="child_added",Bh.CHILD_REMOVED="child_removed",Bh.CHILD_CHANGED="child_changed",Bh.CHILD_MOVED="child_moved",Bh.VALUE="value",Bh);function Bh(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}var Wh=(Hh.prototype.updateChild=function(t,e,n,r,i,o){Ps(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Vh.childRemovedChange(e,s)):Ps(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(Vh.childAddedChange(e,n)):o.trackChildChange(Vh.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},Hh.prototype.updateFullNode=function(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild(Cc,function(t,e){n.hasChild(t)||i.trackChildChange(Vh.childRemovedChange(t,e))}),n.isLeafNode()||n.forEachChild(Cc,function(t,e){if(r.hasChild(t)){var n=r.getImmediateChild(t);n.equals(e)||i.trackChildChange(Vh.childChangedChange(t,e,n))}else i.trackChildChange(Vh.childAddedChange(t,e))})),n.withIndex(this.index_)},Hh.prototype.updatePriority=function(t,e){return t.isEmpty()?Kc.EMPTY_NODE:t.updatePriority(e)},Hh.prototype.filtersNodes=function(){return!1},Hh.prototype.getIndexedFilter=function(){return this},Hh.prototype.getIndex=function(){return this.index_},Hh);function Hh(t){this.index_=t}var Gh=(zh.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Ps(e===Vh.CHILD_ADDED||e===Vh.CHILD_CHANGED||e===Vh.CHILD_REMOVED,"Only child changes supported for tracking"),Ps(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===Vh.CHILD_ADDED&&i===Vh.CHILD_REMOVED)this.changeMap.set(n,Vh.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===Vh.CHILD_REMOVED&&i===Vh.CHILD_ADDED)this.changeMap.delete(n);else if(e===Vh.CHILD_REMOVED&&i===Vh.CHILD_CHANGED)this.changeMap.set(n,Vh.childRemovedChange(n,r.oldSnap));else if(e===Vh.CHILD_CHANGED&&i===Vh.CHILD_ADDED)this.changeMap.set(n,Vh.childAddedChange(n,t.snapshotNode));else{if(e!==Vh.CHILD_CHANGED||i!==Vh.CHILD_CHANGED)throw xs("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Vh.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},zh.prototype.getChanges=function(){return Array.from(this.changeMap.values())},zh);function zh(){this.changeMap=new Map}function Kh(){}var Qh=new(Kh.prototype.getCompleteChild=function(t){return null},Kh.prototype.getChildAfterChild=function(t,e,n){return null},Kh),Yh=(Xh.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Fh(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},Xh.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},Xh);function Xh(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}var Jh=function(t,e){this.viewCache=t,this.changes=e},$h=(Zh.prototype.assertIndexed=function(t){Ps(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Ps(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},Zh.prototype.applyOperation=function(t,e,n,r){var i,o,s=new Gh;if(e.type===_h.OVERWRITE){var a=e;i=a.source.fromUser?this.applyUserOverwrite_(t,a.path,a.snap,n,r,s):(Ps(a.source.fromServer,"Unknown source."),o=a.source.tagged||t.getServerCache().isFiltered()&&!a.path.isEmpty(),this.applyServerOverwrite_(t,a.path,a.snap,n,r,o,s))}else if(e.type===_h.MERGE){var u=e;i=u.source.fromUser?this.applyUserMerge_(t,u.path,u.children,n,r,s):(Ps(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.getServerCache().isFiltered(),this.applyServerMerge_(t,u.path,u.children,n,r,o,s))}else if(e.type===_h.ACK_USER_WRITE){var c=e;i=c.revert?this.revertUserWrite_(t,c.path,n,r,s):this.ackUserWrite_(t,c.path,c.affectedTree,n,r,s)}else{if(e.type!==_h.LISTEN_COMPLETE)throw xs("Unknown operation type: "+e.type);i=this.listenComplete_(t,e.path,n,s)}var h=s.getChanges();return Zh.maybeAddValueEvent_(t,i,h),new Jh(i,h)},Zh.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(0<n.length||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Vh.valueChange(e.getCompleteEventSnap()))}},Zh.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s=void 0,a=void 0;if(e.isEmpty())if(Ps(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),c=u instanceof Kc?u:Kc.EMPTY_NODE,h=n.calcCompleteEventChildren(c);s=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var l=n.calcCompleteEventCache(t.getCompleteServerSnap());s=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var f=e.getFront();if(".priority"===f){Ps(1===e.getLength(),"Can't have a priority with additional path components");var p=o.getNode();a=t.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(e,p,a);s=null!=d?this.filter_.updatePriority(p,d):o.getNode()}else{var v=e.popFront(),y=void 0;if(o.isCompleteForChild(f)){a=t.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),a);y=null!=g?o.getNode().getImmediateChild(f).updateChild(v,g):o.getNode().getImmediateChild(f)}else y=n.calcCompleteChild(f,t.getServerCache());s=null!=y?this.filter_.updateChild(o.getNode(),f,y,v,r,i):o.getNode()}}return t.updateEventSnap(s,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},Zh.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var h=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),h,null)}else{var l=e.getFront();if(!u.isCompleteForPath(e)&&1<e.getLength())return t;var f=e.popFront(),p=u.getNode().getImmediateChild(l).updateChild(f,n);a=".priority"===l?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),l,p,f,Qh,null)}var d=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),v=new Yh(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,v,s)},Zh.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Yh(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var h=e.getFront();if(".priority"===h)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var l=e.popFront(),f=u.getNode().getImmediateChild(h),p=void 0;if(l.isEmpty())p=n;else{var d=c.getCompleteChild(h);p=null!=d?".priority"===l.getBack()&&d.getChild(l.parent()).isEmpty()?d:d.updateChild(l,n):Kc.EMPTY_NODE}if(f.equals(p))s=t;else{var v=this.filter_.updateChild(u.getNode(),h,p,l,c,o);s=t.updateEventSnap(v,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},Zh.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},Zh.prototype.applyUserMerge_=function(r,i,t,o,s,a){var u=this,c=r;return t.foreach(function(t,e){var n=i.child(t);Zh.cacheHasChild_(r,n.getFront())&&(c=u.applyUserOverwrite_(c,n,e,o,s,a))}),t.foreach(function(t,e){var n=i.child(t);Zh.cacheHasChild_(r,n.getFront())||(c=u.applyUserOverwrite_(c,n,e,o,s,a))}),c},Zh.prototype.applyMerge_=function(n,t){return t.foreach(function(t,e){n=n.updateChild(t,e)}),n},Zh.prototype.applyServerMerge_=function(o,t,e,s,a,u,c){var h=this;if(o.getServerCache().getNode().isEmpty()&&!o.getServerCache().isFullyInitialized())return o;var n,l=o;n=t.isEmpty()?e:kh.Empty.setTree(t,e);var f=o.getServerCache().getNode();return n.children.inorderTraversal(function(t,e){if(f.hasChild(t)){var n=o.getServerCache().getNode().getImmediateChild(t),r=h.applyMerge_(n,e);l=h.applyServerOverwrite_(l,new Nu(t),r,s,a,u,c)}}),n.children.inorderTraversal(function(t,e){var n=!o.getServerCache().isCompleteForChild(t)&&null==e.value;if(!f.hasChild(t)&&!n){var r=o.getServerCache().getNode().getImmediateChild(t),i=h.applyMerge_(r,e);l=h.applyServerOverwrite_(l,new Nu(t),i,s,a,u,c)}}),l},Zh.prototype.ackUserWrite_=function(t,r,e,n,i,o){if(null!=n.shadowingWrite(r))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=e.value){if(r.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(r))return this.applyServerOverwrite_(t,r,a.getNode().getChild(r),n,i,s,o);if(r.isEmpty()){var u=kh.Empty;return a.getNode().forEachChild(yc,function(t,e){u=u.set(new Nu(t),e)}),this.applyServerMerge_(t,r,u,n,i,s,o)}return t}var c=kh.Empty;return e.foreach(function(t,e){var n=r.child(t);a.isCompleteForPath(n)&&(c=c.set(t,a.getNode().getChild(n)))}),this.applyServerMerge_(t,r,c,n,i,s,o)},Zh.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Qh,r)},Zh.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s=new Yh(n,t,r),a=t.getEventCache().getNode(),u=void 0;if(e.isEmpty()||".priority"===e.getFront()){var c=void 0;if(t.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();Ps(h instanceof Kc,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(h)}c=c,u=this.filter_.updateFullNode(a,c,i)}else{var l=e.getFront(),f=n.calcCompleteChild(l,t.getServerCache());null==f&&t.getServerCache().isCompleteForChild(l)&&(f=a.getImmediateChild(l)),(u=null!=f?this.filter_.updateChild(a,l,f,e.popFront(),s,i):t.getEventCache().getNode().hasChild(l)?this.filter_.updateChild(a,l,Kc.EMPTY_NODE,e.popFront(),s,i):a).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(Nu.Empty),t.updateEventSnap(u,o,this.filter_.filtersNodes())},Zh);function Zh(t){this.filter_=t}var tl=(el.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===Vh.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(Vh.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,Vh.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,Vh.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,Vh.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,Vh.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,Vh.VALUE,t,n,e),i},el.prototype.generateEventsForType_=function(r,e,t,i,o){var s=this,n=t.filter(function(t){return t.type===e});n.sort(this.compareChanges_.bind(this)),n.forEach(function(e){var n=s.materializeSingleChange_(e,o);i.forEach(function(t){t.respondsTo(e.type)&&r.push(t.createEvent(n,s.query_))})})},el.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},el.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw xs("Should only compare child_ events.");var n=new ac(t.childName,t.snapshotNode),r=new ac(e.childName,e.snapshotNode);return this.index_.compare(n,r)},el);function el(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}var nl,rl=(il.prototype.getQuery=function(){return this.query_},il.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},il.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},il.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},il.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},il.prototype.removeEventRegistration=function(t,n){var r=[];if(n){Ps(null==t,"A cancel should cancel all event registrations.");var i=this.query_.path;this.eventRegistrations_.forEach(function(t){n=n;var e=t.createCancelEvent(n,i);e&&r.push(e)})}if(t){for(var e=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){e=e.concat(this.eventRegistrations_.slice(o+1));break}}else e.push(s)}this.eventRegistrations_=e}else this.eventRegistrations_=[];return r},il.prototype.applyOperation=function(t,e,n){t.type===_h.MERGE&&null!==t.source.queryId&&(Ps(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Ps(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Ps(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},il.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Cc,function(t,e){n.push(Vh.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(Vh.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},il.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},il);function il(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new Wh(n.getIndex()),i=n.getNodeFilter();this.processor_=new $h(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(Kc.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Kc.EMPTY_NODE,s.getNode(),null),c=new Fh(a,o.isFullyInitialized(),r.filtersNodes()),h=new Fh(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new jh(h,c),this.eventGenerator_=new tl(this.query_)}var ol=(Object.defineProperty(sl,"__referenceConstructor",{get:function(){return Ps(nl,"Reference.ts has not been loaded"),nl},set:function(t){Ps(!nl,"__referenceConstructor has already been defined"),nl=t},enumerable:!0,configurable:!0}),sl.prototype.isEmpty=function(){return 0===this.views.size},sl.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var s=this.views.get(o);return Ps(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(t,e,n)}var a=[];try{for(var u=Cs(this.views.values()),c=u.next();!c.done;c=u.next())s=c.value,a=a.concat(s.applyOperation(t,e,n))}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a},sl.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),u=!1;u=!!a||(a=r instanceof Kc?n.calcCompleteEventChildren(r):Kc.EMPTY_NODE,!1);var c=new jh(new Fh(a,u,!1),new Fh(r,i,!1));s=new rl(t,c),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},sl.prototype.removeEventRegistration=function(t,e,n){var r,i,o=t.queryIdentifier(),s=[],a=[],u=this.hasCompleteView();if("default"===o)try{for(var c=Cs(this.views.entries()),h=c.next();!h.done;h=c.next()){var l=Ns(h.value,2),f=l[0],p=l[1];a=a.concat(p.removeEventRegistration(e,n)),p.isEmpty()&&(this.views.delete(f),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery()))}}catch(t){r={error:t}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}else(p=this.views.get(o))&&(a=a.concat(p.removeEventRegistration(e,n)),p.isEmpty()&&(this.views.delete(o),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery())));return u&&!this.hasCompleteView()&&s.push(new sl.__referenceConstructor(t.repo,t.path)),{removed:s,events:a}},sl.prototype.getQueryViews=function(){var e,t,n=[];try{for(var r=Cs(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},sl.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=Cs(this.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r||s.getCompleteServerCache(t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},sl.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},sl.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},sl.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},sl.prototype.getCompleteView=function(){var e,t;try{for(var n=Cs(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return null},sl);function sl(){this.views=new Map}var al=(ul.prototype.addWrite=function(t,e){if(t.isEmpty())return new ul(new kh(e));var n=this.writeTree_.findRootMostValueAndPath(t);if(null!=n){var r=n.path,i=n.value,o=Nu.relativePath(r,t);return i=i.updateChild(o,e),new ul(this.writeTree_.set(r,i))}var s=new kh(e);return new ul(this.writeTree_.setTree(t,s))},ul.prototype.addWrites=function(n,t){var r=this;return _u(t,function(t,e){r=r.addWrite(n.child(t),e)}),r},ul.prototype.removeWrite=function(t){return t.isEmpty()?ul.Empty:new ul(this.writeTree_.setTree(t,kh.Empty))},ul.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},ul.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(Nu.relativePath(e.path,t)):null},ul.prototype.getCompleteChildren=function(){var n=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Cc,function(t,e){n.push(new ac(t,e))}):this.writeTree_.children.inorderTraversal(function(t,e){null!=e.value&&n.push(new ac(t,e.value))}),n},ul.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var e=this.getCompleteNode(t);return new ul(null!=e?new kh(e):this.writeTree_.subtree(t))},ul.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},ul.prototype.apply=function(t){return function n(r,t,i){if(null!=t.value)return i.updateChild(r,t.value);var o=null;return t.children.inorderTraversal(function(t,e){".priority"===t?(Ps(null!==e.value,"Priority writes must always be leaf nodes"),o=e.value):i=n(r.child(t),e,i)}),i.getChild(r).isEmpty()||null===o||(i=i.updateChild(r.child(".priority"),o)),i}(Nu.Empty,this.writeTree_,t)},ul.Empty=new ul(new kh(null)),ul);function ul(t){this.writeTree_=t}var cl=(hl.prototype.childWrites=function(t){return new ll(t,this)},hl.prototype.addOverwrite=function(t,e,n,r){Ps(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},hl.prototype.addMerge=function(t,e,n){Ps(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},hl.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},hl.prototype.removeWrite=function(e){var n=this,t=this.allWrites_.findIndex(function(t){return t.writeId===e});Ps(0<=t,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[t];this.allWrites_.splice(t,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&0<=s;){var a=this.allWrites_[s];a.visible&&(t<=s&&this.recordContainsPath_(a,r.path)?i=!1:r.path.contains(a.path)&&(o=!0)),s--}return!!i&&(o?this.resetTree_():r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):_u(r.children,function(t){n.visibleWrites_=n.visibleWrites_.removeWrite(r.path.child(t))}),!0)},hl.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},hl.prototype.calcCompleteEventCache=function(e,t,n,r){if(n||r){var i=this.visibleWrites_.childCompoundWrite(e);if(!r&&i.isEmpty())return t;if(r||null!=t||i.hasCompleteWrite(Nu.Empty)){var o=hl.layerTree_(this.allWrites_,function(t){return(t.visible||r)&&(!n||!~n.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e);return u=t||Kc.EMPTY_NODE,o.apply(u)}return null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var a=this.visibleWrites_.childCompoundWrite(e);if(a.isEmpty())return t;if(null!=t||a.hasCompleteWrite(Nu.Empty)){var u=t||Kc.EMPTY_NODE;return a.apply(u)}return null},hl.prototype.calcCompleteEventChildren=function(t,e){var r=Kc.EMPTY_NODE,n=this.visibleWrites_.getCompleteNode(t);if(n)return n.isLeafNode()||n.forEachChild(Cc,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Cc,function(t,e){var n=i.childCompoundWrite(new Nu(t)).apply(e);r=r.updateImmediateChild(t,n)}),i.getCompleteChildren().forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r},hl.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Ps(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},hl.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},hl.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},hl.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode(Nu.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],h=o.getCompare(),l=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=l.getNext();f&&c.length<r;)0!==h(f,n)&&c.push(f),f=l.getNext();return c},hl.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},hl.prototype.resetTree_=function(){this.visibleWrites_=hl.layerTree_(this.allWrites_,hl.DefaultFilter_,Nu.Empty),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},hl.DefaultFilter_=function(t){return t.visible},hl.layerTree_=function(t,e,n){for(var r=al.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)n.contains(s)?(a=Nu.relativePath(n,s),r=r.addWrite(a,o.snap)):s.contains(n)&&(a=Nu.relativePath(s,n),r=r.addWrite(Nu.Empty,o.snap.getChild(a)));else{if(!o.children)throw xs("WriteRecord should have .snap or .children");if(n.contains(s))a=Nu.relativePath(n,s),r=r.addWrites(a,o.children);else if(s.contains(n))if((a=Nu.relativePath(s,n)).isEmpty())r=r.addWrites(Nu.Empty,o.children);else{var u=ta(o.children,a.getFront());if(u){var c=u.getChild(a.popFront());r=r.addWrite(Nu.Empty,c)}}}}}return r},hl);function hl(){this.visibleWrites_=al.Empty,this.allWrites_=[],this.lastWriteId_=-1}var ll=(fl.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},fl.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},fl.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},fl.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},fl.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},fl.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},fl.prototype.child=function(t){return new fl(this.treePath_.child(t),this.writeTree_)},fl);function fl(t,e){this.treePath_=t,this.writeTree_=e}var pl=(dl.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new Ph(Th.User,t,e)):[]},dl.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=kh.fromObject(e);return this.applyOperationToSyncPoints_(new Lh(Th.User,t,r))},dl.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=kh.Empty;return null!=n.snap?r=r.set(Nu.Empty,!0):_u(n.children,function(t,e){r=r.set(new Nu(t),e)}),this.applyOperationToSyncPoints_(new Nh(n.path,r,e))}return[]},dl.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new Ph(Th.Server,t,e))},dl.prototype.applyServerMerge=function(t,e){var n=kh.fromObject(e);return this.applyOperationToSyncPoints_(new Lh(Th.Server,t,n))},dl.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Rh(Th.Server,t))},dl.prototype.applyTaggedQueryOverwrite=function(t,e,n){var r=this.queryKeyForTag_(n);if(null==r)return[];var i=dl.parseQueryKey_(r),o=i.path,s=i.queryId,a=Nu.relativePath(o,t),u=new Ph(Th.forServerTaggedQuery(s),a,e);return this.applyTaggedOperation_(o,u)},dl.prototype.applyTaggedQueryMerge=function(t,e,n){var r=this.queryKeyForTag_(n);if(r){var i=dl.parseQueryKey_(r),o=i.path,s=i.queryId,a=Nu.relativePath(o,t),u=kh.fromObject(e),c=new Lh(Th.forServerTaggedQuery(s),a,u);return this.applyTaggedOperation_(o,c)}return[]},dl.prototype.applyTaggedListenComplete=function(t,e){var n=this.queryKeyForTag_(e);if(n){var r=dl.parseQueryKey_(n),i=r.path,o=r.queryId,s=Nu.relativePath(i,t),a=new Rh(Th.forServerTaggedQuery(o),s);return this.applyTaggedOperation_(i,a)}return[]},dl.prototype.addEventRegistration=function(t,e){var r=t.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=Nu.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()});var n,s=this.syncPointTree_.get(r);s?(o=o||s.hasCompleteView(),i=i||s.getCompleteServerCache(Nu.Empty)):(s=new ol,this.syncPointTree_=this.syncPointTree_.set(r,s)),null!=i?n=!0:(n=!1,i=Kc.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache(Nu.Empty);n&&(i=i.updateImmediateChild(t,n))}));var a=s.viewExistsForQuery(t);if(!a&&!t.getQueryParams().loadsAllData()){var u=dl.makeQueryKey_(t);Ps(!this.queryToTagMap.has(u),"View does not exist, but we have a tag");var c=dl.getNextQueryTag_();this.queryToTagMap.set(u,c),this.tagToQueryMap.set(c,u)}var h=this.pendingWriteTree_.childWrites(r),l=s.addEventRegistration(t,e,h,i,n);if(!a&&!o){var f=s.viewForQuery(t);l=l.concat(this.setupListener_(t,f))}return l},dl.prototype.removeEventRegistration=function(t,e,n){var r=this,i=t.path,o=this.syncPointTree_.get(i),s=[];if(o&&("default"===t.queryIdentifier()||o.viewExistsForQuery(t))){var a=o.removeEventRegistration(t,e,n);o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i));var u=a.removed;s=a.events;var c=-1!==u.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(i,function(t,e){return e.hasCompleteView()});if(c&&!h){var l=this.syncPointTree_.subtree(i);if(!l.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(l),p=0;p<f.length;++p){var d=f[p],v=d.getQuery(),y=this.createListenerForView_(d);this.listenProvider_.startListening(dl.queryForListening_(v),this.tagForQuery_(v),y.hashFn,y.onComplete)}}!h&&0<u.length&&!n&&(c?this.listenProvider_.stopListening(dl.queryForListening_(t),null):u.forEach(function(t){var e=r.queryToTagMap.get(dl.makeQueryKey_(t));r.listenProvider_.stopListening(dl.queryForListening_(t),e)})),this.removeTags_(u)}return s},dl.prototype.calcCompleteEventCache=function(i,t){var e=this.pendingWriteTree_,n=this.syncPointTree_.findOnPath(i,function(t,e){var n=Nu.relativePath(t,i),r=e.getCompleteServerCache(n);if(r)return r});return e.calcCompleteEventCache(i,n,t,!0)},dl.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),_u(n,function(t,e){r=r.concat(e)}),r})},dl.prototype.removeTags_=function(t){for(var e=0;e<t.length;++e){var n=t[e];if(!n.getQueryParams().loadsAllData()){var r=dl.makeQueryKey_(n),i=this.queryToTagMap.get(r);this.queryToTagMap.delete(r),this.tagToQueryMap.delete(i)}}},dl.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},dl.prototype.setupListener_=function(t,e){var n=t.path,r=this.tagForQuery_(t),i=this.createListenerForView_(e),o=this.listenProvider_.startListening(dl.queryForListening_(t),r,i.hashFn,i.onComplete),s=this.syncPointTree_.subtree(n);if(r)Ps(!s.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var a=s.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),_u(n,function(t,e){r=r.concat(e)}),r}),u=0;u<a.length;++u){var c=a[u];this.listenProvider_.stopListening(dl.queryForListening_(c),this.tagForQuery_(c))}return o},dl.prototype.createListenerForView_=function(t){var n=this,r=t.getQuery(),i=this.tagForQuery_(r);return{hashFn:function(){return(t.getServerCache()||Kc.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return i?n.applyTaggedListenComplete(r.path,i):n.applyListenComplete(r.path);var e=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,r);return n.removeEventRegistration(r,null,e)}}},dl.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},dl.parseQueryKey_=function(t){var e=t.indexOf("$");return Ps(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Nu(t.substr(0,e))}},dl.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},dl.prototype.tagForQuery_=function(t){var e=dl.makeQueryKey_(t);return this.queryToTagMap.get(e)},dl.getNextQueryTag_=function(){return dl.nextQueryTag_++},dl.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Ps(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},dl.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Nu.Empty))},dl.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(Nu.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(Nu.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,h=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,h))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},dl.prototype.applyOperationDescendantsHelper_=function(o,t,s,a){var u=this,e=t.get(Nu.Empty);null==s&&null!=e&&(s=e.getCompleteServerCache(Nu.Empty));var c=[];return t.children.inorderTraversal(function(t,e){var n=s?s.getImmediateChild(t):null,r=a.child(t),i=o.operationForChild(t);i&&(c=c.concat(u.applyOperationDescendantsHelper_(i,e,n,r)))}),e&&(c=c.concat(e.applyOperation(o,a,s))),c},dl.nextQueryTag_=1,dl);function dl(t){this.listenProvider_=t,this.syncPointTree_=kh.Empty,this.pendingWriteTree_=new cl,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}var vl=(yl.prototype.getNode=function(t){return this.rootNode_.getChild(t)},yl.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},yl);function yl(){this.rootNode_=Kc.EMPTY_NODE}var gl=(ml.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(tu("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},ml.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout(function(){return e(null)},0),this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)}))},ml.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})},ml.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',iu(t)},ml);function ml(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}var wl=(bl.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Zs(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},bl.prototype.get=function(){return Ms(this.counters_)},bl);function bl(){this.counters_={}}var _l=(El.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new wl),this.collections_[e]},El.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},El.collections_={},El.reporters_={},El);function El(){}var Il=(Tl.prototype.get=function(){var t=this.collection_.get(),n=Is({},t);return this.last_&&_u(this.last_,function(t,e){n[t]=n[t]-e}),this.last_=t,n},Tl);function Tl(t){this.collection_=t,this.last_=null}var Sl=(Cl.prototype.includeStat=function(t){this.statsToReport_[t]=!0},Cl.prototype.reportStats_=function(){var n=this,t=this.statsListener_.get(),r={},i=!1;_u(t,function(t,e){0<e&&Zs(n.statsToReport_,t)&&(r[t]=e,i=!0)}),i&&this.server_.reportStats(r),Tu(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},Cl);function Cl(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Il(t);var n=1e4+2e4*Math.random();Tu(this.reportStats_.bind(this),Math.floor(n))}var Nl=(Al.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new kl(i)),e.add(r)}e&&this.eventLists_.push(e)},Al.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},Al.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},Al.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},Al);function Al(){this.eventLists_=[],this.recursionDepth_=0}var kl=(Ol.prototype.add=function(t){this.events_.push(t)},Ol.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();vu&&tu("event: "+e.toString()),Iu(n)}}},Ol.prototype.getPath=function(){return this.path_},Ol);function Ol(t){this.path_=t,this.events_=[]}var Rl=(Dl.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=As(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},Dl.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},Dl.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},Dl.prototype.validateEventType_=function(e){Ps(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},Dl);function Dl(t){this.allowedEvents_=t,this.listeners_={},Ps(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}var Pl,xl=(Es(Ll,Pl=Rl),Ll.getInstance=function(){return new Ll},Ll.prototype.getInitialEvent=function(t){return Ps("visible"===t,"Unknown event type: "+t),[this.visible_]},Ll);function Ll(){var e,t,n=Pl.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,t&&document.addEventListener(t,function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))},!1),n}var Ml,Fl=(Es(Ul,Ml=Rl),Ul.getInstance=function(){return new Ul},Ul.prototype.getInitialEvent=function(t){return Ps("online"===t,"Unknown event type: "+t),[this.online_]},Ul.prototype.currentlyOnline=function(){return this.online_},Ul);function Ul(){var t=Ml.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Vs()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}var jl=(ql.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},ql.prototype.handleResponse=function(t,e){var r=this;this.pendingResponses[t]=e;for(var n=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&Iu(function(){r.onMessage_(e[t])})},n=0;n<e.length;++n)t(n);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==n(););},ql);function ql(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var Vl=(Bl.prototype.open=function(t,e){var s=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new jl(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){s.log_("Timed out trying to connect."),s.onClosed_(),s.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if("complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!s.isClosed_){s.scriptTagHolder=new Wl(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Ns(t,5),r=n[0],i=n[1],o=n[2];if(n[3],n[4],s.incrementIncomingBytes_(t),s.scriptTagHolder)if(s.connectTimeoutTimer_&&(clearTimeout(s.connectTimeoutTimer_),s.connectTimeoutTimer_=null),s.everConnected_=!0,"start"===r)s.id=i,s.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(s.scriptTagHolder.sendNewPolls=!1,s.myPacketOrderer.closeAfter(i,function(){s.onClosed_()})):s.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Ns(t,2),r=n[0],i=n[1];s.incrementIncomingBytes_(t),s.myPacketOrderer.handleResponse(r,i)},function(){s.onClosed_()},s.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),s.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=s.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",s.transportSessionId&&(t.s=s.transportSessionId),s.lastSessionId&&(t.ls=s.lastSessionId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Ru)&&(t.r="f");var e=s.urlFn(t);s.log_("Connecting via long-poll to "+e),s.scriptTagHolder.addTag(e,function(){})}})},Bl.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},Bl.forceAllow=function(){Bl.forceAllow_=!0},Bl.forceDisallow=function(){Bl.forceDisallow_=!0},Bl.isAvailable=function(){return!!Bl.forceAllow_||!(Bl.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},Bl.prototype.markConnectionHealthy=function(){},Bl.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},Bl.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},Bl.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},Bl.prototype.send=function(t){var e=Js(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=function(t){var e=Os(t);return Ls.encodeByteArray(e,!0)}(e),r=uu(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},Bl.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},Bl.prototype.incrementIncomingBytes_=function(t){var e=Js(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},Bl);function Bl(t,e,n,r){this.connId=t,this.repoInfo=e,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=eu(t),this.stats_=_l.getCollection(e),this.urlFn=function(t){return e.connectionURL(Pu,t)}}var Wl=(Hl.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||tu("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},Hl.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},Hl.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},Hl.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;0<this.pendingSegs.length&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},Hl.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},Hl.prototype.addLongPollTag_=function(t,e){var n=this;function r(){n.outstandingRequests.delete(e),n.newRequest_()}this.outstandingRequests.add(e);var i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},Hl.prototype.addTag=function(t,n){var r=this;setTimeout(function(){try{if(!r.sendNewPolls)return;var e=r.myIFrame.doc.createElement("script");e.type="text/javascript",e.async=!0,e.src=t,e.onload=e.onreadystatechange=function(){var t=e.readyState;t&&"loaded"!==t&&"complete"!==t||(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),n())},e.onerror=function(){tu("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(e)}catch(t){}},Math.floor(1))},Hl);function Hl(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=pu(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=Hl.createIFrame_();var i="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(i='<script>document.domain="'+document.domain+'";<\/script>');var o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(t){tu("frame writing exception"),t.stack&&tu(t.stack),tu(t)}}var zl="";var Kl=null;"undefined"!=typeof MozWebSocket?Kl=MozWebSocket:"undefined"!=typeof WebSocket&&(Kl=WebSocket);var Ql=(Yl.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Ru)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(Du,r)},Yl.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,hu.set("previous_websocket_failure",!0);try{if(Ws()){var r=Ds.NODE_ADMIN?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/5/"+zl+"/"+process.platform+"/"+r}},o=process.env,s=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;s&&(i.proxy={origin:s}),this.mySock=new Kl(this.connURL,[],i)}else this.mySock=new Kl(this.connURL)}catch(t){this.log_("Error instantiating WebSocket.");var a=t.message||t.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},Yl.prototype.start=function(){},Yl.forceDisallow=function(){Yl.forceDisallow_=!0},Yl.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var e=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);e&&1<e.length&&parseFloat(e[1])<4.4&&(t=!0)}return!t&&null!==Kl&&!Yl.forceDisallow_},Yl.previouslyFailed=function(){return hu.isInMemoryStorage||!0===hu.get("previous_websocket_failure")},Yl.prototype.markConnectionHealthy=function(){hu.remove("previous_websocket_failure")},Yl.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Xs(e);this.onMessage(n)}},Yl.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},Yl.prototype.extractFrameCount_=function(t){if(Ps(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},Yl.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},Yl.prototype.send=function(t){this.resetKeepAlive();var e=Js(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=uu(e,16384);1<n.length&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},Yl.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},Yl.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},Yl.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},Yl.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},Yl.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},Yl.responsesRequiredToBeHealthy=2,Yl.healthyTimeout=3e4,Yl);function Yl(t,e,n,r){this.connId=t,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=eu(this.connId),this.stats_=_l.getCollection(e),this.connURL=Yl.connectionURL_(e,n,r)}var Xl=(Object.defineProperty(Jl,"ALL_TRANSPORTS",{get:function(){return[Vl,Ql]},enumerable:!0,configurable:!0}),Jl.prototype.initTransports_=function(t){var e,n,r=Ql&&Ql.isAvailable(),i=r&&!Ql.previouslyFailed();if(t.webSocketOnly&&(r||iu("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ql];else{var o=this.transports_=[];try{for(var s=Cs(Jl.ALL_TRANSPORTS),a=s.next();!a.done;a=s.next()){var u=a.value;u&&u.isAvailable()&&o.push(u)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}}},Jl.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},Jl.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},Jl);function Jl(t){this.initTransports_(t)}var $l=(Zl.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;0<i&&(this.healthyTimeout_=Tu(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},Zl.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},Zl.prototype.disconnReceiver_=function(e){var n=this;return function(t){e===n.conn_?n.onConnectionLost_(t):e===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},Zl.prototype.connReceiver_=function(e){var n=this;return function(t){2!==n.state_&&(e===n.rx_?n.onPrimaryMessageReceived_(t):e===n.secondaryConn_?n.onSecondaryMessageReceived_(t):n.log_("message on old connection"))}},Zl.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},Zl.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},Zl.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},Zl.prototype.onSecondaryMessageReceived_=function(t){var e=au("t",t),n=au("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},Zl.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},Zl.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},Zl.prototype.onPrimaryMessageReceived_=function(t){var e=au("t",t),n=au("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},Zl.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},Zl.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},Zl.prototype.onControl_=function(t){var e=au("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?nu("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):nu("Unknown control packet command: "+e)}},Zl.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&iu("Protocol version mismatch detected"),this.tryStartUpgrade_())},Zl.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},Zl.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Tu(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},Zl.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},Zl.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Tu(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},Zl.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},Zl.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},Zl.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(hu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},Zl.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},Zl.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},Zl.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},Zl.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},Zl);function Zl(t,e,n,r,i,o,s){this.id=t,this.repoInfo_=e,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=eu("c:"+this.id+":"),this.transportManager_=new Xl(e),this.log_("Connection created"),this.start_()}var tf=(ef.prototype.put=function(t,e,n,r){},ef.prototype.merge=function(t,e,n,r){},ef.prototype.refreshAuthToken=function(t){},ef.prototype.onDisconnectPut=function(t,e,n){},ef.prototype.onDisconnectMerge=function(t,e,n){},ef.prototype.onDisconnectCancel=function(t,e){},ef.prototype.reportStats=function(t){},ef);function ef(){}var nf,rf=(Es(of,nf=tf),of.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Js(i)),Ps(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},of.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Ps(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Ps(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},of.prototype.sendListen_=function(r){var i=this,o=r.query,s=o.path.toString(),a=o.queryIdentifier();this.log_("Listen on "+s+" for "+a);var t={p:s};r.tag&&(t.q=o.queryObject(),t.t=r.tag),t.h=r.hashFn(),this.sendRequest("q",t,function(t){var e=t.d,n=t.s;of.warnOnListenWarnings_(e,o),(i.listens.get(s)&&i.listens.get(s).get(a))===r&&(i.log_("listen response",t),"ok"!==n&&i.removeListen_(s,a),r.onComplete&&r.onComplete(n,e))})},of.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Zs(t,"w")){var n=ta(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();iu("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},of.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},of.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||function(t){var e=$s(t).claims;return"object"==typeof e&&!0===e.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},of.prototype.tryAuth=function(){var r=this;if(this.connected_&&this.authToken_){var i=this.authToken_,t=function(t){var e=$s(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")}(i)?"auth":"gauth",e={cred:i};null===this.authOverride_?e.noauth=!0:"object"==typeof this.authOverride_&&(e.authvar=this.authOverride_),this.sendRequest(t,e,function(t){var e=t.s,n=t.d||"error";r.authToken_===i&&("ok"===e?r.invalidAuthTokenCount_=0:r.onAuthRevoked_(e,n))})}},of.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Ps(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},of.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},of.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},of.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},of.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},of.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},of.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},of.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},of.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)},of.prototype.sendPut_=function(e){var n=this,r=this.outstandingPuts_[e].action,t=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,t,function(t){n.log_(r+" response",t),delete n.outstandingPuts_[e],n.outstandingPutCount_--,0===n.outstandingPutCount_&&(n.outstandingPuts_=[]),i&&i(t.s,t.d)})},of.prototype.reportStats=function(t){var n=this;if(this.connected_){var e={c:t};this.log_("reportStats",e),this.sendRequest("s",e,function(t){if("ok"!==t.s){var e=t.d;n.log_("reportStats","Error sending stats: "+e)}})}},of.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Js(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},of.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):nu("Unrecognized action received from server: "+Js(t)+"\nAre you using the latest client?")},of.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},of.prototype.scheduleConnect_=function(t){var e=this;Ps(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},of.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},of.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},of.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},of.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+of.nextConnectionId_++,o=this,s=this.lastSessionId,a=!1,u=null,c=function(){u?u.close():(a=!0,r())};this.realtime_={close:c,sendRequest:function(t){Ps(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}};var t=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(t).then(function(t){a?tu("getToken() completed but was canceled"):(tu("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,u=new $l(i,o.repoInfo_,e,n,r,function(t){iu(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},s))}).then(null,function(t){o.log_("Failed to get token: "+t),a||c()})}},of.prototype.interrupt=function(t){tu("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},of.prototype.resume=function(t){tu("Resuming connection for reason: "+t),delete this.interruptReasons_[t],ea(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},of.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},of.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},of.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return bu(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},of.prototype.removeListen_=function(t,e){var n,r=new Nu(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},of.prototype.onAuthRevoked_=function(t,e){tu("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},of.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},of.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth();try{for(var i=Cs(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,Cs(s.values())),u=a.next();!u.done;u=a.next()){var c=u.value;this.sendListen_(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}},of.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+zl.replace(/\./g,"-")]=1,Vs()?t["framework.cordova"]=1:Bs()&&(t["framework.reactnative"]=1),this.reportStats(t)},of.prototype.shouldReconnect_=function(){var t=Fl.getInstance().currentlyOnline();return ea(this.interruptReasons_)&&t},of.nextPersistentConnectionId_=0,of.nextConnectionId_=0,of);function of(t,e,n,r,i,o){var s=nf.call(this)||this;if(s.repoInfo_=t,s.onDataUpdate_=e,s.onConnectStatus_=n,s.onServerInfoUpdate_=r,s.authTokenProvider_=i,s.authOverride_=o,s.id=of.nextPersistentConnectionId_++,s.log_=eu("p:"+s.id+":"),s.interruptReasons_={},s.listens=new Map,s.outstandingPuts_=[],s.outstandingPutCount_=0,s.onDisconnectRequestQueue_=[],s.connected_=!1,s.reconnectDelay_=1e3,s.maxReconnectDelay_=3e5,s.securityDebugCallback_=null,s.lastSessionId=null,s.establishConnectionTimer_=null,s.visible_=!1,s.requestCBHash_={},s.requestNumber_=0,s.realtime_=null,s.authToken_=null,s.forceTokenRefresh_=!1,s.invalidAuthTokenCount_=0,s.firstConnection_=!0,s.lastConnectionAttemptTime_=null,s.lastConnectionEstablishedTime_=null,o&&!Ws())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return s.scheduleConnect_(0),xl.getInstance().on("visible",s.onVisible_,s),-1===t.host.indexOf("fblocal")&&Fl.getInstance().on("online",s.onOnline_,s),s}var sf,af=(Es(uf,sf=tf),uf.prototype.reportStats=function(t){throw new Error("Method not implemented.")},uf.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Ps(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},uf.prototype.listen=function(t,e,r,i){var o=this,s=t.path.toString();this.log_("Listen called for "+s+" "+t.queryIdentifier());var a=uf.getListenId_(t,r),u={};this.listens_[a]=u;var n=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",n,function(t,e){var n=e;404===t&&(t=n=null),null===t&&o.onDataUpdate_(s,n,!1,r),ta(o.listens_,a)===u&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},uf.prototype.unlisten=function(t,e){var n=uf.getListenId_(t,e);delete this.listens_[n]},uf.prototype.refreshAuthToken=function(t){},uf.prototype.restRequest_=function(i,o,s){var a=this;void 0===o&&(o={}),o.format="export",this.authTokenProvider_.getToken(!1).then(function(t){var e=t&&t.accessToken;e&&(o.auth=e);var n=(a.repoInfo_.secure?"https://":"http://")+a.repoInfo_.host+i+"?ns="+a.repoInfo_.namespace+function(t){for(var n=[],e=function(e,t){Array.isArray(t)?t.forEach(function(t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];e(o[0],o[1])}return n.length?"&"+n.join("&"):""}(o);a.log_("Sending REST request for "+n);var r=new XMLHttpRequest;r.onreadystatechange=function(){if(s&&4===r.readyState){a.log_("REST Response for "+n+" received. status:",r.status,"response:",r.responseText);var t=null;if(200<=r.status&&r.status<300){try{t=Xs(r.responseText)}catch(t){iu("Failed to parse JSON response for "+n+": "+r.responseText)}s(null,t)}else 401!==r.status&&404!==r.status&&iu("Got unsuccessful REST response for "+n+" Status: "+r.status),s(r.status);s=null}},r.open("GET",n,!0),r.send()})},uf);function uf(t,e,n){var r=sf.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=eu("p:rest:"),r.listens_={},r}var cf="repo_interrupt",hf=(lf.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},lf.prototype.name=function(){return this.repoInfo_.namespace},lf.prototype.serverTime=function(){var t=this.infoData_.getNode(new Nu(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},lf.prototype.generateServerValues=function(){return function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t}({timestamp:this.serverTime()})},lf.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new Nu(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var s=na(e,function(t){return Zc(t)});o=this.serverSyncTree_.applyTaggedQueryMerge(i,s,r)}else{var a=Zc(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,a,r)}else if(n){var u=na(e,function(t){return Zc(t)});o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=Zc(e);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var h=i;0<o.length&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,o)},lf.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},lf.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},lf.prototype.onServerInfoUpdate_=function(t){var n=this;_u(t,function(t,e){n.updateInfo_(t,e)})},lf.prototype.updateInfo_=function(t,e){var n=new Nu("/.info/"+t),r=Zc(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},lf.prototype.getNextWriteId_=function(){return this.nextWriteId_++},lf.prototype.setWithPriority=function(i,t,e,o){var s=this;this.log_("set",{path:i.toString(),value:t,priority:e});var n=this.generateServerValues(),r=Zc(t,e),a=Ih(r,n),u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(i,a,u,!0);this.eventQueue_.queueEvents(c),this.server_.put(i.toString(),r.val(!0),function(t,e){var n="ok"===t;n||iu("set at "+i+" failed: "+t);var r=s.serverSyncTree_.ackUserWrite(u,!n);s.eventQueue_.raiseEventsForChangedPath(i,r),s.callOnCompleteCallback(o,t,e)});var h=this.abortTransactions_(i);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},lf.prototype.update=function(o,t,s){var a=this;this.log_("update",{path:o.toString(),value:t});var r=!0,i=this.generateServerValues(),u={};if(_u(t,function(t,e){r=!1;var n=Zc(e);u[t]=Ih(n,i)}),r)tu("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(s,"ok");else{var c=this.getNextWriteId_(),e=this.serverSyncTree_.applyUserMerge(o,u,c);this.eventQueue_.queueEvents(e),this.server_.merge(o.toString(),t,function(t,e){var n="ok"===t;n||iu("update at "+o+" failed: "+t);var r=a.serverSyncTree_.ackUserWrite(c,!n),i=0<r.length?a.rerunTransactions_(o):o;a.eventQueue_.raiseEventsForChangedPath(i,r),a.callOnCompleteCallback(s,t,e)}),_u(t,function(t){var e=a.abortTransactions_(o.child(t));a.rerunTransactions_(e)}),this.eventQueue_.raiseEventsForChangedPath(o,[])}},lf.prototype.runOnDisconnectEvents_=function(){var r=this;this.log_("onDisconnectEvents");var t=this.generateServerValues(),e=function(t,n){var r=new mh;return t.forEachTree(new Nu(""),function(t,e){r.remember(t,Ih(e,n))}),r}(this.onDisconnect_,t),i=[];e.forEachTree(Nu.Empty,function(t,e){i=i.concat(r.serverSyncTree_.applyServerOverwrite(t,e));var n=r.abortTransactions_(t);r.rerunTransactions_(n)}),this.onDisconnect_=new mh,this.eventQueue_.raiseEventsForChangedPath(Nu.Empty,i)},lf.prototype.onDisconnectCancel=function(n,r){var i=this;this.server_.onDisconnectCancel(n.toString(),function(t,e){"ok"===t&&i.onDisconnect_.forget(n),i.callOnCompleteCallback(r,t,e)})},lf.prototype.onDisconnectSet=function(n,t,r){var i=this,o=Zc(t);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},lf.prototype.onDisconnectSetWithPriority=function(n,t,e,r){var i=this,o=Zc(t,e);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},lf.prototype.onDisconnectUpdate=function(r,n,i){var o=this;if(ea(n))return tu("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(i,"ok");this.server_.onDisconnectMerge(r.toString(),n,function(t,e){"ok"===t&&_u(n,function(t,e){var n=Zc(e);o.onDisconnect_.remember(r.child(t),n)}),o.callOnCompleteCallback(i,t,e)})},lf.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},lf.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},lf.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(cf)},lf.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(cf)},lf.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;e=t?(this.statsListener_||(this.statsListener_=new Il(this.stats_)),this.statsListener_.get()):this.stats_.get();var i=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);_u(e,function(t,e){for(var n=t,r=t.length;r<i+2;r++)n+=" ";console.log(n+e)})}},lf.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},lf.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),tu.apply(void 0,As([n],t))},lf.prototype.callOnCompleteCallback=function(r,i,o){r&&Iu(function(){if("ok"===i)r(null);else{var t=(i||"error").toUpperCase(),e=t;o&&(e+=": "+o);var n=new Error(e);n.code=t,r(n)}})},Object.defineProperty(lf.prototype,"database",{get:function(){return this.__database||(this.__database=new Of(this))},enumerable:!0,configurable:!0}),lf);function lf(t,e,n,r){var s=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Nl,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new mh,this.persistentConnection_=null;var i=new gl(n,r);if(this.stats_=_l.getCollection(t),e||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.server_=new af(this.repoInfo_,this.onDataUpdate_.bind(this),i),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if(null!=o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Js(o)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new rf(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),i,o),this.server_=this.persistentConnection_}i.addTokenChangeListener(function(t){s.server_.refreshAuthToken(t)}),this.statsReporter_=_l.getOrCreateReporter(t,function(){return new Sl(s.stats_,s.server_)}),this.transactionsInit_(),this.infoData_=new vl,this.infoSyncTree_=new pl({startListening:function(t,e,n,r){var i=[],o=s.infoData_.getNode(t.path);return o.isEmpty()||(i=s.infoSyncTree_.applyServerOverwrite(t.path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new pl({startListening:function(r,t,e,i){return s.server_.listen(r,e,t,function(t,e){var n=i(t,e);s.eventQueue_.raiseEventsForChangedPath(r.path,n)}),[]},stopListening:function(t,e){s.server_.unlisten(t,e)}})}var ff=(pf.prototype.getStartPost=function(){return this.startPost_},pf.prototype.getEndPost=function(){return this.endPost_},pf.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},pf.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new ac(e,n))||(n=Kc.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},pf.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Kc.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Kc.EMPTY_NODE);var i=this;return e.forEachChild(Cc,function(t,e){i.matches(new ac(t,e))||(r=r.updateImmediateChild(t,Kc.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},pf.prototype.updatePriority=function(t,e){return t},pf.prototype.filtersNodes=function(){return!0},pf.prototype.getIndexedFilter=function(){return this.indexedFilter_},pf.prototype.getIndex=function(){return this.index_},pf.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},pf.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},pf);function pf(t){this.indexedFilter_=new Wh(t.getIndex()),this.index_=t.getIndex(),this.startPost_=pf.getStartPost_(t),this.endPost_=pf.getEndPost_(t)}var df=(vf.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new ac(e,n))||(n=Kc.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},vf.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Kc.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Kc.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Kc.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(t,e){return h(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var l=!1;i.hasNext();)s=i.getNext(),!l&&c(a,s)<=0&&(l=!0),l&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,Kc.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},vf.prototype.updatePriority=function(t,e){return t},vf.prototype.filtersNodes=function(){return!0},vf.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},vf.prototype.getIndex=function(){return this.index_},vf.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var s=this.index_.getCompare();o=function(t,e){return s(e,t)}}else o=this.index_.getCompare();var a=t;Ps(a.numChildren()===this.limit_,"");var u=new ac(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var l=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,u);if(h&&!n.isEmpty()&&0<=p)return null!=i&&i.trackChildChange(Vh.childChangedChange(e,n,l)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Vh.childRemovedChange(e,l));var d=a.updateImmediateChild(e,Kc.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Vh.childAddedChange(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return n.isEmpty()?t:h&&0<=o(c,u)?(null!=i&&(i.trackChildChange(Vh.childRemovedChange(c.name,c.node)),i.trackChildChange(Vh.childAddedChange(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,Kc.EMPTY_NODE)):t},vf);function vf(t){this.rangedFilter_=new ff(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var yf=(gf.prototype.hasStart=function(){return this.startSet_},gf.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===gf.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},gf.prototype.getIndexStartValue=function(){return Ps(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},gf.prototype.getIndexStartName=function(){return Ps(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:gu},gf.prototype.hasEnd=function(){return this.endSet_},gf.prototype.getIndexEndValue=function(){return Ps(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},gf.prototype.getIndexEndName=function(){return Ps(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:mu},gf.prototype.hasLimit=function(){return this.limitSet_},gf.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},gf.prototype.getLimit=function(){return Ps(this.limitSet_,"Only valid if limit has been set"),this.limit_},gf.prototype.getIndex=function(){return this.index_},gf.prototype.copy_=function(){var t=new gf;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},gf.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},gf.prototype.limitToFirst=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=gf.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,e},gf.prototype.limitToLast=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=gf.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,e},gf.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},gf.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},gf.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},gf.prototype.getQueryObject=function(){var t=gf.WIRE_PROTOCOL_CONSTANTS_,e={};if(this.startSet_&&(e[t.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(e[t.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(e[t.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(e[t.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){e[t.LIMIT]=this.limit_;var n=this.viewFrom_;""===n&&(n=this.isViewFromLeft()?t.VIEW_FROM_LEFT:t.VIEW_FROM_RIGHT),e[t.VIEW_FROM]=n}return this.index_!==Cc&&(e[t.INDEX]=this.index_.toString()),e},gf.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},gf.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Cc},gf.prototype.getNodeFilter=function(){return this.loadsAllData()?new Wh(this.getIndex()):this.hasLimit()?new df(this):new ff(this)},gf.prototype.toRestQueryStringParameters=function(){var t,e=gf.REST_QUERY_CONSTANTS_,n={};return this.isDefault()||(t=this.index_===Cc?e.PRIORITY_INDEX:this.index_===nh?e.VALUE_INDEX:this.index_===yc?e.KEY_INDEX:(Ps(this.index_ instanceof rh,"Unrecognized index type!"),this.index_.toString()),n[e.ORDER_BY]=Js(t),this.startSet_&&(n[e.START_AT]=Js(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+Js(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=Js(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+Js(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_)),n},gf.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},gf.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},gf.DEFAULT=new gf,gf);function gf(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Cc}var mf,wf=(Es(bf,mf=yh),bf.prototype.getKey=function(){return ca("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},bf.prototype.child=function(t){return ca("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof Nu||(null===this.path.getFront()?function(t,e,n,r){n=n&&n.replace(/^\/*\.info(\/|$)/,"/"),Gu(t,e,n,r)}("Reference.child",1,t,!1):Gu("Reference.child",1,t,!1)),new bf(this.repo,this.path.child(t))},bf.prototype.getParent=function(){ca("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new bf(this.repo,t)},bf.prototype.getRoot=function(){ca("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},bf.prototype.databaseProp=function(){return this.repo.database},bf.prototype.set=function(t,e){ca("Reference.set",1,2,arguments.length),zu("Reference.set",this.path),qu("Reference.set",1,t,this.path,!1),la("Reference.set",2,e,!0);var n=new Us;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},bf.prototype.update=function(t,e){if(ca("Reference.update",1,2,arguments.length),zu("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,iu("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Vu("Reference.update",1,t,this.path,!1),la("Reference.update",2,e,!0);var i=new Us;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},bf.prototype.setWithPriority=function(t,e,n){if(ca("Reference.setWithPriority",2,3,arguments.length),zu("Reference.setWithPriority",this.path),qu("Reference.setWithPriority",1,t,this.path,!1),Bu("Reference.setWithPriority",2,e,!1),la("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new Us;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},bf.prototype.remove=function(t){return ca("Reference.remove",0,1,arguments.length),zu("Reference.remove",this.path),la("Reference.remove",1,t,!0),this.set(null,t)},bf.prototype.transaction=function(t,r,e){if(ca("Reference.transaction",1,3,arguments.length),zu("Reference.transaction",this.path),la("Reference.transaction",1,t,!1),la("Reference.transaction",2,r,!0),function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(ha(t,e,r)+"must be a boolean.")}("Reference.transaction",3,e,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===e&&(e=!0);var i=new Us;return"function"==typeof r&&i.promise.catch(function(){}),this.repo.startTransaction(this.path,t,function(t,e,n){t?i.reject(t):i.resolve(new ec(e,n)),"function"==typeof r&&r(t,e,n)},e),i.promise},bf.prototype.setPriority=function(t,e){ca("Reference.setPriority",1,2,arguments.length),zu("Reference.setPriority",this.path),Bu("Reference.setPriority",1,t,!1),la("Reference.setPriority",2,e,!0);var n=new Us;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},bf.prototype.push=function(t,e){ca("Reference.push",0,2,arguments.length),zu("Reference.push",this.path),qu("Reference.push",1,t,this.path,!0),la("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=sc(r),o=this.child(i),s=this.child(i);return n=null!=t?o.set(t,e).then(function(){return s}):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),o},bf.prototype.onDisconnect=function(){return zu("Reference.onDisconnect",this.path),new Zu(this.repo,this.path)},Object.defineProperty(bf.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(bf.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(bf.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(bf.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),bf);function bf(t,e){if(!(t instanceof hf))throw new Error("new Reference() no longer supported - use app.database().");return mf.call(this,t,e,yf.DEFAULT,!1)||this}yh.__referenceConstructor=wf,ol.__referenceConstructor=wf;var _f,Ef,If=function(){this.children={},this.childCount=0,this.value=null},Tf=(Sf.prototype.subTree=function(t){for(var e=t instanceof Nu?t:new Nu(t),n=this,r=e.getFront();null!==r;)n=new Sf(r,n,ta(n.node_.children,r)||new If),r=(e=e.popFront()).getFront();return n},Sf.prototype.getValue=function(){return this.node_.value},Sf.prototype.setValue=function(t){Ps(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},Sf.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},Sf.prototype.hasChildren=function(){return 0<this.node_.childCount},Sf.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},Sf.prototype.forEachChild=function(n){var r=this;_u(this.node_.children,function(t,e){n(new Sf(t,r,e))})},Sf.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},Sf.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},Sf.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},Sf.prototype.path=function(){return new Nu(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},Sf.prototype.name=function(){return this.name_},Sf.prototype.parent=function(){return this.parent_},Sf.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},Sf.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Zs(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},Sf);function Sf(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new If),this.name_=t,this.parent_=e,this.node_=n}(Ef=_f=_f||{})[Ef.RUN=0]="RUN",Ef[Ef.SENT=1]="SENT",Ef[Ef.COMPLETED=2]="COMPLETED",Ef[Ef.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",Ef[Ef.NEEDS_ABORT=4]="NEEDS_ABORT",hf.MAX_TRANSACTION_RETRIES_=25,hf.prototype.transactionsInit_=function(){this.transactionQueueTree_=new Tf},hf.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);function i(){}var o=new wf(this,t);o.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:pu(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=this.getLatestState_(t);s.currentInputSnapshot=a;var u=s.update(a.val());if(void 0===u){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var c=new oh(s.currentInputSnapshot,new wf(this,s.path),Cc);s.onComplete(null,!1,c)}}else{$u("transaction failed: Data returned ",u,s.path),s.status=_f.RUN;var h=this.transactionQueueTree_.subTree(t),l=h.getValue()||[];l.push(s),h.setValue(l);var f=void 0;if("object"==typeof u&&null!==u&&Zs(u,".priority"))f=ta(u,".priority"),Ps(ju(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else f=(this.serverSyncTree_.calcCompleteEventCache(t)||Kc.EMPTY_NODE).getPriority().val();f=f;var p=this.generateServerValues(),d=Zc(u,f),v=Ih(d,p);s.currentOutputSnapshotRaw=d,s.currentOutputSnapshotResolved=v,s.currentWriteId=this.getNextWriteId_();var y=this.serverSyncTree_.applyUserOverwrite(t,v,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,y),this.sendReadyTransactions_()}},hf.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Kc.EMPTY_NODE},hf.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Ps(0<n.length,"Sending zero length transaction queue"),n.every(function(t){return t.status===_f.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},hf.prototype.sendTransactionQueue_=function(a,u){for(var c=this,t=u.map(function(t){return t.currentWriteId}),e=this.getLatestState_(a,t),n=e,r=e.hash(),i=0;i<u.length;i++){var o=u[i];Ps(o.status===_f.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),o.status=_f.SENT,o.retryCount++;var s=Nu.relativePath(a,o.path);n=n.updateChild(s,o.currentOutputSnapshotRaw)}var h=n.val(!0),l=a;this.server_.put(l.toString(),h,function(t){c.log_("transaction put response",{path:l.toString(),status:t});var e=[];if("ok"===t){for(var n=[],r=0;r<u.length;r++){if(u[r].status=_f.COMPLETED,e=e.concat(c.serverSyncTree_.ackUserWrite(u[r].currentWriteId)),u[r].onComplete){var i=u[r].currentOutputSnapshotResolved,o=new wf(c,u[r].path),s=new oh(i,o,Cc);n.push(u[r].onComplete.bind(null,null,!0,s))}u[r].unwatcher()}c.pruneCompletedTransactionsBelowNode_(c.transactionQueueTree_.subTree(a)),c.sendReadyTransactions_(),c.eventQueue_.raiseEventsForChangedPath(a,e);for(r=0;r<n.length;r++)Iu(n[r])}else{if("datastale"===t)for(r=0;r<u.length;r++)u[r].status===_f.SENT_NEEDS_ABORT?u[r].status=_f.NEEDS_ABORT:u[r].status=_f.RUN;else{iu("transaction at "+l.toString()+" failed: "+t);for(r=0;r<u.length;r++)u[r].status=_f.NEEDS_ABORT,u[r].abortReason=t}c.rerunTransactions_(a)}},r)},hf.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},hf.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],o=t.filter(function(t){return t.status===_f.RUN}).map(function(t){return t.currentWriteId}),s=0;s<t.length;s++){var a=t[s],u=Nu.relativePath(e,a.path),c=!1,h=void 0;if(Ps(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===_f.NEEDS_ABORT)c=!0,h=a.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===_f.RUN)if(a.retryCount>=hf.MAX_TRANSACTION_RETRIES_)c=!0,h="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var l=this.getLatestState_(a.path,o);a.currentInputSnapshot=l;var f=t[s].update(l.val());if(void 0!==f){$u("transaction failed: Data returned ",f,a.path);var p=Zc(f);"object"==typeof f&&null!=f&&Zs(f,".priority")||(p=p.updatePriority(l.getPriority()));var d=a.currentWriteId,v=this.generateServerValues(),y=Ih(p,v);a.currentOutputSnapshotRaw=p,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(d),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(a.path,y,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d,!0))}else c=!0,h="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],c&&(t[s].status=_f.COMPLETED,n=t[s].unwatcher,setTimeout(n,Math.floor(0)),t[s].onComplete))if("nodata"===h){var g=new wf(this,t[s].path),m=t[s].currentInputSnapshot,w=new oh(m,g,Cc);r.push(t[s].onComplete.bind(null,null,!1,w))}else r.push(t[s].onComplete.bind(null,new Error(h),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(s=0;s<r.length;s++)Iu(r[s]);this.sendReadyTransactions_()}},hf.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},hf.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},hf.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},hf.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==_f.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(0<n.length?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},hf.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},hf.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)if(e[o].status===_f.SENT_NEEDS_ABORT);else if(e[o].status===_f.SENT)Ps(i===o-1,"All SENT items should be at beginning of queue."),e[i=o].status=_f.SENT_NEEDS_ABORT,e[o].abortReason="set";else if(Ps(e[o].status===_f.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete){n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))}-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(o=0;o<n.length;o++)Iu(n[o])}};var Cf,Nf="databaseURL",Af=(kf.getInstance=function(){return Cf=Cf||new kf},kf.prototype.interrupt=function(){var e,t,n,r;try{for(var i=Cs(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,Cs(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].interrupt()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},kf.prototype.resume=function(){var e,t,n,r;try{for(var i=Cs(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,Cs(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].resume()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},kf.prototype.databaseFromApp=function(t,e,n){var r=n||t.options[Nf];void 0===r&&ru("Can't determine Firebase Database URL.  Be sure to include "+Nf+" option when calling firebase.initializeApp().");var i=Mu(r),o=i.repoInfo,s=void 0;return"undefined"!=typeof process&&(s=process.env.FIREBASE_DATABASE_EMULATOR_HOST),s&&(r="http://"+s+"?ns="+o.namespace,o=(i=Mu(r)).repoInfo),Ku("Invalid Firebase Database URL",1,i),i.path.isEmpty()||ru("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(o,t,e).database},kf.prototype.deleteRepo=function(t){var e=ta(this.repos_,t.app.name);e&&ta(e,t.repoInfo_.toURLString())===t||ru("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},kf.prototype.createRepo=function(t,e,n){var r=ta(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=ta(r,t.toURLString());return i&&ru("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new hf(t,this.useRestClient_,e,n),r[t.toURLString()]=i},kf.prototype.forceRestClient=function(t){this.useRestClient_=t},kf);function kf(){this.repos_={},this.useRestClient_=!1}var Of=(Object.defineProperty(Rf.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),Rf.prototype.ref=function(t){return this.checkDeleted_("ref"),ca("database.ref",0,1,arguments.length),t instanceof wf?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},Rf.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),ca(e,1,1,arguments.length);var n=Mu(t);Ku(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&ru(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},Rf.prototype.checkDeleted_=function(t){null===this.repo_&&ru("Cannot call "+t+" on a deleted database.")},Rf.prototype.goOffline=function(){ca("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},Rf.prototype.goOnline=function(){ca("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},Rf.ServerValue={TIMESTAMP:{".sv":"timestamp"}},Rf);function Rf(t){(this.repo_=t)instanceof hf||ru("Don't call new Database() directly - please use firebase.database()."),this.root_=new wf(t,Nu.Empty),this.INTERNAL=new Df(this)}var Df=(Pf.prototype.delete=function(){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){return this.database.checkDeleted_("delete"),Af.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},Pf);function Pf(t){this.database=t}var xf=Object.freeze({__proto__:null,forceLongPolling:function(){Ql.forceDisallow(),Vl.forceAllow()},forceWebSockets:function(){Vl.forceDisallow()},isWebSocketsAvailable:function(){return Ql.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),Lf=rf;rf.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},rf.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Mf,Ff,Uf=$l,jf=xu,qf=Object.freeze({__proto__:null,DataConnection:Lf,RealTimeConnection:Uf,hijackHash:function(i){var o=rf.prototype.put;return rf.prototype.put=function(t,e,n,r){void 0!==r&&(r=i()),o.call(this,t,e,n,r)},function(){rf.prototype.put=o}},ConnectionTarget:jf,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){Af.getInstance().forceRestClient(t)}}),Vf=Of.ServerValue;Mf=(Ff=Gl).SDK_VERSION,zl=Mf,Ff.INTERNAL.registerComponent(new da("database",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return Af.getInstance().databaseFromApp(n,r,e)},"PUBLIC").setServiceProps({Reference:wf,Query:yh,Database:Of,DataSnapshot:oh,enableLogging:Za,INTERNAL:xf,ServerValue:Vf,TEST_ACCESS:qf}).setMultipleInstances(!0)),Ff.registerVersion("@firebase/database","0.5.23");var Bf,Wf="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Hf=Hf||{},Gf=Wf;function zf(t){return"string"==typeof t}function Kf(t){return"number"==typeof t}function Qf(t,e){t=t.split("."),e=e||Gf;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function Yf(){}function Xf(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function Jf(t){return"array"==Xf(t)}function $f(t){var e=Xf(t);return"array"==e||"object"==e&&"number"==typeof t.length}function Zf(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var tp="closure_uid_"+(1e9*Math.random()>>>0),ep=0;function np(t,e,n){return t.call.apply(t.bind,arguments)}function rp(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function ip(t,e,n){return(ip=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?np:rp).apply(null,arguments)}function op(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var sp=Date.now||function(){return+new Date};function ap(t,o){function e(){}e.prototype=o.prototype,t.N=o.prototype,t.prototype=new e,(t.prototype.constructor=t).yb=function(t,e,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return o.prototype[e].apply(t,r)}}function up(){this.j=this.j,this.i=this.i}up.prototype.j=!1,up.prototype.la=function(){if(!this.j&&(this.j=!0,this.G(),0))this[tp]||(this[tp]=++ep)},up.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var cp=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(zf(t))return zf(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},hp=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=zf(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function lp(){return Array.prototype.concat.apply([],arguments)}function fp(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function pp(t){return/^[\s\xa0]*$/.test(t)}var dp,vp=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function yp(t,e){return-1!=t.indexOf(e)}function gp(t,e){return t<e?-1:e<t?1:0}t:{var mp=Gf.navigator;if(mp){var wp=mp.userAgent;if(wp){dp=wp;break t}}dp=""}function bp(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function _p(t){var e,n={};for(e in t)n[e]=t[e];return n}var Ep="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ip(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<Ep.length;i++)e=Ep[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function Tp(t){return Tp[" "](t),t}Tp[" "]=Yf;var Sp,Cp,Np=yp(dp,"Opera"),Ap=yp(dp,"Trident")||yp(dp,"MSIE"),kp=yp(dp,"Edge"),Op=kp||Ap,Rp=yp(dp,"Gecko")&&!(yp(dp.toLowerCase(),"webkit")&&!yp(dp,"Edge"))&&!(yp(dp,"Trident")||yp(dp,"MSIE"))&&!yp(dp,"Edge"),Dp=yp(dp.toLowerCase(),"webkit")&&!yp(dp,"Edge");function Pp(){var t=Gf.document;return t?t.documentMode:void 0}t:{var xp="",Lp=(Cp=dp,Rp?/rv:([^\);]+)(\)|;)/.exec(Cp):kp?/Edge\/([\d\.]+)/.exec(Cp):Ap?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Cp):Dp?/WebKit\/(\S+)/.exec(Cp):Np?/(?:Version)[ \/]?(\S+)/.exec(Cp):void 0);if(Lp&&(xp=Lp?Lp[1]:""),Ap){var Mp=Pp();if(null!=Mp&&Mp>parseFloat(xp)){Sp=String(Mp);break t}}Sp=xp}var Fp,Up={};function jp(a){return function(t,e){var n=Up;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(a,function(){for(var t=0,e=vp(String(Sp)).split("."),n=vp(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=gp(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||gp(0==o[2].length,0==s[2].length)||gp(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t})}var qp=Gf.document;Fp=qp&&Ap?Pp()||("CSS1Compat"==qp.compatMode?parseInt(Sp,10):5):void 0;var Vp=!Ap||9<=Number(Fp),Bp=Ap&&!jp("9"),Wp=function(){if(!Gf.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Gf.addEventListener("test",Yf,e),Gf.removeEventListener("test",Yf,e)}catch(t){}return t}();function Hp(t,e){this.type=t,this.a=this.target=e,this.Ia=!0}function Gp(t,e){if(Hp.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Rp){t:{try{Tp(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=zf(t.pointerType)?t.pointerType:zp[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}Hp.prototype.b=function(){this.Ia=!1},ap(Gp,Hp);var zp={2:"touch",3:"pen",4:"mouse"};Gp.prototype.b=function(){Gp.N.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Bp)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var Kp="closure_listenable_"+(1e6*Math.random()|0),Qp=0;function Yp(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++Qp,this.X=this.Z=!1}function Xp(t){t.X=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function Jp(t){this.src=t,this.a={},this.b=0}function $p(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=cp(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Xp(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Zp(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.X&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}Jp.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Zp(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Yp(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var td="closure_lm_"+(1e6*Math.random()|0),ed={};function nd(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Jf(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}r=hd(r);return e&&e[Kp]?e.Aa(n,r,Zf(i)?!!i.capture:!!i,o):rd(e,n,r,!0,i,o)}(t,e,n,r,i);if(Jf(e)){for(var o=0;o<e.length;o++)nd(t,e[o],n,r,i);return null}return n=hd(n),t&&t[Kp]?t.za(e,n,Zf(r)?!!r.capture:!!r,i):rd(t,e,n,!1,r,i)}function rd(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Zf(i)?!!i.capture:!!i;if(s&&!Vp)return null;var a=ud(t);if(a||(t[td]=a=new Jp(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var e=ad,n=Vp?function(t){return e.call(n.src,n.listener,t)}:function(t){if(!(t=e.call(n.src,n.listener,t)))return t};return n}(),(n.proxy=r).src=t,r.listener=n,t.addEventListener)Wp||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(od(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function id(t){if(!Kf(t)&&t&&!t.X){var e=t.src;if(e&&e[Kp])$p(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(od(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ud(e))?($p(n,t),0==n.b&&(n.src=null,e[td]=null)):Xp(t)}}}function od(t){return t in ed?ed[t]:ed[t]="on"+t}function sd(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&id(t),n.call(r,e)}function ad(t,e){return!!t.X||(Vp?sd(t,new Gp(e,this)):sd(t,e=new Gp(e||Qf("window.event"),this)))}function ud(t){return(t=t[td])instanceof Jp?t:null}var cd="__closure_events_fn_"+(1e9*Math.random()>>>0);function hd(e){return"function"==Xf(e)?e:(e[cd]||(e[cd]=function(t){return e.handleEvent(t)}),e[cd])}function ld(){up.call(this),this.c=new Jp(this),(this.J=this).B=null}function fd(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.X&&s.capture==n){var a=s.listener,u=s.da||s.src;s.Z&&$p(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&0!=r.Ia}ap(ld,up),ld.prototype[Kp]=!0,(Bf=ld.prototype).addEventListener=function(t,e,n,r){nd(this,t,e,n,r)},Bf.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Jf(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=Zf(i)?!!i.capture:!!i,r=hd(r),e&&e[Kp]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=Zp(s=e.a[n],r,i,o))&&(Xp(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&ud(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Zp(n,r,i,o)),(r=-1<e?n[e]:null)&&id(r))}(this,t,e,n,r)},Bf.dispatchEvent=function(t){var e,n=this.B;if(n)for(e=[];n;n=n.B)e.push(n);n=this.J;var r=t.type||t;if(zf(t))t=new Hp(t,n);else if(t instanceof Hp)t.target=t.target||n;else{var i=t;Ip(t=new Hp(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=fd(s,r,!0,t)&&i}if(i=fd(s=t.a=n,r,!0,t)&&i,i=fd(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=fd(s=t.a=e[o],r,!1,t)&&i;return i},Bf.G=function(){if(ld.N.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Xp(n[r]);delete e.a[t],e.b--}}this.B=null},Bf.za=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Bf.Aa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var pd=Gf.JSON.stringify;function dd(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function vd(){this.b=this.a=null}dd.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var yd,gd=new dd(function(){return new md},function(t){t.reset()});function md(){this.next=this.b=this.a=null}function wd(t){Gf.setTimeout(function(){throw t},0)}function bd(t,e){yd||function(){var t=Gf.Promise.resolve(void 0);yd=function(){t.then(Id)}}(),_d||(yd(),_d=!0),Ed.add(t,e)}vd.prototype.add=function(t,e){var n=gd.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},md.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var _d=!(md.prototype.reset=function(){this.next=this.b=this.a=null}),Ed=new vd;function Id(){for(var t;r=n=void 0,r=null,(n=Ed).a&&(r=n.a,n.a=n.a.next,n.a||(n.b=null),r.next=null),t=r;){try{t.a.call(t.b)}catch(t){wd(t)}var e=gd;e.f(t),e.b<100&&(e.b++,t.next=e.a,e.a=t)}var n,r;_d=!1}function Td(t,e){ld.call(this),this.b=t||1,this.a=e||Gf,this.f=ip(this.gb,this),this.g=sp()}function Sd(t){t.ba=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function Cd(t,e,n){if("function"==Xf(t))n&&(t=ip(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ip(t.handleEvent,t)}return 2147483647<Number(e)?-1:Gf.setTimeout(t,e||0)}function Nd(t,e,n){up.call(this),this.f=null!=n?ip(t,n):t,this.c=e,this.b=ip(this.$a,this),this.a=[]}function Ad(t){t.U=Cd(t.b,t.c),t.f.apply(null,t.a)}function kd(t){up.call(this),this.b=t,this.a={}}ap(Td,ld),(Bf=Td.prototype).ba=!1,Bf.L=null,Bf.gb=function(){if(this.ba){var t=sp()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(Sd(this),this.start()))}},Bf.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=sp())},Bf.G=function(){Td.N.G.call(this),Sd(this),delete this.a},ap(Nd,up),(Bf=Nd.prototype).ea=!1,Bf.U=null,Bf.Ta=function(t){this.a=arguments,this.U?this.ea=!0:Ad(this)},Bf.G=function(){Nd.N.G.call(this),this.U&&(Gf.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},Bf.$a=function(){this.U=null,this.ea&&(this.ea=!1,Ad(this))},ap(kd,up);var Od=[];function Rd(t,e,n,r){Jf(n)||(n&&(Od[0]=n.toString()),n=Od);for(var i=0;i<n.length;i++){var o=nd(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Dd(t){bp(t.a,function(t,e){this.a.hasOwnProperty(e)&&id(t)},t),t.a={}}function Pd(){}kd.prototype.G=function(){kd.N.G.call(this),Dd(this)},kd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xd=new ld;function Ld(t){Hp.call(this,"serverreachability",t)}function Md(t){xd.dispatchEvent(new Ld(xd,t))}function Fd(t){Hp.call(this,"statevent",t)}function Ud(t){xd.dispatchEvent(new Fd(xd,t))}function jd(t){Hp.call(this,"timingevent",t)}function qd(t,e){if("function"!=Xf(t))throw Error("Fn must not be null and must be a function");return Gf.setTimeout(function(){t()},e)}ap(Ld,Hp),ap(Fd,Hp),ap(jd,Hp);var Vd={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,La:7,TIMEOUT:8,sb:9},Bd={jb:"complete",wb:"success",Ma:"error",La:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function Wd(){}function Hd(t){var e;return(e=t.a)||(e=t.a={}),e}function Gd(){}Wd.prototype.a=null;var zd,Kd={OPEN:"a",ib:"b",Ma:"c",rb:"d"};function Qd(){Hp.call(this,"d")}function Yd(){Hp.call(this,"c")}function Xd(){}function Jd(t,e,n){this.g=t,this.W=e,this.V=n||1,this.I=new kd(this),this.O=$d,t=Op?125:void 0,this.P=new Td(t),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}ap(Qd,Hp),ap(Yd,Hp),ap(Xd,Wd),zd=new Xd;var $d=45e3,Zd={},tv={};function ev(t,e,n){t.F=1,t.f=Cv(wv(e)),t.l=n,t.H=!0,rv(t,null)}function nv(t,e,n,r){t.F=1,t.f=Cv(wv(e)),t.l=null,t.H=n,rv(t,r)}function rv(t,e){t.v=sp(),sv(t),t.D=wv(t.f),Sv(t.D,"t",t.V),t.A=0,t.a=t.g.$(t.g.Y()?e:null),0<t.J&&(t.B=new Nd(ip(t.Ja,t,t.a),t.J)),Rd(t.I,t.a,"readystatechange",t.cb),e=t.h?_p(t.h):{},t.l?(t.w||(t.w="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ca(t.D,t.w,t.l,e)):(t.w="GET",t.a.ca(t.D,t.w,null,e)),Md(1)}function iv(t,e,n){for(var r=!0;!t.m&&t.A<n.length;){var i=ov(t,n);if(i==tv){4==e&&(t.c=4,Ud(14),r=!1);break}if(i==Zd){t.c=4,Ud(15),r=!1;break}lv(t,i)}4==e&&0==n.length&&(t.c=1,Ud(16),r=!1),t.b=t.b&&r,r||(hv(t),cv(t))}function ov(t,e){var n=t.A,r=e.indexOf("\n",n);return-1==r?tv:(n=Number(e.substring(n,r)),isNaN(n)?Zd:(r+=1)+n>e.length?tv:(e=e.substr(r,n),t.A=r+n,e))}function sv(t){t.R=sp()+t.O,av(t,t.O)}function av(t,e){if(null!=t.i)throw Error("WatchDog timer not null");t.i=qd(ip(t.ab,t),e)}function uv(t){t.i&&(Gf.clearTimeout(t.i),t.i=null)}function cv(t){t.g.Ca()||t.m||t.g.na(t)}function hv(t){uv(t);var e=t.B;e&&"function"==typeof e.la&&e.la(),t.B=null,Sd(t.P),Dd(t.I),t.a&&(e=t.a,t.a=null,e.abort(),e.la())}function lv(t,e){try{t.g.Fa(t,e),Md(4)}catch(t){}}function fv(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if($f(t)||zf(t))hp(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.C&&"function"==typeof t.C)n=void 0;else if($f(t)||zf(t)){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.C&&"function"==typeof t.C)return t.C();if(zf(t))return t.split("");if($f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function pv(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof pv)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function dv(t,e){yv(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&vv(t))}function vv(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];yv(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)yv(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function yv(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Bf=Jd.prototype).setTimeout=function(t){this.O=t},Bf.cb=function(t){t=t.target;var e=this.B;e&&3==my(t)?e.Ta():this.Ja(t)},Bf.Ja=function(t){try{if(t==this.a)t:{var e=my(this.a),n=this.a.ya(),r=this.a.T();if(!(e<3||3==e&&!Op&&!this.a.aa())){this.m||4!=e||7==n||Md(8==n||r<=0?3:2),uv(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){e:{if(this.a){var s=wy(this.a,"X-HTTP-Initial-Response");if(s&&!pp(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.c=3,Ud(12),hv(this),cv(this);break t}this.s=!0,lv(this,a)}this.H?(iv(this,e,o),Op&&this.b&&3==e&&(Rd(this.I,this.P,"tick",this.bb),this.P.start())):lv(this,o),4==e&&hv(this),this.b&&!this.m&&(4==e?this.g.na(this):(this.b=!1,sv(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,Ud(12)):(this.c=0,Ud(13)),hv(this),cv(this)}}}catch(t){}},Bf.bb=function(){if(this.a){var t=my(this.a),e=this.a.aa();this.A<e.length&&(uv(this),iv(this,t,e),this.b&&4!=t&&sv(this))}},Bf.cancel=function(){this.m=!0,hv(this)},Bf.ab=function(){this.i=null;var t=sp();0<=t-this.R?(2!=this.F&&(Md(3),Ud(17)),hv(this),this.c=2,cv(this)):av(this,this.R-t)},(Bf=pv.prototype).C=function(){vv(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Bf.K=function(){return vv(this),this.a.concat()},Bf.get=function(t,e){return yv(this.b,t)?this.b[t]:e},Bf.set=function(t,e){yv(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Bf.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var gv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function mv(t,e){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,t instanceof mv?(this.h=void 0!==e?e:t.h,bv(this,t.f),this.j=t.j,_v(this,t.b),Ev(this,t.i),this.a=t.a,Iv(this,qv(t.c)),this.g=t.g):t&&(n=String(t).match(gv))?(this.h=!!e,bv(this,n[1]||"",!0),this.j=Nv(n[2]||""),_v(this,n[3]||"",!0),Ev(this,n[4]),this.a=Nv(n[5]||"",!0),Iv(this,n[6]||"",!0),this.g=Nv(n[7]||"")):(this.h=!!e,this.c=new Lv(null,this.h))}function wv(t){return new mv(t)}function bv(t,e,n){t.f=n?Nv(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function _v(t,e,n){t.b=n?Nv(e,!0):e}function Ev(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.i=e}else t.i=null}function Iv(t,e,n){e instanceof Lv?(t.c=e,function(t,e){e&&!t.f&&(Mv(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Fv(this,e),jv(this,n,t))},t)),t.f=e}(t.c,t.h)):(n||(e=Av(e,Pv)),t.c=new Lv(e,t.h))}function Tv(t,e,n){t.c.set(e,n)}function Sv(t,e,n){Jf(n)||(n=[String(n)]),jv(t.c,e,n)}function Cv(t){return Tv(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^sp()).toString(36)),t}function Nv(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Av(t,e,n){return zf(t)?(t=encodeURI(t).replace(e,kv),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function kv(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}mv.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Av(e,Ov,!0),":");var n=this.b;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(Av(e,Ov,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Av(n,"/"==n.charAt(0)?Dv:Rv,!0))),(n=this.c.toString())&&t.push("?",n),(n=this.g)&&t.push("#",Av(n,xv)),t.join("")},mv.prototype.resolve=function(t){var e=wv(this),n=!!t.f;n?bv(e,t.f):n=!!t.j,n?e.j=t.j:n=!!t.b,n?_v(e,t.b):n=null!=t.i;var r=t.a;if(n)Ev(e,t.i);else if(n=!!t.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=e.a.lastIndexOf("/");-1!=i&&(r=e.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(yp(i,"./")||yp(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.a=r:n=""!==t.c.toString(),n?Iv(e,qv(t.c)):n=!!t.g,n&&(e.g=t.g),e};var Ov=/[#\/\?@]/g,Rv=/[#\?:]/g,Dv=/[#\?]/g,Pv=/[#\?@]/g,xv=/#/g;function Lv(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Mv(n){n.a||(n.a=new pv,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Fv(t,e){Mv(t),e=Vv(t,e),yv(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,dv(t.a,e))}function Uv(t,e){return Mv(t),e=Vv(t,e),yv(t.a.b,e)}function jv(t,e,n){Fv(t,e),0<n.length&&(t.c=null,t.a.set(Vv(t,e),fp(n)),t.b+=n.length)}function qv(t){var e=new Lv;return e.c=t.c,t.a&&(e.a=new pv(t.a),e.b=t.b),e}function Vv(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Bv(t){this.a=t,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function Wv(t){var e=t.a.F.a;if(null!=e)Ud(4),e?(Ud(10),Ry(t.a,t,!1)):(Ud(11),Ry(t.a,t,!0));else{t.b=new Jd(t,void 0,void 0),t.b.h=t.h,e=My(e=t.a,e.Y()?t.f:null,t.i),Ud(4),Sv(e,"TYPE","xmlhttp");var n=t.a.j,r=t.a.I;n&&r&&Tv(e,n,r),nv(t.b,e,!1,t.f)}}function Hv(){this.a=this.b=null}function Gv(){this.a=new pv}function zv(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[tp]||(t[tp]=++ep)):e.charAt(0)+t}function Kv(t,e){this.b=t,this.a=e}function Qv(t){this.g=t||Yv,t=Gf.PerformanceNavigationTiming?0<(t=Gf.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Gf.ka&&Gf.ka.Da&&Gf.ka.Da()&&Gf.ka.Da().zb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Gv),this.b=null,this.c=[]}(Bf=Lv.prototype).add=function(t,e){Mv(this),this.c=null,t=Vv(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Bf.forEach=function(n,r){Mv(this),this.a.forEach(function(t,e){hp(t,function(t){n.call(r,t,e,this)},this)},this)},Bf.K=function(){Mv(this);for(var t=this.a.C(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Bf.C=function(t){Mv(this);var e=[];if(zf(t))Uv(this,t)&&(e=lp(e,this.a.get(Vv(this,t))));else{t=this.a.C();for(var n=0;n<t.length;n++)e=lp(e,t[n])}return e},Bf.set=function(t,e){return Mv(this),this.c=null,Uv(this,t=Vv(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Bf.get=function(t,e){return t&&0<(t=this.C(t)).length?String(t[0]):e},Bf.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")},ap(function(){},function(){}),(Bf=Bv.prototype).M=null,Bf.$=function(t){return this.a.$(t)},Bf.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},Bf.Ca=function(){return!1},Bf.Fa=function(t,e){if(this.c=t.o,0==this.M){if(!this.a.o&&(t=t.a)){var n=wy(t,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(t=wy(t,"X-HTTP-Session-Id"))&&(this.a.I=t)}if(e){try{var r=this.a.ja.a.parse(e)}catch(t){return(e=this.a).m=this.c,void xy(e,2)}this.f=r[0]}else(e=this.a).m=this.c,xy(e,2)}else 1==this.M&&(this.g?Ud(6):"11111"==e?(Ud(5),this.g=!0,(!Ap||10<=Number(Fp))&&(this.c=200,this.b.cancel(),Ud(11),Ry(this.a,this,!0))):(Ud(7),this.g=!1))},Bf.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,Wv(this)):1==this.M&&(this.g?(Ud(11),Ry(this.a,this,!0)):(Ud(10),Ry(this.a,this,!1)));else{0==this.M?Ud(8):1==this.M&&Ud(9);var t=this.a;t.m=this.c,xy(t,2)}},Bf.Y=function(){return this.a.Y()},Bf.ma=function(){return this.a.ma()},Gv.prototype.add=function(t){this.a.set(zv(t),t)},Gv.prototype.C=function(){return this.a.C()};var Yv=10;function Xv(t,e){!t.a&&(yp(e,"spdy")||yp(e,"quic")||yp(e,"h2"))&&(t.f=t.g,t.a=new Gv,t.b&&(ty(t,t.b),t.b=null))}function Jv(t){return!!t.b||!!t.a&&t.a.a.c>=t.f}function $v(t){return t.b?1:t.a?t.a.a.c:0}function Zv(t,e){return t=t.b?t.b==e:!!t.a&&(e=zv(e),yv(t.a.a.b,e))}function ty(t,e){t.a?t.a.add(e):t.b=e}function ey(t,e){var n;t.b&&t.b==e?t.b=null:((n=t.a)&&(n=zv(e),n=yv(t.a.a.b,n)),n&&dv(t.a.a,zv(e)))}function ny(t){if(null!=t.b)return t.c.concat(t.b.j);if(null==t.a||0==t.a.a.c)return fp(t.c);var e=t.c;return hp(t.a.C(),function(t){e=e.concat(t.j)}),e}function ry(){}function iy(){this.a=new ry}function oy(t,r,e){var i=e||"";try{fv(t,function(t,e){var n=t;Zf(t)&&(n=pd(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}}function sy(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Qv.prototype.cancel=function(){this.c=ny(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(hp(this.a.C(),function(t){t.cancel()}),function(t){t.b={},t.a.length=0,t.c=0}(this.a.a))},ry.prototype.stringify=function(t){return Gf.JSON.stringify(t,void 0)},ry.prototype.parse=function(t){return Gf.JSON.parse(t,void 0)};var ay=Gf.JSON.parse;function uy(t){ld.call(this),this.headers=new pv,this.H=t||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=cy,this.D=this.F=!1}ap(uy,ld);var cy="",hy=/^https?$/i,ly=["POST","PUT"];function fy(t){return"content-type"==t.toLowerCase()}function py(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,dy(t),yy(t)}function dy(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function vy(t){if(t.b&&void 0!==Hf&&(!t.s[1]||4!=my(t)||2!=t.T()))if(t.l&&4==my(t))Cd(t.Ea,0,t);else if(t.dispatchEvent("readystatechange"),4==my(t)){t.b=!1;try{var e,n=t.T();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.A).match(gv)[1]||null;if(!o&&Gf.self&&Gf.self.location){var s=Gf.self.location.protocol;o=s.substr(0,s.length-1)}i=!hy.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<my(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.T()+"]",dy(t)}}finally{yy(t)}}}function yy(t,e){if(t.a){gy(t);var n=t.a,r=t.s[0]?Yf:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function gy(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Gf.clearTimeout(t.m),t.m=null)}function my(t){return t.a?t.a.readyState:0}function wy(t,e){return t.a?t.a.getResponseHeader(e):null}function by(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;if(n=function(t){var n="";return bp(t,function(t,e){n+=e,n+=":",n+=t,n+="\r\n"}),n}(n),zf(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if((n=t.indexOf("#"))<0&&(n=t.length),(r=t.indexOf("?"))<0||n<r){r=n;var i=""}else i=t.substring(r+1,n);n=(t=[t.substr(0,r),i,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return Tv(t,e,n),t}function _y(t){this.f=[],this.F=new Hv,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!Qf("internalChannelParams.failFast",t),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=Qf("internalChannelParams.baseRetryDelayMs",t)||5e3,this.Ra=Qf("internalChannelParams.retryDelaySeedMs",t)||1e4,this.Pa=Qf("internalChannelParams.forwardChannelMaxRetries",t)||2,this.qa=Qf("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.Ka=t&&t.Ab||void 0,this.D=void 0,this.R=t&&t.supportsCrossDomainXhr||!1,this.H="",this.b=new Qv(t&&t.concurrentRequestLimit),this.ja=new iy,this.o=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.W=t&&t.fastHandshake||!1)&&!this.o&&(this.o=!0),t&&t.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Ey(t){if(Iy(t),3==t.u){var e=t.P++,n=wv(t.B);Tv(n,"SID",t.H),Tv(n,"RID",e),Tv(n,"TYPE","terminate"),Ny(t,n),(e=new Jd(t,e,void 0)).F=2,e.f=Cv(wv(n)),n=!1,Gf.navigator&&Gf.navigator.sendBeacon&&(n=Gf.navigator.sendBeacon(e.f.toString(),"")),!n&&Gf.Image&&((new Image).src=e.f,n=!0),n||(e.a=e.g.$(null),e.a.ca(e.f)),e.v=sp(),sv(e)}Ly(t)}function Iy(t){t.w&&(t.w.abort(),t.w=null),t.a&&(t.a.cancel(),t.a=null),t.l&&(Gf.clearTimeout(t.l),t.l=null),Dy(t),t.b.cancel(),t.h&&(Kf(t.h)&&Gf.clearTimeout(t.h),t.h=null)}function Ty(t,e){t.f.push(new Kv(t.Qa++,e)),3==t.u&&Sy(t)}function Sy(t){Jv(t.b)||t.h||(t.h=!0,bd(t.Ha,t),t.A=0)}function Cy(t,e){var n;n=e?e.W:t.P++;var r=wv(t.B);Tv(r,"SID",t.H),Tv(r,"RID",n),Tv(r,"AID",t.O),Ny(t,r),t.g&&t.i&&by(r,t.g,t.i),n=new Jd(t,n,t.A+1),null===t.g&&(n.h=t.i),e&&(t.f=e.j.concat(t.f)),e=Ay(t,n,1e3),n.setTimeout(Math.round(.5*t.qa)+Math.round(.5*t.qa*Math.random())),ty(t.b,n),ev(n,r,e)}function Ny(t,n){t.c&&fv({},function(t,e){Tv(n,e,t)})}function Ay(t,e,n){n=Math.min(t.f.length,n);var r=t.c?ip(t.c.Sa,t.c,t):null;t:for(var i=t.f,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),a=!1;else try{oy(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.f.splice(0,n),e.j=t,r}function ky(t){t.a||t.l||(t.S=1,bd(t.Ga,t),t.v=0)}function Oy(t){return!(t.a||t.l||3<=t.v)&&(t.S++,t.l=qd(ip(t.Ga,t),Py(t,t.v)),t.v++,!0)}function Ry(t,e,n){var r=e.l;r&&Xv(t.b,r),t.ia=t.oa&&n,t.m=e.c,t.B=My(t,null,t.ha),Sy(t)}function Dy(t){null!=t.s&&(Gf.clearTimeout(t.s),t.s=null)}function Py(t,e){var n=t.Na+Math.floor(Math.random()*t.Ra);return t.ma()||(n*=2),n*e}function xy(t,e){if(2==e){var n=null;t.c&&(n=null);var r=ip(t.eb,t);n||(n=new mv("//www.google.com/images/cleardot.gif"),Gf.location&&"http"==Gf.location.protocol||bv(n,"https"),Cv(n)),function(t,e){var n=new Pd;if(Gf.Image){var r=new Image;r.onload=op(sy,n,r,"TestLoadImage: loaded",!0,e),r.onerror=op(sy,n,r,"TestLoadImage: error",!1,e),r.onabort=op(sy,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=op(sy,n,r,"TestLoadImage: timeout",!1,e),Gf.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Ud(2);t.u=0,t.c&&t.c.ta(e),Ly(t),Iy(t)}function Ly(t){t.u=0,t.m=-1,t.c&&(0==ny(t.b).length&&0==t.f.length||(t.b.c.length=0,fp(t.f),t.f.length=0),t.c.sa())}function My(t,e,n){var r=function(t){return t instanceof mv?wv(t):new mv(t,void 0)}(n);if(""!=r.b)e&&_v(r,e+"."+r.b),Ev(r,r.i);else{var i,o=Gf.location;i=e?e+"."+o.hostname:o.hostname,r=function(t,e,n,r){var i=new mv(null,void 0);return t&&bv(i,t),e&&_v(i,e),n&&Ev(i,n),r&&(i.a=r),i}(o.protocol,i,+o.port,n)}return t.V&&bp(t.V,function(t,e){Tv(r,e,t)}),e=t.j,n=t.I,e&&n&&Tv(r,e,n),Tv(r,"VER",t.wa),Ny(t,r),r}function Fy(){}function Uy(){if(Ap&&!(10<=Number(Fp)))throw Error("Environmental error: no available transport.")}function jy(t,e){ld.call(this),this.a=new _y(e),this.g=t,this.m=e&&e.fb?e.fb:function(t){for(var e=t,n=1;n<arguments.length;n++){var r,i=arguments[n];if(0==i.lastIndexOf("/",0))e=i;else(r=""==e)||(r=0<=(r=e.length-1)&&e.indexOf("/",r)==r),e+=r?i:"/"+i}return e}(this.g,"test"),this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.xa&&(t?t["X-WebChannel-Client-Profile"]=e.xa:t={"X-WebChannel-Client-Profile":e.xa}),this.a.J=t,(t=e&&e.httpHeadersOverwriteParam)&&!pp(t)&&(this.a.g=t),this.l=e&&e.supportsCrossDomainXhr||!1,this.h=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!pp(e)&&(this.a.j=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new By(this)}function qy(t){Qd.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Vy(){Yd.call(this),this.status=1}function By(t){this.a=t}(Bf=uy.prototype).ca=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+t);e=e?e.toUpperCase():"GET",this.A=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Hd(this.H):Hd(zd),this.a.onreadystatechange=ip(this.Ea,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(t){return void py(this,t)}t=n||"";var i=new pv(this.headers);r&&fv(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=fy,n=t.length,r=zf(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:zf(t)?t.charAt(e):t[e]}(i.K()),n=Gf.FormData&&t instanceof Gf.FormData,0<=cp(ly,e)&&!r&&!n&&i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{gy(this),0<this.o&&((this.D=function(t){return Ap&&jp(9)&&Kf(t.timeout)&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=ip(this.Ba,this)):this.m=Cd(this.Ba,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){py(this,t)}},Bf.Ba=function(){void 0!==Hf&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},Bf.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),yy(this))},Bf.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),yy(this,!0)),uy.N.G.call(this)},Bf.Ea=function(){this.j||(this.w||this.l||this.g?vy(this):this.Za())},Bf.Za=function(){vy(this)},Bf.T=function(){try{return 2<my(this)?this.a.status:-1}catch(t){return-1}},Bf.aa=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},Bf.Ua=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),ay(e)}},Bf.ya=function(){return this.h},Bf.Xa=function(){return zf(this.f)?this.f:String(this.f)},(Bf=_y.prototype).wa=8,Bf.u=1,Bf.Ca=function(){return 0==this.u},Bf.Ha=function(t){if(this.h)if(this.h=null,1==this.u){if(!t){this.P=Math.floor(1e5*Math.random()),t=this.P++;var e,n=new Jd(this,t,void 0),r=this.i;if(this.J&&(r?Ip(r=_p(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&zf(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Ay(this,n,e),Tv(i=wv(this.B),"RID",t),Tv(i,"CVER",22),this.o&&this.j&&Tv(i,"X-HTTP-Session-Id",this.j),Ny(this,i),this.g&&r&&by(i,this.g,r),ty(this.b,n),this.W?(Tv(i,"$req",e),Tv(i,"SID","null"),n.S=!0,ev(n,i,null)):ev(n,i,e),this.u=2}}else 3==this.u&&(t?Cy(this,t):0==this.f.length||Jv(this.b)||Cy(this))},Bf.Ga=function(){this.l=null,this.a=new Jd(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var t=wv(this.pa);Tv(t,"RID","rpc"),Tv(t,"SID",this.H),Tv(t,"CI",this.ia?"0":"1"),Tv(t,"AID",this.O),Ny(this,t),Tv(t,"TYPE","xmlhttp"),this.g&&this.i&&by(t,this.g,this.i),this.D&&this.a.setTimeout(this.D),nv(this.a,t,!0,this.ga)},Bf.Fa=function(t,e){if(0!=this.u&&(this.a==t||Zv(this.b,t)))if(this.m=t.o,!t.s&&Zv(this.b,t)&&3==this.u){try{var n=this.ja.a.parse(e)}catch(t){n=null}if(Jf(n)&&3==n.length){if(0==(e=n)[0]){t:if(!this.l){if(this.a){if(!(this.a.v+3e3<t.v))break t;Dy(this),this.a.cancel(),this.a=null}Oy(this),Ud(18)}}else this.ra=e[1],0<this.ra-this.O&&e[2]<37500&&this.ia&&0==this.v&&!this.s&&(this.s=qd(ip(this.Ya,this),6e3));if($v(this.b)<=1&&this.fa){try{this.fa()}catch(t){}this.fa=void 0}}else xy(this,11)}else if(!t.s&&this.a!=t||Dy(this),!pp(e))for(e=n=this.ja.a.parse(e),n=0;n<e.length;n++){var r=e[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&Kf(r)&&0<r&&(this.D=1.5*r),this.o&&(r=t.a)&&((i=wy(r,"X-Client-Wire-Protocol"))&&Xv(this.b,i),this.j&&(r=wy(r,"X-HTTP-Session-Id")))&&(this.I=r,Tv(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=t,this.pa=My(this,this.Y()?this.ga:null,this.ha),r.s?(ey(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(uv(r),sv(r)),this.a=r):ky(this),0<this.f.length&&Sy(this)}else"stop"!=r[0]&&"close"!=r[0]||xy(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?xy(this,7):Ey(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},Bf.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Oy(this),Ud(19))},Bf.na=function(t){var e=null;if(this.a==t){Dy(this),this.a=null;var n=2}else{if(!Zv(this.b,t))return;e=t.j,ey(this.b,t),n=1}if(this.m=t.o,0!=this.u)if(t.b)1==n?(e=sp()-t.v,xd.dispatchEvent(new jd(xd,t.l?t.l.length:0,e,this.A)),Sy(this)):ky(this);else{var r=t.c;if(3==r||0==r&&0<this.m||!(1==n&&function(t,e){return!($v(t.b)>=t.b.f-(t.h?1:0))&&(t.h?(t.f=e.j.concat(t.f),!0):!(1==t.u||2==t.u||t.A>=(t.Oa?0:t.Pa))&&(t.h=qd(ip(t.Ha,t,e),Py(t,t.A)),t.A++,!0))}(this,t)||2==n&&Oy(this)))switch(e&&0<e.length&&(t=this.b,t.c=t.c.concat(e)),r){case 1:xy(this,5);break;case 4:xy(this,10);break;case 3:xy(this,6);break;default:xy(this,2)}}},Bf.eb=function(t){Ud(t?2:1)},Bf.$=function(t){if(t&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new uy(this.Ka)).F=this.R,t},Bf.ma=function(){return!!this.c&&!0},Bf.Y=function(){return this.R},(Bf=Fy.prototype).va=function(){},Bf.ua=function(){},Bf.ta=function(){},Bf.sa=function(){},Bf.Sa=function(){},Uy.prototype.a=function(t,e){return new jy(t,e)},ap(jy,ld),(Bf=jy.prototype).addEventListener=function(t,e,n,r){jy.N.addEventListener.call(this,t,e,n,r)},Bf.removeEventListener=function(t,e,n,r){jy.N.removeEventListener.call(this,t,e,n,r)},Bf.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var t=this.a,e=this.m,n=this.g,r=this.b||void 0;Ud(0),t.ha=n,t.V=r||{},t.o&&(t.F.b=[],t.F.a=!1),t.w=new Bv(t),null===t.g&&(t.w.h=t.i),n=e,t.g&&t.i&&(n=by(e,t.g,t.i)),(t=t.w).i=n,e=My(t.a,null,t.i),Ud(3),null!=(n=t.a.F.b)?(t.f=n[0],t.M=1,Wv(t)):(Sv(e,"MODE","init"),!t.a.o&&t.a.j&&Sv(e,"X-HTTP-Session-Id",t.a.j),t.b=new Jd(t,void 0,void 0),t.b.h=t.h,nv(t.b,e,!1,null),t.M=0)},Bf.close=function(){Ey(this.a)},Bf.Wa=function(t){if(zf(t)){var e={};e.__data__=t,Ty(this.a,e)}else this.h?((e={}).__data__=pd(t),Ty(this.a,e)):Ty(this.a,t)},Bf.G=function(){this.a.c=null,delete this.f,Ey(this.a),delete this.a,jy.N.G.call(this)},ap(qy,Qd),ap(Vy,Yd),ap(By,Fy),By.prototype.va=function(){this.a.dispatchEvent("a")},By.prototype.ua=function(t){this.a.dispatchEvent(new qy(t))},By.prototype.ta=function(t){this.a.dispatchEvent(new Vy(t))},By.prototype.sa=function(){this.a.dispatchEvent("b")};var Wy=op(function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r},Uy);Uy.prototype.createWebChannel=Uy.prototype.a,jy.prototype.send=jy.prototype.Wa,jy.prototype.open=jy.prototype.Va,jy.prototype.close=jy.prototype.close,Vd.NO_ERROR=0,Vd.TIMEOUT=8,Vd.HTTP_ERROR=6,Bd.COMPLETE="complete",(Gd.EventType=Kd).OPEN="a",Kd.CLOSE="b",Kd.ERROR="c",Kd.MESSAGE="d",ld.prototype.listen=ld.prototype.za,uy.prototype.listenOnce=uy.prototype.Aa,uy.prototype.getLastError=uy.prototype.Xa,uy.prototype.getLastErrorCode=uy.prototype.ya,uy.prototype.getStatus=uy.prototype.T,uy.prototype.getResponseJson=uy.prototype.Ua,uy.prototype.getResponseText=uy.prototype.aa,uy.prototype.send=uy.prototype.ca;var Hy={createWebChannelTransport:Wy,ErrorCode:Vd,EventType:Bd,WebChannel:Gd,XhrIo:uy},Gy=Hy.createWebChannelTransport,zy=Hy.ErrorCode,Ky=Hy.EventType,Qy=Hy.WebChannel,Yy=Hy.XhrIo,Xy=Gl.SDK_VERSION,Jy=new Na("@firebase/firestore");function $y(){return Jy.logLevel===wa.DEBUG?0:Jy.logLevel===wa.SILENT?2:1}function Zy(t){switch(t){case 0:Jy.logLevel=wa.DEBUG;break;case 1:Jy.logLevel=wa.ERROR;break;case 2:Jy.logLevel=wa.SILENT;break;default:Jy.error("Firestore ("+Xy+"): Invalid value passed to `setLogLevel`")}}function tg(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(Jy.logLevel<=wa.DEBUG){var i=n.map(ng);Jy.debug.apply(Jy,ks(["Firestore ("+Xy+") ["+t+"]: "+e],i))}}function eg(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Jy.logLevel<=wa.ERROR){var r=e.map(ng);Jy.error.apply(Jy,ks(["Firestore ("+Xy+"): "+t],r))}}function ng(t){if("string"==typeof t)return t;var e=B_.t();try{return e.i(t)}catch(e){return t}}function rg(t){var e="FIRESTORE ("+Xy+") INTERNAL ASSERTION FAILED: "+t;throw eg(e),new Error(e)}function ig(t,e){t||rg(e)}var og=(sg.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return ig(20===e.length,"Invalid auto ID: "+e),e},sg);function sg(){}function ag(t,e){return t<e?-1:e<t?1:0}function ug(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function cg(t){return t+"\0"}function hg(t,e,n,r,i){this.s=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i}function lg(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t}var fg,pg=(Object.defineProperty(Ng.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),Ng.prototype.isEqual=function(t){return t instanceof Ng&&t.projectId===this.projectId&&t.database===this.database},Ng.prototype.h=function(t){return ag(this.projectId,t.projectId)||ag(this.database,t.database)},Ng),dg=(Cg.prototype.l=function(){return null!=this.uid},Cg.prototype.v=function(){return this.l()?"uid:"+this.uid:"anonymous-user"},Cg.prototype.isEqual=function(t){return t.uid===this.uid},Cg.UNAUTHENTICATED=new Cg(null),Cg.m=new Cg("google-credentials-uid"),Cg.p=new Cg("first-party-uid"),Cg),vg={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},yg=(Es(Sg,fg=Error),Sg),gg=(Tg.prototype.getToken=function(){return Promise.resolve(null)},Tg.prototype.I=function(){},Tg.prototype.T=function(t){ig(!this._,"Can only call setChangeListener() once."),(this._=t)(dg.UNAUTHENTICATED)},Tg.prototype.D=function(){ig(null!==this._,"removeChangeListener() when no listener registered"),this._=null},Tg),mg=(Ig.prototype.getToken=function(){var e=this;ig(null!=this.S,"getToken cannot be called after listener removed.");var n=this.C,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){if(e.C!==n)throw new yg(vg.ABORTED,"getToken aborted due to token change.");return t?(ig("string"==typeof t.accessToken,"Invalid tokenData returned from getToken():"+t),new lg(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},Ig.prototype.I=function(){this.forceRefresh=!0},Ig.prototype.T=function(t){ig(!this._,"Can only call setChangeListener() once."),this._=t,this.R&&t(this.currentUser)},Ig.prototype.D=function(){ig(null!=this.S,"removeChangeListener() called twice"),ig(null!==this._,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.S),this.S=null,this._=null},Ig.prototype.A=function(){var t=this.auth&&this.auth.getUid();return ig(null===t||"string"==typeof t,"Received invalid UID: "+t),new dg(t)},Ig),wg=(Object.defineProperty(Eg.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.k},e=this.P.auth.N([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),Eg),bg=(_g.prototype.getToken=function(){return Promise.resolve(new wg(this.P,this.k))},_g.prototype.T=function(t){t(dg.p)},_g.prototype.D=function(){},_g.prototype.I=function(){},_g);function _g(t,e){this.P=t,this.k=e}function Eg(t,e){this.P=t,this.k=e,this.type="FirstParty",this.user=dg.p}function Ig(t){var e=this;this.S=null,this.currentUser=dg.UNAUTHENTICATED,this.R=!1,this.C=0,this._=null,this.forceRefresh=!1,this.S=function(){e.C++,e.currentUser=e.A(),e.R=!0,e._&&e._(e.currentUser)},this.C=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.S):(this.S(null),t.get().then(function(t){e.auth=t,e.S&&e.auth.addAuthTokenListener(e.S)},function(){}))}function Tg(){this._=null}function Sg(t,e){var n=fg.call(this,e)||this;return n.code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function Cg(t){this.uid=t}function Ng(t,e){this.projectId=t,this.database=e||"(default)"}function Ag(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function kg(t,e){return void 0!==t?t:e}function Og(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function Rg(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Dg(t){for(var e in ig(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Pg(t,e){if(0!==e.length)throw new yg(vg.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+Xg(e.length,"argument")+".")}function xg(t,e,n){if(e.length!==n)throw new yg(vg.INVALID_ARGUMENT,"Function "+t+"() requires "+Xg(n,"argument")+", but was called with "+Xg(e.length,"argument")+".")}function Lg(t,e,n){if(e.length<n)throw new yg(vg.INVALID_ARGUMENT,"Function "+t+"() requires at least "+Xg(n,"argument")+", but was called with "+Xg(e.length,"argument")+".")}function Mg(t,e,n,r){if(e.length<n||e.length>r)throw new yg(vg.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+Xg(e.length,"argument")+".")}function Fg(t,e,n,r){Bg(t,e,Yg(n)+" argument",r)}function Ug(t,e,n,r){void 0!==r&&Fg(t,e,n,r)}function jg(t,e,n,r){Bg(t,e,n+" option",r)}function qg(t,e,n,r){void 0!==r&&jg(t,e,n,r)}function Vg(t,e,n,r,c){void 0!==r&&function(t,e,n,r){for(var i=[],o=0,s=c;o<s.length;o++){var a=s[o];if(a===r)return;i.push(Hg(a))}var u=Hg(r);throw new yg(vg.INVALID_ARGUMENT,"Invalid value "+u+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+i.join(", "))}(t,0,n,r)}function Bg(t,e,n,r){if(!("object"===e?Wg(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=Hg(r);throw new yg(vg.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function Wg(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function Hg(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return 20<t.length&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"!=typeof t)return"function"==typeof t?"a function":rg("Unknown wrong type: "+typeof t);if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&1<e.length)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}function Gg(t,e,n){if(void 0===n)throw new yg(vg.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+Yg(e)+" argument, but it was undefined.")}function zg(n,t,r){Rg(t,function(t,e){if(r.indexOf(t)<0)throw new yg(vg.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+n+"(). Available options: "+r.join(", "))})}function Kg(t,e,n,r){var i=Hg(r);return new yg(vg.INVALID_ARGUMENT,"Function "+t+"() requires its "+Yg(n)+" argument to be a "+e+", but it was: "+i)}function Qg(t,e,n){if(n<=0)throw new yg(vg.INVALID_ARGUMENT,'Function "'+t+'()" requires its '+Yg(e)+" argument to be a positive number, but it was: "+n+".")}function Yg(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function Xg(t,e){return t+" "+e+(1===t?"":"s")}var Jg,$g,Zg=(Object.defineProperty(_m.prototype,"latitude",{get:function(){return this.F},enumerable:!0,configurable:!0}),Object.defineProperty(_m.prototype,"longitude",{get:function(){return this.V},enumerable:!0,configurable:!0}),_m.prototype.isEqual=function(t){return this.F===t.F&&this.V===t.V},_m.prototype.U=function(t){return ag(this.F,t.F)||ag(this.V,t.V)},_m),tm=(bm.now=function(){return bm.fromMillis(Date.now())},bm.fromDate=function(t){return bm.fromMillis(t.getTime())},bm.fromMillis=function(t){var e=Math.floor(t/1e3);return new bm(e,1e6*(t-1e3*e))},bm.prototype.toDate=function(){return new Date(this.toMillis())},bm.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},bm.prototype.U=function(t){return this.seconds===t.seconds?ag(this.nanoseconds,t.nanoseconds):ag(this.seconds,t.seconds)},bm.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},bm.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},bm.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},bm),em=(wm.j=function(t){var e=Math.floor(t/1e6);return new wm(new tm(e,t%1e6*1e3))},wm.L=function(t){return new wm(t)},wm.q=function(){return wm.MIN},wm.prototype.h=function(t){return this.timestamp.U(t.timestamp)},wm.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},wm.prototype.B=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},wm.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},wm.prototype.M=function(){return this.timestamp},wm.MIN=new wm(new tm(0,0)),wm),nm=(Object.defineProperty(mm.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),mm.prototype.isEqual=function(t){return 0===mm.G(this,t)},mm.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof mm?t.forEach(function(t){e.push(t)}):e.push(t),this.W(e)},mm.prototype.limit=function(){return this.offset+this.length},mm.prototype.K=function(t){return t=void 0===t?1:t,ig(this.length>=t,"Can't call popFirst() with less segments"),this.W(this.segments,this.offset+t,this.length-t)},mm.prototype.H=function(){return ig(!this.J(),"Can't call popLast() on empty path"),this.W(this.segments,this.offset,this.length-1)},mm.prototype.Y=function(){return ig(!this.J(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},mm.prototype.X=function(){return this.get(this.length-1)},mm.prototype.get=function(t){return ig(t<this.length,"Index out of range"),this.segments[this.offset+t]},mm.prototype.J=function(){return 0===this.length},mm.prototype.$=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},mm.prototype.Z=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},mm.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},mm.prototype.tt=function(){return this.segments.slice(this.offset,this.limit())},mm.G=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},mm),rm=(Es(gm,$g=nm),gm.prototype.W=function(t,e,n){return new gm(t,e,n)},gm.prototype.nt=function(){return this.tt().join("/")},gm.prototype.toString=function(){return this.nt()},gm.it=function(t){if(0<=t.indexOf("//"))throw new yg(vg.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new gm(t.split("/").filter(function(t){return 0<t.length}))},gm.et=new gm([]),gm),im=/^[_a-zA-Z][_a-zA-Z0-9]*$/,om=(Es(ym,Jg=nm),ym.prototype.W=function(t,e,n){return new ym(t,e,n)},ym.rt=function(t){return im.test(t)},ym.prototype.nt=function(){return this.tt().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),ym.rt(t)||(t="`"+t+"`"),t}).join(".")},ym.prototype.toString=function(){return this.nt()},ym.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},ym.st=function(){return new ym(["__name__"])},ym.ot=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new yg(vg.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new yg(vg.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[r+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new yg(vg.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=a,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new yg(vg.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ym(e)},ym.et=new ym([]),ym),sm=(vm.prototype.ct=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},vm.prototype.isEqual=function(t){return null!==t&&0===rm.G(this.path,t.path)},vm.prototype.toString=function(){return this.path.toString()},vm.G=function(t,e){return rm.G(t.path,e.path)},vm.ht=function(t){return t.length%2==0},vm.at=function(t){return new vm(new rm(t.slice()))},vm.ft=function(t){return new vm(rm.it(t))},vm.EMPTY=new vm(new rm([])),vm),am=(dm.prototype.lt=function(t,e){return new dm(this.G,this.root.lt(t,e,this.G).copy(null,null,cm.dt,null,null))},dm.prototype.remove=function(t){return new dm(this.G,this.root.remove(t,this.G).copy(null,null,cm.dt,null,null))},dm.prototype.get=function(t){for(var e=this.root;!e.J();){var n=this.G(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},dm.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.J();){var r=this.G(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},dm.prototype.J=function(){return this.root.J()},Object.defineProperty(dm.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),dm.prototype.vt=function(){return this.root.vt()},dm.prototype.wt=function(){return this.root.wt()},dm.prototype.pt=function(t){return this.root.pt(t)},dm.prototype.forEach=function(n){this.pt(function(t,e){return n(t,e),!1})},dm.prototype.toString=function(){var n=[];return this.pt(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},dm.prototype.gt=function(t){return this.root.gt(t)},dm.prototype.bt=function(){return new um(this.root,null,this.G,!1)},dm.prototype.yt=function(t){return new um(this.root,t,this.G,!1)},dm.prototype._t=function(){return new um(this.root,null,this.G,!0)},dm.prototype.It=function(t){return new um(this.root,t,this.G,!0)},dm),um=(pm.prototype.Dt=function(){ig(0<this.Et.length,"getNext() called on iterator when hasNext() is false.");var t=this.Et.pop(),e={key:t.key,value:t.value};if(this.Tt)for(t=t.left;!t.J();)this.Et.push(t),t=t.right;else for(t=t.right;!t.J();)this.Et.push(t),t=t.left;return e},pm.prototype.St=function(){return 0<this.Et.length},pm.prototype.Rt=function(){if(0===this.Et.length)return null;var t=this.Et[this.Et.length-1];return{key:t.key,value:t.value}},pm),cm=(fm.prototype.copy=function(t,e,n,r,i){return new fm(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},fm.prototype.J=function(){return!1},fm.prototype.pt=function(t){return this.left.pt(t)||t(this.key,this.value)||this.right.pt(t)},fm.prototype.gt=function(t){return this.right.gt(t)||t(this.key,this.value)||this.left.gt(t)},fm.prototype.min=function(){return this.left.J()?this:this.left.min()},fm.prototype.vt=function(){return this.min().key},fm.prototype.wt=function(){return this.right.J()?this.key:this.right.wt()},fm.prototype.lt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.lt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.lt(t,e,n))).Ct()},fm.prototype.At=function(){if(this.left.J())return fm.EMPTY;var t=this;return t.left.Pt()||t.left.left.Pt()||(t=t.kt()),(t=t.copy(null,null,null,t.left.At(),null)).Ct()},fm.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.J()||r.left.Pt()||r.left.left.Pt()||(r=r.kt()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.Pt()&&(r=r.Nt()),r.right.J()||r.right.Pt()||r.right.left.Pt()||(r=r.Ot()),0===e(t,r.key)){if(r.right.J())return fm.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.At())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.Ct()},fm.prototype.Pt=function(){return this.color},fm.prototype.Ct=function(){var t=this;return t.right.Pt()&&!t.left.Pt()&&(t=t.Ft()),t.left.Pt()&&t.left.left.Pt()&&(t=t.Nt()),t.left.Pt()&&t.right.Pt()&&(t=t.Vt()),t},fm.prototype.kt=function(){var t=this.Vt();return t.right.left.Pt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Nt())).Ft()).Vt()),t},fm.prototype.Ot=function(){var t=this.Vt();return t.left.left.Pt()&&(t=(t=t.Nt()).Vt()),t},fm.prototype.Ft=function(){var t=this.copy(null,null,fm.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},fm.prototype.Nt=function(){var t=this.copy(null,null,fm.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},fm.prototype.Vt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},fm.prototype.Ut=function(){var t=this.xt();return Math.pow(2,t)<=this.size+1},fm.prototype.xt=function(){if(this.Pt()&&this.left.Pt())throw rg("Red node has red child("+this.key+","+this.value+")");if(this.right.Pt())throw rg("Right child of ("+this.key+","+this.value+") is red");var t=this.left.xt();if(t!==this.right.xt())throw rg("Black depths differ");return t+(this.Pt()?0:1)},fm.EMPTY=null,fm.RED=!0,fm.dt=!1,fm),hm=(Object.defineProperty(lm.prototype,"key",{get:function(){throw rg("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(lm.prototype,"value",{get:function(){throw rg("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(lm.prototype,"color",{get:function(){throw rg("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(lm.prototype,"left",{get:function(){throw rg("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(lm.prototype,"right",{get:function(){throw rg("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),lm.prototype.copy=function(t,e,n,r,i){return this},lm.prototype.lt=function(t,e,n){return new cm(t,e)},lm.prototype.remove=function(t,e){return this},lm.prototype.J=function(){return!0},lm.prototype.pt=function(t){return!1},lm.prototype.gt=function(t){return!1},lm.prototype.vt=function(){return null},lm.prototype.wt=function(){return null},lm.prototype.Pt=function(){return!1},lm.prototype.Ut=function(){return!0},lm.prototype.xt=function(){return 0},lm);function lm(){this.size=0}function fm(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:fm.RED,this.left=null!=r?r:fm.EMPTY,this.right=null!=i?i:fm.EMPTY,this.size=this.left.size+1+this.right.size}function pm(t,e,n,r){this.Tt=r,this.Et=[];for(var i=1;!t.J();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Tt?t.left:t.right;else{if(0===i){this.Et.push(t);break}this.Et.push(t),t=this.Tt?t.right:t.left}}function dm(t,e){this.G=t,this.root=e||cm.EMPTY}function vm(t){this.path=t,ig(vm.ht(t),"Invalid DocumentKey with an odd number of segments: "+t.tt().join("/"))}function ym(){return null!==Jg&&Jg.apply(this,arguments)||this}function gm(){return null!==$g&&$g.apply(this,arguments)||this}function mm(t,e,n){void 0===e?e=0:e>t.length&&rg("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&rg("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n}function wm(t){this.timestamp=t}function bm(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new yg(vg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new yg(vg.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new yg(vg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new yg(vg.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function _m(t,e){if(xg("GeoPoint",arguments,2),Fg("GeoPoint","number",1,t),Fg("GeoPoint","number",2,e),!isFinite(t)||t<-90||90<t)throw new yg(vg.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new yg(vg.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.F=t,this.V=e}cm.EMPTY=new hm;var Em=(Pm.jt=function(t){var e=new Pm(t.G);return t.forEach(function(t){e=e.add(t)}),e},Pm.prototype.has=function(t){return null!==this.data.get(t)},Pm.prototype.first=function(){return this.data.vt()},Pm.prototype.last=function(){return this.data.wt()},Object.defineProperty(Pm.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),Pm.prototype.indexOf=function(t){return this.data.indexOf(t)},Pm.prototype.forEach=function(n){this.data.pt(function(t,e){return n(t),!1})},Pm.prototype.Lt=function(t,e){for(var n=this.data.yt(t[0]);n.St();){var r=n.Dt();if(0<=this.G(r.key,t[1]))return;e(r.key)}},Pm.prototype.qt=function(t,e){var n;for(n=void 0!==e?this.data.yt(e):this.data.bt();n.St();)if(!t(n.Dt().key))return},Pm.prototype.Bt=function(t){var e=this.data.yt(t);return e.St()?e.Dt().key:null},Pm.prototype.bt=function(){return new Im(this.data.bt())},Pm.prototype.yt=function(t){return new Im(this.data.yt(t))},Pm.prototype.add=function(t){return this.copy(this.data.remove(t).lt(t,!0))},Pm.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},Pm.prototype.J=function(){return this.data.J()},Pm.prototype.Mt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},Pm.prototype.isEqual=function(t){if(!(t instanceof Pm))return!1;if(this.size!==t.size)return!1;for(var e=this.data.bt(),n=t.data.bt();e.St();){var r=e.Dt().key,i=n.Dt().key;if(0!==this.G(r,i))return!1}return!0},Pm.prototype.tt=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},Pm.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},Pm.prototype.copy=function(t){var e=new Pm(this.G);return e.data=t,e},Pm),Im=(Dm.prototype.Dt=function(){return this.Qt.Dt().key},Dm.prototype.St=function(){return this.Qt.St()},Dm),Tm=(Rm.prototype.Gt=function(t,e){return new Mw(e,t)},Rm.prototype.Wt=function(t,e){return e},Rm.prototype.zt=function(t){return null},Rm.prototype.isEqual=function(t){return t instanceof Rm},Rm.instance=new Rm,Rm),Sm=(Om.prototype.Gt=function(t,e){return this.apply(t)},Om.prototype.Wt=function(t,e){return this.apply(t)},Om.prototype.apply=function(t){for(var n=xm(t),e=function(e){n.find(function(t){return t.isEqual(e)})||n.push(e)},r=0,i=this.elements;r<i.length;r++)e(i[r]);return new Bw(n)},Om.prototype.zt=function(t){return null},Om.prototype.isEqual=function(t){return t instanceof Om&&ug(t.elements,this.elements)},Om),Cm=(km.prototype.Gt=function(t,e){return this.apply(t)},km.prototype.Wt=function(t,e){return this.apply(t)},km.prototype.apply=function(t){for(var n=xm(t),e=function(e){n=n.filter(function(t){return!t.isEqual(e)})},r=0,i=this.elements;r<i.length;r++)e(i[r]);return new Bw(n)},km.prototype.zt=function(t){return null},km.prototype.isEqual=function(t){return t instanceof km&&ug(t.elements,this.elements)},km),Nm=(Am.prototype.Gt=function(t,e){var n=this.zt(t);if(n instanceof Dw&&this.Kt instanceof Dw){var r=n.Ht+this.Kt.Ht;return new Dw(r)}return r=n.Ht+this.Kt.Ht,new Pw(r)},Am.prototype.Wt=function(t,e){return ig(null!==e,"Didn't receive transformResult for NUMERIC_ADD transform"),e},Am.prototype.zt=function(t){return t instanceof rw?t:new Dw(0)},Am.prototype.isEqual=function(t){return t instanceof Am&&this.Kt.isEqual(t.Kt)},Am);function Am(t){this.Kt=t}function km(t){this.elements=t}function Om(t){this.elements=t}function Rm(){}function Dm(t){this.Qt=t}function Pm(t){this.G=t,this.data=new am(this.G)}function xm(t){return t instanceof Bw?t.Ht.slice():[]}function Lm(t,e){this.version=t,this.transformResults=e}var Mm,Fm,Um,jm,qm,Vm,Bm,Wm,Hm=(gw.Jt=function(t){return new gw(t)},gw.Yt=function(t){var e=new Em(om.G);return t.forEach(function(t){return e=e.add(t)}),new gw(e)},gw.prototype.Xt=function(e){var n=!1;return this.fields.forEach(function(t){t.$(e)&&(n=!0)}),n},gw.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},gw),Gm=(yw.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},yw),zm=(vw.exists=function(t){return new vw(void 0,t)},vw.updateTime=function(t){return new vw(t)},Object.defineProperty(vw.prototype,"$t",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),vw.prototype.Zt=function(t){return void 0!==this.updateTime?t instanceof Hw&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof Hw:(ig(this.$t,"Precondition should be empty"),!0)},vw.prototype.isEqual=function(t){return e=this.updateTime,n=t.updateTime,(null!=e?!(!n||!e.isEqual(n)):e===n)&&this.exists===t.exists;var e,n},vw.NONE=new vw,vw),Km=(dw.prototype.tn=function(t){null!=t&&ig(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},dw.nn=function(t){return t instanceof Hw?t.version:em.MIN},dw),Qm=(Es(pw,Wm=Km),pw.prototype.Wt=function(t,e){this.tn(t),ig(null==e.transformResults,"Transform results received by SetMutation.");var n=e.version;return new Hw(this.key,n,{hasCommittedMutations:!0},this.value)},pw.prototype.Gt=function(t,e,n){if(this.tn(t),!this.in.Zt(t))return t;var r=Km.nn(t);return new Hw(this.key,r,{en:!0},this.value)},pw.prototype.rn=function(t){return null},pw.prototype.isEqual=function(t){return t instanceof pw&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.in.isEqual(t.in)},pw),Ym=(Es(fw,Bm=Km),fw.prototype.Wt=function(t,e){if(this.tn(t),ig(null==e.transformResults,"Transform results received by PatchMutation."),!this.in.Zt(t))return new zw(this.key,e.version);var n=this.sn(t);return new Hw(this.key,e.version,{hasCommittedMutations:!0},n)},fw.prototype.Gt=function(t,e,n){if(this.tn(t),!this.in.Zt(t))return t;var r=Km.nn(t),i=this.sn(t);return new Hw(this.key,r,{en:!0},i)},fw.prototype.rn=function(t){return null},fw.prototype.isEqual=function(t){return t instanceof fw&&this.key.isEqual(t.key)&&this.un.isEqual(t.un)&&this.in.isEqual(t.in)},fw.prototype.sn=function(t){var e;return e=t instanceof Hw?t.data():qw.EMPTY,this.on(e)},fw.prototype.on=function(t){var n=this,r=t.hn();return this.un.fields.forEach(function(t){if(!t.J()){var e=n.data.field(t);null!==e?r.set(t,e):r.delete(t)}}),r.cn()},fw),Xm=(Es(lw,Vm=Km),lw.prototype.Wt=function(t,e){if(this.tn(t),ig(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.in.Zt(t))return new zw(this.key,e.version);var n=this.an(t),r=this.fn(t,e.transformResults),i=e.version,o=this.ln(n.data(),r);return new Hw(this.key,i,{hasCommittedMutations:!0},o)},lw.prototype.Gt=function(t,e,n){if(this.tn(t),!this.in.Zt(t))return t;var r=this.an(t),i=this.dn(n,t,e),o=this.ln(r.data(),i);return new Hw(this.key,r.version,{en:!0},o)},lw.prototype.rn=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof Hw?t.field(i.field):void 0,s=i.transform.zt(o||null);null!=s&&(e=null==e?qw.vn().set(i.field,s):e.set(i.field,s))}return e?e.cn():null},lw.prototype.isEqual=function(t){return t instanceof lw&&this.key.isEqual(t.key)&&ug(this.fieldTransforms,t.fieldTransforms)&&this.in.isEqual(t.in)},lw.prototype.an=function(t){return ig(t instanceof Hw,"Unknown MaybeDocument type "+t),ig(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},lw.prototype.fn=function(t,e){var n=[];ig(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,s=null;t instanceof Hw&&(s=t.field(i.field)),n.push(o.Wt(s,e[r]))}return n},lw.prototype.dn=function(t,e,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var s=o[i],a=s.transform,u=null;e instanceof Hw&&(u=e.field(s.field)),null===u&&n instanceof Hw&&(u=n.field(s.field)),r.push(a.Gt(u,t))}return r},lw.prototype.ln=function(t,e){ig(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=t.hn(),r=0;r<this.fieldTransforms.length;r++){var i=this.fieldTransforms[r].field;n.set(i,e[r])}return n.cn()},lw),Jm=(Es(hw,qm=Km),hw.prototype.Wt=function(t,e){return this.tn(t),ig(null==e.transformResults,"Transform results received by DeleteMutation."),new Gw(this.key,e.version,{hasCommittedMutations:!0})},hw.prototype.Gt=function(t,e,n){return this.tn(t),this.in.Zt(t)?(t&&ig(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Gw(this.key,em.q())):t},hw.prototype.rn=function(t){return null},hw.prototype.isEqual=function(t){return t instanceof hw&&this.key.isEqual(t.key)&&this.in.isEqual(t.in)},hw),$m=(Es(cw,jm=Km),cw.prototype.Wt=function(t,e){rg("VerifyMutation should only be used in Transactions.")},cw.prototype.Gt=function(t,e,n){rg("VerifyMutation should only be used in Transactions.")},cw.prototype.rn=function(t){rg("VerifyMutation should only be used in Transactions.")},cw.prototype.isEqual=function(t){return t instanceof cw&&this.key.isEqual(t.key)&&this.in.isEqual(t.in)},cw),Zm=(uw.mn=function(t,e){switch(t.serverTimestamps){case"estimate":return new uw(1,e);case"previous":return new uw(2,e);case"none":case void 0:return new uw(0,e);default:return rg("fromSnapshotOptions() called with invalid options.")}},uw),tw=(aw.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},aw.prototype.pn=function(t){return ig(this.gn!==t.gn,"Default compareTo should not be used for values of same type."),ag(this.gn,t.gn)},aw),ew=(Es(sw,Um=tw),sw.prototype.value=function(t){return null},sw.prototype.isEqual=function(t){return t instanceof sw},sw.prototype.h=function(t){return t instanceof sw?0:this.pn(t)},sw.prototype.bn=function(){return 4},sw.yn=new sw,sw),nw=(Es(ow,Fm=tw),ow.prototype.value=function(t){return this.Ht},ow.prototype.isEqual=function(t){return t instanceof ow&&this.Ht===t.Ht},ow.prototype.h=function(t){return t instanceof ow?ag(this.Ht,t.Ht):this.pn(t)},ow.prototype.bn=function(){return 4},ow.of=function(t){return t?ow._n:ow.In},ow._n=new ow(!0),ow.In=new ow(!1),ow),rw=(Es(iw,Mm=tw),iw.prototype.value=function(t){return this.Ht},iw.prototype.h=function(t){return t instanceof iw?(e=this.Ht)<(n=t.Ht)?-1:n<e?1:e===n?0:isNaN(e)?isNaN(n)?0:-1:1:this.pn(t);var e,n},iw.prototype.bn=function(){return 8},iw);function iw(t){var e=Mm.call(this)||this;return e.Ht=t,e.gn=2,e}function ow(t){var e=Fm.call(this)||this;return e.Ht=t,e.gn=1,e}function sw(){var t=Um.call(this)||this;return t.gn=0,t.Ht=null,t}function aw(){}function uw(t,e){this.wn=t,this.timestampsInSnapshots=e}function cw(t,e){var n=jm.call(this)||this;return n.key=t,n.in=e,n.type=4,n}function hw(t,e){var n=qm.call(this)||this;return n.key=t,n.in=e,n.type=3,n}function lw(t,e){var n=Vm.call(this)||this;return n.key=t,n.fieldTransforms=e,n.type=2,n.in=zm.exists(!0),n}function fw(t,e,n,r){var i=Bm.call(this)||this;return i.key=t,i.data=e,i.un=n,i.in=r,i.type=1,i}function pw(t,e,n){var r=Wm.call(this)||this;return r.key=t,r.value=e,r.in=n,r.type=0,r}function dw(){}function vw(t,e){this.updateTime=t,this.exists=e,ig(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}function yw(t,e){this.field=t,this.transform=e}function gw(t){this.fields=t}function mw(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var ww,bw,_w,Ew,Iw,Tw,Sw,Cw,Nw,Aw,kw,Ow,Rw,Dw=(Es(lb,Rw=rw),lb.prototype.isEqual=function(t){return t instanceof lb&&mw(this.Ht,t.Ht)},lb),Pw=(Es(hb,Ow=rw),hb.prototype.isEqual=function(t){return t instanceof hb&&mw(this.Ht,t.Ht)},hb.Tn=new hb(NaN),hb.POSITIVE_INFINITY=new hb(1/0),hb.NEGATIVE_INFINITY=new hb(-1/0),hb),xw=(Es(cb,kw=tw),cb.prototype.value=function(t){return this.Ht},cb.prototype.isEqual=function(t){return t instanceof cb&&this.Ht===t.Ht},cb.prototype.h=function(t){return t instanceof cb?ag(this.Ht,t.Ht):this.pn(t)},cb.prototype.bn=function(){return 2*this.Ht.length},cb),Lw=(Es(ub,Aw=tw),ub.prototype.value=function(t){return!t||t.timestampsInSnapshots?this.Ht:this.Ht.toDate()},ub.prototype.isEqual=function(t){return t instanceof ub&&this.Ht.isEqual(t.Ht)},ub.prototype.h=function(t){return t instanceof ub?this.Ht.U(t.Ht):t instanceof Mw?-1:this.pn(t)},ub.prototype.bn=function(){return 16},ub),Mw=(Es(ab,Nw=tw),ab.prototype.value=function(t){return t&&1===t.wn?new Lw(this.En).value(t):t&&2===t.wn&&this.previousValue?this.previousValue.value(t):null},ab.prototype.isEqual=function(t){return t instanceof ab&&this.En.isEqual(t.En)},ab.prototype.h=function(t){return t instanceof ab?this.En.U(t.En):t instanceof Lw?1:this.pn(t)},ab.prototype.toString=function(){return"<ServerTimestamp localTime="+this.En.toString()+">"},ab.prototype.bn=function(){return 16+(this.previousValue?this.previousValue.bn():0)},ab),Fw=(Es(sb,Cw=tw),sb.prototype.value=function(t){return this.Ht},sb.prototype.isEqual=function(t){return t instanceof sb&&this.Ht.isEqual(t.Ht)},sb.prototype.h=function(t){return t instanceof sb?this.Ht.U(t.Ht):this.pn(t)},sb.prototype.bn=function(){return this.Ht.Dn()},sb),Uw=(Es(ob,Sw=tw),ob.prototype.value=function(t){return this.key},ob.prototype.isEqual=function(t){return t instanceof ob&&this.key.isEqual(t.key)&&this.s.isEqual(t.s)},ob.prototype.h=function(t){if(t instanceof ob){var e=this.s.h(t.s);return 0!==e?e:sm.G(this.key,t.key)}return this.pn(t)},ob.prototype.bn=function(){return this.s.projectId.length+this.s.database.length+this.key.toString().length},ob),jw=(Es(ib,Tw=tw),ib.prototype.value=function(t){return this.Ht},ib.prototype.isEqual=function(t){return t instanceof ib&&this.Ht.isEqual(t.Ht)},ib.prototype.h=function(t){return t instanceof ib?this.Ht.U(t.Ht):this.pn(t)},ib.prototype.bn=function(){return 16},ib),qw=(Es(rb,Iw=tw),rb.vn=function(){return new Vw(rb.EMPTY.Ht)},rb.prototype.value=function(n){var r={};return this.Ht.pt(function(t,e){r[t]=e.value(n)}),r},rb.prototype.forEach=function(t){this.Ht.pt(t)},rb.prototype.isEqual=function(t){if(t instanceof rb){for(var e=this.Ht.bt(),n=t.Ht.bt();e.St()&&n.St();){var r=e.Dt(),i=n.Dt();if(r.key!==i.key||!r.value.isEqual(i.value))return!1}return!e.St()&&!n.St()}return!1},rb.prototype.h=function(t){if(t instanceof rb){for(var e=this.Ht.bt(),n=t.Ht.bt();e.St()&&n.St();){var r=e.Dt(),i=n.Dt(),o=ag(r.key,i.key)||r.value.h(i.value);if(o)return o}return ag(e.St(),n.St())}return this.pn(t)},rb.prototype.contains=function(t){return null!==this.field(t)},rb.prototype.field=function(t){ig(!t.J(),"Can't get field of empty path");var e=this;return t.forEach(function(t){e=e instanceof rb?e.Ht.get(t):null}),e},rb.prototype.un=function(){var i=new Em(om.G);return this.Ht.forEach(function(t,e){var n=new om([t]);if(e instanceof rb){var r=e.un().fields;r.J()?i=i.add(n):r.forEach(function(t){i=i.add(n.child(t))})}else i=i.add(n)}),Hm.Jt(i)},rb.prototype.bn=function(){var n=0;return this.Ht.pt(function(t,e){n+=t.length+e.bn()}),n},rb.prototype.toString=function(){return this.Ht.toString()},rb.prototype.hn=function(){return new Vw(this.Ht)},rb.EMPTY=new rb(new am(ag)),rb),Vw=(nb.prototype.set=function(t,e){ig(!t.J(),"Cannot set field for empty path on ObjectValue");var n=t.Y();if(1===t.length)this.Ht=this.Ht.lt(n,e);else{var r=this.Ht.get(n),i=(r instanceof qw?r:qw.EMPTY).hn().set(t.K(),e).cn();this.Ht=this.Ht.lt(n,i)}return this},nb.prototype.delete=function(t){ig(!t.J(),"Cannot delete field for empty path on ObjectValue");var e=t.Y();if(1===t.length)this.Ht=this.Ht.remove(e);else{var n=this.Ht.get(e);if(n instanceof qw){var r=n.hn().delete(t.K()).cn();this.Ht=this.Ht.lt(t.Y(),r)}}return this},nb.prototype.cn=function(){return new qw(this.Ht)},nb),Bw=(Es(eb,Ew=tw),eb.prototype.value=function(e){return this.Ht.map(function(t){return t.value(e)})},eb.prototype.contains=function(t){for(var e=0,n=this.Ht;e<n.length;e++)if(n[e].isEqual(t))return!0;return!1},eb.prototype.forEach=function(t){this.Ht.forEach(t)},eb.prototype.isEqual=function(t){if(t instanceof eb){if(this.Ht.length!==t.Ht.length)return!1;for(var e=0;e<this.Ht.length;e++)if(!this.Ht[e].isEqual(t.Ht[e]))return!1;return!0}return!1},eb.prototype.h=function(t){if(t instanceof eb){for(var e=Math.min(this.Ht.length,t.Ht.length),n=0;n<e;n++){var r=this.Ht[n].h(t.Ht[n]);if(r)return r}return ag(this.Ht.length,t.Ht.length)}return this.pn(t)},eb.prototype.bn=function(){return this.Ht.reduce(function(t,e){return t+e.bn()},0)},eb.prototype.toString=function(){return"["+this.Ht.map(function(t){return t.toString()}).join(",")+"]"},eb),Ww=(tb.Sn=function(t,e){return sm.G(t.key,e.key)},tb),Hw=(Es(Zw,_w=Ww),Zw.prototype.field=function(t){if(this.Rn)return this.Rn.field(t);this.Cn||(this.Cn=new Map);var e=t.nt(),n=this.Cn.get(e);if(void 0===n){var r=this.An(t);n=void 0===r?null:this.converter(r),this.Cn.set(e,n)}return n},Zw.prototype.data=function(){var n=this;if(!this.Rn){var r=qw.vn();Rg(this.proto.fields||{},function(t,e){r.set(new om([t]),n.converter(e))}),this.Rn=r.cn(),this.Cn=void 0}return this.Rn},Zw.prototype.value=function(){return this.data().value()},Zw.prototype.isEqual=function(t){return t instanceof Zw&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.en===t.en&&this.hasCommittedMutations===t.hasCommittedMutations&&this.data().isEqual(t.data())},Zw.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.en+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(Zw.prototype,"hasPendingWrites",{get:function(){return this.en||this.hasCommittedMutations},enumerable:!0,configurable:!0}),Zw.prototype.An=function(t){ig(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var e=this.proto.fields?this.proto.fields[t.Y()]:void 0,n=1;n<t.length;++n){if(!e||!e.mapValue||!e.mapValue.fields)return;e=e.mapValue.fields[t.get(n)]}return e},Zw.Pn=function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?r.h(i):rg("Trying to compare documents on fields that don't exist")},Zw),Gw=(Es($w,bw=Ww),$w.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty($w.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),$w.prototype.isEqual=function(t){return t instanceof $w&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},$w),zw=(Es(Jw,ww=Ww),Jw.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(Jw.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),Jw.prototype.isEqual=function(t){return t instanceof Jw&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Jw),Kw=Number,Qw=Kw.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),Yw=Kw.MAX_SAFE_INTEGER||Math.pow(2,53)-1,Xw=Kw.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};function Jw(){return null!==ww&&ww.apply(this,arguments)||this}function $w(t,e,n){var r=bw.call(this,t,e)||this;return r.hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function Zw(t,e,n,r,i,o){var s=_w.call(this,t,e)||this;return s.Rn=r,s.proto=i,s.converter=o,ig(void 0!==s.Rn||void 0!==s.proto&&void 0!==s.converter,"If objectValue is not defined, proto and converter need to be set."),s.en=!!n.en,s.hasCommittedMutations=!!n.hasCommittedMutations,s}function tb(t,e){this.key=t,this.version=e}function eb(t){var e=Ew.call(this)||this;return e.Ht=t,e.gn=8,e}function nb(t){this.Ht=t}function rb(t){var e=Iw.call(this)||this;return e.Ht=t,e.gn=9,e}function ib(t){var e=Tw.call(this)||this;return e.Ht=t,e.gn=7,e}function ob(t,e){var n=Sw.call(this)||this;return n.s=t,n.key=e,n.gn=6,n}function sb(t){var e=Cw.call(this)||this;return e.Ht=t,e.gn=5,e}function ab(t,e){var n=Nw.call(this)||this;return n.En=t,n.previousValue=e,n.gn=3,n}function ub(t){var e=Aw.call(this)||this;return e.Ht=t,e.gn=3,e}function cb(t){var e=kw.call(this)||this;return e.Ht=t,e.gn=4,e}function hb(){return null!==Ow&&Ow.apply(this,arguments)||this}function lb(){return null!==Rw&&Rw.apply(this,arguments)||this}function fb(t){return null==t}function pb(t){return Xw(t)&&t<=Yw&&Qw<=t}var db,vb,yb,gb,mb,wb,bb=(Kb.prototype.canonicalId=function(){if(null===this.kn){var t=this.path.nt();null!==this.collectionGroup&&(t+="|cg:"+this.collectionGroup),t+="|f:";for(var e=0,n=this.filters;e<n.length;e++)t+=n[e].canonicalId(),t+=",";t+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)t+=i[r].canonicalId(),t+=",";fb(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.kn=t}return this.kn},Kb.prototype.toString=function(){var t=this.path.nt();return null!==this.collectionGroup&&(t+=" collectionGroup="+this.collectionGroup),0<this.filters.length&&(t+=", filters: ["+this.filters.join(", ")+"]"),fb(this.limit)||(t+=", limit: "+this.limit),0<this.orderBy.length&&(t+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),"Target("+t+")"},Kb.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return this.collectionGroup===t.collectionGroup&&!!this.path.isEqual(t.path)&&!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},Kb.prototype.Nn=function(){return sm.ht(this.path)&&null===this.collectionGroup&&0===this.filters.length},Kb),_b=(zb.jn=function(t){return new zb(t)},Object.defineProperty(zb.prototype,"orderBy",{get:function(){if(null===this.Vn){var t=this.Ln(),e=this.qn();if(null!==t&&null===e)t.ut()?this.Vn=[Db]:this.Vn=[new Rb(t),Db];else{ig(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field.");for(var n=!(this.Vn=[]),r=0,i=this.On;r<i.length;r++){var o=i[r];this.Vn.push(o),o.field.ut()&&(n=!0)}if(!n){var s=0<this.On.length?this.On[this.On.length-1].dir:kb.ASCENDING;this.Vn.push(s===kb.ASCENDING?Db:Pb)}}}return this.Vn},enumerable:!0,configurable:!0}),zb.prototype.Bn=function(t){ig(null==this.Ln()||!(t instanceof Ib)||!t.Mn()||t.field.isEqual(this.Ln()),"Query must only have one inequality field."),ig(!this.Nn(),"No filtering allowed for document query");var e=this.filters.concat([t]);return new zb(this.path,this.collectionGroup,this.On.slice(),e,this.limit,this.Fn,this.startAt,this.endAt)},zb.prototype.Qn=function(t){ig(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var e=this.On.concat([t]);return new zb(this.path,this.collectionGroup,e,this.filters.slice(),this.limit,this.Fn,this.startAt,this.endAt)},zb.prototype.Gn=function(t){return new zb(this.path,this.collectionGroup,this.On.slice(),this.filters.slice(),t,"F",this.startAt,this.endAt)},zb.prototype.Wn=function(t){return new zb(this.path,this.collectionGroup,this.On.slice(),this.filters.slice(),t,"L",this.startAt,this.endAt)},zb.prototype.zn=function(t){return new zb(this.path,this.collectionGroup,this.On.slice(),this.filters.slice(),this.limit,this.Fn,t,this.endAt)},zb.prototype.Kn=function(t){return new zb(this.path,this.collectionGroup,this.On.slice(),this.filters.slice(),this.limit,this.Fn,this.startAt,t)},zb.prototype.Hn=function(t){return new zb(t,null,this.On.slice(),this.filters.slice(),this.limit,this.Fn,this.startAt,this.endAt)},zb.prototype.Jn=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.On.length||1===this.On.length&&this.On[0].field.ut())},zb.prototype.canonicalId=function(){return this.Yn().canonicalId()+"|lt:"+this.Fn},zb.prototype.toString=function(){return"Query(target="+this.Yn().toString()+"; limitType="+this.Fn+")"},zb.prototype.isEqual=function(t){return this.Yn().isEqual(t.Yn())&&this.Fn===t.Fn},zb.prototype.Xn=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],s=o.compare(t,e);if(0!==s)return s;n=n||o.field.ut()}return ig(n,"orderBy used that doesn't compare on key field"),0},zb.prototype.matches=function(t){return this.$n(t)&&this.Zn(t)&&this.ti(t)&&this.ni(t)},zb.prototype.ii=function(){return!fb(this.limit)&&"F"===this.Fn},zb.prototype.ei=function(){return!fb(this.limit)&&"L"===this.Fn},zb.prototype.qn=function(){return 0<this.On.length?this.On[0].field:null},zb.prototype.Ln=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof Ib&&n.Mn())return n.field}return null},zb.prototype.ri=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof Ib&&0<=t.indexOf(r.op))return r.op}return null},zb.prototype.Nn=function(){return this.Yn().Nn()},zb.prototype.ui=function(){return null!==this.collectionGroup},zb.prototype.Yn=function(){if(!this.Un)if("F"===this.Fn)this.Un=new bb(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e],i=r.dir===kb.DESCENDING?kb.ASCENDING:kb.DESCENDING;t.push(new Rb(r.field,i))}var o=this.endAt?new Ob(this.endAt.position,!this.endAt.before):null,s=this.startAt?new Ob(this.startAt.position,!this.startAt.before):null;this.Un=new bb(this.path,this.collectionGroup,t,this.filters,this.limit,o,s)}return this.Un},zb.prototype.$n=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.ct(this.collectionGroup)&&this.path.$(e):sm.ht(this.path)?this.path.isEqual(e):this.path.Z(e)},zb.prototype.Zn=function(t){for(var e=0,n=this.On;e<n.length;e++){var r=n[e];if(!r.field.ut()&&null===t.field(r.field))return!1}return!0},zb.prototype.ti=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},zb.prototype.ni=function(t){return!(this.startAt&&!this.startAt.si(this.orderBy,t)||this.endAt&&this.endAt.si(this.orderBy,t))},zb.prototype.xn=function(t){ig(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},zb),Eb=(Gb.it=function(t){switch(t){case"<":return Gb.LESS_THAN;case"<=":return Gb.LESS_THAN_OR_EQUAL;case"==":return Gb.EQUAL;case">=":return Gb.GREATER_THAN_OR_EQUAL;case">":return Gb.GREATER_THAN;case"array-contains":return Gb.ARRAY_CONTAINS;case"in":return Gb.IN;case"array-contains-any":return Gb.ARRAY_CONTAINS_ANY;default:return rg("Unknown FieldFilter operator: "+t)}},Gb.prototype.toString=function(){return this.name},Gb.prototype.isEqual=function(t){return this.name===t.name},Gb.LESS_THAN=new Gb("<"),Gb.LESS_THAN_OR_EQUAL=new Gb("<="),Gb.EQUAL=new Gb("=="),Gb.GREATER_THAN=new Gb(">"),Gb.GREATER_THAN_OR_EQUAL=new Gb(">="),Gb.ARRAY_CONTAINS=new Gb("array-contains"),Gb.IN=new Gb("in"),Gb.ARRAY_CONTAINS_ANY=new Gb("array-contains-any"),Gb),Ib=(Es(Hb,wb=function(){}),Hb.create=function(t,e,n){if(t.ut())return e===Eb.IN?(ig(n instanceof Bw,"Comparing on key with IN, but filter value not an ArrayValue"),ig(n.Ht.every(function(t){return t instanceof Uw}),"Comparing on key with IN, but an array value was not a RefValue"),new Sb(t,n)):(ig(n instanceof Uw,"Comparing on key, but filter value not a RefValue"),ig(e!==Eb.ARRAY_CONTAINS&&e!==Eb.ARRAY_CONTAINS_ANY,"'"+e.toString()+"' queries don't make sense on document keys."),new Tb(t,e,n));if(n.isEqual(ew.yn)){if(e!==Eb.EQUAL)throw new yg(vg.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new Hb(t,e,n)}if(n.isEqual(Pw.Tn)){if(e!==Eb.EQUAL)throw new yg(vg.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new Hb(t,e,n)}return e===Eb.ARRAY_CONTAINS?new Cb(t,n):e===Eb.IN?(ig(n instanceof Bw,"IN filter has invalid value: "+n.toString()),new Nb(t,n)):e===Eb.ARRAY_CONTAINS_ANY?(ig(n instanceof Bw,"ARRAY_CONTAINS_ANY filter has invalid value: "+n.toString()),new Ab(t,n)):new Hb(t,e,n)},Hb.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&this.value.gn===e.gn&&this.oi(e.h(this.value))},Hb.prototype.oi=function(t){switch(this.op){case Eb.LESS_THAN:return t<0;case Eb.LESS_THAN_OR_EQUAL:return t<=0;case Eb.EQUAL:return 0===t;case Eb.GREATER_THAN:return 0<t;case Eb.GREATER_THAN_OR_EQUAL:return 0<=t;default:return rg("Unknown FieldFilter operator: "+this.op)}},Hb.prototype.Mn=function(){return 0<=[Eb.LESS_THAN,Eb.LESS_THAN_OR_EQUAL,Eb.GREATER_THAN,Eb.GREATER_THAN_OR_EQUAL].indexOf(this.op)},Hb.prototype.canonicalId=function(){return this.field.nt()+this.op.toString()+this.value.toString()},Hb.prototype.isEqual=function(t){return t instanceof Hb&&this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value)},Hb.prototype.toString=function(){return this.field.nt()+" "+this.op+" "+this.value.value()},Hb),Tb=(Es(Wb,mb=Ib),Wb.prototype.matches=function(t){var e=this.value,n=sm.G(t.key,e.key);return this.oi(n)},Wb),Sb=(Es(Bb,gb=Ib),Bb.prototype.matches=function(e){return this.value.Ht.some(function(t){return e.key.isEqual(t.key)})},Bb),Cb=(Es(Vb,yb=Ib),Vb.prototype.matches=function(t){var e=t.field(this.field);return e instanceof Bw&&e.contains(this.value)},Vb),Nb=(Es(qb,vb=Ib),qb.prototype.matches=function(t){var e=this.value,n=t.field(this.field);return null!==n&&e.contains(n)},qb),Ab=(Es(jb,db=Ib),jb.prototype.matches=function(t){var e=this,n=t.field(this.field);return n instanceof Bw&&n.Ht.some(function(t){return e.value.contains(t)})},jb),kb=(Ub.prototype.toString=function(){return this.name},Ub.ASCENDING=new Ub("asc"),Ub.DESCENDING=new Ub("desc"),Ub),Ob=(Fb.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++)t+=n[e].toString();return t},Fb.prototype.si=function(t,e){ig(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.ut())ig(o instanceof Uw,"Bound has a non-key value where the key path is being used."),n=sm.G(o.key,e.key);else{var s=e.field(i.field);ig(null!==s,"Field should exist since document matched the orderBy already."),n=o.h(s)}if(i.dir===kb.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},Fb.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++){var n=this.position[e],r=t.position[e];if(!n.isEqual(r))return!1}return!0},Fb),Rb=(Mb.prototype.compare=function(t,e){var n=this.hi?Hw.Sn(t,e):Hw.Pn(this.field,t,e);switch(this.dir){case kb.ASCENDING:return n;case kb.DESCENDING:return-1*n;default:return rg("Unknown direction: "+this.dir)}},Mb.prototype.canonicalId=function(){return this.field.nt()+this.dir.toString()},Mb.prototype.toString=function(){return this.field.nt()+" ("+this.dir+")"},Mb.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},Mb),Db=new Rb(om.st(),kb.ASCENDING),Pb=new Rb(om.st(),kb.DESCENDING),xb=(Lb.fromBase64String=function(t){return new Lb(B_.t().atob(t))},Lb.fromUint8Array=function(t){return new Lb(Qb(t))},Lb.prototype.toBase64=function(){return B_.t().btoa(this.ci)},Lb.prototype.toUint8Array=function(){return Yb(this.ci)},Lb.prototype.bn=function(){return 2*this.ci.length},Lb.prototype.isEqual=function(t){return this.ci===t.ci},Lb.ai=new Lb(""),Lb);function Lb(t){this.ci=t}function Mb(t,e){this.field=t,void 0===e&&(e=kb.ASCENDING),this.dir=e,this.hi=t.ut()}function Fb(t,e){this.position=t,this.before=e}function Ub(t){this.name=t}function jb(t,e){var n=db.call(this,t,Eb.ARRAY_CONTAINS_ANY,e)||this;return n.value=e,n}function qb(t,e){var n=vb.call(this,t,Eb.IN,e)||this;return n.value=e,n}function Vb(t,e){return yb.call(this,t,Eb.ARRAY_CONTAINS,e)||this}function Bb(t,e){var n=gb.call(this,t,Eb.IN,e)||this;return n.value=e,n}function Wb(){return null!==mb&&mb.apply(this,arguments)||this}function Hb(t,e,n){var r=wb.call(this)||this;return r.field=t,r.op=e,r.value=n,r}function Gb(t){this.name=t}function zb(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.On=n,this.filters=r,this.limit=i,this.Fn=o,this.startAt=s,this.endAt=a,this.Vn=null,this.Un=null,this.startAt&&this.xn(this.startAt),this.endAt&&this.xn(this.endAt)}function Kb(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.kn=null}function Qb(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}function Yb(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}var Xb,Jb,$b=(e_.prototype.di=function(t){return new e_(this.target,this.targetId,this.fi,t,this.li,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e_.prototype.vi=function(t,e){return new e_(this.target,this.targetId,this.fi,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},e_.prototype.wi=function(t){return new e_(this.target,this.targetId,this.fi,this.sequenceNumber,this.li,t,this.resumeToken)},e_.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.fi===t.fi&&this.sequenceNumber===t.sequenceNumber&&this.li.isEqual(t.li)&&this.lastLimboFreeSnapshotVersion.isEqual(t.lastLimboFreeSnapshotVersion)&&this.resumeToken.isEqual(t.resumeToken)&&this.target.isEqual(t.target)},e_),Zb=(t_.prototype.isEqual=function(t){return t&&t.count===this.count},t_);function t_(t){this.count=t}function e_(t,e,n,r,i,o,s){void 0===i&&(i=em.MIN),void 0===o&&(o=em.MIN),void 0===s&&(s=xb.ai),this.target=t,this.targetId=e,this.fi=n,this.sequenceNumber=r,this.li=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function n_(t){switch(t){case vg.OK:return rg("Treated status OK as error");case vg.CANCELLED:case vg.UNKNOWN:case vg.DEADLINE_EXCEEDED:case vg.RESOURCE_EXHAUSTED:case vg.INTERNAL:case vg.UNAVAILABLE:case vg.UNAUTHENTICATED:return!1;case vg.INVALID_ARGUMENT:case vg.NOT_FOUND:case vg.ALREADY_EXISTS:case vg.PERMISSION_DENIED:case vg.FAILED_PRECONDITION:case vg.ABORTED:case vg.OUT_OF_RANGE:case vg.UNIMPLEMENTED:case vg.DATA_LOSS:return!0;default:return rg("Unknown status code: "+t)}}function r_(t){if(void 0===t)return eg("GRPC error has no .code"),vg.UNKNOWN;switch(t){case Xb.OK:return vg.OK;case Xb.CANCELLED:return vg.CANCELLED;case Xb.UNKNOWN:return vg.UNKNOWN;case Xb.DEADLINE_EXCEEDED:return vg.DEADLINE_EXCEEDED;case Xb.RESOURCE_EXHAUSTED:return vg.RESOURCE_EXHAUSTED;case Xb.INTERNAL:return vg.INTERNAL;case Xb.UNAVAILABLE:return vg.UNAVAILABLE;case Xb.UNAUTHENTICATED:return vg.UNAUTHENTICATED;case Xb.INVALID_ARGUMENT:return vg.INVALID_ARGUMENT;case Xb.NOT_FOUND:return vg.NOT_FOUND;case Xb.ALREADY_EXISTS:return vg.ALREADY_EXISTS;case Xb.PERMISSION_DENIED:return vg.PERMISSION_DENIED;case Xb.FAILED_PRECONDITION:return vg.FAILED_PRECONDITION;case Xb.ABORTED:return vg.ABORTED;case Xb.OUT_OF_RANGE:return vg.OUT_OF_RANGE;case Xb.UNIMPLEMENTED:return vg.UNIMPLEMENTED;case Xb.DATA_LOSS:return vg.DATA_LOSS;default:return rg("Unknown status code: "+t)}}(Jb=Xb=Xb||{})[Jb.OK=0]="OK",Jb[Jb.CANCELLED=1]="CANCELLED",Jb[Jb.UNKNOWN=2]="UNKNOWN",Jb[Jb.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jb[Jb.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jb[Jb.NOT_FOUND=5]="NOT_FOUND",Jb[Jb.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jb[Jb.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jb[Jb.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jb[Jb.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jb[Jb.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jb[Jb.ABORTED=10]="ABORTED",Jb[Jb.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jb[Jb.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jb[Jb.INTERNAL=13]="INTERNAL",Jb[Jb.UNAVAILABLE=14]="UNAVAILABLE",Jb[Jb.DATA_LOSS=15]="DATA_LOSS";var i_=new am(sm.G);function o_(){return i_}function s_(){return o_()}var a_=new am(sm.G);function u_(){return a_}var c_=new am(sm.G);function h_(){return c_}var l_=new Em(sm.G);function f_(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=l_,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var p_=new Em(ag);function d_(){return p_}function v_(t,e,n,r){this.Ui=t,this.removedTargetIds=e,this.key=n,this.xi=r}function y_(t,e){this.targetId=t,this.ji=e}function g_(t,e,n,r){void 0===n&&(n=xb.ai),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}var m_=(R_.gi=function(t){return new R_(t.G)},R_.prototype.has=function(t){return null!=this.mi.get(t)},R_.prototype.get=function(t){return this.mi.get(t)},R_.prototype.first=function(){return this.pi.vt()},R_.prototype.last=function(){return this.pi.wt()},R_.prototype.J=function(){return this.pi.J()},R_.prototype.indexOf=function(t){var e=this.mi.get(t);return e?this.pi.indexOf(e):-1},Object.defineProperty(R_.prototype,"size",{get:function(){return this.pi.size},enumerable:!0,configurable:!0}),R_.prototype.forEach=function(n){this.pi.pt(function(t,e){return n(t),!1})},R_.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.mi.lt(t.key,t),e.pi.lt(t,null))},R_.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.mi.remove(t),this.pi.remove(e)):this},R_.prototype.isEqual=function(t){if(!(t instanceof R_))return!1;if(this.size!==t.size)return!1;for(var e=this.pi.bt(),n=t.pi.bt();e.St();){var r=e.Dt().key,i=n.Dt().key;if(!r.isEqual(i))return!1}return!0},R_.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},R_.prototype.copy=function(t,e){var n=new R_;return n.G=this.G,n.mi=t,n.pi=e,n},R_),w_=(O_.prototype.track=function(t){var e=t.doc.key,n=this.bi.get(e);n?0!==t.type&&3===n.type?this.bi=this.bi.lt(e,t):3===t.type&&1!==n.type?this.bi=this.bi.lt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.bi=this.bi.lt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.bi=this.bi.lt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.bi=this.bi.remove(e):1===t.type&&2===n.type?this.bi=this.bi.lt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.bi=this.bi.lt(e,{type:2,doc:t.doc}):rg("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.bi=this.bi.lt(e,t)},O_.prototype.yi=function(){var n=[];return this.bi.pt(function(t,e){n.push(e)}),n},O_),b_=(k_.Di=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:0,doc:t})}),new k_(t,e,m_.gi(e),i,n,r,!0,!1)},Object.defineProperty(k_.prototype,"hasPendingWrites",{get:function(){return!this.Ii.J()},enumerable:!0,configurable:!0}),k_.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ti===t.Ti&&this.Ii.isEqual(t.Ii)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this._i.isEqual(t._i)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},k_),__=(A_.Pi=function(t,e){var n,r=((n={})[t]=E_.ki(t,e),n);return new A_(em.MIN,r,d_(),o_(),f_())},A_),E_=(N_.ki=function(t,e){return new N_(xb.ai,e,f_(),f_(),f_())},N_),I_=(Object.defineProperty(C_.prototype,"Ni",{get:function(){return this.Mi},enumerable:!0,configurable:!0}),Object.defineProperty(C_.prototype,"resumeToken",{get:function(){return this.Bi},enumerable:!0,configurable:!0}),Object.defineProperty(C_.prototype,"Gi",{get:function(){return 0!==this.Li},enumerable:!0,configurable:!0}),Object.defineProperty(C_.prototype,"Wi",{get:function(){return this.Qi},enumerable:!0,configurable:!0}),C_.prototype.zi=function(t){0<t.bn()&&(this.Qi=!0,this.Bi=t)},C_.prototype.Ki=function(){var n=f_(),r=f_(),i=f_();return this.qi.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:r=r.add(t);break;case 1:i=i.add(t);break;default:rg("Encountered invalid change type: "+e)}}),new E_(this.Bi,this.Mi,n,r,i)},C_.prototype.Hi=function(){this.Qi=!1,this.qi=P_()},C_.prototype.Ji=function(t,e){this.Qi=!0,this.qi=this.qi.lt(t,e)},C_.prototype.Yi=function(t){this.Qi=!0,this.qi=this.qi.remove(t)},C_.prototype.Xi=function(){this.Li+=1},C_.prototype.$i=function(){this.Li-=1},C_.prototype.Zi=function(){this.Qi=!0,this.Mi=!0},C_),T_=(S_.prototype.ue=function(t){for(var e=0,n=t.Ui;e<n.length;e++){var r=n[e];t.xi instanceof Hw?this.se(r,t.xi):t.xi instanceof Gw&&this.oe(r,t.key,t.xi)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.oe(r,t.key,t.xi)},S_.prototype.he=function(n){var r=this;this.ce(n,function(t){var e=r.ae(t);switch(n.state){case 0:r.fe(t)&&e.zi(n.resumeToken);break;case 1:e.$i(),e.Gi||e.Hi(),e.zi(n.resumeToken);break;case 2:e.$i(),e.Gi||r.removeTarget(t),ig(!n.cause,"WatchChangeAggregator does not handle errored targets");break;case 3:r.fe(t)&&(e.Zi(),e.zi(n.resumeToken));break;case 4:r.fe(t)&&(r.le(t),e.zi(n.resumeToken));break;default:rg("Unknown target watch change state: "+n.state)}})},S_.prototype.ce=function(t,e){0<t.targetIds.length?t.targetIds.forEach(e):Og(this.ne,e)},S_.prototype.de=function(t){var e=t.targetId,n=t.ji.count,r=this.ve(e);if(r){var i=r.target;if(i.Nn())if(0===n){var o=new sm(i.path);this.oe(e,o,new Gw(o,em.q()))}else ig(1===n,"Single document existence filter with count: "+n);else this.we(e)!==n&&(this.le(e),this.re=this.re.add(e))}},S_.prototype.me=function(i){var o=this,s={};Og(this.ne,function(t,e){var n=o.ve(t);if(n){if(e.Ni&&n.target.Nn()){var r=new sm(n.target.path);null!==o.ie.get(r)||o.pe(t,r)||o.oe(t,r,new Gw(r,i))}e.Wi&&(s[t]=e.Ki(),e.Hi())}});var r=f_();this.ee.forEach(function(t,e){var n=!0;e.qt(function(t){var e=o.ve(t);return!e||2===e.fi||(n=!1)}),n&&(r=r.add(t))});var t=new __(i,s,this.re,this.ie,r);return this.ie=o_(),this.ee=D_(),this.re=new Em(ag),t},S_.prototype.se=function(t,e){if(this.fe(t)){var n=this.pe(t,e.key)?2:0;this.ae(t).Ji(e.key,n),this.ie=this.ie.lt(e.key,e),this.ee=this.ee.lt(e.key,this.ge(e.key).add(t))}},S_.prototype.oe=function(t,e,n){if(this.fe(t)){var r=this.ae(t);this.pe(t,e)?r.Ji(e,1):r.Yi(e),this.ee=this.ee.lt(e,this.ge(e).delete(t)),n&&(this.ie=this.ie.lt(e,n))}},S_.prototype.removeTarget=function(t){delete this.ne[t]},S_.prototype.we=function(t){var e=this.ae(t).Ki();return this.te.be(t).size+e.Oi.size-e.Vi.size},S_.prototype.Xi=function(t){this.ae(t).Xi()},S_.prototype.ae=function(t){return this.ne[t]||(this.ne[t]=new I_),this.ne[t]},S_.prototype.ge=function(t){var e=this.ee.get(t);return e||(e=new Em(ag),this.ee=this.ee.lt(t,e)),e},S_.prototype.fe=function(t){var e=null!==this.ve(t);return e||tg("WatchChangeAggregator","Detected inactive target",t),e},S_.prototype.ve=function(t){var e=this.ne[t];return e&&e.Gi?null:this.te.ye(t)},S_.prototype.le=function(e){var n=this;ig(!this.ne[e].Gi,"Should only reset active targets"),this.ne[e]=new I_,this.te.be(e).forEach(function(t){n.oe(e,t,null)})},S_.prototype.pe=function(t,e){return this.te.be(t).has(e)},S_);function S_(t){this.te=t,this.ne={},this.ie=o_(),this.ee=D_(),this.re=new Em(ag)}function C_(){this.Li=0,this.qi=P_(),this.Bi=xb.ai,this.Mi=!1,this.Qi=!0}function N_(t,e,n,r,i){this.resumeToken=t,this.Ni=e,this.Oi=n,this.Fi=r,this.Vi=i}function A_(t,e,n,r,i){this.li=t,this.Si=e,this.Ri=n,this.Ci=r,this.Ai=i}function k_(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this._i=n,this.docChanges=r,this.Ii=i,this.fromCache=o,this.Ti=s,this.Ei=a}function O_(){this.bi=new am(sm.G)}function R_(n){this.G=n?function(t,e){return n(t,e)||sm.G(t.key,e.key)}:function(t,e){return sm.G(t.key,e.key)},this.mi=u_(),this.pi=new am(this.G)}function D_(){return new am(sm.G)}function P_(){return new am(sm.G)}var x_,L_,M_=((x_={})[kb.ASCENDING.name]="ASCENDING",x_[kb.DESCENDING.name]="DESCENDING",x_),F_=((L_={})[Eb.LESS_THAN.name]="LESS_THAN",L_[Eb.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",L_[Eb.GREATER_THAN.name]="GREATER_THAN",L_[Eb.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",L_[Eb.EQUAL.name]="EQUAL",L_[Eb.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",L_[Eb.IN.name]="IN",L_[Eb.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",L_),U_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function j_(t,e){ig(!fb(t),e+" is missing")}function q_(t){return"number"==typeof t?t:"string"==typeof t?Number(t):rg("can't parse "+t)}var V_=(H_.prototype._e=function(t){var e=void 0===t.code?vg.UNKNOWN:r_(t.code);return new yg(e,t.message||"")},H_.prototype.Ie=function(t){return this.options.Te||fb(t)?t:{value:t}},H_.prototype.Ee=function(t){var e;return fb(e="object"==typeof t?t.value:t)?null:e},H_.prototype.M=function(t){return this.options.Te?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}},H_.prototype.L=function(t){if("string"==typeof t)return this.De(t);ig(!!t,"Cannot deserialize null or undefined timestamp.");var e=q_(t.seconds||"0"),n=t.nanos||0;return new tm(e,n)},H_.prototype.De=function(t){var e=0,n=U_.exec(t);if(ig(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t),o=Math.floor(i.getTime()/1e3);return new tm(o,e)},H_.prototype.Se=function(t){return this.options.Te?t.toBase64():t.toUint8Array()},H_.prototype.Re=function(t){return this.options.Te?(ig(void 0===t||"string"==typeof t,"value must be undefined or a string when using proto3 Json"),xb.fromBase64String(t||"")):(ig(void 0===t||t instanceof Uint8Array,"value must be undefined or Uint8Array"),xb.fromUint8Array(t||new Uint8Array))},H_.prototype.Ce=function(t){return"string"==typeof t?(ig(this.options.Te,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Y_.fromBase64String(t)):(ig(!this.options.Te,"Expected bytes to be passed in as Uint8Array, but got a string instead."),Y_.fromUint8Array(t))},H_.prototype.toVersion=function(t){return this.M(t.M())},H_.prototype.fromVersion=function(t){return ig(!!t,"Trying to deserialize version that isn't set"),em.L(this.L(t))},H_.prototype.Ae=function(t,e){return this.Pe(t).child("documents").child(e).nt()},H_.prototype.ke=function(t){var e=rm.it(t);return ig(this.Ne(e),"Tried to deserialize invalid key "+e.toString()),e},H_.prototype.Oe=function(t){return this.Ae(this.s,t.path)},H_.prototype.Fe=function(t){var e=this.ke(t);return ig(e.get(1)===this.s.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.s.projectId),ig(!e.get(3)&&!this.s.database||e.get(3)===this.s.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.s.database),new sm(this.Ve(e))},H_.prototype.Ue=function(t){return this.Ae(this.s,t)},H_.prototype.xe=function(t){var e=this.ke(t);return 4===e.length?rm.et:this.Ve(e)},Object.defineProperty(H_.prototype,"je",{get:function(){return new rm(["projects",this.s.projectId,"databases",this.s.database]).nt()},enumerable:!0,configurable:!0}),H_.prototype.Pe=function(t){return new rm(["projects",t.projectId,"databases",t.database])},H_.prototype.Ve=function(t){return ig(4<t.length&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.K(5)},H_.prototype.Ne=function(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)},H_.prototype.Le=function(t){if(t instanceof ew)return{nullValue:"NULL_VALUE"};if(t instanceof nw)return{booleanValue:t.value()};if(t instanceof Dw)return{integerValue:""+t.value()};if(t instanceof Pw){var e=t.value();if(this.options.Te){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof xw?{stringValue:t.value()}:t instanceof qw?{mapValue:this.qe(t)}:t instanceof Bw?{arrayValue:this.Be(t)}:t instanceof Lw?{timestampValue:this.M(t.Ht)}:t instanceof jw?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof Fw?{bytesValue:this.Se(t.value())}:t instanceof Uw?{referenceValue:this.Ae(t.s,t.key.path)}:rg("Unknown FieldValue "+JSON.stringify(t))},H_.prototype.Me=function(t){var e=this;if("nullValue"in t)return ew.yn;if("booleanValue"in t)return nw.of(t.booleanValue);if("integerValue"in t)return new Dw(q_(t.integerValue));if("doubleValue"in t){if(this.options.Te){if("NaN"===t.doubleValue)return Pw.Tn;if("Infinity"===t.doubleValue)return Pw.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return Pw.NEGATIVE_INFINITY}return new Pw(t.doubleValue)}if("stringValue"in t)return new xw(t.stringValue);if("mapValue"in t)return this.Qe(t.mapValue.fields||{});if("arrayValue"in t){j_(t.arrayValue,"arrayValue");var n=t.arrayValue.values||[];return new Bw(n.map(function(t){return e.Me(t)}))}if("timestampValue"in t)return j_(t.timestampValue,"timestampValue"),new Lw(this.L(t.timestampValue));if("geoPointValue"in t){j_(t.geoPointValue,"geoPointValue");var r=t.geoPointValue.latitude||0,i=t.geoPointValue.longitude||0;return new jw(new Zg(r,i))}if("bytesValue"in t){j_(t.bytesValue,"bytesValue");var o=this.Ce(t.bytesValue);return new Fw(o)}if("referenceValue"in t){j_(t.referenceValue,"referenceValue");var s=this.ke(t.referenceValue),a=new pg(s.get(1),s.get(3)),u=new sm(this.Ve(s));return new Uw(a,u)}return rg("Unknown Value proto "+JSON.stringify(t))},H_.prototype.Ge=function(t,e){return{name:this.Oe(t),fields:this.We(e)}},H_.prototype.ze=function(t){return ig(!t.en,"Can't serialize documents with mutations."),{name:this.Oe(t.key),fields:this.We(t.data()),updateTime:this.M(t.version.M())}},H_.prototype.Ke=function(t,e){var n=this,r=this.Fe(t.name),i=this.fromVersion(t.updateTime);return new Hw(r,i,{hasCommittedMutations:!!e},void 0,t,function(t){return n.Me(t)})},H_.prototype.We=function(t){var n=this,r={};return t.forEach(function(t,e){r[t]=n.Le(e)}),r},H_.prototype.Qe=function(t){var n=this,e=t,r=qw.vn();return Rg(e,function(t,e){r.set(new om([t]),n.Me(e))}),r.cn()},H_.prototype.qe=function(t){return{fields:this.We(t)}},H_.prototype.Be=function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.Le(t))}),{values:n}},H_.prototype.He=function(t){var e=this;ig(!!t.found,"Tried to deserialize a found document from a missing document."),j_(t.found.name,"doc.found.name"),j_(t.found.updateTime,"doc.found.updateTime");var n=this.Fe(t.found.name),r=this.fromVersion(t.found.updateTime);return new Hw(n,r,{},void 0,t.found,function(t){return e.Me(t)})},H_.prototype.Je=function(t){ig(!!t.missing,"Tried to deserialize a missing document from a found document."),ig(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.Fe(t.missing),n=this.fromVersion(t.readTime);return new Gw(e,n)},H_.prototype.Ye=function(t){return"found"in t?this.He(t):"missing"in t?this.Je(t):rg("invalid batch get response: "+JSON.stringify(t))},H_.prototype.Xe=function(t){switch(t){case 1:return"ADD";case 3:return"CURRENT";case 0:return"NO_CHANGE";case 2:return"REMOVE";case 4:return"RESET";default:return rg("Unknown WatchTargetChangeState: "+t)}},H_.prototype.$e=function(t){if(t instanceof y_)return{filter:{count:t.ji.count,targetId:t.targetId}};if(t instanceof v_){if(t.xi instanceof Hw){var e=t.xi;return{documentChange:{document:{name:this.Oe(e.key),fields:this.We(e.data()),updateTime:this.toVersion(e.version)},targetIds:t.Ui,removedTargetIds:t.removedTargetIds}}}if(t.xi instanceof Gw)return e=t.xi,{documentDelete:{document:this.Oe(e.key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}};if(null===t.xi)return{documentRemove:{document:this.Oe(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof g_){var n=void 0;return t.cause&&(n={code:function(t){if(void 0===t)return Xb.OK;switch(t){case vg.OK:return Xb.OK;case vg.CANCELLED:return Xb.CANCELLED;case vg.UNKNOWN:return Xb.UNKNOWN;case vg.DEADLINE_EXCEEDED:return Xb.DEADLINE_EXCEEDED;case vg.RESOURCE_EXHAUSTED:return Xb.RESOURCE_EXHAUSTED;case vg.INTERNAL:return Xb.INTERNAL;case vg.UNAVAILABLE:return Xb.UNAVAILABLE;case vg.UNAUTHENTICATED:return Xb.UNAUTHENTICATED;case vg.INVALID_ARGUMENT:return Xb.INVALID_ARGUMENT;case vg.NOT_FOUND:return Xb.NOT_FOUND;case vg.ALREADY_EXISTS:return Xb.ALREADY_EXISTS;case vg.PERMISSION_DENIED:return Xb.PERMISSION_DENIED;case vg.FAILED_PRECONDITION:return Xb.FAILED_PRECONDITION;case vg.ABORTED:return Xb.ABORTED;case vg.OUT_OF_RANGE:return Xb.OUT_OF_RANGE;case vg.UNIMPLEMENTED:return Xb.UNIMPLEMENTED;case vg.DATA_LOSS:return Xb.DATA_LOSS;default:return rg("Unknown status code: "+t)}}(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.Xe(t.state),targetIds:t.targetIds,resumeToken:this.Se(t.resumeToken),cause:n}}}return rg("Unrecognized watch change: "+JSON.stringify(t))},H_.prototype.Ze=function(t){var e,n=this;if("targetChange"in t){j_(t.targetChange,"targetChange");var r=this.tr(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=this.Re(t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&this._e(s);e=new g_(r,i,o,a||null)}else if("documentChange"in t){j_(t.documentChange,"documentChange");var u=t.documentChange;j_(u.document,"documentChange.name"),j_(u.document.name,"documentChange.document.name"),j_(u.document.updateTime,"documentChange.document.updateTime");var c=this.Fe(u.document.name),h=this.fromVersion(u.document.updateTime),l=new Hw(c,h,{},void 0,u.document,function(t){return n.Me(t)}),f=u.targetIds||[],p=u.removedTargetIds||[];e=new v_(f,p,l.key,l)}else if("documentDelete"in t){j_(t.documentDelete,"documentDelete");var d=t.documentDelete;j_(d.document,"documentDelete.document"),c=this.Fe(d.document),h=d.readTime?this.fromVersion(d.readTime):em.q(),l=new Gw(c,h),p=d.removedTargetIds||[],e=new v_([],p,l.key,l)}else if("documentRemove"in t){j_(t.documentRemove,"documentRemove");var v=t.documentRemove;j_(v.document,"documentRemove"),c=this.Fe(v.document),p=v.removedTargetIds||[],e=new v_([],p,c,null)}else{if(!("filter"in t))return rg("Unknown change type "+JSON.stringify(t));j_(t.filter,"filter");var y=t.filter;j_(y.targetId,"filter.targetId");var g=y.count||0,m=new Zb(g),w=y.targetId;e=new y_(w,m)}return e},H_.prototype.tr=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:rg("Got unexpected TargetChange.state: "+t)},H_.prototype.nr=function(t){if(!("targetChange"in t))return em.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?em.MIN:e.readTime?this.fromVersion(e.readTime):em.MIN},H_.prototype.ir=function(t){var e,n=this;if(t instanceof Qm)e={update:this.Ge(t.key,t.value)};else if(t instanceof Jm)e={delete:this.Oe(t.key)};else if(t instanceof Ym)e={update:this.Ge(t.key,t.data),updateMask:this.er(t.un)};else if(t instanceof Xm)e={transform:{document:this.Oe(t.key),fieldTransforms:t.fieldTransforms.map(function(t){return n.rr(t)})}};else{if(!(t instanceof $m))return rg("Unknown mutation type "+t.type);e={verify:this.Oe(t.key)}}return t.in.$t||(e.currentDocument=this.ur(t.in)),e},H_.prototype.sr=function(t){var e=this,n=t.currentDocument?this.or(t.currentDocument):zm.NONE;if(t.update){j_(t.update.name,"name");var r=this.Fe(t.update.name),i=this.Qe(t.update.fields||{});if(t.updateMask){var o=this.hr(t.updateMask);return new Ym(r,i,o,n)}return new Qm(r,i,n)}if(t.delete)return r=this.Fe(t.delete),new Jm(r,n);if(t.transform){r=this.Fe(t.transform.document);var s=t.transform.fieldTransforms.map(function(t){return e.cr(t)});return ig(!0===n.exists,'Transforms only support precondition "exists == true"'),new Xm(r,s)}return t.verify?(r=this.Fe(t.verify),new $m(r,n)):rg("unknown mutation proto: "+JSON.stringify(t))},H_.prototype.ur=function(t){return ig(!t.$t,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:rg("Unknown precondition")},H_.prototype.or=function(t){return void 0!==t.updateTime?zm.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?zm.exists(t.exists):zm.NONE},H_.prototype.ar=function(t,e){var n=this,r=t.updateTime?this.fromVersion(t.updateTime):this.fromVersion(e);r.isEqual(em.MIN)&&(r=this.fromVersion(e));var i=null;return t.transformResults&&0<t.transformResults.length&&(i=t.transformResults.map(function(t){return n.Me(t)})),new Lm(r,i)},H_.prototype.lr=function(t,e){var n=this;return t&&0<t.length?(ig(void 0!==e,"Received a write result without a commit time"),t.map(function(t){return n.ar(t,e)})):[]},H_.prototype.rr=function(t){var e=this,n=t.transform;if(n instanceof Tm)return{fieldPath:t.field.nt(),setToServerValue:"REQUEST_TIME"};if(n instanceof Sm)return{fieldPath:t.field.nt(),appendMissingElements:{values:n.elements.map(function(t){return e.Le(t)})}};if(n instanceof Cm)return{fieldPath:t.field.nt(),removeAllFromArray:{values:n.elements.map(function(t){return e.Le(t)})}};if(n instanceof Nm)return{fieldPath:t.field.nt(),increment:this.Le(n.Kt)};throw rg("Unknown transform: "+t.transform)},H_.prototype.cr=function(t){var e=this,n=null;if("setToServerValue"in t)ig("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),n=Tm.instance;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Sm(r.map(function(t){return e.Me(t)}))}else if("removeAllFromArray"in t)r=t.removeAllFromArray.values||[],n=new Cm(r.map(function(t){return e.Me(t)}));else if("increment"in t){var i=this.Me(t.increment);ig(i instanceof rw,"NUMERIC_ADD transform requires a NumberValue"),n=new Nm(i)}else rg("Unknown transform proto: "+JSON.stringify(t));var o=om.ot(t.fieldPath);return new Gm(o,n)},H_.prototype.dr=function(t){return{documents:[this.Ue(t.path)]}},H_.prototype.vr=function(t){var e=t.documents.length;ig(1===e,"DocumentsTarget contained other than 1 document: "+e);var n=t.documents[0];return _b.jn(this.xe(n)).Yn()},H_.prototype.wr=function(t){var e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(ig(n.length%2==0,"Collection Group queries should be within a document path or root."),e.parent=this.Ue(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(ig(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.Ue(n.H()),e.structuredQuery.from=[{collectionId:n.X()}]);var r=this.mr(t.filters);r&&(e.structuredQuery.where=r);var i=this.pr(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.Ie(t.limit);return null!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.gr(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.gr(t.endAt)),e},H_.prototype.br=function(t){var e=this.xe(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(0<r){ig(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=this.yr(n.where));var a=[];n.orderBy&&(a=this._r(n.orderBy));var u=null;n.limit&&(u=this.Ee(n.limit));var c=null;n.startAt&&(c=this.Ir(n.startAt));var h=null;return n.endAt&&(h=this.Ir(n.endAt)),new _b(e,i,a,s,u,"F",c,h).Yn()},H_.prototype.Tr=function(t){var e=this.Er(t.fi);return null==e?null:{"goog-listen-tags":e}},H_.prototype.Er=function(t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return rg("Unrecognized query purpose: "+t)}},H_.prototype.Yn=function(t){var e,n=t.target;return(e=n.Nn()?{documents:this.dr(n)}:{query:this.wr(n)}).targetId=t.targetId,0<t.resumeToken.bn()&&(e.resumeToken=this.Se(t.resumeToken)),e},H_.prototype.mr=function(t){var e=this;if(0!==t.length){var n=t.map(function(t){return t instanceof Ib?e.Dr(t):rg("Unrecognized filter: "+JSON.stringify(t))});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},H_.prototype.yr=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.Sr(t)]:void 0!==t.fieldFilter?[this.Rr(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e.yr(t)}).reduce(function(t,e){return t.concat(e)}):rg("Unknown filter: "+JSON.stringify(t)):[]},H_.prototype.pr=function(t){var e=this;if(0!==t.length)return t.map(function(t){return e.Cr(t)})},H_.prototype._r=function(t){var e=this;return t.map(function(t){return e.Ar(t)})},H_.prototype.gr=function(t){var e=this;return{before:t.before,values:t.position.map(function(t){return e.Le(t)})}},H_.prototype.Ir=function(t){var e=this,n=!!t.before,r=t.values.map(function(t){return e.Me(t)});return new Ob(r,n)},H_.prototype.Pr=function(t){return M_[t.name]},H_.prototype.kr=function(t){switch(t){case"ASCENDING":return kb.ASCENDING;case"DESCENDING":return kb.DESCENDING;default:return}},H_.prototype.Nr=function(t){return F_[t.name]},H_.prototype.Or=function(t){switch(t){case"EQUAL":return Eb.EQUAL;case"GREATER_THAN":return Eb.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Eb.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Eb.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Eb.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return Eb.ARRAY_CONTAINS;case"IN":return Eb.IN;case"ARRAY_CONTAINS_ANY":return Eb.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return rg("Unspecified operator");default:return rg("Unknown operator")}},H_.prototype.Fr=function(t){return{fieldPath:t.nt()}},H_.prototype.Vr=function(t){return om.ot(t.fieldPath)},H_.prototype.Cr=function(t){return{field:this.Fr(t.field),direction:this.Pr(t.dir)}},H_.prototype.Ar=function(t){return new Rb(this.Vr(t.field),this.kr(t.direction))},H_.prototype.Rr=function(t){return Ib.create(this.Vr(t.fieldFilter.field),this.Or(t.fieldFilter.op),this.Me(t.fieldFilter.value))},H_.prototype.Dr=function(t){if(t.op===Eb.EQUAL){if(t.value.isEqual(Pw.Tn))return{unaryFilter:{field:this.Fr(t.field),op:"IS_NAN"}};if(t.value.isEqual(ew.yn))return{unaryFilter:{field:this.Fr(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.Fr(t.field),op:this.Nr(t.op),value:this.Le(t.value)}}},H_.prototype.Sr=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.Vr(t.unaryFilter.field);return Ib.create(e,Eb.EQUAL,Pw.Tn);case"IS_NULL":var n=this.Vr(t.unaryFilter.field);return Ib.create(n,Eb.EQUAL,ew.yn);case"OPERATOR_UNSPECIFIED":return rg("Unspecified filter");default:return rg("Unknown filter")}},H_.prototype.er=function(t){var e=[];return t.fields.forEach(function(t){return e.push(t.nt())}),{fieldPaths:e}},H_.prototype.hr=function(t){var e=(t.fieldPaths||[]).map(function(t){return om.ot(t)});return Hm.Yt(e)},H_),B_=(W_.Ur=function(t){W_.platform&&rg("Platform already defined"),W_.platform=t},W_.t=function(){return W_.platform||rg("Platform not set"),W_.platform},W_);function W_(){}function H_(t,e){this.s=t,this.options=e}function G_(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new yg(vg.INVALID_ARGUMENT,t)}return n.prototype=t.prototype,Object.assign(n,t),n}function z_(){if("undefined"==typeof Uint8Array)throw new yg(vg.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function K_(){if(!B_.t().xr)throw new yg(vg.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}function Q_(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}var Y_=(rE.fromBase64String=function(t){xg("Blob.fromBase64String",arguments,1),Fg("Blob.fromBase64String","string",1,t),K_();try{return new rE(B_.t().atob(t))}catch(t){throw new yg(vg.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},rE.fromUint8Array=function(t){if(xg("Blob.fromUint8Array",arguments,1),z_(),!(t instanceof Uint8Array))throw Kg("Blob.fromUint8Array","Uint8Array",1,t);return new rE(Qb(t))},rE.prototype.toBase64=function(){return xg("Blob.toBase64",arguments,0),K_(),B_.t().btoa(this.ci)},rE.prototype.toUint8Array=function(){return xg("Blob.toUint8Array",arguments,0),z_(),Yb(this.ci)},rE.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},rE.prototype.isEqual=function(t){return this.ci===t.ci},rE.prototype.Dn=function(){return 2*this.ci.length},rE.prototype.U=function(t){return ag(this.ci,t.ci)},rE),X_=G_(Y_,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),J_=(nE.prototype.Lr=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},nE.prototype.next=function(){var t=++this.previousValue;return this.qr&&this.qr(t),t},nE.Mr=-1,nE),$_=(eE.Hr=function(t,e,n,r,i){var o=new eE(t,e,Date.now()+n,r,i);return o.start(n),o},eE.prototype.start=function(t){var e=this;this.Jr=setTimeout(function(){return e.Yr()},t)},eE.prototype.Xr=function(){return this.Yr()},eE.prototype.cancel=function(t){null!==this.Jr&&(this.clearTimeout(),this.Kr.reject(new yg(vg.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},eE.prototype.Yr=function(){var e=this;this.Qr.$r(function(){return null!==e.Jr?(e.clearTimeout(),e.op().then(function(t){return e.Kr.resolve(t)})):Promise.resolve()})},eE.prototype.clearTimeout=function(){null!==this.Jr&&(this.zr(this),clearTimeout(this.Jr),this.Jr=null)},eE),Z_=(Object.defineProperty(tE.prototype,"uu",{get:function(){return this.tu},enumerable:!0,configurable:!0}),tE.prototype.$r=function(t){this.enqueue(t)},tE.prototype.su=function(t){this.ou(),this.hu(t)},tE.prototype.cu=function(t){return this.ou(),this.hu(t)},tE.prototype.au=function(e){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return this.ou(),this.tu?[3,2]:(this.tu=!0,[4,this.cu(e)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},tE.prototype.enqueue=function(t){return this.ou(),this.tu?new Promise(function(t){}):this.hu(t)},tE.prototype.hu=function(t){var n=this,e=this.Zr.then(function(){return n.eu=!0,t().catch(function(t){n.iu=t,n.eu=!1;var e=t.stack||t.message||"";throw eg("INTERNAL UNHANDLED ERROR: ",e),e.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw t},0),t}).then(function(t){return n.eu=!1,t})});return this.Zr=e},tE.prototype.fu=function(t,e,n){var r=this;this.ou(),ig(0<=e,"Attempted to schedule an operation with a negative delay of "+e),-1<this.ru.indexOf(t)&&(e=0);var i=$_.Hr(this,t,e,n,function(t){return r.lu(t)});return this.nu.push(i),i},tE.prototype.ou=function(){this.iu&&rg("AsyncQueue is already failed: "+(this.iu.stack||this.iu.message))},tE.prototype.du=function(){ig(this.eu,"verifyOpInProgress() called when no op in progress on this queue.")},tE.prototype.vu=function(){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return[4,e=this.Zr];case 1:t.sent(),t.label=2;case 2:if(e!==this.Zr)return[3,0];t.label=3;case 3:return[2]}})})},tE.prototype.wu=function(t){for(var e=0,n=this.nu;e<n.length;e++)if(n[e].Gr===t)return!0;return!1},tE.prototype.mu=function(r){var i=this;return this.vu().then(function(){ig("all"===r||i.wu(r),"Attempted to drain to missing operation "+r),i.nu.sort(function(t,e){return t.Wr-e.Wr});for(var t=0,e=i.nu;t<e.length;t++){var n=e[t];if(n.Xr(),"all"!==r&&n.Gr===r)break}return i.vu()})},tE.prototype.pu=function(t){this.ru.push(t)},tE.prototype.lu=function(t){var e=this.nu.indexOf(t);ig(0<=e,"Delayed operation not found."),this.nu.splice(e,1)},tE);function tE(){this.Zr=Promise.resolve(),this.tu=!1,this.nu=[],this.iu=null,this.eu=!1,this.ru=[]}function eE(t,e,n,r,i){this.Qr=t,this.Gr=e,this.Wr=n,this.op=r,this.zr=i,this.Kr=new Q_,this.then=this.Kr.promise.then.bind(this.Kr.promise),this.catch=this.Kr.promise.catch.bind(this.Kr.promise),this.Kr.promise.catch(function(t){})}function nE(t,e){var n=this;this.previousValue=t,e&&(e.jr=function(t){return n.Lr(t)},this.qr=function(t){return e.Br(t)})}function rE(t){K_(),this.ci=t}function iE(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=sE(e)),e=oE(t.get(n),e);return sE(e)}function oE(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function sE(t){return t+""}function aE(t){var e=t.length;if(ig(2<=e,"Invalid path "+t),2===e)return ig(""===t.charAt(0)&&""===t.charAt(1),"Non-empty path "+t+" had length 2"),rm.et;for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||n<s)&&rg('Invalid encoded resource path: "'+t+'"'),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:rg('Invalid encoded resource path: "'+t+'"')}o=s+2}return new rm(r)}var uE=(DE.prototype.Wt=function(t,e,n){e&&ig(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.gu;ig(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(t)){var s=r[i];e=o.Wt(e,s)}}return e},DE.prototype.Gt=function(t,e){e&&ig(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(a=r[n]).key.isEqual(t)&&(e=a.Gt(e,e,this.En));for(var i=e,o=0,s=this.mutations;o<s.length;o++){var a;(a=s[o]).key.isEqual(t)&&(e=a.Gt(e,i,this.En))}return e},DE.prototype.bu=function(n){var r=this,i=n;return this.mutations.forEach(function(t){var e=r.Gt(t.key,n.get(t.key));e&&(i=i.lt(t.key,e))}),i},DE.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},f_())},DE.prototype.isEqual=function(t){return this.batchId===t.batchId&&ug(this.mutations,t.mutations)&&ug(this.baseMutations,t.baseMutations)},DE),cE=(RE.from=function(t,e,n,r){ig(t.mutations.length===n.length,"Mutations sent "+t.mutations.length+" must equal results received "+n.length);for(var i=h_(),o=t.mutations,s=0;s<o.length;s++)i=i.lt(o[s].key,n[s].version);return new RE(t,e,n,r,i)},RE),hE=(OE.prototype.J=function(){return this.Iu.J()},OE.prototype.Du=function(t,e){var n=new lE(t,e);this.Iu=this.Iu.add(n),this.Tu=this.Tu.add(n)},OE.prototype.Su=function(t,e){var n=this;t.forEach(function(t){return n.Du(t,e)})},OE.prototype.Ru=function(t,e){this.Cu(new lE(t,e))},OE.prototype.Au=function(t,e){var n=this;t.forEach(function(t){return n.Ru(t,e)})},OE.prototype.Pu=function(t){var e=this,n=sm.EMPTY,r=new lE(n,t),i=new lE(n,t+1),o=[];return this.Tu.Lt([r,i],function(t){e.Cu(t),o.push(t.key)}),o},OE.prototype.ku=function(){var e=this;this.Iu.forEach(function(t){return e.Cu(t)})},OE.prototype.Cu=function(t){this.Iu=this.Iu.delete(t),this.Tu=this.Tu.delete(t)},OE.prototype.Nu=function(t){var e=sm.EMPTY,n=new lE(e,t),r=new lE(e,t+1),i=f_();return this.Tu.Lt([n,r],function(t){i=i.add(t.key)}),i},OE.prototype.Ou=function(t){var e=new lE(t,0),n=this.Iu.Bt(e);return null!==n&&t.isEqual(n.key)},OE),lE=(kE.Sn=function(t,e){return sm.G(t.key,e.key)||ag(t.Fu,e.Fu)},kE.Eu=function(t,e){return ag(t.Fu,e.Fu)||sm.G(t.key,e.key)},kE),fE=(AE.prototype.get=function(t){var e=this.Vu(t),n=this.Uu[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(s.isEqual(t))return a}},AE.prototype.has=function(t){return void 0!==this.get(t)},AE.prototype.set=function(t,e){var n=this.Vu(t),r=this.Uu[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.Uu[n]=[[t,e]]},AE.prototype.delete=function(t){var e=this.Vu(t),n=this.Uu[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.Uu[e]:n.splice(r,1),!0;return!1},AE.prototype.forEach=function(a){Rg(this.Uu,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],s=i[1];a(o,s)}})},AE.prototype.J=function(){return Dg(this.Uu)},AE),pE=(NE.prototype.catch=function(t){return this.next(void 0,t)},NE.prototype.next=function(r,i){var o=this;return this.qu&&rg("Called next() or catch() twice for PersistencePromise"),this.qu=!0,this.Lu?this.error?this.Bu(i,this.error):this.Mu(r,this.result):new NE(function(e,n){o.xu=function(t){o.Mu(r,t).next(e,n)},o.ju=function(t){o.Bu(i,t).next(e,n)}})},NE.prototype.Qu=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},NE.prototype.Gu=function(t){try{var e=t();return e instanceof NE?e:NE.resolve(e)}catch(t){return NE.reject(t)}},NE.prototype.Mu=function(t,e){return t?this.Gu(function(){return t(e)}):NE.resolve(e)},NE.prototype.Bu=function(t,e){return t?this.Gu(function(){return t(e)}):NE.reject(e)},NE.resolve=function(n){return new NE(function(t,e){t(n)})},NE.reject=function(n){return new NE(function(t,e){e(n)})},NE.Wu=function(t){return new NE(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},NE.zu=function(t){for(var n=NE.resolve(!1),e=function(e){n=n.next(function(t){return t?NE.resolve(t):e()})},r=0,i=t;r<i.length;r++)e(i[r]);return n},NE.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.Wu(i)},NE),dE=(Object.defineProperty(CE.prototype,"readTime",{get:function(){return ig(void 0!==this.Ju,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this.Ju},set:function(t){ig(void 0===this.Ju||this.Ju.isEqual(t),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this.Ju=t},enumerable:!0,configurable:!0}),CE.prototype.Yu=function(t,e){this.Xu(),this.readTime=e,this.Ku.set(t.key,t)},CE.prototype.$u=function(t,e){this.Xu(),e&&(this.readTime=e),this.Ku.set(t,null)},CE.prototype.Zu=function(t,e){this.Xu();var n=this.Ku.get(e);return void 0!==n?pE.resolve(n):this.ts(t,e)},CE.prototype.getEntries=function(t,e){return this.ns(t,e)},CE.prototype.apply=function(t){return this.Xu(),this.Hu=!0,this.es(t)},CE.prototype.Xu=function(){ig(!this.Hu,"Changes have already been applied.")},CE),vE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",yE=(SE.prototype.us=function(t){this.rs.push(t)},SE.prototype.ss=function(){this.rs.forEach(function(t){return t()})},SE),gE=(TE.hs=function(o,t,s){return ig(TE.cs(),"IndexedDB not supported in current environment."),tg("SimpleDb","Opening database:",o),new pE(function(n,r){var i=window.indexedDB.open(o,t);i.onsuccess=function(t){var e=t.target.result;n(new TE(e))},i.onblocked=function(){r(new yg(vg.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var e=t.target.error;"VersionError"===e.name?r(new yg(vg.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(e)},i.onupgradeneeded=function(t){tg("SimpleDb",'Database "'+o+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;s.createOrUpgrade(e,i.transaction,t.oldVersion,TI).next(function(){tg("SimpleDb","Database upgrade to version "+TI+" complete")})}}).Qu()},TE.delete=function(t){return tg("SimpleDb","Removing database:",t),PE(window.indexedDB.deleteDatabase(t)).Qu()},TE.cs=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(TE.as())return!0;if(void 0===window.navigator)return!1;var t=qs(),e=TE.os(t),n=0<e&&e<10,r=TE.fs(t),i=0<r&&r<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||n||i)},TE.as=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.ls)},TE.ds=function(t,e){return t.store(e)},TE.os=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},TE.fs=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},TE.prototype.vs=function(e){this.db.onversionchange=function(t){return e(t)}},TE.prototype.runTransaction=function(r,c,h){return Ts(this,void 0,void 0,function(){var o,s,a,e,u,n;return Ss(this,function(t){switch(t.label){case 0:o=r.startsWith("readonly"),s=r.endsWith("idempotent"),a=0,e=function(){var e,n,r,i;return Ss(this,function(t){switch(t.label){case 0:++a,e=wE.open(u.db,o?"readonly":"readwrite",c),t.label=1;case 1:return t.trys.push([1,3,,4]),(n=h(e).catch(function(t){return e.abort(t),pE.reject(t)}).Qu()).catch(function(){}),[4,e.ws];case 2:return t.sent(),[2,{value:n}];case 3:return r=t.sent(),i=s&&"FirebaseError"!==r.name&&a<3,tg("SimpleDb","Transaction failed with error: %s. Retrying: %s.",r.message,i),i?[3,4]:[2,{value:Promise.reject(r)}];case 4:return[2]}})},u=this,t.label=1;case 1:return[5,e()];case 2:return"object"==typeof(n=t.sent())?[2,n.value]:[3,1];case 3:return[2]}})})},TE.prototype.close=function(){this.db.close()},TE),mE=(Object.defineProperty(IE.prototype,"Lu",{get:function(){return this.ps},enumerable:!0,configurable:!0}),Object.defineProperty(IE.prototype,"bs",{get:function(){return this.gs},enumerable:!0,configurable:!0}),Object.defineProperty(IE.prototype,"cursor",{set:function(t){this.ms=t},enumerable:!0,configurable:!0}),IE.prototype.done=function(){this.ps=!0},IE.prototype.ys=function(t){this.gs=t},IE.prototype.delete=function(){return PE(this.ms.delete())},IE),wE=(EE.open=function(t,e,n){return new EE(t.transaction(n,e))},Object.defineProperty(EE.prototype,"ws",{get:function(){return this._s.promise},enumerable:!0,configurable:!0}),EE.prototype.abort=function(t){t&&this._s.reject(t),this.aborted||(tg("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},EE.prototype.store=function(t){var e=this.transaction.objectStore(t);return ig(!!e,"Object store not part of transaction: "+t),new bE(e)},EE),bE=(_E.prototype.put=function(t,e){return PE(void 0!==e?(tg("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(tg("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t)))},_E.prototype.add=function(t){return tg("SimpleDb","ADD",this.store.name,t,t),PE(this.store.add(t))},_E.prototype.get=function(e){var n=this;return PE(this.store.get(e)).next(function(t){return void 0===t&&(t=null),tg("SimpleDb","GET",n.store.name,e,t),t})},_E.prototype.delete=function(t){return tg("SimpleDb","DELETE",this.store.name,t),PE(this.store.delete(t))},_E.prototype.count=function(){return tg("SimpleDb","COUNT",this.store.name),PE(this.store.count())},_E.prototype.Is=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Ts(n,function(t,e){r.push(e)}).next(function(){return r})},_E.prototype.Es=function(t,e){tg("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ds=!1;var r=this.cursor(n);return this.Ts(r,function(t,e,n){return n.delete()})},_E.prototype.Ss=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Ts(r,e)},_E.prototype.Rs=function(i){var t=this.cursor({});return new pE(function(n,r){t.onerror=function(t){var e=LE(t.target.error);r(e)},t.onsuccess=function(t){var e=t.target.result;e?i(e.primaryKey,e.value).next(function(t){t?e.continue():n()}):n()}})},_E.prototype.Ts=function(t,s){var a=[];return new pE(function(o,e){t.onerror=function(t){e(t.target.error)},t.onsuccess=function(t){var e=t.target.result;if(e){var n=new mE(e),r=s(e.primaryKey,e.value,n);if(r instanceof pE){var i=r.catch(function(t){return n.done(),pE.reject(t)});a.push(i)}n.Lu?o():null===n.bs?e.continue():e.continue(n.bs)}else o()}}).next(function(){return pE.Wu(a)})},_E.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(ig(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},_E.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ds?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},_E);function _E(t){this.store=t}function EE(t){var n=this;this.transaction=t,this.aborted=!1,this._s=new Q_,this.transaction.oncomplete=function(){n._s.resolve()},this.transaction.onabort=function(){t.error?n._s.reject(t.error):n._s.resolve()},this.transaction.onerror=function(t){var e=LE(t.target.error);n._s.reject(e)}}function IE(t){this.ms=t,this.ps=!1,this.gs=null}function TE(t){this.db=t,12.2===TE.os(qs())&&eg("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function SE(){this.rs=[]}function CE(){this.Ku=new fE(function(t){return t.toString()}),this.Hu=!1}function NE(t){var e=this;this.xu=null,this.ju=null,this.result=void 0,this.error=void 0,this.Lu=!1,this.qu=!1,t(function(t){e.Lu=!0,e.result=t,e.xu&&e.xu(t)},function(t){e.Lu=!0,e.error=t,e.ju&&e.ju(t)})}function AE(t){this.Vu=t,this.Uu={}}function kE(t,e){this.key=t,this.Fu=e}function OE(){this.Iu=new Em(lE.Sn),this.Tu=new Em(lE.Eu)}function RE(t,e,n,r,i){this.batch=t,this.yu=e,this.gu=n,this.streamToken=r,this._u=i}function DE(t,e,n,r){this.batchId=t,this.En=e,this.baseMutations=n,ig(0<(this.mutations=r).length,"Cannot create an empty mutation batch")}function PE(t){return new pE(function(n,r){t.onsuccess=function(t){var e=t.target.result;n(e)},t.onerror=function(t){var e=LE(t.target.error);r(e)}})}var xE=!1;function LE(t){var e=gE.os(qs());if(12.2<=e&&e<13){var n="An internal error was encountered in the Indexed Database server";if(0<=t.message.indexOf(n)){var r=new yg("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return xE||(xE=!0,setTimeout(function(){throw r},0)),r}}return t}var ME=(FE.ks=function(t,e,n,r){return ig(""!==t.uid,"UserID must not be an empty string."),new FE(t.l()?t.uid:"",e,n,r)},FE.prototype.Ns=function(t){var r=!0,e=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qE(t).Ss({index:PI.userMutationsIndex,range:e},function(t,e,n){r=!1,n.done()}).next(function(){return r})},FE.prototype.Os=function(e,t,n){return this.Fs(e).next(function(t){return t.lastStreamToken=n.toBase64(),BE(e).put(t)})},FE.prototype.Vs=function(t){return this.Fs(t).next(function(t){return xb.fromBase64String(t.lastStreamToken)})},FE.prototype.Us=function(e,n){return this.Fs(e).next(function(t){return t.lastStreamToken=n.toBase64(),BE(e).put(t)})},FE.prototype.xs=function(c,h,l,f){var p=this,d=VE(c),v=qE(c);return v.add({}).next(function(t){ig("number"==typeof t,"Auto-generated key is not a number");for(var e=new uE(t,h,l,f),n=p.serializer.js(p.userId,e),r=[],i=new Em(function(t,e){return ag(t.nt(),e.nt())}),o=0,s=f;o<s.length;o++){var a=s[o],u=MI.key(p.userId,a.key.path,t);i=i.add(a.key.path.H()),r.push(v.put(n)),r.push(d.put(u,MI.PLACEHOLDER))}return i.forEach(function(t){r.push(p.Cs.Ls(c,t))}),c.us(function(){p.Ps[t]=e.keys()}),pE.Wu(r).next(function(){return e})})},FE.prototype.qs=function(t,e){var n=this;return qE(t).get(e).next(function(t){return t?(ig(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.Bs(t)):null})},FE.prototype.Ms=function(t,n){var r=this;return this.Ps[n]?pE.resolve(this.Ps[n]):this.qs(t,n).next(function(t){if(t){var e=t.keys();return r.Ps[n]=e}return null})},FE.prototype.Qs=function(t,e){var r=this,i=e+1,n=IDBKeyRange.lowerBound([this.userId,i]),o=null;return qE(t).Ss({index:PI.userMutationsIndex,range:n},function(t,e,n){e.userId===r.userId&&(ig(e.batchId>=i,"Should have found mutation after "+i),o=r.serializer.Bs(e)),n.done()}).next(function(){return o})},FE.prototype.Gs=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return qE(t).Ss({index:PI.userMutationsIndex,range:e,reverse:!0},function(t,e,n){r=e.batchId,n.done()}).next(function(){return r})},FE.prototype.Ws=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return qE(t).Is(PI.userMutationsIndex,n).next(function(t){return t.map(function(t){return e.serializer.Bs(t)})})},FE.prototype.zs=function(a,u){var c=this,t=MI.prefixForPath(this.userId,u.path),e=IDBKeyRange.lowerBound(t),h=[];return VE(a).Ss({range:e},function(e,t,n){var r=e[0],i=e[1],o=e[2],s=aE(i);if(r===c.userId&&u.path.isEqual(s))return qE(a).get(o).next(function(t){if(!t)throw rg("Dangling document-mutation reference found: "+e+" which points to "+o);ig(t.userId===c.userId,"Unexpected user '"+t.userId+"' for mutation batch "+o),h.push(c.serializer.Bs(t))});n.done()}).next(function(){return h})},FE.prototype.Ks=function(r,t){var u=this,c=new Em(ag),i=[];return t.forEach(function(a){var t=MI.prefixForPath(u.userId,a.path),e=IDBKeyRange.lowerBound(t),n=VE(r).Ss({range:e},function(t,e,n){var r=t[0],i=t[1],o=t[2],s=aE(i);r===u.userId&&a.path.isEqual(s)?c=c.add(o):n.done()});i.push(n)}),pE.Wu(i).next(function(){return u.Hs(r,c)})},FE.prototype.Js=function(t,e){var a=this;ig(!e.Nn(),"Document queries shouldn't go down this path"),ig(!e.ui(),"CollectionGroup queries should be handled in LocalDocumentsView");var u=e.path,c=u.length+1,n=MI.prefixForPath(this.userId,u),r=IDBKeyRange.lowerBound(n),h=new Em(ag);return VE(t).Ss({range:r},function(t,e,n){var r=t[0],i=t[1],o=t[2],s=aE(i);r===a.userId&&u.$(s)?s.length===c&&(h=h.add(o)):n.done()}).next(function(){return a.Hs(t,h)})},FE.prototype.Hs=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(qE(t).get(e).next(function(t){if(null===t)throw rg("Dangling document-mutation reference found, which points to "+e);ig(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.Bs(t))}))}),pE.Wu(i).next(function(){return r})},FE.prototype.Ys=function(e,n){var r=this;return jE(e.Xs,this.userId,n).next(function(t){return e.us(function(){r.$s(n.batchId)}),pE.forEach(t,function(t){return r.As.Zs(e,t)})})},FE.prototype.$s=function(t){delete this.Ps[t]},FE.prototype.to=function(n){var o=this;return this.Ns(n).next(function(t){if(!t)return pE.resolve();var e=IDBKeyRange.lowerBound(MI.prefixForUser(o.userId)),i=[];return VE(n).Ss({range:e},function(t,e,n){if(t[0]===o.userId){var r=aE(t[1]);i.push(r)}else n.done()}).next(function(){ig(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(t){return t.nt()}))})})},FE.prototype.Ou=function(t,e){return UE(t,this.userId,e)},FE.prototype.Fs=function(t){var e=this;return BE(t).get(this.userId).next(function(t){return t||new DI(e.userId,-1,"")})},FE);function FE(t,e,n,r){this.userId=t,this.serializer=e,this.Cs=n,this.As=r,this.Ps={}}function UE(t,o,e){var n=MI.prefixForPath(o,e.path),s=n[1],r=IDBKeyRange.lowerBound(n),a=!1;return VE(t).Ss({range:r,Ds:!0},function(t,e,n){var r=t[0],i=t[1];t[2],r===o&&i===s&&(a=!0),n.done()}).next(function(){return a})}function jE(t,e,n){var r=t.store(PI.store),i=t.store(MI.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ss({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){ig(1===a,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=MI.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return pE.Wu(o).next(function(){return c})}function qE(t){return hT.ds(t,PI.store)}function VE(t){return hT.ds(t,MI.store)}function BE(t){return hT.ds(t,DI.store)}var WE=(XE.prototype.next=function(){var t=this.eo;return this.eo+=2,t},XE.prototype.after=function(t){return this.io(t+2),this.next()},XE.prototype.io=function(t){ig((1&t)===this.no,"Cannot supply target ID from different generator ID"),this.eo=t},XE.ro=function(){return new XE(0,2)},XE.uo=function(){return new XE(1)},XE),HE=(YE.prototype.ho=function(e,n){var r=this;return this.oo.zs(e,n).next(function(t){return r.co(e,n,t)})},YE.prototype.co=function(t,r,i){return this.so.Zu(t,r).next(function(t){for(var e=0,n=i;e<n.length;e++)t=n[e].Gt(r,t);return t})},YE.prototype.ao=function(t,e,i){var o=s_();return e.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)e=r[n].Gt(t,e);o=o.lt(t,e)}),o},YE.prototype.fo=function(e,t){var n=this;return this.so.getEntries(e,t).next(function(t){return n.lo(e,t)})},YE.prototype.lo=function(r,i){var o=this;return this.oo.Ks(r,i).next(function(t){var e=o.ao(r,i,t),n=o_();return e.forEach(function(t,e){e=e||new Gw(t,em.q()),n=n.lt(t,e)}),n})},YE.prototype.do=function(t,e,n){return e.Nn()?this.vo(t,e.path):e.ui()?this.wo(t,e,n):this.mo(t,e,n)},YE.prototype.vo=function(t,e){return this.ho(t,new sm(e)).next(function(t){var e=u_();return t instanceof Hw&&(e=e.lt(t.key,t)),e})},YE.prototype.wo=function(n,r,i){var o=this;ig(r.path.J(),"Currently we only support collection group queries at the root.");var s=r.collectionGroup,a=u_();return this.Cs.po(n,s).next(function(t){return pE.forEach(t,function(t){var e=r.Hn(t.child(s));return o.mo(n,e,i).next(function(t){t.forEach(function(t,e){a=a.lt(t,e)})})}).next(function(){return a})})},YE.prototype.mo=function(e,n,t){var h,l,r=this;return this.so.do(e,n,t).next(function(t){return h=t,r.oo.Js(e,n)}).next(function(t){return l=t,r.bo(e,l,h).next(function(t){h=t;for(var e=0,n=l;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var s=o[i],a=s.key,u=h.get(a),c=s.Gt(u,u,r.En);h=c instanceof Hw?h.lt(a,c):h.remove(a)}})}).next(function(){return h.forEach(function(t,e){n.matches(e)||(h=h.remove(t))}),h})},YE.prototype.bo=function(t,e,n){for(var r=f_(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Ym&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.so.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof Hw&&(c=c.lt(t,e))}),c})},YE),GE=(QE.Io=function(t,e){for(var n=f_(),r=f_(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}}return new QE(t,e.fromCache,n,r)},QE),zE=(KE.prototype.start=function(){return this.jo()},KE.prototype.Lo=function(i){return Ts(this,void 0,void 0,function(){var e,y,n,r=this;return Ss(this,function(t){switch(t.label){case 0:return e=this.oo,y=this.Vo,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",function(d){var v;return r.oo.Ws(d).next(function(t){return v=t,e=r.persistence.Po(i),y=new HE(r.ko,e,r.persistence.Uo()),e.Ws(d)}).next(function(t){for(var e=[],n=[],r=f_(),i=0,o=v;i<o.length;i++){var s=o[i];e.push(s.batchId);for(var a=0,u=s.mutations;a<u.length;a++){var c=u[a];r=r.add(c.key)}}for(var h=0,l=t;h<l.length;h++){s=l[h],n.push(s.batchId);for(var f=0,p=s.mutations;f<p.length;f++)c=p[f],r=r.add(c.key)}return y.fo(d,r).next(function(t){return{qo:t,Bo:e,Mo:n}})})})];case 1:return n=t.sent(),this.oo=e,this.Vo=y,this.To.xo(this.Vo),[2,n]}})})},KE.prototype.Qo=function(a){var u,c=this,h=tm.now(),t=a.reduce(function(t,e){return t.add(e.key)},f_());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",function(s){return c.Vo.fo(s,t).next(function(t){u=t;for(var e=[],n=0,r=a;n<r.length;n++){var i=r[n],o=i.rn(u.get(i.key));null!=o&&e.push(new Ym(i.key,o,o.un(),zm.exists(!0)))}return c.oo.xs(s,h,e,a)})}).then(function(t){var e=t.bu(u);return{batchId:t.batchId,Ku:e}})},KE.prototype.Go=function(t){var n=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",function(e){return n.oo.Ms(e,t).next(function(t){return t?n.Vo.fo(e,t):pE.resolve(null)})})},KE.prototype.Os=function(r){var i=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",function(t){var e=r.batch.keys(),n=i.ko.Wo({zo:!0});return i.oo.Os(t,r.batch,r.streamToken).next(function(){return i.Ko(t,r,n)}).next(function(){return n.apply(t)}).next(function(){return i.oo.to(t)}).next(function(){return i.Vo.fo(t,e)})})},KE.prototype.Ho=function(t){var r=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",function(e){var n;return r.oo.qs(e,t).next(function(t){return ig(null!==t,"Attempt to reject nonexistent batch!"),n=t.keys(),r.oo.Ys(e,t)}).next(function(){return r.oo.to(e)}).next(function(){return r.Vo.fo(e,n)})})},KE.prototype.Gs=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",function(t){return e.oo.Gs(t)})},KE.prototype.Vs=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",function(t){return e.oo.Vs(t)})},KE.prototype.Us=function(e){var n=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",function(t){return n.oo.Us(t,e)})},KE.prototype.Jo=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",function(t){return e.Oo.Jo(t)})},KE.prototype.Yo=function(u){var c=this,h=u.li,l=this.Do;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",function(o){var i=c.ko.Wo({zo:!0});l=c.Do;var s=[];Og(u.Si,function(t,e){var n=l.get(t);if(n){s.push(c.Oo.Xo(o,e.Vi,t).next(function(){return c.Oo.$o(o,e.Oi,t)}));var r=e.resumeToken;if(0<r.bn()){var i=n.vi(r,h).di(o.Zo);l=l.lt(t,i),KE.th(n,i,e)&&s.push(c.Oo.nh(o,i))}}});var a=o_(),n=f_();if(u.Ci.forEach(function(t,e){n=n.add(t)}),s.push(i.getEntries(o,n).next(function(r){u.Ci.forEach(function(t,e){var n=r.get(t);e instanceof Gw&&e.version.isEqual(em.MIN)?(i.$u(t,h),a=a.lt(t,e)):null==n||0<e.version.h(n.version)||0===e.version.h(n.version)&&n.hasPendingWrites?(ig(!em.MIN.isEqual(h),"Cannot add a document when the remote version is zero"),i.Yu(e,h),a=a.lt(t,e)):tg("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version),u.Ai.has(t)&&s.push(c.persistence.As.ih(o,t))})})),!h.isEqual(em.MIN)){var t=c.Oo.Jo(o).next(function(t){return ig(0<=h.h(t),"Watch stream reverted to previous snapshot?? "+h+" < "+t),c.Oo.eh(o,o.Zo,h)});s.push(t)}return pE.Wu(s).next(function(){return i.apply(o)}).next(function(){return c.Vo.lo(o,a)})}).then(function(t){return c.Do=l,t})},KE.th=function(t,e,n){return ig(0<e.resumeToken.bn(),"Attempted to persist target data with no resume token"),0===t.resumeToken.bn()||e.li.B()-t.li.B()>=this.rh||0<n.Oi.size+n.Fi.size+n.Vi.size},KE.prototype.uh=function(t){for(var n=this,e=0,r=t;e<r.length;e++){var i=r[e],o=i.targetId;if(this.Eo.Su(i.yo,o),this.Eo.Au(i._o,o),!i.fromCache){var s=this.Do.get(o);ig(null!==s,"Can't set limbo-free snapshot version for unknown target: "+o);var a=s.li,u=s.wi(a);this.Do=this.Do.lt(o,u)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",function(e){return pE.forEach(t,function(t){return pE.forEach(t._o,function(t){return n.persistence.As.Ru(e,t)})})})},KE.prototype.sh=function(e){var n=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",function(t){return void 0===e&&(e=-1),n.oo.Qs(t,e)})},KE.prototype.oh=function(e){var n=this;return this.persistence.runTransaction("read document","readonly-idempotent",function(t){return n.Vo.ho(t,e)})},KE.prototype.hh=function(r){var i=this;return this.persistence.runTransaction("Allocate target","readwrite-idempotent",function(e){var n;return i.Oo.ah(e,r).next(function(t){return t?(n=t,pE.resolve(n)):i.Oo.fh(e).next(function(t){return n=new $b(r,t,0,e.Zo),i.Oo.lh(e,n).next(function(){return n})})})}).then(function(t){return null===i.Do.get(t.targetId)&&(i.Do=i.Do.lt(t.targetId,t),i.So.set(r,t.targetId)),t})},KE.prototype.ah=function(t,e){var n=this.So.get(e);return void 0!==n?pE.resolve(this.Do.get(n)):this.Oo.ah(t,e)},KE.prototype.dh=function(n,r){var i=this,o=this.Do.get(n);ig(null!==o,"Tried to release nonexistent target: "+n);var t=r?"readwrite-idempotent":"readwrite-primary-idempotent";return this.persistence.runTransaction("Release target",t,function(e){var t=i.Eo.Pu(n);return r?pE.resolve():pE.forEach(t,function(t){return i.persistence.As.Ru(e,t)}).next(function(){i.persistence.As.removeTarget(e,o)})}).then(function(){i.Do=i.Do.remove(n),i.So.delete(o.target)})},KE.prototype.vh=function(t,n){var r=this,i=em.MIN,o=f_();return this.persistence.runTransaction("Execute query","readonly-idempotent",function(e){return r.ah(e,t.Yn()).next(function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Oo.wh(e,t.targetId).next(function(t){o=t})}).next(function(){return r.To.do(e,t,n?i:em.MIN,n?o:f_())}).next(function(t){return{documents:t,mh:o}})})},KE.prototype.ph=function(e){var n=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",function(t){return n.Oo.wh(t,e)})},KE.prototype.gh=function(){return this.persistence.gh()},KE.prototype.bh=function(t){this.oo.$s(t)},KE.prototype.yh=function(t){this.persistence.yh(t)},KE.prototype.Ko=function(t,i,o){var e=this,s=i.batch,n=s.keys(),a=pE.resolve();return n.forEach(function(r){a=a.next(function(){return o.Zu(t,r)}).next(function(t){var e=t,n=i._u.get(r);ig(null!==n,"ackVersions should contain every doc in the write."),(!e||e.version.h(n)<0)&&((e=s.Wt(r,e,i))?o.Yu(e,i.yu):ig(!t,"Mutation batch "+s+" applied to document "+t+" resulted in null"))})}),a.next(function(){return e.oo.Ys(t,s)})},KE.prototype._h=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",function(t){return e.Ih(t,n.Do)})},KE.prototype.Th=function(e){var n=this,t=this.Do.get(e);return t?Promise.resolve(t.target):this.persistence.runTransaction("Get target data","readonly-idempotent",function(t){return n.Oo.ye(t,e).next(function(t){return t?t.target:null})})},KE.prototype.Eh=function(){var r=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",function(t){return r.ko.Eh(t,r.Ro)}).then(function(t){var e=t.Dh,n=t.readTime;return r.Ro=n,e})},KE.prototype.jo=function(){return Ts(this,void 0,void 0,function(){var e,n=this;return Ss(this,function(t){switch(t.label){case 0:return[4,(e=this).persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",function(t){return n.ko.Sh(t)})];case 1:return e.Ro=t.sent(),[2]}})})},KE.rh=3e8,KE);function KE(t,e,n){this.persistence=t,this.To=e,this.Eo=new hE,this.Do=new am(ag),this.So=new fE(function(t){return t.canonicalId()}),this.Ro=em.MIN,ig(t.Co,"LocalStore was passed an unstarted persistence implementation"),this.persistence.As.Ao(this.Eo),this.oo=t.Po(n),this.ko=t.No(),this.Oo=t.Fo(),this.Vo=new HE(this.ko,this.oo,this.persistence.Uo()),this.To.xo(this.Vo)}function QE(t,e,n,r){this.targetId=t,this.fromCache=e,this.yo=n,this._o=r}function YE(t,e,n){this.so=t,this.oo=e,this.Cs=n}function XE(t,e){ig((1&(this.no=t))===t,"Generator ID "+t+" contains more than 1 reserved bits"),this.io(void 0!==e?e:this.no)}function JE(e){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){if(e.code!==vg.FAILED_PRECONDITION||e.message!==vE)throw e;return tg("LocalStore","Unexpectedly lost primary lease"),[2]})})}function $E(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=ag(n,i);return 0===s?ag(r,o):s}var ZE=(cI.prototype.Ah=function(){return++this.Ch},cI.prototype.Ph=function(t){var e=[t,this.Ah()];if(this.buffer.size<this.Rh)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();$E(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(cI.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),cI),tI={kh:!1,Nh:0,Oh:0,Fh:0},eI=(uI.jh=function(t){return new uI(t,uI.Lh,uI.qh)},uI.Bh=-1,uI.Mh=1048576,uI.Gh=new uI(uI.Qh=41943040,uI.Lh=10,uI.qh=1e3),uI.DISABLED=new uI(uI.Bh,0,0),uI),nI=(aI.prototype.start=function(){ig(null===this.Hh,"Cannot start an already started LruScheduler"),this.Wh.params.Vh!==eI.Bh&&this.Jh()},aI.prototype.stop=function(){this.Hh&&(this.Hh.cancel(),this.Hh=null)},Object.defineProperty(aI.prototype,"Co",{get:function(){return null!==this.Hh},enumerable:!0,configurable:!0}),aI.prototype.Jh=function(){var t=this;ig(null===this.Hh,"Cannot schedule GC while a task is pending");var e=this.Kh?3e5:6e4;tg("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.Hh=this.Qr.fu("lru_garbage_collection",e,function(){return t.Hh=null,t.Kh=!0,t.zh._h(t.Wh).then(function(){return t.Jh()}).catch(JE)})},aI),rI=(sI.prototype.Xh=function(t,e){return this.Yh.$h(t).next(function(t){return Math.floor(e/100*t)})},sI.prototype.Zh=function(t,e){var n=this;if(0===e)return pE.resolve(J_.Mr);var r=new ZE(e);return this.Yh.ce(t,function(t){return r.Ph(t.sequenceNumber)}).next(function(){return n.Yh.tc(t,function(t){return r.Ph(t)})}).next(function(){return r.maxValue})},sI.prototype.nc=function(t,e,n){return this.Yh.nc(t,e,n)},sI.prototype.ic=function(t,e){return this.Yh.ic(t,e)},sI.prototype.Ih=function(e,n){var r=this;return this.params.Vh===eI.Bh?(tg("LruGarbageCollector","Garbage collection skipped; disabled"),pE.resolve(tI)):this.ec(e).next(function(t){return t<r.params.Vh?(tg("LruGarbageCollector","Garbage collection skipped; Cache size "+t+" is lower than threshold "+r.params.Vh),tI):r.rc(e,n)})},sI.prototype.ec=function(t){return this.Yh.ec(t)},sI.prototype.rc=function(e,n){var r,i,o,s,a,u,c,h=this,l=Date.now();return this.Xh(e,this.params.Uh).next(function(t){return i=t>h.params.xh?(tg("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.xh+" from "+t),h.params.xh):t,s=Date.now(),h.Zh(e,i)}).next(function(t){return r=t,a=Date.now(),h.nc(e,r,n)}).next(function(t){return o=t,u=Date.now(),h.ic(e,r)}).next(function(t){return c=Date.now(),$y()<=0&&tg("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+i+" in "+(a-s)+"ms\n\tRemoved "+o+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-l)+"ms"),pE.resolve({kh:!0,Nh:i,Oh:o,Fh:t})})},sI),iI=(oI.prototype.fh=function(e){var n=this;return this.sc(e).next(function(t){return t.highestTargetId=n.uc.after(t.highestTargetId),n.oc(e,t).next(function(){return t.highestTargetId})})},oI.prototype.Jo=function(t){return this.sc(t).next(function(t){return em.L(new tm(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},oI.prototype.hc=function(t){return fI(t.Xs)},oI.prototype.eh=function(e,n,r){var i=this;return this.sc(e).next(function(t){return t.highestListenSequenceNumber=n,r&&(t.lastRemoteSnapshotVersion=r.M()),n>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=n),i.oc(e,t)})},oI.prototype.lh=function(e,n){var r=this;return this.cc(e,n).next(function(){return r.sc(e).next(function(t){return t.targetCount+=1,r.ac(n,t),r.oc(e,t)})})},oI.prototype.nh=function(t,e){return this.cc(t,e)},oI.prototype.fc=function(e,t){var n=this;return this.lc(e,t.targetId).next(function(){return hI(e).delete(t.targetId)}).next(function(){return n.sc(e)}).next(function(t){return ig(0<t.targetCount,"Removing from an empty target cache"),t.targetCount-=1,n.oc(e,t)})},oI.prototype.nc=function(r,i,o){var s=this,a=0,u=[];return hI(r).Ss(function(t,e){var n=s.serializer.dc(e);n.sequenceNumber<=i&&null===o.get(n.targetId)&&(a++,u.push(s.fc(r,n)))}).next(function(){return pE.Wu(u)}).next(function(){return a})},oI.prototype.ce=function(t,r){var i=this;return hI(t).Ss(function(t,e){var n=i.serializer.dc(e);r(n)})},oI.prototype.sc=function(t){return lI(t.Xs)},oI.prototype.oc=function(t,e){return(n=t,hT.ds(n,zI.store)).put(zI.key,e);var n},oI.prototype.cc=function(t,e){return hI(t).put(this.serializer.vc(e))},oI.prototype.ac=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},oI.prototype.wc=function(t){return this.sc(t).next(function(t){return t.targetCount})},oI.prototype.ah=function(t,i){var o=this,e=i.canonicalId(),n=IDBKeyRange.bound([e,Number.NEGATIVE_INFINITY],[e,Number.POSITIVE_INFINITY]),s=null;return hI(t).Ss({range:n,index:HI.queryTargetsIndexName},function(t,e,n){var r=o.serializer.dc(e);i.isEqual(r.target)&&(s=r,n.done())}).next(function(){return s})},oI.prototype.$o=function(n,t,r){var i=this,o=[],s=pI(n);return t.forEach(function(t){var e=iE(t.path);o.push(s.put(new GI(r,e))),o.push(i.As.Du(n,t))}),pE.Wu(o)},oI.prototype.Xo=function(n,t,r){var i=this,o=pI(n);return pE.forEach(t,function(t){var e=iE(t.path);return pE.Wu([o.delete([r,e]),i.As.Ru(n,t)])})},oI.prototype.lc=function(t,e){var n=pI(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},oI.prototype.wh=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=pI(t),o=f_();return r.Ss({range:n,Ds:!0},function(t,e,n){var r=aE(t[1]),i=new sm(r);o=o.add(i)}).next(function(){return o})},oI.prototype.Ou=function(t,e){var n=iE(e.path),r=IDBKeyRange.bound([n],[cg(n)],!1,!0),i=0;return pI(t).Ss({index:GI.documentTargetsIndex,Ds:!0,range:r},function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},oI.prototype.ye=function(t,e){var n=this;return hI(t).get(e).next(function(t){return t?n.serializer.dc(t):null})},oI);function oI(t,e){this.As=t,this.serializer=e,this.uc=WE.ro()}function sI(t,e){this.Yh=t,this.params=e}function aI(t,e,n){this.Wh=t,this.Qr=e,this.zh=n,this.Kh=!1,this.Hh=null}function uI(t,e,n){this.Vh=t,this.Uh=e,this.xh=n}function cI(t){this.Rh=t,this.buffer=new Em($E),this.Ch=0}function hI(t){return hT.ds(t,HI.store)}function lI(t){return gE.ds(t,zI.store).get(zI.key).next(function(t){return ig(null!==t,"Missing metadata row."),t})}function fI(t){return lI(t).next(function(t){return t.highestListenSequenceNumber})}function pI(t){return hT.ds(t,GI.store)}var dI,vI=(yI.prototype.Yu=function(t,e,n){return wI(t).put(bI(e),n)},yI.prototype.$u=function(t,e){var n=wI(t),r=bI(e);return n.delete(r)},yI.prototype.updateMetadata=function(e,n){var r=this;return this.getMetadata(e).next(function(t){return t.byteSize+=n,r.mc(e,t)})},yI.prototype.Zu=function(t,e){var n=this;return wI(t).get(bI(e)).next(function(t){return n.pc(t)})},yI.prototype.gc=function(t,e){var n=this;return wI(t).get(bI(e)).next(function(t){var e=n.pc(t);return e?{bc:e,size:_I(t)}:null})},yI.prototype.getEntries=function(t,e){var r=this,i=s_();return this.yc(t,e,function(t,e){var n=r.pc(e);i=i.lt(t,n)}).next(function(){return i})},yI.prototype._c=function(t,e){var r=this,i=s_(),o=new am(sm.G);return this.yc(t,e,function(t,e){var n=r.pc(e);o=n?(i=i.lt(t,n),o.lt(t,_I(e))):(i=i.lt(t,null),o.lt(t,0))}).next(function(){return{Ic:i,Tc:o}})},yI.prototype.yc=function(t,e,i){if(e.J())return pE.resolve();var n=IDBKeyRange.bound(e.first().path.tt(),e.last().path.tt()),o=e.bt(),s=o.Dt();return wI(t).Ss({range:n},function(t,e,n){for(var r=sm.at(t);s&&sm.G(s,r)<0;)i(s,null),s=o.Dt();s&&s.isEqual(r)&&(i(s,e),s=o.St()?o.Dt():null),s?n.ys(s.path.tt()):n.done()}).next(function(){for(;s;)i(s,null),s=o.St()?o.Dt():null})},yI.prototype.do=function(t,i,e){var o=this;ig(!i.ui(),"CollectionGroup queries should be handled in LocalDocumentsView");var s=u_(),a=i.path.length+1,n={};if(e.isEqual(em.MIN)){var r=i.path.tt();n.range=IDBKeyRange.lowerBound(r)}else{var u=i.path.tt(),c=this.serializer.Ec(e);n.range=IDBKeyRange.lowerBound([u,c],!0),n.index=qI.collectionReadTimeIndex}return wI(t).Ss(n,function(t,e,n){if(t.length===a){var r=o.serializer.Dc(e);i.path.$(r.key.path)?r instanceof Hw&&i.matches(r)&&(s=s.lt(r.key,r)):n.done()}}).next(function(){return s})},yI.prototype.Eh=function(t,e){var r=this,i=o_(),o=this.serializer.Ec(e),n=wI(t),s=IDBKeyRange.lowerBound(o,!0);return n.Ss({index:qI.readTimeIndex,range:s},function(t,e){var n=r.serializer.Dc(e);i=i.lt(n.key,n),o=e.readTime}).next(function(){return{Dh:i,readTime:r.serializer.Sc(o)}})},yI.prototype.Sh=function(t){var r=this,e=wI(t),i=em.MIN;return e.Ss({index:qI.readTimeIndex,reverse:!0},function(t,e,n){e.readTime&&(i=r.serializer.Sc(e.readTime)),n.done()}).next(function(){return i})},yI.prototype.Wo=function(t){return new yI.Rc(this,!!t&&t.zo)},yI.prototype.Cc=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},yI.prototype.getMetadata=function(t){return mI(t).get(VI.key).next(function(t){return ig(!!t,"Missing document cache metadata"),t})},yI.prototype.mc=function(t,e){return mI(t).put(VI.key,e)},yI.prototype.pc=function(t){if(t){var e=this.serializer.Dc(t);return e instanceof Gw&&e.version.isEqual(em.q())?null:e}return null},yI.Rc=(Es(gI,dI=dE),gI.prototype.es=function(s){var a=this,u=[],c=0,h=new Em(function(t,e){return ag(t.nt(),e.nt())});return this.Ku.forEach(function(t,e){var n=a.Pc.get(t);if(ig(void 0!==n,"Cannot modify a document that wasn't read (for "+t+")"),e){ig(!a.readTime.isEqual(em.MIN),"Cannot add a document with a read time of zero");var r=a.Ac.serializer.kc(e,a.readTime);h=h.add(t.path.H());var i=_I(r);c+=i-n,u.push(a.Ac.Yu(s,t,r))}else if(c-=n,a.zo){var o=a.Ac.serializer.kc(new Gw(t,em.q()),a.readTime);u.push(a.Ac.Yu(s,t,o))}else u.push(a.Ac.$u(s,t))}),h.forEach(function(t){u.push(a.Ac.Cs.Ls(s,t))}),u.push(this.Ac.updateMetadata(s,c)),pE.Wu(u)},gI.prototype.ts=function(t,e){var n=this;return this.Ac.gc(t,e).next(function(t){return null===t?(n.Pc.set(e,0),null):(n.Pc.set(e,t.size),t.bc)})},gI.prototype.ns=function(t,e){var n=this;return this.Ac._c(t,e).next(function(t){var e=t.Ic;return t.Tc.forEach(function(t,e){n.Pc.set(t,e)}),e})},gI),yI);function yI(t,e){this.serializer=t,this.Cs=e}function gI(t,e){var n=dI.call(this)||this;return n.Ac=t,n.zo=e,n.Pc=new fE(function(t){return t.toString()}),n}function mI(t){return hT.ds(t,VI.store)}function wI(t){return hT.ds(t,qI.store)}function bI(t){return t.path.tt()}function _I(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw rg("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}var EI=(AI.prototype.Ls=function(t,e){return this.Nc.add(e),pE.resolve()},AI.prototype.po=function(t,e){return pE.resolve(this.Nc.getEntries(e))},AI),II=(NI.prototype.add=function(t){ig(t.length%2==1,"Expected a collection path.");var e=t.X(),n=t.H(),r=this.index[e]||new Em(rm.G),i=!r.has(n);return this.index[e]=r.add(n),i},NI.prototype.has=function(t){var e=t.X(),n=t.H(),r=this.index[e];return r&&r.has(n)},NI.prototype.getEntries=function(t){return(this.index[t]||new Em(rm.G)).tt()},NI),TI=9,SI=(CI.prototype.createOrUpgrade=function(n,r,t,e){var i=this;ig(t<e&&0<=t&&e<=TI,"Unexpected schema upgrade from v"+t+" to v{toVersion}.");var o,s=new wE(r);t<1&&1<=e&&(n.createObjectStore(OI.store),(o=n).createObjectStore(DI.store,{keyPath:DI.keyPath}),o.createObjectStore(PI.store,{keyPath:PI.keyPath,autoIncrement:!0}).createIndex(PI.userMutationsIndex,PI.userMutationsKeyPath,{unique:!0}),o.createObjectStore(MI.store),$I(n),n.createObjectStore(qI.store));var a,u=pE.resolve();return t<3&&3<=e&&(0!==t&&((a=n).deleteObjectStore(GI.store),a.deleteObjectStore(HI.store),a.deleteObjectStore(zI.store),$I(n)),u=u.next(function(){return t=s.store(zI.store),e=new zI(0,0,em.MIN.M(),0),t.put(zI.key,e);var t,e})),t<4&&4<=e&&(0!==t&&(u=u.next(function(){return r=n,(i=s).store(PI.store).Is().next(function(t){r.deleteObjectStore(PI.store),r.createObjectStore(PI.store,{keyPath:PI.keyPath,autoIncrement:!0}).createIndex(PI.userMutationsIndex,PI.userMutationsKeyPath,{unique:!0});var e=i.store(PI.store),n=t.map(function(t){return e.put(t)});return pE.Wu(n)});var r,i})),u=u.next(function(){n.createObjectStore(ZI.store,{keyPath:ZI.keyPath})})),t<5&&5<=e&&(u=u.next(function(){return i.removeAcknowledgedMutations(s)})),t<6&&6<=e&&(u=u.next(function(){return n.createObjectStore(VI.store),i.addDocumentGlobal(s)})),t<7&&7<=e&&(u=u.next(function(){return i.ensureSequenceNumbers(s)})),t<8&&8<=e&&(u=u.next(function(){return i.createCollectionParentIndex(n,s)})),t<9&&9<=e&&(u=u.next(function(){var t,e;(e=n).objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges"),(t=r.objectStore(qI.store)).createIndex(qI.readTimeIndex,qI.readTimeIndexPath,{unique:!1}),t.createIndex(qI.collectionReadTimeIndex,qI.collectionReadTimeIndexPath,{unique:!1})})),u},CI.prototype.addDocumentGlobal=function(e){var n=0;return e.store(qI.store).Ss(function(t,e){n+=_I(e)}).next(function(){var t=new VI(n);return e.store(VI.store).put(VI.key,t)})},CI.prototype.removeAcknowledgedMutations=function(r){var i=this,t=r.store(DI.store),e=r.store(PI.store);return t.Is().next(function(t){return pE.forEach(t,function(n){var t=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return e.Is(PI.userMutationsIndex,t).next(function(t){return pE.forEach(t,function(t){ig(t.userId===n.userId,"Cannot process batch "+t.batchId+" from unexpected user");var e=i.serializer.Bs(t);return jE(r,n.userId,e).next(function(){})})})})})},CI.prototype.ensureSequenceNumbers=function(t){var s=t.store(GI.store),e=t.store(qI.store);return fI(t).next(function(i){var o=[];return e.Ss(function(t,e){var n=new rm(t),r=[0,iE(n)];o.push(s.get(r).next(function(t){return t?pE.resolve():(e=n,s.put(new GI(0,iE(e),i)));var e}))}).next(function(){return pE.Wu(o)})})},CI.prototype.createCollectionParentIndex=function(t,e){function i(t){if(o.add(t)){var e=t.X(),n=t.H();return r.put({collectionId:e,parent:iE(n)})}}t.createObjectStore(KI.store,{keyPath:KI.keyPath});var r=e.store(KI.store),o=new II;return e.store(qI.store).Ss({Ds:!0},function(t,e){var n=new rm(t);return i(n.H())}).next(function(){return e.store(MI.store).Ss({Ds:!0},function(t,e){t[0];var n=t[1],r=(t[2],aE(n));return i(r.H())})})},CI);function CI(t){this.serializer=t}function NI(){this.index={}}function AI(){this.Nc=new II}function kI(t,e){this.seconds=t,this.nanoseconds=e}var OI=(RI.store="owner",RI.key="owner",RI);function RI(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}var DI=(LI.store="mutationQueues",LI.keyPath="userId",LI),PI=(xI.store="mutations",xI.keyPath="batchId",xI.userMutationsIndex="userMutationsIndex",xI.userMutationsKeyPath=["userId","batchId"],xI);function xI(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}function LI(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}var MI=(FI.prefixForUser=function(t){return[t]},FI.prefixForPath=function(t,e){return[t,iE(e)]},FI.key=function(t,e,n){return[t,iE(e),n]},FI.store="documentMutations",FI.PLACEHOLDER=new FI,FI);function FI(){}function UI(t,e){this.path=t,this.readTime=e}function jI(t,e){this.path=t,this.version=e}var qI=(WI.store="remoteDocuments",WI.readTimeIndex="readTimeIndex",WI.readTimeIndexPath="readTime",WI.collectionReadTimeIndex="collectionReadTimeIndex",WI.collectionReadTimeIndexPath=["parentPath","readTime"],WI),VI=(BI.store="remoteDocumentGlobal",BI.key="remoteDocumentGlobalKey",BI);function BI(t){this.byteSize=t}function WI(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}var HI=(JI.store="targets",JI.keyPath="targetId",JI.queryTargetsIndexName="queryTargetsIndex",JI.queryTargetsKeyPath=["canonicalId","targetId"],JI),GI=(XI.store="targetDocuments",XI.keyPath=["targetId","path"],XI.documentTargetsIndex="documentTargetsIndex",XI.documentTargetsKeyPath=["path","targetId"],XI),zI=(YI.key="targetGlobalKey",YI.store="targetGlobal",YI),KI=(QI.store="collectionParents",QI.keyPath=["collectionId","parent"],QI);function QI(t,e){this.collectionId=t,this.parent=e}function YI(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}function XI(t,e,n){this.targetId=t,this.path=e,ig(0===t==(void 0!==(this.sequenceNumber=n)),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}function JI(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s}function $I(t){t.createObjectStore(GI.store,{keyPath:GI.keyPath}).createIndex(GI.documentTargetsIndex,GI.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(HI.store,{keyPath:HI.keyPath}).createIndex(HI.queryTargetsIndexName,HI.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(zI.store)}var ZI=(tT.store="clientMetadata",tT.keyPath="clientId",tT);function tT(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}var eT=ks(ks(ks([DI.store,PI.store,MI.store,qI.store,HI.store,OI.store,zI.store,GI.store],[ZI.store]),[VI.store]),[KI.store]),nT=(rT.prototype.Ls=function(t,e){var n=this;if(ig(e.length%2==1,"Expected a collection path."),this.Oc.has(e))return pE.resolve();var r=e.X(),i=e.H();t.us(function(){n.Oc.add(e)});var o={collectionId:r,parent:iE(i)};return iT(t).put(o)},rT.prototype.po=function(t,i){var o=[],e=IDBKeyRange.bound([i,""],[cg(i),""],!1,!0);return iT(t).Is(e).next(function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(r.collectionId!==i)break;o.push(aE(r.parent))}return o})},rT);function rT(){this.Oc=new II}function iT(t){return hT.ds(t,KI.store)}var oT=(sT.prototype.Dc=function(t){if(t.document)return this.Fc.Ke(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=sm.at(t.noDocument.path),n=this.Vc(t.noDocument.readTime);return new Gw(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}return t.unknownDocument?(e=sm.at(t.unknownDocument.path),n=this.Vc(t.unknownDocument.version),new zw(e,n)):rg("Unexpected DbRemoteDocument")},sT.prototype.kc=function(t,e){var n=this.Ec(e),r=t.key.path.H().tt();if(t instanceof Hw){var i=t.proto?t.proto:this.Fc.ze(t),o=t.hasCommittedMutations;return new qI(null,null,i,o,n,r)}if(t instanceof Gw){var s=t.key.path.tt(),a=this.Uc(t.version);return o=t.hasCommittedMutations,new qI(null,new UI(s,a),null,o,n,r)}if(t instanceof zw){s=t.key.path.tt();var u=this.Uc(t.version);return new qI(new jI(s,u),null,null,!0,n,r)}return rg("Unexpected MaybeDocument")},sT.prototype.Ec=function(t){var e=t.M();return[e.seconds,e.nanoseconds]},sT.prototype.Sc=function(t){var e=new tm(t[0],t[1]);return em.L(e)},sT.prototype.Uc=function(t){var e=t.M();return new kI(e.seconds,e.nanoseconds)},sT.prototype.Vc=function(t){var e=new tm(t.seconds,t.nanoseconds);return em.L(e)},sT.prototype.js=function(t,e){var n=this,r=e.baseMutations.map(function(t){return n.Fc.ir(t)}),i=e.mutations.map(function(t){return n.Fc.ir(t)});return new PI(t,e.batchId,e.En.toMillis(),r,i)},sT.prototype.Bs=function(t){var e=this,n=(t.baseMutations||[]).map(function(t){return e.Fc.sr(t)}),r=t.mutations.map(function(t){return e.Fc.sr(t)}),i=tm.fromMillis(t.localWriteTimeMs);return new uE(t.batchId,i,n,r)},sT.prototype.xc=function(t){var e=[];return t.forEach(function(t){e.push(iE(t.path))}),e},sT.prototype.jc=function(t){for(var e=f_(),n=0,r=t;n<r.length;n++){var i=r[n];e=e.add(new sm(aE(i)))}return e},sT.prototype.dc=function(t){var e,n=this.Vc(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?this.Vc(t.lastLimboFreeSnapshotVersion):em.MIN;return e=void 0!==t.query.documents?this.Fc.vr(t.query):this.Fc.br(t.query),new $b(e,t.targetId,0,t.lastListenSequenceNumber,n,r,xb.fromBase64String(t.resumeToken))},sT.prototype.vc=function(t){ig(0===t.fi,"Only queries with purpose 0 may be stored, got "+t.fi);var e,n=this.Uc(t.li),r=this.Uc(t.lastLimboFreeSnapshotVersion);e=t.target.Nn()?this.Fc.dr(t.target):this.Fc.wr(t.target);var i=t.resumeToken.toBase64();return new HI(t.targetId,t.target.canonicalId(),n,i,t.sequenceNumber,r,e)},sT);function sT(t){this.Fc=t}var aT,uT="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",cT=(Es(fT,aT=yE),fT),hT=(lT.ds=function(t,e){if(t instanceof cT)return gE.ds(t.Xs,e);throw rg("IndexedDbPersistence must use instances of IndexedDbTransaction")},lT.Yc=function(n){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:if(!lT.cs())throw new yg(vg.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(e=new lT(n.allowTabSynchronization,n.persistenceKey,n.clientId,n.platform,n.Xc,n.Lc,n.serializer,n.qc)).start()];case 1:return t.sent(),[2,e]}})})},lT.prototype.start=function(){var e=this;return ig(!this.Co,"IndexedDbPersistence double-started!"),ig(null!==this.window,"Expected 'window' to be defined"),gE.hs(this.Kc,TI,new SI(this.serializer)).then(function(t){return e.$c=t,e.Zc()}).then(function(){return e.ta(),e.na(),e.ia(),e.$c.runTransaction("readonly-idempotent",[zI.store],function(t){return fI(t)})}).then(function(t){e.ea=new J_(t,e.qc)}).then(function(){e.Bc=!0}).catch(function(t){return e.$c&&e.$c.close(),Promise.reject(t)})},lT.prototype.ra=function(n){var t=this;return this.zc=function(e){return Ts(t,void 0,void 0,function(){return Ss(this,function(t){return this.Co?[2,n(e)]:[2]})})},n(this.isPrimary)},lT.prototype.ua=function(n){var t=this;this.$c.vs(function(e){return Ts(t,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return null!==e.newVersion?[3,2]:[4,n()];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},lT.prototype.yh=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Lc.$r(function(){return Ts(e,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return this.Co?[4,this.Zc()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},lT.prototype.Zc=function(){var n=this;return this.$c.runTransaction("readwrite-idempotent",eT,function(e){return dT(e).put(new ZI(n.clientId,Date.now(),n.networkEnabled,n.inForeground)).next(function(){if(n.isPrimary)return n.sa(e).next(function(t){t||(n.isPrimary=!1,n.Lc.$r(function(){return n.zc(!1)}))})}).next(function(){return n.oa(e)}).next(function(t){return n.isPrimary&&!t?n.ha(e).next(function(){return!1}):!!t&&n.ca(e).next(function(){return!0})})}).catch(function(t){if(!n.allowTabSynchronization)throw t;return tg("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){n.isPrimary!==t&&n.Lc.$r(function(){return n.zc(t)}),n.isPrimary=t})},lT.prototype.sa=function(t){var e=this;return pT(t).get(OI.key).next(function(t){return pE.resolve(e.aa(t))})},lT.prototype.fa=function(t){return dT(t).delete(this.clientId)},lT.prototype.la=function(){return Ts(this,void 0,void 0,function(){var i=this;return Ss(this,function(t){switch(t.label){case 0:return!this.isPrimary||this.da(this.Wc,18e5)?[3,2]:(this.Wc=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",function(t){var r=lT.ds(t,ZI.store);return r.Is().next(function(t){var e=i.va(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)});return pE.forEach(n,function(t){return r.delete(t.clientId)}).next(function(){return n})})}).catch(function(){return[]})]);case 1:t.sent().forEach(function(t){i.window.localStorage.removeItem(i.wa(t.clientId))}),t.label=2;case 2:return[2]}})})},lT.prototype.ia=function(){var t=this;this.Gc=this.Lc.fu("client_metadata_refresh",4e3,function(){return t.Zc().then(function(){return t.la()}).then(function(){return t.ia()})})},lT.prototype.aa=function(t){return!!t&&t.ownerId===this.clientId},lT.prototype.oa=function(e){var i=this;return pT(e).get(OI.key).next(function(t){if(null!==t&&i.da(t.leaseTimestampMs,5e3)&&!i.ma(t.ownerId)){if(i.aa(t)&&i.networkEnabled)return!0;if(!i.aa(t)){if(!t.allowTabSynchronization)throw new yg(vg.FAILED_PRECONDITION,uT);return!1}}return!(!i.networkEnabled||!i.inForeground)||dT(e).Is().next(function(t){return void 0===i.va(t,5e3).find(function(t){if(i.clientId!==t.clientId){var e=!i.networkEnabled&&t.networkEnabled,n=!i.inForeground&&t.inForeground,r=i.networkEnabled===t.networkEnabled;if(e||n&&r)return!0}return!1})})}).next(function(t){return i.isPrimary!==t&&tg("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},lT.prototype.shutdown=function(){return Ts(this,void 0,void 0,function(){var e=this;return Ss(this,function(t){switch(t.label){case 0:return this.Bc=!1,this.pa(),this.Gc&&(this.Gc.cancel(),this.Gc=null),this.ga(),this.ba(),[4,this.$c.runTransaction("readwrite-idempotent",[OI.store,ZI.store],function(t){return e.ha(t).next(function(){return e.fa(t)})})];case 1:return t.sent(),this.$c.close(),this.ya(),[2]}})})},lT.prototype.va=function(t,e){var n=this;return t.filter(function(t){return n.da(t.updateTimeMs,e)&&!n.ma(t.clientId)})},lT.prototype.gh=function(){var e=this;return this.$c.runTransaction("readonly-idempotent",[ZI.store],function(t){return dT(t).Is().next(function(t){return e.va(t,18e5).map(function(t){return t.clientId})})})},lT.clearPersistence=function(n){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return lT.cs()?(e=n+lT.Hc,[4,gE.delete(e)]):[2,Promise.resolve()];case 1:return t.sent(),[2]}})})},Object.defineProperty(lT.prototype,"Co",{get:function(){return this.Bc},enumerable:!0,configurable:!0}),lT.prototype.Po=function(t){return ig(this.Co,"Cannot initialize MutationQueue before persistence is started."),ME.ks(t,this.serializer,this.Cs,this.As)},lT.prototype.Fo=function(){return ig(this.Co,"Cannot initialize TargetCache before persistence is started."),this.Oo},lT.prototype.No=function(){return ig(this.Co,"Cannot initialize RemoteDocumentCache before persistence is started."),this.so},lT.prototype.Uo=function(){return ig(this.Co,"Cannot initialize IndexManager before persistence is started."),this.Cs},lT.prototype.runTransaction=function(n,t,r){var i=this;tg("IndexedDbPersistence","Starting transaction:",n);var o,e=t.endsWith("idempotent"),s=t.startsWith("readonly")?e?"readonly-idempotent":"readonly":e?"readwrite-idempotent":"readwrite";return this.$c.runTransaction(s,eT,function(e){return o=new cT(e,i.ea.next()),"readwrite-primary"===t||"readwrite-primary-idempotent"===t?i.sa(e).next(function(t){return!!t||i.oa(e)}).next(function(t){if(!t)throw eg("Failed to obtain primary lease for action '"+n+"'."),i.isPrimary=!1,i.Lc.$r(function(){return i.zc(!1)}),new yg(vg.FAILED_PRECONDITION,vE);return r(o)}).next(function(t){return i.ca(e).next(function(){return t})}):i._a(e).next(function(){return r(o)})}).then(function(t){return o.ss(),t})},lT.prototype._a=function(t){var e=this;return pT(t).get(OI.key).next(function(t){if(null!==t&&e.da(t.leaseTimestampMs,5e3)&&!e.ma(t.ownerId)&&!e.aa(t)&&!t.allowTabSynchronization)throw new yg(vg.FAILED_PRECONDITION,uT)})},lT.prototype.ca=function(t){var e=new OI(this.clientId,this.allowTabSynchronization,Date.now());return pT(t).put(OI.key,e)},lT.cs=function(){return gE.cs()},lT.Ia=function(t){var e=t.s.projectId;return t.s.o||(e+="."+t.s.database),"firestore/"+t.persistenceKey+"/"+e+"/"},lT.prototype.ha=function(t){var e=this,n=pT(t);return n.get(OI.key).next(function(t){return e.aa(t)?(tg("IndexedDbPersistence","Releasing primary lease."),n.delete(OI.key)):pE.resolve()})},lT.prototype.da=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(eg("Detected an update time that is in the future: "+t+" > "+n),1))},lT.prototype.ta=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Qc=function(){t.Lc.$r(function(){return t.inForeground="visible"===t.document.visibilityState,t.Zc()})},this.document.addEventListener("visibilitychange",this.Qc),this.inForeground="visible"===this.document.visibilityState)},lT.prototype.ga=function(){this.Qc&&(ig(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.Qc),this.Qc=null)},lT.prototype.na=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.Mc=function(){t.pa(),t.Lc.$r(function(){return t.shutdown()})},this.window.addEventListener("unload",this.Mc))},lT.prototype.ba=function(){this.Mc&&(ig("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.Mc),this.Mc=null)},lT.prototype.ma=function(t){try{var e=null!==this.Jc.getItem(this.wa(t));return tg("IndexedDbPersistence","Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return eg("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},lT.prototype.pa=function(){try{this.Jc.setItem(this.wa(this.clientId),String(Date.now()))}catch(t){eg("Failed to set zombie client id.",t)}},lT.prototype.ya=function(){try{this.Jc.removeItem(this.wa(this.clientId))}catch(t){}},lT.prototype.wa=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},lT.Hc="main",lT);function lT(t,e,n,r,i,o,s,a){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Lc=o,this.qc=a,this.Bc=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Mc=null,this.inForeground=!1,this.Qc=null,this.Gc=null,this.Wc=Number.NEGATIVE_INFINITY,this.zc=function(t){return Promise.resolve()},this.As=new vT(this,i),this.Kc=e+lT.Hc,this.serializer=new oT(s),this.document=r.document,this.Oo=new iI(this.As,this.serializer),this.Cs=new nT,this.so=new vI(this.serializer,this.Cs),!r.window||!r.window.localStorage)throw new yg(vg.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.Jc=this.window.localStorage}function fT(t,e){var n=aT.call(this)||this;return n.Xs=t,n.Zo=e,n}function pT(t){return t.store(OI.store)}function dT(t){return t.store(ZI.store)}var vT=(yT.prototype.$h=function(t){var n=this.Ea(t);return this.db.Fo().wc(t).next(function(e){return n.next(function(t){return e+t})})},yT.prototype.Ea=function(t){var e=0;return this.tc(t,function(t){e++}).next(function(){return e})},yT.prototype.ce=function(t,e){return this.db.Fo().ce(t,e)},yT.prototype.tc=function(t,n){return this.Da(t,function(t,e){return n(e)})},yT.prototype.Ao=function(t){this.Ta=t},yT.prototype.Du=function(t,e){return gT(t,e)},yT.prototype.Ru=function(t,e){return gT(t,e)},yT.prototype.nc=function(t,e,n){return this.db.Fo().nc(t,e,n)},yT.prototype.Zs=function(t,e){return gT(t,e)},yT.prototype.Sa=function(t,e){return this.Ta.Ou(e)?pE.resolve(!0):(r=e,i=!1,BE(n=t).Rs(function(t){return UE(n,t,r).next(function(t){return t&&(i=!0),pE.resolve(!t)})}).next(function(){return i}));var n,r,i},yT.prototype.ic=function(r,i){var o=this,s=this.db.No().Wo(),a=[],u=0;return this.Da(r,function(e,t){if(t<=i){var n=o.Sa(r,e).next(function(t){if(!t)return u++,s.Zu(r,e).next(function(){return s.$u(e),pI(r).delete([0,iE(e.path)])})});a.push(n)}}).next(function(){return pE.Wu(a)}).next(function(){return s.apply(r)}).next(function(){return u})},yT.prototype.removeTarget=function(t,e){var n=e.di(t.Zo);return this.db.Fo().nh(t,n)},yT.prototype.ih=function(t,e){return gT(t,e)},yT.prototype.Da=function(t,o){var s,e=pI(t),a=J_.Mr;return e.Ss({index:GI.documentTargetsIndex},function(t,e){var n=t[0],r=(t[1],e.path),i=e.sequenceNumber;0===n?(a!==J_.Mr&&o(new sm(aE(s)),a),a=i,s=r):a=J_.Mr}).next(function(){a!==J_.Mr&&o(new sm(aE(s)),a)})},yT.prototype.ec=function(t){return this.db.No().Cc(t)},yT);function yT(t,e){this.db=t,this.Ta=null,this.Wh=new rI(this,e)}function gT(t,e){return pI(t).put((n=e,r=t.Zo,new GI(0,iE(n.path),r)));var n,r}var mT=(_T.prototype.xo=function(t){this.Ra=t},_T.prototype.do=function(e,r,i,o){var s=this;return ig(void 0!==this.Ra,"setLocalDocumentsView() not called"),r.Jn()||i.isEqual(em.MIN)?this.Ca(e,r):this.Ra.fo(e,o).next(function(t){var n=s.Aa(r,t);return(r.ii()||r.ei())&&s.Pa(r.Fn,n,o,i)?s.Ca(e,r):($y()<=0&&tg("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),r.toString()),s.Ra.do(e,r,i).next(function(e){return n.forEach(function(t){e=e.lt(t.key,t)}),e}))})},_T.prototype.Aa=function(n,t){var r=new Em(function(t,e){return n.Xn(t,e)});return t.forEach(function(t,e){e instanceof Hw&&n.matches(e)&&(r=r.add(e))}),r},_T.prototype.Pa=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||0<i.version.h(r))},_T.prototype.Ca=function(t,e){return $y()<=0&&tg("IndexFreeQueryEngine","Using full collection scan to execute query: %s",e.toString()),this.Ra.do(t,e,em.MIN)},_T),wT=(bT.prototype.Ns=function(t){return pE.resolve(0===this.oo.length)},bT.prototype.Os=function(t,e,n){var r=e.batchId,i=this.Oa(r,"acknowledged");ig(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.oo[i];return ig(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,pE.resolve()},bT.prototype.Vs=function(t){return pE.resolve(this.lastStreamToken)},bT.prototype.Us=function(t,e){return this.lastStreamToken=e,pE.resolve()},bT.prototype.xs=function(t,e,n,r){ig(0!==r.length,"Mutation batches should not be empty");var i=this.ka;this.ka++,0<this.oo.length&&ig(this.oo[this.oo.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new uE(i,e,n,r);this.oo.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Na=this.Na.add(new lE(u.key,i)),this.Cs.Ls(t,u.key.path.H())}return pE.resolve(o)},bT.prototype.qs=function(t,e){return pE.resolve(this.Fa(e))},bT.prototype.Ms=function(t,e){var n=this.Fa(e);return ig(null!=n,"Failed to find local mutation batch."),pE.resolve(n.keys())},bT.prototype.Qs=function(t,e){var n=e+1,r=this.Va(n),i=r<0?0:r;return pE.resolve(this.oo.length>i?this.oo[i]:null)},bT.prototype.Gs=function(){return pE.resolve(0===this.oo.length?-1:this.ka-1)},bT.prototype.Ws=function(t){return pE.resolve(this.oo.slice())},bT.prototype.zs=function(t,n){var r=this,e=new lE(n,0),i=new lE(n,Number.POSITIVE_INFINITY),o=[];return this.Na.Lt([e,i],function(t){ig(n.isEqual(t.key),"Should only iterate over a single key's batches");var e=r.Fa(t.Fu);ig(null!==e,"Batches in the index must exist in the main table"),o.push(e)}),pE.resolve(o)},bT.prototype.Ks=function(t,e){var r=this,i=new Em(ag);return e.forEach(function(e){var t=new lE(e,0),n=new lE(e,Number.POSITIVE_INFINITY);r.Na.Lt([t,n],function(t){ig(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),i=i.add(t.Fu)})}),pE.resolve(this.Ua(i))},bT.prototype.Js=function(t,e){ig(!e.ui(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=e.path,r=n.length+1,i=n;sm.ht(i)||(i=i.child(""));var o=new lE(new sm(i),0),s=new Em(ag);return this.Na.qt(function(t){var e=t.key.path;return!!n.$(e)&&(e.length===r&&(s=s.add(t.Fu)),!0)},o),pE.resolve(this.Ua(s))},bT.prototype.Ua=function(t){var n=this,r=[];return t.forEach(function(t){var e=n.Fa(t);null!==e&&r.push(e)}),r},bT.prototype.Ys=function(n,r){var i=this;ig(0===this.Oa(r.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.oo.shift();var o=this.Na;return pE.forEach(r.mutations,function(t){var e=new lE(t.key,r.batchId);return o=o.delete(e),i.As.Zs(n,t.key)}).next(function(){i.Na=o})},bT.prototype.$s=function(t){},bT.prototype.Ou=function(t,e){var n=new lE(e,0),r=this.Na.Bt(n);return pE.resolve(e.isEqual(r&&r.key))},bT.prototype.to=function(t){return 0===this.oo.length&&ig(this.Na.J(),"Document leak -- detected dangling mutation references when queue is empty."),pE.resolve()},bT.prototype.Oa=function(t,e){var n=this.Va(t);return ig(0<=n&&n<this.oo.length,"Batches must exist to be "+e),n},bT.prototype.Va=function(t){return 0===this.oo.length?0:t-this.oo[0].batchId},bT.prototype.Fa=function(t){var e=this.Va(t);if(e<0||e>=this.oo.length)return null;var n=this.oo[e];return ig(n.batchId===t,"If found batch must match"),n},bT);function bT(t,e){this.Cs=t,this.As=e,this.oo=[],this.ka=1,this.lastStreamToken=xb.ai,this.Na=new Em(lE.Sn)}function _T(){}var ET,IT,TT,ST,CT=(XT.prototype.Yu=function(t,e,n){ig(!n.isEqual(em.MIN),"Cannot add a document with a read time of zero");var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.xa(e);return this.docs=this.docs.lt(r,{bc:e,size:s,readTime:n}),this.size+=s-o,this.Cs.Ls(t,r.path.H())},XT.prototype.$u=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},XT.prototype.Zu=function(t,e){var n=this.docs.get(e);return pE.resolve(n?n.bc:null)},XT.prototype.getEntries=function(t,e){var n=this,r=s_();return e.forEach(function(t){var e=n.docs.get(t);r=r.lt(t,e?e.bc:null)}),pE.resolve(r)},XT.prototype.do=function(t,e,n){ig(!e.ui(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=u_(),i=new sm(e.path.child("")),o=this.docs.yt(i);o.St();){var s=o.Dt(),a=s.key,u=s.value,c=u.bc,h=u.readTime;if(!e.path.$(a.path))break;h.h(n)<=0||c instanceof Hw&&e.matches(c)&&(r=r.lt(c.key,c))}return pE.resolve(r)},XT.prototype.ja=function(t,e){return pE.forEach(this.docs,function(t){return e(t)})},XT.prototype.Eh=function(t,e){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},XT.prototype.Sh=function(t){return pE.resolve(em.MIN)},XT.prototype.Wo=function(t){return new XT.Rc(this)},XT.prototype.Cc=function(t){return pE.resolve(this.size)},XT.Rc=(Es(JT,ST=dE),JT.prototype.es=function(n){var r=this,i=[];return this.Ku.forEach(function(t,e){e?i.push(r.Ac.Yu(n,e,r.readTime)):r.Ac.$u(t)}),pE.Wu(i)},JT.prototype.ts=function(t,e){return this.Ac.Zu(t,e)},JT.prototype.ns=function(t,e){return this.Ac.getEntries(t,e)},JT),XT),NT=(YT.prototype.ce=function(t,n){return this.La.forEach(function(t,e){return n(e)}),pE.resolve()},YT.prototype.Jo=function(t){return pE.resolve(this.lastRemoteSnapshotVersion)},YT.prototype.hc=function(t){return pE.resolve(this.qa)},YT.prototype.fh=function(t){var e=this.uc.after(this.highestTargetId);return this.highestTargetId=e,pE.resolve(e)},YT.prototype.eh=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.qa&&(this.qa=e),pE.resolve()},YT.prototype.cc=function(t){this.La.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.qa&&(this.qa=t.sequenceNumber)},YT.prototype.lh=function(t,e){return ig(!this.La.has(e.target),"Adding a target that already exists"),this.cc(e),this.targetCount+=1,pE.resolve()},YT.prototype.nh=function(t,e){return ig(this.La.has(e.target),"Updating a non-existent target"),this.cc(e),pE.resolve()},YT.prototype.fc=function(t,e){return ig(0<this.targetCount,"Removing a target from an empty cache"),ig(this.La.has(e.target),"Removing a non-existent target from the cache"),this.La.delete(e.target),this.Ba.Pu(e.targetId),this.targetCount-=1,pE.resolve()},YT.prototype.nc=function(n,r,i){var o=this,s=0,a=[];return this.La.forEach(function(t,e){e.sequenceNumber<=r&&null===i.get(e.targetId)&&(o.La.delete(t),a.push(o.lc(n,e.targetId)),s++)}),pE.Wu(a).next(function(){return s})},YT.prototype.wc=function(t){return pE.resolve(this.targetCount)},YT.prototype.ah=function(t,e){var n=this.La.get(e)||null;return pE.resolve(n)},YT.prototype.ye=function(t,e){return rg("Not yet implemented.")},YT.prototype.$o=function(e,t,n){this.Ba.Su(t,n);var r=this.persistence.As,i=[];return r&&t.forEach(function(t){i.push(r.Du(e,t))}),pE.Wu(i)},YT.prototype.Xo=function(e,t,n){this.Ba.Au(t,n);var r=this.persistence.As,i=[];return r&&t.forEach(function(t){i.push(r.Ru(e,t))}),pE.Wu(i)},YT.prototype.lc=function(t,e){return this.Ba.Pu(e),pE.resolve()},YT.prototype.wh=function(t,e){var n=this.Ba.Nu(e);return pE.resolve(n)},YT.prototype.Ou=function(t,e){return pE.resolve(this.Ba.Ou(e))},YT),AT=(QT.Ga=function(t,e){return new QT(t,function(t){return new RT(t,e)})},QT.Wa=function(t){return new QT(t,function(t){return new OT(t)})},QT.prototype.shutdown=function(){return this.Bc=!1,Promise.resolve()},Object.defineProperty(QT.prototype,"Co",{get:function(){return this.Bc},enumerable:!0,configurable:!0}),QT.prototype.gh=function(){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){return[2,[this.clientId]]})})},QT.prototype.ra=function(t){return t(!0)},QT.prototype.ua=function(){},QT.prototype.yh=function(t){},QT.prototype.Uo=function(){return this.Cs},QT.prototype.Po=function(t){var e=this.Ma[t.v()];return e||(e=new wT(this.Cs,this.As),this.Ma[t.v()]=e),e},QT.prototype.Fo=function(){return this.Oo},QT.prototype.No=function(){return this.so},QT.prototype.runTransaction=function(t,e,n){var r=this;tg("MemoryPersistence","Starting transaction:",t);var i=new kT(this.ea.next());return this.As.za(),n(i).next(function(t){return r.As.Ka(i).next(function(){return t})}).Qu().then(function(t){return i.ss(),t})},QT.prototype.Ha=function(e,n){return pE.zu((t=this.Ma,r=[],Rg(t,function(t,e){return r.push(e)}),r).map(function(t){return function(){return t.Ou(e,n)}}));var t,r},QT),kT=(Es(KT,TT=yE),KT),OT=(Object.defineProperty(zT.prototype,"Ya",{get:function(){if(this.Ja)return this.Ja;throw rg("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),zT.prototype.Ao=function(t){this.Ta=t},zT.prototype.Du=function(t,e){return this.Ya.delete(e),pE.resolve()},zT.prototype.Ru=function(t,e){return this.Ya.add(e),pE.resolve()},zT.prototype.Zs=function(t,e){return this.Ya.add(e),pE.resolve()},zT.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.Fo();return r.wh(t,e.targetId).next(function(t){t.forEach(function(t){return n.Ya.add(t)})}).next(function(){return r.fc(t,e)})},zT.prototype.za=function(){this.Ja=new Set},zT.prototype.Ka=function(t){var n=this,r=this.persistence.No().Wo();return pE.forEach(this.Ya,function(e){return n.Xa(t,e).next(function(t){t||r.$u(e)})}).next(function(){return n.Ja=null,r.apply(t)})},zT.prototype.ih=function(t,e){var n=this;return this.Xa(t,e).next(function(t){t?n.Ya.delete(e):n.Ya.add(e)})},zT.prototype.Qa=function(t){return 0},zT.prototype.Xa=function(t,e){var n=this;return pE.zu([function(){return n.persistence.Fo().Ou(t,e)},function(){return n.persistence.Ha(t,e)},function(){return pE.resolve(n.Ta.Ou(e))}])},zT),RT=(GT.prototype.za=function(){},GT.prototype.Ka=function(t){return pE.resolve()},GT.prototype.ce=function(t,e){return this.persistence.Fo().ce(t,e)},GT.prototype.$h=function(t){var n=this.Za(t);return this.persistence.Fo().wc(t).next(function(e){return n.next(function(t){return e+t})})},GT.prototype.Za=function(t){var e=0;return this.tc(t,function(t){e++}).next(function(){return e})},GT.prototype.tc=function(n,r){var i=this;return pE.forEach(this.$a,function(t,e){return i.Sa(n,t,e).next(function(t){return t?pE.resolve():r(e)})})},GT.prototype.Ao=function(t){this.Ta=t},GT.prototype.nc=function(t,e,n){return this.persistence.Fo().nc(t,e,n)},GT.prototype.ic=function(t,n){var r=this,i=0,e=this.persistence.No(),o=e.Wo();return e.ja(t,function(e){return r.Sa(t,e,n).next(function(t){t||(i++,o.$u(e))})}).next(function(){return o.apply(t)}).next(function(){return i})},GT.prototype.Zs=function(t,e){return this.$a.set(e,t.Zo),pE.resolve()},GT.prototype.removeTarget=function(t,e){var n=e.di(t.Zo);return this.persistence.Fo().nh(t,n)},GT.prototype.Du=function(t,e){return this.$a.set(e,t.Zo),pE.resolve()},GT.prototype.Ru=function(t,e){return this.$a.set(e,t.Zo),pE.resolve()},GT.prototype.ih=function(t,e){return this.$a.set(e,t.Zo),pE.resolve()},GT.prototype.Qa=function(t){var e=t.key.toString().length;return t instanceof Hw&&(e+=t.data().bn()),e},GT.prototype.Sa=function(t,e,n){var r=this;return pE.zu([function(){return r.persistence.Ha(t,e)},function(){return pE.resolve(r.Ta.Ou(e))},function(){return r.persistence.Fo().Ou(t,e)},function(){var t=r.$a.get(e);return pE.resolve(void 0!==t&&n<t)}])},GT.prototype.ec=function(t){return this.persistence.No().Cc(t)},GT),DT=(HT.prototype.reset=function(){this.ef=0},HT.prototype.sf=function(){this.ef=this.if},HT.prototype.hf=function(t){var e=this;this.cancel();var n=Math.floor(this.ef+this.cf()),r=Math.max(0,Date.now()-this.uf),i=Math.max(0,n-r);0<this.ef&&tg("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.ef+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.rf=this.Lc.fu(this.Gr,i,function(){return e.uf=Date.now(),t()}),this.ef*=this.nf,this.ef<this.tf&&(this.ef=this.tf),this.ef>this.if&&(this.ef=this.if)},HT.prototype.cancel=function(){null!==this.rf&&(this.rf.cancel(),this.rf=null)},HT.prototype.cf=function(){return(Math.random()-.5)*this.ef},HT),PT=(WT.prototype.wf=function(){return 1===this.state||2===this.state||4===this.state},WT.prototype.mf=function(){return 2===this.state},WT.prototype.start=function(){3!==this.state?(ig(0===this.state,"Already started"),this.auth()):this.pf()},WT.prototype.stop=function(){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return this.wf()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},WT.prototype.gf=function(){ig(!this.wf(),"Can only inhibit backoff in a stopped state"),this.state=0,this.vf.reset()},WT.prototype.bf=function(){var t=this;this.mf()&&null===this.df&&(this.df=this.Lc.fu(this.af,6e4,function(){return t.yf()}))},WT.prototype._f=function(t){this.If(),this.stream.send(t)},WT.prototype.yf=function(){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){return this.mf()?[2,this.close(0)]:[2]})})},WT.prototype.If=function(){this.df&&(this.df.cancel(),this.df=null)},WT.prototype.close=function(e,n){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return ig(this.wf(),"Only started streams should be closed."),ig(3===e||fb(n),"Can't provide an error when not in an error state."),this.If(),this.vf.cancel(),this.lf++,3!==e?this.vf.reset():n&&n.code===vg.RESOURCE_EXHAUSTED?(eg(n.toString()),eg("Using maximum backoff delay to prevent overloading the backend."),this.vf.sf()):n&&n.code===vg.UNAUTHENTICATED&&this.ff.I(),null!==this.stream&&(this.Tf(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ef(n)];case 1:return t.sent(),[2]}})})},WT.prototype.Tf=function(){},WT.prototype.auth=function(){var n=this;ig(0===this.state,"Must be in initial state to auth"),this.state=1;var t=this.Df(this.lf),e=this.lf;this.ff.getToken().then(function(t){n.lf===e&&n.Sf(t)},function(e){t(function(){var t=new yg(vg.UNKNOWN,"Fetching auth token failed: "+e.message);return n.Rf(t)})})},WT.prototype.Sf=function(t){var e=this;ig(1===this.state,"Trying to start stream in a non-starting state");var n=this.Df(this.lf);this.stream=this.Cf(t),this.stream.Af(function(){n(function(){return ig(1===e.state,"Expected stream to be in state Starting, but was "+e.state),e.state=2,e.listener.Af()})}),this.stream.Ef(function(t){n(function(){return e.Rf(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},WT.prototype.pf=function(){var t=this;ig(3===this.state,"Should only perform backoff when in Error state"),this.state=4,this.vf.hf(function(){return Ts(t,void 0,void 0,function(){return Ss(this,function(t){return ig(4===this.state,"Backoff elapsed but state is now: "+this.state),this.state=0,this.start(),ig(this.wf(),"PersistentStream should have started"),[2]})})})},WT.prototype.Rf=function(t){return ig(this.wf(),"Can't handle server close on non-started stream"),tg("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},WT.prototype.Df=function(e){var n=this;return function(t){n.Lc.$r(function(){return n.lf===e?t():(tg("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},WT),xT=(Es(BT,IT=PT),BT.prototype.Cf=function(t){return this.connection.Pf("Listen",t)},BT.prototype.onMessage=function(t){this.vf.reset();var e=this.serializer.Ze(t),n=this.serializer.nr(t);return this.listener.kf(e,n)},BT.prototype.watch=function(t){var e={};e.database=this.serializer.je,e.addTarget=this.serializer.Yn(t);var n=this.serializer.Tr(t);n&&(e.labels=n),this._f(e)},BT.prototype.Nf=function(t){var e={};e.database=this.serializer.je,e.removeTarget=t,this._f(e)},BT),LT=(Es(VT,ET=PT),Object.defineProperty(VT.prototype,"Ff",{get:function(){return this.Of},enumerable:!0,configurable:!0}),VT.prototype.start=function(){this.Of=!1,ET.prototype.start.call(this)},VT.prototype.Tf=function(){this.Of&&this.Vf([])},VT.prototype.Cf=function(t){return this.connection.Pf("Write",t)},VT.prototype.onMessage=function(t){if(ig(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=this.serializer.Re(t.streamToken),this.Of){this.vf.reset();var e=this.serializer.lr(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.Uf(n,e)}return ig(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.Of=!0,this.listener.xf()},VT.prototype.jf=function(){ig(this.mf(),"Writing handshake requires an opened stream"),ig(!this.Of,"Handshake already completed");var t={};t.database=this.serializer.je,this._f(t)},VT.prototype.Vf=function(t){var e=this;ig(this.mf(),"Writing mutations requires an opened stream"),ig(this.Of,"Handshake must be complete before writing mutations"),ig(0<this.lastStreamToken.bn(),"Trying to write mutation without a token");var n={streamToken:this.serializer.Se(this.lastStreamToken),writes:t.map(function(t){return e.serializer.ir(t)})};this._f(n)},VT),MT=(qT.prototype.Lf=function(t){return new LT(this.Lc,this.connection,this.credentials,this.serializer,t)},qT.prototype.qf=function(t){return new xT(this.Lc,this.connection,this.credentials,this.serializer,t)},qT.prototype.commit=function(t){var e=this,n={database:this.serializer.je,writes:t.map(function(t){return e.serializer.ir(t)})};return this.Bf("Commit",n).then(function(t){return e.serializer.lr(t.writeResults,t.commitTime)})},qT.prototype.lookup=function(e){var i=this,t={database:this.serializer.je,documents:e.map(function(t){return i.serializer.Oe(t)})};return this.Mf("BatchGetDocuments",t).then(function(t){var n=o_();t.forEach(function(t){var e=i.serializer.Ye(t);n=n.lt(e.key,e)});var r=[];return e.forEach(function(t){var e=n.get(t);ig(!!e,"Missing entity in write response for "+t),r.push(e)}),r})},qT.prototype.Bf=function(e,n){var r=this;return this.credentials.getToken().then(function(t){return r.connection.Bf(e,n,t)}).catch(function(t){throw t.code===vg.UNAUTHENTICATED&&r.credentials.I(),t})},qT.prototype.Mf=function(e,n){var r=this;return this.credentials.getToken().then(function(t){return r.connection.Mf(e,n,t)}).catch(function(t){throw t.code===vg.UNAUTHENTICATED&&r.credentials.I(),t})},qT),FT=(jT.documentId=function(){return jT.Gf},jT.prototype.isEqual=function(t){if(!(t instanceof jT))throw Kg("isEqual","FieldPath",1,t);return this.Qf.isEqual(t.Qf)},jT.Gf=new jT(om.st().nt()),jT),UT=new RegExp("[~\\*/\\[\\]]");function jT(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t,e,n,r){if(!(e instanceof Array)||e.length<r)throw new yg(vg.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" argument to be an array with at least "+Xg(r,"element")+".")}("FieldPath",t,"fieldNames",1);for(var n=0;n<t.length;++n)if(Fg("FieldPath","string",n,t[n]),0===t[n].length)throw new yg(vg.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.Qf=new om(t)}function qT(t,e,n,r){this.Lc=t,this.connection=e,this.credentials=n,this.serializer=r}function VT(t,e,n,r,i){var o=ET.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this;return o.serializer=r,o.Of=!1,o.lastStreamToken=xb.ai,o}function BT(t,e,n,r,i){var o=IT.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this;return o.serializer=r,o}function WT(t,e,n,r,i,o){this.Lc=t,this.af=n,this.connection=r,this.ff=i,this.listener=o,this.state=0,this.lf=0,this.df=null,this.stream=null,this.vf=new DT(t,e)}function HT(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Lc=t,this.Gr=e,this.tf=n,this.nf=r,this.if=i,this.ef=0,this.rf=null,this.uf=Date.now(),this.reset()}function GT(t,e){this.persistence=t,this.Ta=null,this.$a=new fE(function(t){return iE(t.path)}),this.Wh=new rI(this,e)}function zT(t){this.persistence=t,this.Ta=null,this.Ja=null}function KT(t){var e=TT.call(this)||this;return e.Zo=t,e}function QT(t,e){var n=this;this.clientId=t,this.Ma={},this.ea=new J_(0),this.Bc=!1,this.Bc=!0,this.As=e(this),this.Oo=new NT(this),this.Cs=new EI,this.so=new CT(this.Cs,function(t){return n.As.Qa(t)})}function YT(t){this.persistence=t,this.La=new fE(function(t){return t.canonicalId()}),this.lastRemoteSnapshotVersion=em.MIN,this.highestTargetId=0,this.qa=0,this.Ba=new hE,this.targetCount=0,this.uc=WE.ro()}function XT(t,e){this.Cs=t,this.xa=e,this.docs=new am(sm.G),this.size=0}function JT(t){var e=ST.call(this)||this;return e.Ac=t,e}var $T,ZT,tS,eS,nS,rS=(bS.delete=function(){return Pg("FieldValue.delete",arguments),iS.instance},bS.serverTimestamp=function(){return Pg("FieldValue.serverTimestamp",arguments),oS.instance},bS.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Lg("FieldValue.arrayUnion",arguments,1),new sS(t)},bS.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Lg("FieldValue.arrayRemove",arguments,1),new aS(t)},bS.increment=function(t){return Fg("FieldValue.increment","number",1,t),xg("FieldValue.increment",arguments,1),new uS(t)},bS.prototype.isEqual=function(t){return this===t},bS),iS=(Es(wS,nS=rS),wS.instance=new wS,wS),oS=(Es(mS,eS=rS),mS.instance=new mS,mS),sS=(Es(gS,tS=rS),gS),aS=(Es(yS,ZT=rS),yS),uS=(Es(vS,$T=rS),vS),cS=G_(rS,"Use FieldValue.<field>() instead."),hS=/^__.*__$/,lS=(dS.prototype.Hf=function(t,e){var n=[];return null!==this.un?n.push(new Ym(t,this.data,this.un,e)):n.push(new Qm(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new Xm(t,this.fieldTransforms)),n},dS),fS=(pS.prototype.Hf=function(t,e){var n=[new Ym(t,this.data,this.un,e)];return 0<this.fieldTransforms.length&&n.push(new Xm(t,this.fieldTransforms)),n},pS);function pS(t,e,n){this.data=t,this.un=e,this.fieldTransforms=n}function dS(t,e,n){this.data=t,this.un=e,this.fieldTransforms=n}function vS(t){var e=$T.call(this,"FieldValue.increment")||this;return e.Kf=t,e}function yS(t){var e=ZT.call(this,"FieldValue.arrayRemove")||this;return e.zf=t,e}function gS(t){var e=tS.call(this,"FieldValue.arrayUnion")||this;return e.zf=t,e}function mS(){return eS.call(this,"FieldValue.serverTimestamp")||this}function wS(){return nS.call(this,"FieldValue.delete")||this}function bS(t){this.Wf=t}function _S(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rg("Unexpected case for UserDataSource: "+t)}}var ES=(CS.prototype.$f=function(t){var e=null==this.path?null:this.path.child(t),n=new CS(this.Jf,this.methodName,e,!1,this.fieldTransforms,this.un);return n.Zf(t),n},CS.prototype.tl=function(t){var e=null==this.path?null:this.path.child(t),n=new CS(this.Jf,this.methodName,e,!1,this.fieldTransforms,this.un);return n.Xf(),n},CS.prototype.nl=function(t){return new CS(this.Jf,this.methodName,null,!0,this.fieldTransforms,this.un)},CS.prototype.il=function(t){var e=null===this.path||this.path.J()?"":" (found in field "+this.path.toString()+")";return new yg(vg.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},CS.prototype.contains=function(e){return void 0!==this.un.find(function(t){return e.$(t)})||void 0!==this.fieldTransforms.find(function(t){return e.$(t.field)})},CS.prototype.Xf=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.Zf(this.path.get(t))},CS.prototype.Zf=function(t){if(0===t.length)throw this.il("Document fields must not be empty");if(_S(this.Jf)&&hS.test(t))throw this.il('Document fields cannot begin and end with "__"')},CS),IS=function(t,e){this.s=t,this.key=e},TS=(SS.prototype.rl=function(t,e){var n=new ES(0,t,om.et);AS("Data must be an object, but it was:",n,e);var r=this.ul(e,n);return new lS(r,null,n.fieldTransforms)},SS.prototype.sl=function(t,e,n){var r=new ES(2,t,om.et);AS("Data must be an object, but it was:",r,e);var i,o,s=this.ul(e,r);if(n){for(var a=new Em(om.G),u=0,c=n;u<c.length;u++){var h=c[u],l=void 0;if(h instanceof FT)l=h.Qf;else{if("string"!=typeof h)throw rg("Expected stringOrFieldPath to be a string or a FieldPath");l=OS(t,h)}if(!r.contains(l))throw new yg(vg.INVALID_ARGUMENT,"Field '"+l+"' is specified in your field mask but missing from your input data.");a=a.add(l)}i=Hm.Jt(a),o=r.fieldTransforms.filter(function(t){return i.Xt(t.field)})}else i=Hm.Yt(r.un),o=r.fieldTransforms;return new lS(s,i,o)},SS.prototype.ol=function(o,t){var s=this,a=new ES(1,o,om.et);AS("Data must be an object, but it was:",a,t);var u=new Em(om.G),c=qw.vn();Rg(t,function(t,e){var n=OS(o,t),r=a.tl(n);if((e=s.hl(e,r))instanceof iS)u=u.add(n);else{var i=s.ul(e,r);null!=i&&(u=u.add(n),c.set(n,i))}});var e=Hm.Jt(u);return new fS(c.cn(),e,a.fieldTransforms)},SS.prototype.cl=function(t,e,n,r){var i=new ES(1,t,om.et),o=[kS(t,e)],s=[n];if(r.length%2!=0)throw new yg(vg.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<r.length;a+=2)o.push(kS(t,r[a])),s.push(r[a+1]);var u=new Em(om.G),c=qw.vn();for(a=0;a<o.length;++a){var h=o[a],l=i.tl(h),f=this.hl(s[a],l);if(f instanceof iS)u=u.add(h);else{var p=this.ul(f,l);null!=p&&(u=u.add(h),c.set(h,p))}}var d=Hm.Jt(u);return new fS(c.cn(),d,i.fieldTransforms)},SS.prototype.al=function(t,e,n){void 0===n&&(n=!1);var r=new ES(n?4:3,t,om.et),i=this.ul(e,r);return ig(null!=i,"Parsed data should not be null."),ig(0===r.fieldTransforms.length,"Field transforms should have been disallowed."),i},SS.prototype.hl=function(t,e){try{return this.el(t)}catch(t){var n=RS(t);throw e.il(n)}},SS.prototype.ul=function(t,e){if(NS(t=this.hl(t,e)))return AS("Unsupported field value:",e,t),this.fl(t,e);if(t instanceof rS)return this.ll(t,e),null;if(e.path&&e.un.push(e.path),t instanceof Array){if(e.Yf&&4!==e.Jf)throw e.il("Nested arrays are not supported");return this.dl(t,e)}return this.vl(t,e)},SS.prototype.fl=function(t,r){var i=this,o=new am(ag);return Dg(t)?r.path&&0<r.path.length&&r.un.push(r.path):Rg(t,function(t,e){var n=i.ul(e,r.$f(t));null!=n&&(o=o.lt(t,n))}),new qw(o)},SS.prototype.dl=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=o[i],a=this.ul(s,e.nl(r));null==a&&(a=ew.yn),n.push(a),r++}return new Bw(n)},SS.prototype.ll=function(t,e){if(!_S(e.Jf))throw e.il(t.Wf+"() can only be used with update() and set()");if(null===e.path)throw e.il(t.Wf+"() is not currently supported inside arrays");if(t instanceof iS){if(2!==e.Jf)throw 1===e.Jf?(ig(0<e.path.length,"FieldValue.delete() at the top level should have already been handled."),e.il("FieldValue.delete() can only appear at the top level of your update data")):e.il("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.un.push(e.path)}else if(t instanceof oS)e.fieldTransforms.push(new Gm(e.path,Tm.instance));else if(t instanceof sS){var n=this.wl(t.Wf,t.zf),r=new Sm(n);e.fieldTransforms.push(new Gm(e.path,r))}else if(t instanceof aS){n=this.wl(t.Wf,t.zf);var i=new Cm(n);e.fieldTransforms.push(new Gm(e.path,i))}else if(t instanceof uS){var o=this.al("FieldValue.increment",t.Kf),s=new Nm(o);e.fieldTransforms.push(new Gm(e.path,s))}else rg("Unknown FieldValue type: "+t)},SS.prototype.vl=function(t,e){if(null===t)return ew.yn;if("number"==typeof t)return pb(t)?new Dw(t):new Pw(t);if("boolean"==typeof t)return nw.of(t);if("string"==typeof t)return new xw(t);if(t instanceof Date)return new Lw(tm.fromDate(t));if(t instanceof tm)return new Lw(new tm(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof Zg)return new jw(t);if(t instanceof Y_)return new Fw(t);if(t instanceof IS)return new Uw(t.s,t.key);throw e.il("Unsupported field value: "+Hg(t))},SS.prototype.wl=function(r,t){var i=this;return t.map(function(t,e){var n=new ES(3,r,om.et);return i.ul(t,n.nl(e))})},SS);function SS(t){this.el=t}function CS(t,e,n,r,i,o){this.Jf=t,this.methodName=e,this.path=n,this.Yf=r,void 0===i&&this.Xf(),this.Yf=void 0!==r&&r,this.fieldTransforms=i||[],this.un=o||[]}function NS(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof tm||t instanceof Zg||t instanceof Y_||t instanceof IS||t instanceof rS)}function AS(t,e,n){if(!NS(n)||!Wg(n)){var r=Hg(n);throw"an object"===r?e.il(t+" a custom object"):e.il(t+" "+r)}}function kS(t,e){if(e instanceof FT)return e.Qf;if("string"==typeof e)return OS(t,e);throw new yg(vg.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function OS(e,t){try{return function(e){if(0<=e.search(UT))throw new yg(vg.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(FT.bind.apply(FT,ks([void 0],e.split("."))))}catch(t){throw new yg(vg.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t).Qf}catch(t){var n=RS(t);throw new yg(vg.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function RS(t){return t instanceof Error?t.message:t.toString()}var DS=(FS.prototype.lookup=function(r){return Ts(this,void 0,void 0,function(){var e,n=this;return Ss(this,function(t){switch(t.label){case 0:if(this._l(),0<this.mutations.length)throw new yg(vg.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.ml.lookup(r)];case 1:return(e=t.sent()).forEach(function(t){t instanceof Gw||t instanceof Hw?n.Il(t):rg("Document in a transaction was a "+t.constructor.name)}),[2,e]}})})},FS.prototype.set=function(t,e){this.write(e.Hf(t,this.in(t))),this.yl.add(t)},FS.prototype.update=function(t,e){try{this.write(e.Hf(t,this.Tl(t)))}catch(t){this.bl=t}this.yl.add(t)},FS.prototype.delete=function(t){this.write([new Jm(t,this.in(t))]),this.yl.add(t)},FS.prototype.commit=function(){return Ts(this,void 0,void 0,function(){var e,n=this;return Ss(this,function(t){switch(t.label){case 0:if(this._l(),this.bl)throw this.bl;return e=this.pl,this.mutations.forEach(function(t){e=e.remove(t.key)}),e.forEach(function(t,e){n.mutations.push(new $m(t,n.in(t)))}),[4,this.ml.commit(this.mutations)];case 1:return t.sent(),this.gl=!0,[2]}})})},FS.prototype.Il=function(t){var e;if(t instanceof Hw)e=t.version;else{if(!(t instanceof Gw))throw rg("Document in a transaction was a "+t.constructor.name);e=em.q()}var n=this.pl.get(t.key);if(null!==n){if(!e.isEqual(n))throw new yg(vg.ABORTED,"Document version changed between two reads.")}else this.pl=this.pl.lt(t.key,e)},FS.prototype.in=function(t){var e=this.pl.get(t);return!this.yl.has(t)&&e?zm.updateTime(e):zm.NONE},FS.prototype.Tl=function(t){var e=this.pl.get(t);if(this.yl.has(t)||!e)return zm.exists(!0);if(e.isEqual(em.q()))throw new yg(vg.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return zm.updateTime(e)},FS.prototype.write=function(t){this._l(),this.mutations=this.mutations.concat(t)},FS.prototype._l=function(){ig(!this.gl,"A transaction object cannot be used after its update callback has been invoked.")},FS),PS=(MS.prototype.Cl=function(){var t=this;0===this.Dl&&(this.Al("Unknown"),ig(null===this.Sl,"onlineStateTimer shouldn't be started yet"),this.Sl=this.Qr.fu("online_state_timeout",1e4,function(){return t.Sl=null,ig("Unknown"===t.state,"Timer should be canceled if we transitioned to a different state."),t.Pl("Backend didn't respond within 10 seconds."),t.Al("Offline"),Promise.resolve()}))},MS.prototype.kl=function(t){"Online"===this.state?(this.Al("Unknown"),ig(0===this.Dl,"watchStreamFailures must be 0"),ig(null===this.Sl,"onlineStateTimer must be null")):(this.Dl++,1<=this.Dl&&(this.Nl(),this.Pl("Connection failed 1 times. Most recent error: "+t.toString()),this.Al("Offline")))},MS.prototype.set=function(t){this.Nl(),this.Dl=0,"Online"===t&&(this.Rl=!1),this.Al(t)},MS.prototype.Al=function(t){t!==this.state&&(this.state=t,this.El(t))},MS.prototype.Pl=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rl?(eg(e),this.Rl=!1):tg("OnlineStateTracker",e)},MS.prototype.Nl=function(){null!==this.Sl&&(this.Sl.cancel(),this.Sl=null)},MS),xS=(LS.prototype.start=function(){return this.enableNetwork()},LS.prototype.enableNetwork=function(){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.jl()?(e=this.Wl,[4,this.zh.Vs()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.Jl()?this.Yl():this.ql.set("Unknown"),[4,this.Xl()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},LS.prototype.disableNetwork=function(){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.$l()];case 1:return t.sent(),this.ql.set("Offline"),[2]}})})},LS.prototype.$l=function(){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return[4,this.Wl.stop()];case 1:return t.sent(),[4,this.Bl.stop()];case 2:return t.sent(),0<this.Ol.length&&(tg("RemoteStore","Stopping write stream with "+this.Ol.length+" pending writes"),this.Ol=[]),this.Zl(),[2]}})})},LS.prototype.shutdown=function(){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return tg("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.$l()];case 1:return t.sent(),this.Ul.shutdown(),this.ql.set("Unknown"),[2]}})})},LS.prototype.listen=function(t){Ag(this.Fl,t.targetId)||(this.Fl[t.targetId]=t,this.Jl()?this.Yl():this.Bl.mf()&&this.td(t))},LS.prototype.nd=function(t){ig(Ag(this.Fl,t),"unlisten called on target no currently watched: "+t),delete this.Fl[t],this.Bl.mf()&&this.ed(t),Dg(this.Fl)&&(this.Bl.mf()?this.Bl.bf():this.jl()&&this.ql.set("Unknown"))},LS.prototype.ye=function(t){return this.Fl[t]||null},LS.prototype.be=function(t){return this.rd.be(t)},LS.prototype.td=function(t){this.Vl.Xi(t.targetId),this.Bl.watch(t)},LS.prototype.ed=function(t){this.Vl.Xi(t),this.Bl.Nf(t)},LS.prototype.Yl=function(){ig(this.Jl(),"startWatchStream() called when shouldStartWatchStream() is false."),this.Vl=new T_(this),this.Bl.start(),this.ql.Cl()},LS.prototype.Jl=function(){return this.jl()&&!this.Bl.wf()&&!Dg(this.Fl)},LS.prototype.jl=function(){return this.isPrimary&&this.networkEnabled},LS.prototype.Zl=function(){this.Vl=null},LS.prototype.Ml=function(){return Ts(this,void 0,void 0,function(){var n=this;return Ss(this,function(t){return Og(this.Fl,function(t,e){n.td(e)}),[2]})})},LS.prototype.Ql=function(e){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){return void 0===e&&ig(!this.Jl(),"Watch stream was stopped gracefully while still needed."),this.Zl(),this.Jl()?(this.ql.kl(e),this.Yl()):this.ql.set("Unknown"),[2]})})},LS.prototype.Gl=function(n,r){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return this.ql.set("Online"),n instanceof g_&&2===n.state&&n.cause?[2,this.ud(n)]:(n instanceof v_?this.Vl.ue(n):n instanceof y_?this.Vl.de(n):(ig(n instanceof g_,"Expected watchChange to be an instance of WatchTargetChange"),this.Vl.he(n)),r.isEqual(em.MIN)?[3,3]:[4,this.zh.Jo()]);case 1:return e=t.sent(),0<=r.h(e)?[4,this.sd(r)]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})},LS.prototype.sd=function(r){var i=this;ig(!r.isEqual(em.MIN),"Can't raise event for unknown SnapshotVersion");var t=this.Vl.me(r);return Og(t.Si,function(t,e){if(0<e.resumeToken.bn()){var n=i.Fl[t];n&&(i.Fl[t]=n.vi(e.resumeToken,r))}}),t.Ri.forEach(function(t){var e=i.Fl[t];if(e){i.Fl[t]=e.vi(xb.ai,e.li),i.ed(t);var n=new $b(e.target,t,1,e.sequenceNumber);i.td(n)}}),this.rd.Yo(t)},LS.prototype.ud=function(t){var n=this;ig(!!t.cause,"Handling target error without a cause");var r=t.cause,i=Promise.resolve();return t.targetIds.forEach(function(e){i=i.then(function(){return Ts(n,void 0,void 0,function(){return Ss(this,function(t){return Ag(this.Fl,e)?(delete this.Fl[e],this.Vl.removeTarget(e),[2,this.rd.od(e,r)]):[2]})})})}),i},LS.prototype.Xl=function(){return Ts(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return this.hd()?(e=0<this.Ol.length?this.Ol[this.Ol.length-1].batchId:-1,[4,this.zh.sh(e)]):[3,4];case 1:return null!==(n=t.sent())?[3,2]:(0===this.Ol.length&&this.Wl.bf(),[3,4]);case 2:return this.ad(n),[4,this.Xl()];case 3:t.sent(),t.label=4;case 4:return this.fd()&&this.ld(),[2]}})})},LS.prototype.hd=function(){return this.jl()&&this.Ol.length<10},LS.prototype.dd=function(){return this.Ol.length},LS.prototype.ad=function(t){ig(this.hd(),"addToWritePipeline called when pipeline is full"),this.Ol.push(t),this.Wl.mf()&&this.Wl.Ff&&this.Wl.Vf(t.mutations)},LS.prototype.fd=function(){return this.jl()&&!this.Wl.wf()&&0<this.Ol.length},LS.prototype.ld=function(){ig(this.fd(),"startWriteStream() called when shouldStartWriteStream() is false."),this.Wl.start()},LS.prototype.zl=function(){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){return this.Wl.jf(),[2]})})},LS.prototype.Hl=function(){var r=this;return this.zh.Us(this.Wl.lastStreamToken).then(function(){for(var t=0,e=r.Ol;t<e.length;t++){var n=e[t];r.Wl.Vf(n.mutations)}}).catch(JE)},LS.prototype.Uf=function(t,e){var n=this;ig(0<this.Ol.length,"Got result for empty write pipeline");var r=this.Ol.shift(),i=cE.from(r,t,e,this.Wl.lastStreamToken);return this.rd.vd(i).then(function(){return n.Xl()})},LS.prototype.Kl=function(n){return Ts(this,void 0,void 0,function(){var e=this;return Ss(this,function(t){return void 0===n&&ig(!this.fd(),"Write stream was stopped gracefully while still needed."),n&&0<this.Ol.length?[2,(this.Wl.Ff?this.wd(n):this.md(n)).then(function(){e.fd()&&e.ld()})]:[2]})})},LS.prototype.md=function(e){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){return n_(e.code)?(tg("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.Wl.lastStreamToken),this.Wl.lastStreamToken=xb.ai,[2,this.zh.Us(xb.ai).catch(JE)]):[2]})})},LS.prototype.wd=function(i){return Ts(this,void 0,void 0,function(){var n,r=this;return Ss(this,function(t){return n_(e=i.code)&&e!==vg.ABORTED?(n=this.Ol.shift(),this.Wl.gf(),[2,this.rd.pd(n.batchId,i).then(function(){return r.Xl()})]):[2];var e})})},LS.prototype.gd=function(){return new DS(this.ml)},LS.prototype.Ll=function(){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.$l()];case 1:return t.sent(),this.ql.set("Unknown"),[4,this.enableNetwork()];case 2:return t.sent(),[2]}})})},LS.prototype.bd=function(){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return this.jl()?(tg("RemoteStore","RemoteStore restarting streams for new credential"),[4,this.Ll()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},LS.prototype.yd=function(e){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return(this.isPrimary=e)&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.$l()];case 3:t.sent(),this.ql.set("Unknown"),t.label=4;case 4:return[2]}})})},LS);function LS(t,e,n,r,i){var o=this;this.zh=t,this.ml=e,this.Ol=[],this.Fl={},this.Vl=null,this.networkEnabled=!1,this.isPrimary=!1,this.Ul=i,this.Ul.xl(function(t){n.$r(function(){return Ts(o,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return this.jl()?(tg("RemoteStore","Restarting streams for network reachability change."),[4,this.Ll()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.ql=new PS(n,r),this.Bl=this.ml.qf({Af:this.Ml.bind(this),Ef:this.Ql.bind(this),kf:this.Gl.bind(this)}),this.Wl=this.ml.Lf({Af:this.zl.bind(this),Ef:this.Kl.bind(this),xf:this.Hl.bind(this),Uf:this.Uf.bind(this)})}function MS(t,e){this.Qr=t,this.El=e,this.state="Unknown",this.Dl=0,this.Sl=null,this.Rl=!0}function FS(t){this.ml=t,this.pl=h_(),this.mutations=[],this.gl=!1,this.bl=null,this.yl=new Set}function US(t,e){return ig(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),"firestore_clients_"+t+"_"+e}function jS(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.l()&&(r+="_"+e.uid),r}function qS(t,e){return"firestore_targets_"+t+"_"+e}var VS=($S._d=function(t,e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new yg(r.error.code,r.error.message)),i?new $S(t,e,r.state,o):(eg("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},$S.prototype.Id=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},$S),BS=(JS._d=function(t,e){var n=JSON.parse(e),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new yg(n.error.code,n.error.message)),r?new JS(t,n.state,i):(eg("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},JS.prototype.Id=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},JS),WS=(XS._d=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=d_(),o=0;r&&o<n.activeTargetIds.length;++o)r=pb(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new XS(t,i):(eg("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},XS),HS=(YS._d=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new YS(e.clientId,e.onlineState):(eg("SharedClientState","Failed to parse online state: "+t),null)},YS),GS=(QS.prototype.Td=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},QS.prototype.Ed=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},QS.prototype.Id=function(){var t={activeTargetIds:this.activeTargetIds.tt(),updateTimeMs:Date.now()};return JSON.stringify(t)},QS),zS=(KS.cs=function(t){return!(!t.window||null==t.window.localStorage)},KS.prototype.start=function(){return Ts(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f=this;return Ss(this,function(t){switch(t.label){case 0:return ig(!this.Co,"WebStorageSharedClientState already started"),ig(null!==this.rd,"syncEngine property must be set before calling start()"),ig(null!==this.El,"onlineStateHandler property must be set before calling start()"),[4,this.rd.gh()];case 1:for(e=t.sent(),n=0,r=e;n<r.length;n++)(i=r[n])!==this.Dd&&(o=this.getItem(US(this.persistenceKey,i)))&&(s=WS._d(i,o))&&(this.Sd[s.clientId]=s);for(this.Ud(),(a=this.storage.getItem(this.Vd))&&(u=this.xd(a))&&this.jd(u),c=0,h=this.Ad;c<h.length;c++)l=h[c],this.Cd(l);return this.Ad=[],this.platform.window.addEventListener("unload",function(){return f.shutdown()}),this.Co=!0,[2]}})})},KS.prototype.Br=function(t){this.setItem(this.kd,JSON.stringify(t))},KS.prototype.Ld=function(){var n=d_();return Rg(this.Sd,function(t,e){n=n.Mt(e.activeTargetIds)}),n},KS.prototype.qd=function(t){for(var e in this.Sd)if(this.Sd.hasOwnProperty(e)&&this.Sd[e].activeTargetIds.has(t))return!0;return!1},KS.prototype.Bd=function(t){this.Md(t,"pending")},KS.prototype.Qd=function(t,e,n){this.Md(t,e,n),this.Gd(t)},KS.prototype.Wd=function(t){var e="not-current";if(this.qd(t)){var n=this.storage.getItem(qS(this.persistenceKey,t));if(n){var r=BS._d(t,n);r&&(e=r.state)}}return this.zd.Td(t),this.Ud(),e},KS.prototype.Kd=function(t){this.zd.Ed(t),this.Ud()},KS.prototype.Hd=function(t){return this.zd.activeTargetIds.has(t)},KS.prototype.Jd=function(t){this.removeItem(qS(this.persistenceKey,t))},KS.prototype.Yd=function(t,e,n){this.Xd(t,e,n)},KS.prototype.Lo=function(t,e,n){var r=this;e.forEach(function(t){r.Gd(t)}),this.currentUser=t,n.forEach(function(t){r.Bd(t)})},KS.prototype.$d=function(t){this.Zd(t)},KS.prototype.shutdown=function(){this.Co&&(this.platform.window.removeEventListener("storage",this.Rd),this.removeItem(this.Pd),this.Co=!1)},KS.prototype.getItem=function(t){var e=this.storage.getItem(t);return tg("SharedClientState","READ",t,e),e},KS.prototype.setItem=function(t,e){tg("SharedClientState","SET",t,e),this.storage.setItem(t,e)},KS.prototype.removeItem=function(t){tg("SharedClientState","REMOVE",t),this.storage.removeItem(t)},KS.prototype.Cd=function(a){var t=this;if(a.storageArea===this.storage){if(tg("SharedClientState","EVENT",a.key,a.newValue),a.key===this.Pd)return void eg("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Lc.$r(function(){return Ts(t,void 0,void 0,function(){var e,n,r,i,o,s;return Ss(this,function(t){if(!this.Co)return this.Ad.push(a),[2];if(null===a.key)return[2];if(this.Nd.test(a.key)){if(null==a.newValue)return n=this.tv(a.key),[2,this.nv(n,null)];if(e=this.iv(a.key,a.newValue))return[2,this.nv(e.clientId,e)]}else if(this.Od.test(a.key)){if(null!==a.newValue&&(r=this.ev(a.key,a.newValue)))return[2,this.rv(r)]}else if(this.Fd.test(a.key)){if(null!==a.newValue&&(i=this.uv(a.key,a.newValue)))return[2,this.sv(i)]}else if(a.key===this.Vd){if(null!==a.newValue&&(o=this.xd(a.newValue)))return[2,this.jd(o)]}else a.key===this.kd&&(ig(!!this.jr,"Missing sequenceNumberHandler"),(s=function(t){var e=J_.Mr;if(null!=t)try{var n=JSON.parse(t);ig("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(t){eg("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(a.newValue))!==J_.Mr&&this.jr(s));return[2]})})})}},Object.defineProperty(KS.prototype,"zd",{get:function(){return this.Sd[this.Dd]},enumerable:!0,configurable:!0}),KS.prototype.Ud=function(){this.setItem(this.Pd,this.zd.Id())},KS.prototype.Md=function(t,e,n){var r=new VS(this.currentUser,t,e,n),i=jS(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Id())},KS.prototype.Gd=function(t){var e=jS(this.persistenceKey,this.currentUser,t);this.removeItem(e)},KS.prototype.Zd=function(t){var e={clientId:this.Dd,onlineState:t};this.storage.setItem(this.Vd,JSON.stringify(e))},KS.prototype.Xd=function(t,e,n){var r=qS(this.persistenceKey,t),i=new BS(t,e,n);this.setItem(r,i.Id())},KS.prototype.tv=function(t){var e=this.Nd.exec(t);return e?e[1]:null},KS.prototype.iv=function(t,e){var n=this.tv(t);return ig(null!==n,"Cannot parse client state key '"+t+"'"),WS._d(n,e)},KS.prototype.ev=function(t,e){var n=this.Od.exec(t);ig(null!==n,"Cannot parse mutation batch key '"+t+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return VS._d(new dg(i),r,e)},KS.prototype.uv=function(t,e){var n=this.Fd.exec(t);ig(null!==n,"Cannot parse query target key '"+t+"'");var r=Number(n[1]);return BS._d(r,e)},KS.prototype.xd=function(t){return HS._d(t)},KS.prototype.rv=function(e){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){return e.user.uid!==this.currentUser.uid?(tg("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.rd.ov(e.batchId,e.state,e.error)]})})},KS.prototype.sv=function(t){return this.rd.hv(t.targetId,t.state,t.error)},KS.prototype.nv=function(t,e){var n=this,r=this.Ld();e?this.Sd[t]=e:delete this.Sd[t];var i=this.Ld(),o=[],s=[];return i.forEach(function(e){return Ts(n,void 0,void 0,function(){return Ss(this,function(t){return r.has(e)||o.push(e),[2]})})}),r.forEach(function(e){return Ts(n,void 0,void 0,function(){return Ss(this,function(t){return i.has(e)||s.push(e),[2]})})}),this.rd.cv(o,s)},KS.prototype.jd=function(t){this.Sd[t.clientId]&&this.El(t.onlineState)},KS);function KS(t,e,n,r,i){if(this.Lc=t,this.platform=e,this.persistenceKey=n,this.Dd=r,this.rd=null,this.El=null,this.jr=null,this.Sd={},this.Rd=this.Cd.bind(this),this.Co=!1,this.Ad=[],!KS.cs(this.platform))throw new yg(vg.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=i,this.Pd=US(this.persistenceKey,this.Dd),this.kd="firestore_sequence_number_"+this.persistenceKey,this.Sd[this.Dd]=new GS,this.Nd=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Od=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Fd=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Vd="firestore_online_state_"+this.persistenceKey,this.platform.window.addEventListener("storage",this.Rd)}function QS(){this.activeTargetIds=d_()}function YS(t,e){this.clientId=t,this.onlineState=e}function XS(t,e){this.clientId=t,this.activeTargetIds=e}function JS(t,e,n){this.targetId=t,this.state=e,ig(void 0!==(this.error=n)==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}function $S(t,e,n,r){this.user=t,this.batchId=e,this.state=n,ig(void 0!==(this.error=r)==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}function ZS(t){this.key=t}function tC(t){this.key=t}var eC=(iC.prototype.Bd=function(t){},iC.prototype.Qd=function(t,e,n){},iC.prototype.Wd=function(t){return this.av.Td(t),this.fv[t]||"not-current"},iC.prototype.Yd=function(t,e,n){this.fv[t]=e},iC.prototype.Kd=function(t){this.av.Ed(t)},iC.prototype.Hd=function(t){return this.av.activeTargetIds.has(t)},iC.prototype.Jd=function(t){delete this.fv[t]},iC.prototype.Ld=function(){return this.av.activeTargetIds},iC.prototype.qd=function(t){return this.av.activeTargetIds.has(t)},iC.prototype.start=function(){return this.av=new GS,Promise.resolve()},iC.prototype.Lo=function(t,e,n){},iC.prototype.$d=function(t){},iC.prototype.shutdown=function(){},iC.prototype.Br=function(t){},iC),nC=(Object.defineProperty(rC.prototype,"mv",{get:function(){return this.lv},enumerable:!0,configurable:!0}),rC.prototype.pv=function(t,e){var a=this,u=e?e.gv:new w_,c=e?e.wv:this.wv,h=e?e.Ii:this.Ii,l=c,f=!1,p=this.query.ii()&&c.size===this.query.limit?c.last():null,d=this.query.ei()&&c.size===this.query.limit?c.first():null;if(t.pt(function(t,e){var n=c.get(t),r=e instanceof Hw?e:null;r&&(ig(t.isEqual(r.key),"Mismatching keys found in document changes: "+t+" != "+r.key),r=a.query.matches(r)?r:null);var i=!!n&&a.Ii.has(n.key),o=!!r&&(r.en||a.Ii.has(r.key)&&r.hasCommittedMutations),s=!1;n&&r?n.data().isEqual(r.data())?i!==o&&(u.track({type:3,doc:r}),s=!0):a.bv(n,r)||(u.track({type:2,doc:r}),s=!0,(p&&0<a.query.Xn(r,p)||d&&a.query.Xn(r,d)<0)&&(f=!0)):!n&&r?(u.track({type:0,doc:r}),s=!0):n&&!r&&(u.track({type:1,doc:n}),s=!0,(p||d)&&(f=!0)),s&&(h=r?(l=l.add(r),o?h.add(t):h.delete(t)):(l=l.delete(t),h.delete(t)))}),this.query.ii()||this.query.ei())for(;l.size>this.query.limit;){var n=this.query.ii()?l.last():l.first();l=l.delete(n.key),h=h.delete(n.key),u.track({type:1,doc:n})}return ig(!f||!e,"View was refilled using docs that themselves needed refilling."),{wv:l,gv:u,Pa:f,Ii:h}},rC.prototype.bv=function(t,e){return t.en&&e.hasCommittedMutations&&!e.en},rC.prototype.es=function(t,e,n){var o=this;ig(!t.Pa,"Cannot apply changes that need a refill");var r=this.wv;this.wv=t.wv,this.Ii=t.Ii;var i=t.gv.yi();i.sort(function(t,e){return r=t.type,i=e.type,n(r)-n(i)||o.query.Xn(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rg("Unknown ChangeType: "+t)}}var r,i}),this.yv(n);var s=e?this._v():[],a=0===this.vv.size&&this.Ni?1:0,u=a!==this.dv;return this.dv=a,0!==i.length||u?{snapshot:new b_(this.query,t.wv,r,i,t.Ii,0==a,u,!1),Iv:s}:{Iv:s}},rC.prototype.Tv=function(t){return this.Ni&&"Offline"===t?(this.Ni=!1,this.es({wv:this.wv,gv:new w_,Ii:this.Ii,Pa:!1},!1)):{Iv:[]}},rC.prototype.Ev=function(t){return!this.lv.has(t)&&!!this.wv.has(t)&&!this.wv.get(t).en},rC.prototype.yv=function(t){var e=this;t&&(t.Oi.forEach(function(t){return e.lv=e.lv.add(t)}),t.Fi.forEach(function(t){return ig(e.lv.has(t),"Modified document "+t+" not found in view.")}),t.Vi.forEach(function(t){return e.lv=e.lv.delete(t)}),this.Ni=t.Ni)},rC.prototype._v=function(){var e=this;if(!this.Ni)return[];var n=this.vv;this.vv=f_(),this.wv.forEach(function(t){e.Ev(t.key)&&(e.vv=e.vv.add(t.key))});var r=[];return n.forEach(function(t){e.vv.has(t)||r.push(new tC(t))}),this.vv.forEach(function(t){n.has(t)||r.push(new ZS(t))}),r},rC.prototype.Dv=function(t){this.lv=t.mh,this.vv=f_();var e=this.pv(t.documents);return this.es(e,!0)},rC.prototype.Sv=function(){return b_.Di(this.query,this.wv,this.Ii,0===this.dv)},rC);function rC(t,e){this.query=t,this.lv=e,this.dv=null,this.Ni=!1,this.vv=f_(),this.Ii=f_(),this.wv=new m_(t.Xn.bind(t))}function iC(){this.av=new GS,this.fv={},this.rd=null,this.El=null,this.jr=null}function oC(t,e,n){this.query=t,this.targetId=e,this.view=n}function sC(t){this.key=t,this.Ov=!1}function aC(){this.aw=null,this.targetId=0,this.listeners=[]}function uC(){}var cC=(EC.prototype.run=function(){this.Av()},EC.prototype.Av=function(){var t=this;this.vf.hf(function(){return Ts(t,void 0,void 0,function(){var e,n,r=this;return Ss(this,function(t){return e=this.Rv.gd(),(n=this.Pv(e))&&n.then(function(t){r.Qr.$r(function(){return e.commit().then(function(){r.Kr.resolve(t)}).catch(function(t){r.kv(t)})})}).catch(function(t){r.kv(t)}),[2]})})})},EC.prototype.Pv=function(t){try{var e=this.updateFunction(t);return!fb(e)&&e.catch&&e.then?e:(this.Kr.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Kr.reject(t),null}},EC.prototype.kv=function(t){var e=this;0<this.Cv&&this.Nv(t)?(this.Cv-=1,this.Qr.$r(function(){return e.Av(),Promise.resolve()})):this.Kr.reject(t)},EC.prototype.Nv=function(t){if("FirebaseError"!==t.name)return!1;var e=t.code;return"aborted"===e||"failed-precondition"===e||!n_(e)},EC),hC=(Object.defineProperty(_C.prototype,"Gv",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),_C.prototype.subscribe=function(t){ig(null!==t,"SyncEngine listener cannot be null"),ig(null===this.Vv,"SyncEngine already has a subscriber."),this.Vv=t},_C.prototype.listen=function(s){return Ts(this,void 0,void 0,function(){var e,n,r,i,o;return Ss(this,function(t){switch(t.label){case 0:return this.Wv("listen()"),(r=this.Uv.get(s))?(e=r.targetId,this.Fv.Wd(e),n=r.view.Sv(),[3,4]):[3,1];case 1:return[4,this.zh.hh(s.Yn())];case 2:return i=t.sent(),o=this.Fv.Wd(i.targetId),e=i.targetId,[4,this.zv(s,e,"current"===o)];case 3:n=t.sent(),this.isPrimary&&this.Rv.listen(i),t.label=4;case 4:return this.Vv.kf([n]),[2,e]}})})},_C.prototype.zv=function(a,u,c){return Ts(this,void 0,void 0,function(){var e,n,r,i,o,s;return Ss(this,function(t){switch(t.label){case 0:return[4,this.zh.vh(a,!0)];case 1:return e=t.sent(),n=new nC(a,e.mh),r=n.pv(e.documents),i=E_.ki(u,c&&"Offline"!==this.onlineState),ig(0===(o=n.es(r,!0===this.isPrimary,i)).Iv.length,"View returned limbo docs before target ack from the server."),ig(!!o.snapshot,"applyChanges for new view should always return a snapshot"),s=new oC(a,u,n),this.Uv.set(a,s),this.xv[u]||(this.xv[u]=[]),this.xv[u].push(a),[2,o.snapshot]}})})},_C.prototype.Kv=function(r){return Ts(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return[4,this.zh.vh(r.query,!0)];case 1:return e=t.sent(),n=r.view.Dv(e),this.isPrimary&&this.Hv(r.targetId,n.Iv),[2,n]}})})},_C.prototype.nd=function(i){return Ts(this,void 0,void 0,function(){var e,n,r=this;return Ss(this,function(t){switch(t.label){case 0:return this.Wv("unlisten()"),ig(!!(e=this.Uv.get(i)),"Trying to unlisten on query not found:"+i),1<(n=this.xv[e.targetId]).length?(this.xv[e.targetId]=n.filter(function(t){return!t.isEqual(i)}),this.Uv.delete(i),[2]):this.isPrimary?(this.Fv.Kd(e.targetId),this.Fv.qd(e.targetId)?[3,2]:[4,this.zh.dh(e.targetId,!1).then(function(){r.Fv.Jd(e.targetId),r.Rv.nd(e.targetId),r.Jv(e.targetId)}).catch(JE)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return this.Jv(e.targetId),[4,this.zh.dh(e.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})},_C.prototype.write=function(n,r){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return this.Wv("write()"),[4,this.zh.Qo(n)];case 1:return e=t.sent(),this.Fv.Bd(e.batchId),this.Yv(e.batchId,r),[4,this.Xv(e.Ku)];case 2:return t.sent(),[4,this.Rv.Xl()];case 3:return t.sent(),[2]}})})},_C.prototype.runTransaction=function(t,e,n){new cC(t,this.Rv,e,n).run()},_C.prototype.Yo=function(n){return Ts(this,void 0,void 0,function(){var e,r=this;return Ss(this,function(t){switch(t.label){case 0:this.Wv("applyRemoteEvent()"),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.zh.Yo(n)];case 2:return e=t.sent(),Rg(n.Si,function(t,e){var n=r.Lv[Number(t)];n&&(ig(e.Oi.size+e.Fi.size+e.Vi.size<=1,"Limbo resolution for single document contains multiple changes."),0<e.Oi.size?n.Ov=!0:0<e.Fi.size?ig(n.Ov,"Received change for limbo target document without add."):0<e.Vi.size&&(ig(n.Ov,"Received remove for limbo target document without add."),n.Ov=!1))}),[4,this.Xv(e,n)];case 3:return t.sent(),[3,6];case 4:return[4,JE(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},_C.prototype.Tv=function(r,t){if(this.isPrimary&&0===t||!this.isPrimary&&1===t){this.Wv("applyOnlineStateChange()");var i=[];this.Uv.forEach(function(t,e){var n=e.view.Tv(r);ig(0===n.Iv.length,"OnlineState should not affect limbo documents."),n.snapshot&&i.push(n.snapshot)}),this.Vv.$v(r),this.Vv.kf(i),this.onlineState=r,this.isPrimary&&this.Fv.$d(r)}},_C.prototype.od=function(a,u){return Ts(this,void 0,void 0,function(){var e,n,r,i,o,s=this;return Ss(this,function(t){switch(t.label){case 0:return this.Wv("rejectListens()"),this.Fv.Yd(a,"rejected",u),e=this.Lv[a],(n=e&&e.key)?(this.jv=this.jv.remove(n),delete this.Lv[a],r=(r=new am(sm.G)).lt(n,new Gw(n,em.q())),i=f_().add(n),o=new __(em.MIN,{},new Em(ag),r,i),[2,this.Yo(o)]):[3,1];case 1:return[4,this.zh.dh(a,!1).then(function(){return s.Jv(a,u)}).catch(JE)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},_C.prototype.ov=function(n,r,i){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return this.Wv("applyBatchState()"),[4,this.zh.Go(n)];case 1:return null===(e=t.sent())?(tg("SyncEngine","Cannot apply mutation batch with id: "+n),[2]):"pending"!==r?[3,3]:[4,this.Rv.Xl()];case 2:return t.sent(),[3,4];case 3:"acknowledged"===r||"rejected"===r?(this.Zv(n,i||null),this.zh.bh(n)):rg("Unknown batchState: "+r),t.label=4;case 4:return[4,this.Xv(e)];case 5:return t.sent(),[2]}})})},_C.prototype.vd=function(r){return Ts(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:this.Wv("applySuccessfulWrite()"),e=r.batch.batchId,this.Zv(e,null),this.tw(e),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.zh.Os(r)];case 2:return n=t.sent(),this.Fv.Qd(e,"acknowledged"),[4,this.Xv(n)];case 3:return t.sent(),[3,6];case 4:return[4,JE(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},_C.prototype.pd=function(n,r){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:this.Wv("rejectFailedWrite()"),this.Zv(n,r),this.tw(n),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.zh.Ho(n)];case 2:return e=t.sent(),this.Fv.Qd(n,"rejected",r),[4,this.Xv(e)];case 3:return t.sent(),[3,6];case 4:return[4,JE(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},_C.prototype.nw=function(r){return Ts(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return this.Rv.jl()||tg("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.zh.Gs()];case 1:return-1===(e=t.sent())?r.resolve():((n=this.Mv.get(e)||[]).push(r),this.Mv.set(e,n)),[2]}})})},_C.prototype.tw=function(t){(this.Mv.get(t)||[]).forEach(function(t){t.resolve()}),this.Mv.delete(t)},_C.prototype.iw=function(e){this.Mv.forEach(function(t){t.forEach(function(t){t.reject(new yg(vg.CANCELLED,e))})}),this.Mv.clear()},_C.prototype.Yv=function(t,e){var n=this.Bv[this.currentUser.v()];n=(n=n||new am(ag)).lt(t,e),this.Bv[this.currentUser.v()]=n},_C.prototype.Zv=function(t,e){var n=this.Bv[this.currentUser.v()];if(n){var r=n.get(t);r&&(ig(t===n.vt(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.Bv[this.currentUser.v()]=n}},_C.prototype.Jv=function(t,e){var n=this;void 0===e&&(e=null),this.Fv.Kd(t),ig(this.xv[t]&&0!==this.xv[t].length,"There are no queries mapped to target id "+t);for(var r=0,i=this.xv[t];r<i.length;r++){var o=i[r];this.Uv.delete(o),e&&this.Vv.ew(o,e)}if(delete this.xv[t],this.isPrimary){var s=this.qv.Nu(t);this.qv.Pu(t),s.forEach(function(t){n.qv.Ou(t)||n.rw(t)})}},_C.prototype.rw=function(t){var e=this.jv.get(t);null!==e&&(this.Rv.nd(e),this.jv=this.jv.remove(t),delete this.Lv[e])},_C.prototype.Hv=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof ZS?(this.qv.Du(i.key,t),this.uw(i)):i instanceof tC?(tg("SyncEngine","Document no longer in limbo: "+i.key),this.qv.Ru(i.key,t),this.qv.Ou(i.key)||this.rw(i.key)):rg("Unknown limbo change: "+JSON.stringify(i))}},_C.prototype.uw=function(t){var e=t.key;if(!this.jv.get(e)){tg("SyncEngine","New document in limbo: "+e);var n=this.Qv.next(),r=_b.jn(e.path);this.Lv[n]=new sC(e),this.Rv.listen(new $b(r.Yn(),n,2,J_.Mr)),this.jv=this.jv.lt(e,n)}},_C.prototype.sw=function(){return this.jv},_C.prototype.Xv=function(r,u){return Ts(this,void 0,void 0,function(){var o,s,e,a=this;return Ss(this,function(t){switch(t.label){case 0:return o=[],s=[],e=[],this.Uv.forEach(function(t,i){e.push(Promise.resolve().then(function(){var n=i.view.pv(r);return n.Pa?a.zh.vh(i.query,!1).then(function(t){var e=t.documents;return i.view.pv(e,n)}):n}).then(function(t){var e=u&&u.Si[i.targetId],n=i.view.es(t,!0===a.isPrimary,e);if(a.Hv(i.targetId,n.Iv),n.snapshot){a.isPrimary&&a.Fv.Yd(i.targetId,n.snapshot.fromCache?"not-current":"current"),o.push(n.snapshot);var r=GE.Io(i.targetId,n.snapshot);s.push(r)}}))}),[4,Promise.all(e)];case 1:return t.sent(),this.Vv.kf(o),[4,this.zh.uh(s)];case 2:return t.sent(),[2]}})})},_C.prototype.Wv=function(t){ig(null!==this.Vv,"Trying to call "+t+" before calling subscribe().")},_C.prototype.bd=function(r){return Ts(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return e=!this.currentUser.isEqual(r),this.currentUser=r,e?(this.iw("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.zh.Lo(r)]):[3,3];case 1:return n=t.sent(),this.Fv.Lo(r,n.Bo,n.Mo),[4,this.Xv(n.qo)];case 2:t.sent(),t.label=3;case 3:return[4,this.Rv.bd()];case 4:return t.sent(),[2]}})})},_C.prototype.yd=function(u){return Ts(this,void 0,void 0,function(){var e,n,r,i,o,s,a=this;return Ss(this,function(t){switch(t.label){case 0:return!0!==u||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.Rv.yd(!0)]);case 1:return t.sent(),o=this.Fv.Ld(),[4,this.ow(o.tt())];case 2:for(e=t.sent(),n=0,r=e;n<r.length;n++)i=r[n],this.Rv.listen(i);return[3,7];case 3:return!1!==u||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,o=[],s=Promise.resolve(),Og(this.xv,function(t,e){a.Fv.Hd(t)?o.push(t):s=s.then(function(){return a.Jv(t),a.zh.dh(t,!0)}),a.Rv.nd(t)}),[4,s]);case 4:return t.sent(),[4,this.ow(o)];case 5:return t.sent(),this.hw(),[4,this.Rv.yd(!1)];case 6:t.sent(),t.label=7;case 7:return[2]}})})},_C.prototype.hw=function(){var e=this;Og(this.Lv,function(t){e.Rv.nd(t)}),this.qv.ku(),this.Lv=[],this.jv=new am(sm.G)},_C.prototype.ow=function(d){return Ts(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f,p;return Ss(this,function(t){switch(t.label){case 0:e=[],n=[],r=0,i=d,t.label=1;case 1:return r<i.length?(o=i[r],s=void 0,(a=this.xv[o])&&0!==a.length?[4,this.zh.dh(o,!0)]:[3,8]):[3,14];case 2:return t.sent(),[4,this.zh.hh(a[0].Yn())];case 3:s=t.sent(),u=0,c=a,t.label=4;case 4:return u<c.length?(h=c[u],ig(!!(l=this.Uv.get(h)),"No query view found for "+h),[4,this.Kv(l)]):[3,7];case 5:(f=t.sent()).snapshot&&n.push(f.snapshot),t.label=6;case 6:return u++,[3,4];case 7:return[3,12];case 8:return ig(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.zh.Th(o)];case 9:return ig(!!(p=t.sent()),"Target for id "+o+" not found"),[4,this.zh.hh(p)];case 10:return s=t.sent(),[4,this.zv(this.cw(p),o,!1)];case 11:t.sent(),t.label=12;case 12:e.push(s),t.label=13;case 13:return r++,[3,1];case 14:return this.Vv.kf(n),[2,e]}})})},_C.prototype.cw=function(t){return new _b(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)},_C.prototype.gh=function(){return this.zh.gh()},_C.prototype.hv=function(r,i,o){return Ts(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:if(this.isPrimary)return tg("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.xv[r])return[3,7];switch(i){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.zh.Eh()];case 2:return e=t.sent(),n=__.Pi(r,"current"===i),[4,this.Xv(e,n)];case 3:return t.sent(),[3,7];case 4:return[4,this.zh.dh(r,!0)];case 5:return t.sent(),this.Jv(r,o),[3,7];case 6:rg("Unexpected target state: "+i),t.label=7;case 7:return[2]}})})},_C.prototype.cv=function(l,f){return Ts(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h=this;return Ss(this,function(t){switch(t.label){case 0:if(!this.isPrimary)return[2];e=0,n=l,t.label=1;case 1:return e<n.length?(c=n[e],ig(!this.xv[c],"Trying to add an already active target"),[4,this.zh.Th(c)]):[3,6];case 2:return ig(!!(r=t.sent()),"Query data for active target "+c+" not found"),[4,this.zh.hh(r)];case 3:return i=t.sent(),[4,this.zv(this.cw(r),i.targetId,!1)];case 4:t.sent(),this.Rv.listen(i),t.label=5;case 5:return e++,[3,1];case 6:o=function(e){return Ss(this,function(t){switch(t.label){case 0:return s.xv[e]?[4,s.zh.dh(e,!1).then(function(){h.Rv.nd(e),h.Jv(e)}).catch(JE)]:[2,"continue"];case 1:return t.sent(),[2]}})},s=this,a=0,u=f,t.label=7;case 7:return a<u.length?(c=u[a],[5,o(c)]):[3,10];case 8:t.sent(),t.label=9;case 9:return a++,[3,7];case 10:return[2]}})})},_C.prototype.enableNetwork=function(){return this.zh.yh(!0),this.Rv.enableNetwork()},_C.prototype.disableNetwork=function(){return this.zh.yh(!1),this.Rv.disableNetwork()},_C.prototype.be=function(t){var e=this.Lv[t];if(e&&e.Ov)return f_().add(e.key);var n=f_(),r=this.xv[t];if(!r)return n;for(var i=0,o=r;i<o.length;i++){var s=o[i],a=this.Uv.get(s);ig(!!a,"No query view found for "+s),n=n.Mt(a.view.mv)}return n},_C),lC=(bC.prototype.listen=function(t){var e=t.query,n=!1,r=this.fw.get(e);return r||(n=!0,r=new aC,this.fw.set(e,r)),r.listeners.push(t),ig(!t.Tv(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),r.aw&&t.dw(r.aw)&&this.vw(),n?this.rd.listen(e).then(function(t){return r.targetId=t}):Promise.resolve(r.targetId)},bC.prototype.nd=function(o){return Ts(this,void 0,void 0,function(){var e,n,r,i;return Ss(this,function(t){return e=o.query,n=!1,(r=this.fw.get(e))&&0<=(i=r.listeners.indexOf(o))&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.fw.delete(e),[2,this.rd.nd(e)]):[2]})})},bC.prototype.kf=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,s=this.fw.get(o);if(s){for(var a=0,u=s.listeners;a<u.length;a++)u[a].dw(i)&&(e=!0);s.aw=i}}e&&this.vw()},bC.prototype.ew=function(t,e){var n=this.fw.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.fw.delete(t)},bC.prototype.$v=function(i){this.onlineState=i;var o=!1;this.fw.forEach(function(t,e){for(var n=0,r=e.listeners;n<r.length;n++)r[n].Tv(i)&&(o=!0)}),o&&this.vw()},bC.prototype.ww=function(t){this.lw.add(t),t.next()},bC.prototype.mw=function(t){this.lw.delete(t)},bC.prototype.vw=function(){this.lw.forEach(function(t){t.next()})},bC),fC=(wC.prototype.dw=function(t){if(ig(0<t.docChanges.length||t.Ti,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new b_(t.query,t.docs,t._i,e,t.Ii,t.fromCache,t.Ti,!0)}var o=!1;return this.gw?this.yw(t)&&(this.pw.next(t),o=!0):this._w(t,this.onlineState)&&(this.Iw(t),o=!0),this.bw=t,o},wC.prototype.onError=function(t){this.pw.error(t)},wC.prototype.Tv=function(t){this.onlineState=t;var e=!1;return this.bw&&!this.gw&&this._w(this.bw,t)&&(this.Iw(this.bw),e=!0),e},wC.prototype._w=function(t,e){if(ig(!this.gw,"Determining whether to raise first event but already had first event"),!t.fromCache)return!0;var n="Offline"!==e;return this.options.Tw&&n?(ig(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.J()||"Offline"===e},wC.prototype.yw=function(t){if(0<t.docChanges.length)return!0;var e=this.bw&&this.bw.hasPendingWrites!==t.hasPendingWrites;return!(!t.Ti&&!e)&&!0===this.options.includeMetadataChanges},wC.prototype.Iw=function(t){ig(!this.gw,"Trying to raise initial events for second time"),t=b_.Di(t.query,t.docs,t.Ii,t.fromCache),this.gw=!0,this.pw.next(t)},wC),pC=(mC.prototype.Xc=function(){return eI.jh(this.cacheSizeBytes)},mC),dC=(gC.prototype.start=function(t){var n=this;this.Dw();var r=new Q_,i=new Q_,o=!1;return this.credentials.T(function(e){o?n.Qr.$r(function(){return n.bd(e)}):(o=!0,n.Sw(t,i,e).then(function(t){return n.Rw(e,t)}).then(r.resolve,r.reject))}),this.Qr.$r(function(){return r.promise}),i.promise},gC.prototype.enableNetwork=function(){var t=this;return this.Dw(),this.Qr.enqueue(function(){return t.rd.enableNetwork()})},gC.prototype.Sw=function(t,e,n){var r=this;return t instanceof pC?this.Cw(n,t).then(function(t){return e.resolve(),t}).catch(function(t){if(e.reject(t),!r.Aw(t))throw t;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+t),r.Pw()}):(e.resolve(),this.Pw())},gC.prototype.Aw=function(t){return t instanceof yg?t.code===vg.FAILED_PRECONDITION||t.code===vg.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},gC.prototype.Dw=function(){if(this.Qr.uu)throw new yg(vg.FAILED_PRECONDITION,"The client has already been terminated.")},gC.prototype.Cw=function(r,i){var t=this,o=hT.Ia(this.Ew),s=new V_(this.Ew.s,{Te:!0});return Promise.resolve().then(function(){return Ts(t,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:if(i.synchronizeTabs&&!zS.cs(this.platform))throw new yg(vg.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return e=i.Xc(),this.Fv=i.synchronizeTabs?new zS(this.Qr,this.platform,o,this.clientId,r):new eC,[4,hT.Yc({allowTabSynchronization:i.synchronizeTabs,persistenceKey:o,clientId:this.clientId,platform:this.platform,Lc:this.Qr,serializer:s,Xc:e,qc:this.Fv})];case 1:return n=t.sent(),[2,(this.persistence=n).As.Wh]}})})})},gC.prototype.Pw=function(){return this.persistence=AT.Wa(this.clientId),this.Fv=new eC,Promise.resolve(null)},gC.prototype.Rw=function(c,h){var t=this;return tg("FirestoreClient","Initializing. user=",c.uid),this.platform.kw(this.Ew).then(function(u){return Ts(t,void 0,void 0,function(){var e,n,r,i,o,s,a=this;return Ss(this,function(t){switch(t.label){case 0:return e=new mT,this.zh=new zE(this.persistence,e,c),[4,this.zh.start()];case 1:return t.sent(),h&&(this.Nw=new nI(h,this.Qr,this.zh)),n=this.platform.Ow(),r=this.platform.Fw(this.Ew.s),i=new MT(this.Qr,u,this.credentials,r),o=function(t){return a.rd.Tv(t,0)},s=function(t){return a.rd.Tv(t,1)},this.Rv=new xS(this.zh,i,this.Qr,o,n),this.rd=new hC(this.zh,this.Rv,this.Fv,c),this.Fv.El=s,this.Rv.rd=this.rd,this.Fv.rd=this.rd,this.Vw=new lC(this.rd),[4,this.Fv.start()];case 2:return t.sent(),[4,this.Rv.start()];case 3:return t.sent(),[4,this.persistence.ra(function(e){return Ts(a,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return[4,this.rd.yd(e)];case 1:return t.sent(),this.Nw&&(e&&!this.Nw.Co?this.Nw.start():e||this.Nw.stop()),[2]}})})})];case 4:return t.sent(),[4,this.persistence.ua(function(){return Ts(a,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}})})})];case 5:return t.sent(),[2]}})})})},gC.prototype.bd=function(t){return this.Qr.du(),tg("FirestoreClient","Credential Changed. Current user: "+t.uid),this.rd.bd(t)},gC.prototype.disableNetwork=function(){var t=this;return this.Dw(),this.Qr.enqueue(function(){return t.rd.disableNetwork()})},gC.prototype.terminate=function(){var t=this;return this.Qr.au(function(){return Ts(t,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return this.Nw&&this.Nw.stop(),[4,this.Rv.shutdown()];case 1:return t.sent(),[4,this.Fv.shutdown()];case 2:return t.sent(),[4,this.persistence.shutdown()];case 3:return t.sent(),this.credentials.D(),[2]}})})})},gC.prototype.waitForPendingWrites=function(){var t=this;this.Dw();var e=new Q_;return this.Qr.$r(function(){return t.rd.nw(e)}),e.promise},gC.prototype.listen=function(t,e,n){var r=this;this.Dw();var i=new fC(t,e,n);return this.Qr.$r(function(){return r.Vw.listen(i)}),i},gC.prototype.nd=function(t){var e=this;this.Uw||this.Qr.$r(function(){return e.Vw.nd(t)})},gC.prototype.xw=function(t){var e=this;return this.Dw(),this.Qr.enqueue(function(){return e.zh.oh(t)}).then(function(t){if(t instanceof Hw)return t;if(t instanceof Gw)return null;throw new yg(vg.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},gC.prototype.jw=function(i){var t=this;return this.Dw(),this.Qr.enqueue(function(){return Ts(t,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return[4,this.zh.vh(i,!0)];case 1:return e=t.sent(),n=new nC(i,e.mh),r=n.pv(e.documents),[2,n.es(r,!1).snapshot]}})})})},gC.prototype.write=function(t){var e=this;this.Dw();var n=new Q_;return this.Qr.$r(function(){return e.rd.write(t,n)}),n.promise},gC.prototype.s=function(){return this.Ew.s},gC.prototype.ww=function(t){var e=this;this.Dw(),this.Qr.$r(function(){return e.Vw.ww(t),Promise.resolve()})},gC.prototype.mw=function(t){this.Uw||this.Vw.mw(t)},Object.defineProperty(gC.prototype,"Uw",{get:function(){return this.Qr.uu},enumerable:!0,configurable:!0}),gC.prototype.transaction=function(t){var e=this;this.Dw();var n=new Q_;return this.Qr.$r(function(){return e.rd.runTransaction(e.Qr,t,n),Promise.resolve()}),n.promise},gC),vC=(yC.prototype.next=function(t){this.Lw(this.observer.next,t)},yC.prototype.error=function(t){this.Lw(this.observer.error,t)},yC.prototype.qw=function(){this.muted=!0},yC.prototype.Lw=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},yC);function yC(t){this.observer=t,this.muted=!1}function gC(t,e,n,r){this.platform=t,this.Ew=e,this.credentials=n,this.Qr=r,this.clientId=og.u()}function mC(t,e){this.cacheSizeBytes=t,this.synchronizeTabs=e}function wC(t,e,n){this.query=t,this.pw=e,this.gw=!1,this.bw=null,this.onlineState="Unknown",this.options=n||{}}function bC(t){this.rd=t,this.fw=new fE(function(t){return t.canonicalId()}),this.onlineState="Unknown",this.lw=new Set,this.rd.subscribe(this)}function _C(t,e,n,r){this.zh=t,this.Rv=e,this.Fv=n,this.currentUser=r,this.Vv=null,this.Uv=new fE(function(t){return t.canonicalId()}),this.xv={},this.jv=new am(sm.G),this.Lv={},this.qv=new hE,this.Bv={},this.Mv=new Map,this.Qv=WE.uo(),this.isPrimary=void 0,this.onlineState="Unknown"}function EC(t,e,n,r){this.Qr=t,this.Rv=e,this.updateFunction=n,this.Kr=r,this.Cv=5,this.vf=new DT(this.Qr,"retry_transaction")}function IC(i){return function(){if("object"!=typeof i||null===i)return!1;for(var t=i,e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return!0}return!1}()}var TC,SC=eI.Bh,CC=(GC.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},GC),NC=(HC.prototype.settings=function(t){if(xg("Firestore.settings",arguments,1),Fg("Firestore.settings","object",1,t),Ag(t,"persistence"))throw new yg(vg.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new CC(t);if(this.Gw&&!this.Jw.isEqual(e))throw new yg(vg.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this.Jw=e).credentials&&(this.Hw=function(t){if(!t)return new gg;switch(t.type){case"gapi":var e=t.O;return ig(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new bg(e,t.k||"0");case"provider":return t.O;default:throw new yg(vg.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},HC.prototype.enableNetwork=function(){return this.Qw(),this.Gw.enableNetwork()},HC.prototype.disableNetwork=function(){return this.Qw(),this.Gw.disableNetwork()},HC.prototype.enablePersistence=function(t){if(this.Gw)throw new yg(vg.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1;return t&&(void 0!==t.experimentalTabSynchronization&&eg("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),e=kg(void 0!==t.synchronizeTabs?t.synchronizeTabs:t.experimentalTabSynchronization,!1)),this.$w(new pC(this.Jw.cacheSizeBytes,e))},HC.prototype.clearPersistence=function(){var t=this,n=hT.Ia(this.Zw()),r=new Q_;return this.Mw.su(function(){return Ts(t,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:if(t.trys.push([0,2,,3]),void 0!==this.Gw&&!this.Gw.Uw)throw new yg(vg.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,hT.clearPersistence(n)];case 1:return t.sent(),r.resolve(),[3,3];case 2:return e=t.sent(),r.reject(e),[3,3];case 3:return[2]}})})}),r.promise},HC.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(HC.prototype,"tm",{get:function(){return this.Qw(),this.Gw.Uw},enumerable:!0,configurable:!0}),HC.prototype.waitForPendingWrites=function(){return this.Qw(),this.Gw.waitForPendingWrites()},HC.prototype.onSnapshotsInSync=function(t){if(this.Qw(),IC(t))return this.nm(t);Fg("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.nm(e)},HC.prototype.nm=function(t){var e=this,n=new vC({next:function(){t.next&&t.next()},error:function(t){throw rg("Uncaught Error in onSnapshotsInSync")}});return this.Gw.ww(n),function(){n.qw(),e.Gw.mw(n)}},HC.prototype.Qw=function(){return this.Gw||this.$w(new uC),this.Gw},HC.prototype.Zw=function(){return new hg(this.Ww,this.Kw,this.Jw.host,this.Jw.ssl,this.Jw.forceLongPolling)},HC.prototype.$w=function(t){ig(!!this.Jw.host,"FirestoreSettings.host is not set"),ig(!this.Gw,"configureClient() called multiple times");var e=this.Zw();return this.Gw=new dC(B_.t(),e,this.Hw,this.Mw),this.Gw.start(t)},HC.prototype.Xw=function(r){return new TS(function(t){if(t instanceof OC){var e=r,n=t.firestore.Ww;if(!n.isEqual(e))throw new yg(vg.INVALID_ARGUMENT,"Document reference is for database "+n.projectId+"/"+n.database+" but should be for database "+e.projectId+"/"+e.database);return new IS(r,t.im)}return t})},HC.zw=function(t){var e=t.options;if(!Ag(e,"projectId"))throw new yg(vg.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=e.projectId;if(!n||"string"!=typeof n)throw new yg(vg.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new pg(n)},Object.defineProperty(HC.prototype,"app",{get:function(){if(!this.Bw)throw new yg(vg.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Bw},enumerable:!0,configurable:!0}),HC.prototype.collection=function(t){return xg("Firestore.collection",arguments,1),Fg("Firestore.collection","non-empty string",1,t),this.Qw(),new KC(rm.it(t),this)},HC.prototype.doc=function(t){return xg("Firestore.doc",arguments,1),Fg("Firestore.doc","non-empty string",1,t),this.Qw(),OC.em(rm.it(t),this)},HC.prototype.collectionGroup=function(t){if(xg("Firestore.collectionGroup",arguments,1),Fg("Firestore.collectionGroup","non-empty string",1,t),0<=t.indexOf("/"))throw new yg(vg.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.Qw(),new xC(new _b(rm.et,t),this)},HC.prototype.runTransaction=function(e){var n=this;return xg("Firestore.runTransaction",arguments,1),Fg("Firestore.runTransaction","function",1,e),this.Qw().transaction(function(t){return e(new AC(n,t))})},HC.prototype.batch=function(){return this.Qw(),new kC(this)},Object.defineProperty(HC,"logLevel",{get:function(){switch($y()){case 0:return"debug";case 1:return"error";case 2:return"silent";default:return rg("Unknown log level: "+$y())}},enumerable:!0,configurable:!0}),HC.setLogLevel=function(t){switch(xg("Firestore.setLogLevel",arguments,1),Fg("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":Zy(0);break;case"error":Zy(1);break;case"silent":Zy(2);break;default:throw new yg(vg.INVALID_ARGUMENT,"Invalid log level: "+t)}},HC.prototype.rm=function(){return this.Jw.timestampsInSnapshots},HC),AC=(WC.prototype.get=function(t){var n=this;xg("Transaction.get",arguments,1);var r=$C("Transaction.get",t,this.um);return this.sm.lookup([r.im]).then(function(t){if(!t||1!==t.length)return rg("Mismatch in docs returned from document lookup.");var e=t[0];if(e instanceof Gw)return new DC(n.um,r.im,null,!1,!1,r.om);if(e instanceof Hw)return new DC(n.um,r.im,e,!1,!1,r.om);throw rg("BatchGetDocumentsRequest returned unexpected document type: "+e.constructor.name)})},WC.prototype.set=function(t,e,n){Mg("Transaction.set",arguments,2,3);var r=$C("Transaction.set",t,this.um);n=YC("Transaction.set",n);var i=ZC(r.om,e,"Transaction.set"),o=i[0],s=i[1],a=n.merge||n.mergeFields?this.um.Yw.sl(s,o,n.mergeFields):this.um.Yw.rl(s,o);return this.sm.set(r.im,a),this},WC.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return i="string"==typeof e||e instanceof FT?(Lg("Transaction.update",arguments,3),r=$C("Transaction.update",t,this.um),this.um.Yw.cl("Transaction.update",e,n,o)):(xg("Transaction.update",arguments,2),r=$C("Transaction.update",t,this.um),this.um.Yw.ol("Transaction.update",e)),this.sm.update(r.im,i),this},WC.prototype.delete=function(t){xg("Transaction.delete",arguments,1);var e=$C("Transaction.delete",t,this.um);return this.sm.delete(e.im),this},WC),kC=(BC.prototype.set=function(t,e,n){Mg("WriteBatch.set",arguments,2,3),this.am();var r=$C("WriteBatch.set",t,this.um);n=YC("WriteBatch.set",n);var i=ZC(r.om,e,"WriteBatch.set"),o=i[0],s=i[1],a=n.merge||n.mergeFields?this.um.Yw.sl(s,o,n.mergeFields):this.um.Yw.rl(s,o);return this.hm=this.hm.concat(a.Hf(r.im,zm.NONE)),this},BC.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.am(),i="string"==typeof e||e instanceof FT?(Lg("WriteBatch.update",arguments,3),r=$C("WriteBatch.update",t,this.um),this.um.Yw.cl("WriteBatch.update",e,n,o)):(xg("WriteBatch.update",arguments,2),r=$C("WriteBatch.update",t,this.um),this.um.Yw.ol("WriteBatch.update",e)),this.hm=this.hm.concat(i.Hf(r.im,zm.exists(!0))),this},BC.prototype.delete=function(t){xg("WriteBatch.delete",arguments,1),this.am();var e=$C("WriteBatch.delete",t,this.um);return this.hm=this.hm.concat(new Jm(e.im,zm.NONE)),this},BC.prototype.commit=function(){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){return this.am(),this.cm=!0,0<this.hm.length?[2,this.um.Qw().write(this.hm)]:[2]})})},BC.prototype.am=function(){if(this.cm)throw new yg(vg.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},BC),OC=(VC.em=function(t,e,n){if(t.length%2!=0)throw new yg(vg.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.nt()+" has "+t.length);return new VC(new sm(t),e,n)},Object.defineProperty(VC.prototype,"id",{get:function(){return this.im.path.X()},enumerable:!0,configurable:!0}),Object.defineProperty(VC.prototype,"parent",{get:function(){return new KC(this.im.path.H(),this.firestore,this.om)},enumerable:!0,configurable:!0}),Object.defineProperty(VC.prototype,"path",{get:function(){return this.im.path.nt()},enumerable:!0,configurable:!0}),VC.prototype.collection=function(t){if(xg("DocumentReference.collection",arguments,1),Fg("DocumentReference.collection","non-empty string",1,t),!t)throw new yg(vg.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=rm.it(t);return new KC(this.im.path.child(e),this.firestore)},VC.prototype.isEqual=function(t){if(!(t instanceof VC))throw Kg("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.im.isEqual(t.im)&&this.om===t.om},VC.prototype.set=function(t,e){Mg("DocumentReference.set",arguments,1,2),e=YC("DocumentReference.set",e);var n=ZC(this.om,t,"DocumentReference.set"),r=n[0],i=n[1],o=e.merge||e.mergeFields?this.firestore.Yw.sl(i,r,e.mergeFields):this.firestore.Yw.rl(i,r);return this.Gw.write(o.Hf(this.im,zm.NONE))},VC.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof t||t instanceof FT?(Lg("DocumentReference.update",arguments,2),this.firestore.Yw.cl("DocumentReference.update",t,e,r)):(xg("DocumentReference.update",arguments,1),this.firestore.Yw.ol("DocumentReference.update",t)),this.Gw.write(n.Hf(this.im,zm.exists(!0)))},VC.prototype.delete=function(){return xg("DocumentReference.delete",arguments,0),this.Gw.write([new Jm(this.im,zm.NONE)])},VC.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Mg("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||IC(t[i])||(zg("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),qg("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return n=IC(t[i])?t[i]:(Fg("DocumentReference.onSnapshot","function",i,t[i]),Ug("DocumentReference.onSnapshot","function",i+1,t[i+1]),Ug("DocumentReference.onSnapshot","function",i+2,t[i+2]),{next:t[i],error:t[i+1],complete:t[i+2]}),this.fm(o,n)},VC.prototype.fm=function(t,n){var r=this,e=function(t){console.error("Uncaught Error in onSnapshot:",t)};n.error&&(e=n.error.bind(n));var i=new vC({next:function(t){if(n.next){ig(t.docs.size<=1,"Too many documents returned on a document query");var e=t.docs.get(r.im);n.next(new DC(r.firestore,r.im,e,t.fromCache,t.hasPendingWrites,r.om))}},error:e}),o=this.Gw.listen(_b.jn(this.im.path),i,t);return function(){i.qw(),r.Gw.nd(o)}},VC.prototype.get=function(n){var r=this;return Mg("DocumentReference.get",arguments,0,1),JC("DocumentReference.get",n),new Promise(function(e,t){n&&"cache"===n.source?r.firestore.Qw().xw(r.im).then(function(t){e(new DC(r.firestore,r.im,t,!0,t instanceof Hw&&t.en,r.om))},t):r.lm(e,t,n)})},VC.prototype.lm=function(e,n,r){var i=this.fm({includeMetadataChanges:!0,Tw:!0},{next:function(t){i(),!t.exists&&t.metadata.fromCache?n(new yg(vg.UNAVAILABLE,"Failed to get document because the client is offline.")):t.exists&&t.metadata.fromCache&&r&&"server"===r.source?n(new yg(vg.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(t)},error:n})},VC.prototype.withConverter=function(t){return new VC(this.im,this.firestore,t)},VC),RC=(qC.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},qC),DC=(jC.prototype.data=function(t){if(Mg("DocumentSnapshot.data",arguments,0,1),t=XC("DocumentSnapshot.data",t),this.dm){if(this.om){var e=new PC(this.um,this.im,this.dm,this.vm,this.wm);return this.om.fromFirestore(e,t)}return this.mm(this.dm.data(),Zm.mn(t,this.um.rm()))}},jC.prototype.get=function(t,e){if(Mg("DocumentSnapshot.get",arguments,1,2),e=XC("DocumentSnapshot.get",e),this.dm){var n=this.dm.data().field(kS("DocumentSnapshot.get",t));if(null!==n)return this.pm(n,Zm.mn(e,this.um.rm()))}},Object.defineProperty(jC.prototype,"id",{get:function(){return this.im.path.X()},enumerable:!0,configurable:!0}),Object.defineProperty(jC.prototype,"ref",{get:function(){return new OC(this.im,this.um,this.om)},enumerable:!0,configurable:!0}),Object.defineProperty(jC.prototype,"exists",{get:function(){return null!==this.dm},enumerable:!0,configurable:!0}),Object.defineProperty(jC.prototype,"metadata",{get:function(){return new RC(this.wm,this.vm)},enumerable:!0,configurable:!0}),jC.prototype.isEqual=function(t){if(!(t instanceof jC))throw Kg("isEqual","DocumentSnapshot",1,t);return this.um===t.um&&this.vm===t.vm&&this.im.isEqual(t.im)&&(null===this.dm?null===t.dm:this.dm.isEqual(t.dm))&&this.om===t.om},jC.prototype.mm=function(t,n){var r=this,i={};return t.forEach(function(t,e){i[t]=r.pm(e,n)}),i},jC.prototype.pm=function(t,e){if(t instanceof qw)return this.mm(t,e);if(t instanceof Bw)return this.gm(t,e);if(t instanceof Uw){var n=t.value(e),r=this.um.Qw().s();return t.s.isEqual(r)||eg("Document "+this.im.path+" contains a document reference within a different database ("+t.s.projectId+"/"+t.s.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new OC(n,this.um,this.om)}return t.value(e)},jC.prototype.gm=function(t,e){var n=this;return t.Ht.map(function(t){return n.pm(t,e)})},jC),PC=(Es(UC,TC=DC),UC.prototype.data=function(t){var e=TC.prototype.data.call(this,t);return ig(void 0!==e,"Document in a QueryDocumentSnapshot should exist"),e},UC),xC=(FC.prototype.where=function(t,e,n){var r;xg("Query.where",arguments,3),Gg("Query.where",3,n),function(t,e,n,r){if(!e.some(function(t){return t===r}))throw new yg(vg.INVALID_ARGUMENT,"Invalid value "+Hg(r)+" provided to function "+t+"() for its "+Yg(n)+" argument. Acceptable values: "+e.join(", "))}("Query.where",["<","<=","==",">=",">","array-contains","in","array-contains-any"],2,e);var i=kS("Query.where",t),o=Eb.it(e);if(i.ut()){if(o===Eb.ARRAY_CONTAINS||o===Eb.ARRAY_CONTAINS_ANY)throw new yg(vg.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o.toString()+"' queries on FieldPath.documentId().");if(o===Eb.IN){this.ym(n,o);for(var s=[],a=0,u=n;a<u.length;a++){var c=u[a];s.push(this._m(c))}r=new Bw(s)}else r=this._m(n)}else o!==Eb.IN&&o!==Eb.ARRAY_CONTAINS_ANY||this.ym(n,o),r=this.firestore.Yw.al("Query.where",n,o===Eb.IN);var h=Ib.create(i,o,r);return this.Im(h),new FC(this.bm.Bn(h),this.firestore,this.om)},FC.prototype.orderBy=function(t,e){var n;if(Mg("Query.orderBy",arguments,1,2),Ug("Query.orderBy","non-empty string",2,e),void 0===e||"asc"===e)n=kb.ASCENDING;else{if("desc"!==e)throw new yg(vg.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+e+"', expected 'asc' or 'desc'.");n=kb.DESCENDING}if(null!==this.bm.startAt)throw new yg(vg.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this.bm.endAt)throw new yg(vg.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var r=kS("Query.orderBy",t),i=new Rb(r,n);return this.Tm(i),new FC(this.bm.Qn(i),this.firestore,this.om)},FC.prototype.limit=function(t){return xg("Query.limit",arguments,1),Fg("Query.limit","number",1,t),Qg("Query.limit",1,t),new FC(this.bm.Gn(t),this.firestore,this.om)},FC.prototype.limitToLast=function(t){return xg("Query.limitToLast",arguments,1),Fg("Query.limitToLast","number",1,t),Qg("Query.limitToLast",1,t),new FC(this.bm.Wn(t),this.firestore,this.om)},FC.prototype.startAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Lg("Query.startAt",arguments,1);var r=this.Em("Query.startAt",t,e,!0);return new FC(this.bm.zn(r),this.firestore,this.om)},FC.prototype.startAfter=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Lg("Query.startAfter",arguments,1);var r=this.Em("Query.startAfter",t,e,!1);return new FC(this.bm.zn(r),this.firestore,this.om)},FC.prototype.endBefore=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Lg("Query.endBefore",arguments,1);var r=this.Em("Query.endBefore",t,e,!0);return new FC(this.bm.Kn(r),this.firestore,this.om)},FC.prototype.endAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];Lg("Query.endAt",arguments,1);var r=this.Em("Query.endAt",t,e,!1);return new FC(this.bm.Kn(r),this.firestore,this.om)},FC.prototype.isEqual=function(t){if(!(t instanceof FC))throw Kg("isEqual","Query",1,t);return this.firestore===t.firestore&&this.bm.isEqual(t.bm)},FC.prototype.withConverter=function(t){return new FC(this.bm,this.firestore,t)},FC.prototype.Em=function(t,e,n,r){if(Gg(t,1,e),e instanceof DC){if(0<n.length)throw new yg(vg.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new yg(vg.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.Dm(t,i.dm,r)}var o=[e].concat(n);return this.Sm(t,o,r)},FC.prototype.Dm=function(t,e,n){for(var r=[],i=0,o=this.bm.orderBy;i<o.length;i++){var s=o[i];if(s.field.ut())r.push(new Uw(this.firestore.Ww,e.key));else{var a=e.field(s.field);if(a instanceof Mw)throw new yg(vg.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===a){var u=s.field.nt();throw new yg(vg.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(a)}}return new Ob(r,n)},FC.prototype.Sm=function(t,e,n){var r=this.bm.On;if(e.length>r.length)throw new yg(vg.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var s=e[o];if(r[o].field.ut()){if("string"!=typeof s)throw new yg(vg.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(!this.bm.ui()&&-1!==s.indexOf("/"))throw new yg(vg.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+s+"' contains a slash.");var a=this.bm.path.child(rm.it(s));if(!sm.ht(a))throw new yg(vg.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+a+"' is not because it contains an odd number of segments.");var u=new sm(a);i.push(new Uw(this.firestore.Ww,u))}else{var c=this.firestore.Yw.al(t,s);i.push(c)}}return new Ob(i,n)},FC.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Mg("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||IC(t[i])||(zg("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),qg("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),n=IC(t[i])?t[i]:(Fg("Query.onSnapshot","function",i,t[i]),Ug("Query.onSnapshot","function",i+1,t[i+1]),Ug("Query.onSnapshot","function",i+2,t[i+2]),{next:t[i],error:t[i+1],complete:t[i+2]}),this.Rm(this.bm),this.fm(r,n)},FC.prototype.fm=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new vC({next:function(t){e.next&&e.next(new LC(n.firestore,n.bm,t,n.om))},error:r}),o=this.firestore.Qw(),s=o.listen(this.bm,i,t);return function(){i.qw(),o.nd(s)}},FC.prototype.Rm=function(t){if(t.ei()&&0===t.On.length)throw new yg(vg.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},FC.prototype.get=function(n){var r=this;return Mg("Query.get",arguments,0,1),JC("Query.get",n),this.Rm(this.bm),new Promise(function(e,t){n&&"cache"===n.source?r.firestore.Qw().jw(r.bm).then(function(t){e(new LC(r.firestore,r.bm,t,r.om))},t):r.lm(e,t,n)})},FC.prototype.lm=function(e,n,r){var i=this.fm({includeMetadataChanges:!0,Tw:!0},{next:function(t){i(),t.metadata.fromCache&&r&&"server"===r.source?n(new yg(vg.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(t)},error:n})},FC.prototype._m=function(t){if("string"==typeof t){if(""===t)throw new yg(vg.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.bm.ui()&&-1!==t.indexOf("/"))throw new yg(vg.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this.bm.path.child(rm.it(t));if(!sm.ht(e))throw new yg(vg.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return new Uw(this.firestore.Ww,new sm(e))}if(t instanceof OC){var n=t;return new Uw(this.firestore.Ww,n.im)}throw new yg(vg.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Hg(t)+".")},FC.prototype.ym=function(t,e){if(!Array.isArray(t)||0===t.length)throw new yg(vg.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new yg(vg.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(0<=t.indexOf(null))throw new yg(vg.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(0<t.filter(function(t){return Number.isNaN(t)}).length)throw new yg(vg.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},FC.prototype.Im=function(t){if(t instanceof Ib){var e=[Eb.ARRAY_CONTAINS,Eb.ARRAY_CONTAINS_ANY],n=[Eb.IN,Eb.ARRAY_CONTAINS_ANY],r=0<=e.indexOf(t.op),i=0<=n.indexOf(t.op);if(t.Mn()){var o=this.bm.Ln();if(null!==o&&!o.isEqual(t.field))throw new yg(vg.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var s=this.bm.qn();null!==s&&this.Cm(t.field,s)}else if(i||r){var a=null;if(i&&(a=this.bm.ri(n)),null===a&&r&&(a=this.bm.ri(e)),null!=a)throw a===t.op?new yg(vg.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new yg(vg.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+a.toString()+"' filters.")}}},FC.prototype.Tm=function(t){if(null===this.bm.qn()){var e=this.bm.Ln();null!==e&&this.Cm(e,t.field)}},FC.prototype.Cm=function(t,e){if(!e.isEqual(t))throw new yg(vg.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},FC),LC=(Object.defineProperty(MC.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(MC.prototype,"empty",{get:function(){return this.Pm.docs.J()},enumerable:!0,configurable:!0}),Object.defineProperty(MC.prototype,"size",{get:function(){return this.Pm.docs.size},enumerable:!0,configurable:!0}),MC.prototype.forEach=function(e,n){var r=this;Mg("QuerySnapshot.forEach",arguments,1,2),Fg("QuerySnapshot.forEach","function",1,e),this.Pm.docs.forEach(function(t){e.call(n,r.Om(t))})},Object.defineProperty(MC.prototype,"query",{get:function(){return new xC(this.Am,this.um,this.om)},enumerable:!0,configurable:!0}),MC.prototype.docChanges=function(t){t&&(zg("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),qg("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.Pm.Ei)throw new yg(vg.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.km&&this.Nm===e||(this.km=function(i,e,o,s){if(o._i.J()){var n,r=0;return o.docChanges.map(function(t){var e=new PC(i,t.doc.key,t.doc,o.fromCache,o.Ii.has(t.doc.key),s);return ig(0===t.type,"Invalid event type for first snapshot"),ig(!n||o.query.Xn(n,t.doc)<0,"Got added events in wrong order"),n=t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:r++}})}var a=o._i;return o.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=new PC(i,t.doc.key,t.doc,o.fromCache,o.Ii.has(t.doc.key),s),n=-1,r=-1;return 0!==t.type&&(ig(0<=(n=a.indexOf(t.doc.key)),"Index for document not found"),a=a.delete(t.doc.key)),1!==t.type&&(r=(a=a.add(t.doc)).indexOf(t.doc.key)),{type:function(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rg("Unknown change type: "+t)}}(t.type),doc:e,oldIndex:n,newIndex:r}})}(this.um,e,this.Pm,this.om),this.Nm=e),this.km},MC.prototype.isEqual=function(t){if(!(t instanceof MC))throw Kg("isEqual","QuerySnapshot",1,t);return this.um===t.um&&this.Am.isEqual(t.Am)&&this.Pm.isEqual(t.Pm)&&this.om===t.om},MC.prototype.Om=function(t){return new PC(this.um,t.key,t,this.metadata.fromCache,this.Pm.Ii.has(t.key),this.om)},MC);function MC(t,e,n,r){this.um=t,this.Am=e,this.Pm=n,this.om=r,this.km=null,this.Nm=null,this.metadata=new RC(n.hasPendingWrites,n.fromCache)}function FC(t,e,n){this.bm=t,this.firestore=e,this.om=n}function UC(){return null!==TC&&TC.apply(this,arguments)||this}function jC(t,e,n,r,i,o){this.um=t,this.im=e,this.dm=n,this.vm=r,this.wm=i,this.om=o}function qC(t,e){this.hasPendingWrites=t,this.fromCache=e}function VC(t,e,n){this.im=t,this.firestore=e,this.om=n,this.Gw=this.firestore.Qw()}function BC(t){this.um=t,this.hm=[],this.cm=!1}function WC(t,e){this.um=t,this.sm=e}function HC(t,e){var n=this;if(this.Bw=null,this.Mw=new Z_,this.INTERNAL={delete:function(){return Ts(n,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return this.Qw(),[4,this.Gw.terminate()];case 1:return t.sent(),[2]}})})}},"object"==typeof t.options){var r=t;this.Bw=r,this.Ww=HC.zw(r),this.Kw=r.name,this.Hw=new mg(e)}else{var i=t;if(!i.projectId)throw new yg(vg.INVALID_ARGUMENT,"Must provide projectId");this.Ww=new pg(i.projectId,i.database),this.Kw="[DEFAULT]",this.Hw=new gg}this.Jw=new CC({}),this.Yw=this.Xw(this.Ww)}function GC(t){if(void 0===t.host){if(void 0!==t.ssl)throw new yg(vg.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else jg("settings","non-empty string","host",t.host),this.host=t.host,qg("settings","boolean","ssl",t.ssl),this.ssl=kg(t.ssl,!0);if(zg("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),qg("settings","object","credentials",t.credentials),this.credentials=t.credentials,qg("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?eg("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===t.timestampsInSnapshots&&eg("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=kg(t.timestampsInSnapshots,!0),qg("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=eI.Qh;else{if(t.cacheSizeBytes!==SC&&t.cacheSizeBytes<eI.Mh)throw new yg(vg.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+eI.Mh);this.cacheSizeBytes=t.cacheSizeBytes}qg("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=void 0!==t.experimentalForceLongPolling&&t.experimentalForceLongPolling}ks(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach(function(t){try{Object.defineProperty(LC.prototype.docChanges,t,{get:function(){return function(){throw new yg(vg.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(t){}});var zC,KC=(Es(QC,zC=xC),Object.defineProperty(QC.prototype,"id",{get:function(){return this.bm.path.X()},enumerable:!0,configurable:!0}),Object.defineProperty(QC.prototype,"parent",{get:function(){var t=this.bm.path.H();return t.J()?null:new OC(new sm(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(QC.prototype,"path",{get:function(){return this.bm.path.nt()},enumerable:!0,configurable:!0}),QC.prototype.doc=function(t){if(Mg("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=og.u()),Fg("CollectionReference.doc","non-empty string",1,t),""===t)throw new yg(vg.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=rm.it(t);return OC.em(this.bm.path.child(e),this.firestore,this.om)},QC.prototype.add=function(t){xg("CollectionReference.add",arguments,1),Fg("CollectionReference.add","object",1,this.om?this.om.toFirestore(t):t);var e=this.doc();return e.set(t).then(function(){return e})},QC.prototype.withConverter=function(t){return new QC(this.Fm,this.firestore,t)},QC);function QC(t,e,n){var r=zC.call(this,_b.jn(t),e,n)||this;if((r.Fm=t).length%2!=1)throw new yg(vg.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.nt()+" has "+t.length);return r}function YC(t,e){if(void 0===e)return{merge:!1};if(zg(t,e,["merge","mergeFields"]),qg(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new yg(vg.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+Hg(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new yg(vg.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be "+n+", but the value at index "+o+" was: "+Hg(r[o]))}(t,e,n,r,i)}(t,"mergeFields","a string or a FieldPath",e.mergeFields,function(t){return"string"==typeof t||t instanceof FT}),void 0!==e.mergeFields&&void 0!==e.merge)throw new yg(vg.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function XC(t,e){return void 0===e?{}:(zg(t,e,["serverTimestamps"]),Vg(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function JC(t,e){Ug(t,"object",1,e),e&&(zg(t,e,["source"]),Vg(t,0,"source",e.source,["default","server","cache"]))}function $C(t,e,n){if(e instanceof OC){if(e.firestore!==n)throw new yg(vg.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw Kg(t,"DocumentReference",1,e)}function ZC(t,e,n){var r;return t?(r=t.toFirestore(e),n="toFirestore() in "+n):r=e,[r,n]}var tN=G_(NC,"Use firebase.firestore() instead."),eN=G_(AC,"Use firebase.firestore().runTransaction() instead."),nN=G_(kC,"Use firebase.firestore().batch() instead."),rN=G_(OC,"Use firebase.firestore().doc() instead."),iN=G_(DC),oN=G_(PC),sN=G_(xC),aN=G_(LC),uN=G_(KC,"Use firebase.firestore().collection() instead."),cN={Firestore:tN,GeoPoint:Zg,Timestamp:tm,Blob:X_,Transaction:eN,WriteBatch:nN,DocumentReference:rN,DocumentSnapshot:iN,Query:sN,QueryDocumentSnapshot:oN,QuerySnapshot:aN,CollectionReference:uN,FieldPath:FT,FieldValue:cS,setLogLevel:NC.setLogLevel,CACHE_SIZE_UNLIMITED:SC};var hN,lN,fN=(IN.prototype.xl=function(t){},IN.prototype.shutdown=function(){},IN),pN=(EN.prototype.xl=function(t){this.Lm.push(t)},EN.prototype.shutdown=function(){window.removeEventListener("online",this.Vm),window.removeEventListener("offline",this.xm)},EN.prototype.qm=function(){window.addEventListener("online",this.Vm),window.addEventListener("offline",this.xm)},EN.prototype.Um=function(){tg("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Lm;t<e.length;t++)(0,e[t])(0)},EN.prototype.jm=function(){tg("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Lm;t<e.length;t++)(0,e[t])(1)},EN.cs=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},EN),dN=(_N.prototype.Af=function(t){ig(!this.Qm,"Called onOpen on stream twice!"),this.Qm=t},_N.prototype.Ef=function(t){ig(!this.Gm,"Called onClose on stream twice!"),this.Gm=t},_N.prototype.onMessage=function(t){ig(!this.Wm,"Called onMessage on stream twice!"),this.Wm=t},_N.prototype.close=function(){this.Mm()},_N.prototype.send=function(t){this.Bm(t)},_N.prototype.zm=function(){ig(void 0!==this.Qm,"Cannot call onOpen because no callback was set"),this.Qm()},_N.prototype.Km=function(t){ig(void 0!==this.Gm,"Cannot call onClose because no callback was set"),this.Gm(t)},_N.prototype.Hm=function(t){ig(void 0!==this.Wm,"Cannot call onMessage because no callback was set"),this.Wm(t)},_N),vN={BatchGetDocuments:"batchGet",Commit:"commit"},yN="gl-js/ fire/"+Xy,gN=(bN.prototype.Ym=function(t,e){if(e)for(var n in e.g)e.g.hasOwnProperty(n)&&(t[n]=e.g[n]);t["X-Goog-Api-Client"]=yN},bN.prototype.Bf=function(u,r,i){var c=this,h=this.Xm(u);return new Promise(function(o,s){var a=new Yy;a.listenOnce(Ky.COMPLETE,function(){try{switch(a.getLastErrorCode()){case zy.NO_ERROR:var t=a.getResponseJson();tg("Connection","XHR received:",JSON.stringify(t)),o(t);break;case zy.TIMEOUT:tg("Connection",'RPC "'+u+'" timed out'),s(new yg(vg.DEADLINE_EXCEEDED,"Request time out"));break;case zy.HTTP_ERROR:var e=a.getStatus();if(tg("Connection",'RPC "'+u+'" failed with status:',e,"response text:",a.getResponseText()),0<e){var n=a.getResponseJson().error;if(n&&n.status&&n.message){var r=(i=n.status.toLowerCase().replace("_","-"),0<=Object.values(vg).indexOf(i)?i:vg.UNKNOWN);s(new yg(r,n.message))}else s(new yg(vg.UNKNOWN,"Server responded with status "+a.getStatus()))}else tg("Connection",'RPC "'+u+'" failed'),s(new yg(vg.UNAVAILABLE,"Connection failed."));break;default:rg('RPC "'+u+'" failed with unanticipated webchannel error '+a.getLastErrorCode()+": "+a.getLastError()+", giving up.")}}finally{tg("Connection",'RPC "'+u+'" completed.')}var i});var t=Is({},r);delete t.database;var e=JSON.stringify(t);tg("Connection","XHR sending: ",h+" "+e);var n={"Content-Type":"text/plain"};c.Ym(n,i),a.send(h,"POST",e,n,15)})},bN.prototype.Mf=function(t,e,n){return this.Bf(t,e,n)},bN.prototype.Pf=function(t,e){var n=[this.Jm,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=Gy(),i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.s.projectId+"/databases/"+this.s.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.Ym(i.initMessageHeaders,e),Vs()||Bs()||0<=qs().indexOf("Electron/")||function(){var t=qs();return 0<=t.indexOf("MSIE ")||0<=t.indexOf("Trident/")}()||0<=qs().indexOf("MSAppHost/")||function(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");function s(t,e){u.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})}tg("Connection","Creating WebChannel: "+o+" "+i);var u=r.createWebChannel(o,i),a=!1,c=!1,h=new dN({Bm:function(t){c?tg("Connection","Not sending because WebChannel is closed:",t):(a||(tg("Connection","Opening WebChannel transport."),u.open(),a=!0),tg("Connection","WebChannel sending:",t),u.send(t))},Mm:function(){return u.close()}});return s(Qy.EventType.OPEN,function(){c||tg("Connection","WebChannel transport opened.")}),s(Qy.EventType.CLOSE,function(){c||(c=!0,tg("Connection","WebChannel transport closed"),h.Km())}),s(Qy.EventType.ERROR,function(t){c||(c=!0,tg("Connection","WebChannel transport errored:",t),h.Km(new yg(vg.UNAVAILABLE,"The operation could not be completed")))}),s(Qy.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];ig(!!n,"Got a webchannel message without data.");var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){tg("Connection","WebChannel received error:",i);var o=i.status,s=function(){var t=Xb[o];if(void 0!==t)return r_(t)}(),a=i.message;void 0===s&&(s=vg.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),c=!0,h.Km(new yg(s,a)),u.close()}else tg("Connection","WebChannel received:",n),h.Hm(n)}}),setTimeout(function(){h.zm()},0),h},bN.prototype.Xm=function(t){var e=vN[t];return ig(void 0!==e,"Unknown REST mapping for: "+t),this.Jm+"/v1/projects/"+this.s.projectId+"/databases/"+this.s.database+"/documents:"+e},bN),mN=(Object.defineProperty(wN.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(wN.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),wN.prototype.kw=function(t){return Promise.resolve(new gN(t))},wN.prototype.Ow=function(){return pN.cs()?new pN:new fN},wN.prototype.Fw=function(t){return new V_(t,{Te:!0})},wN.prototype.i=function(t){return JSON.stringify(t)},wN.prototype.atob=function(t){return atob(t)},wN.prototype.btoa=function(t){return btoa(t)},wN);function wN(){this.xr="undefined"!=typeof atob}function bN(t){this.s=t.s;var e=t.ssl?"https":"http";this.Jm=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}function _N(t){this.Bm=t.Bm,this.Mm=t.Mm}function EN(){var t=this;this.Vm=function(){return t.Um()},this.xm=function(){return t.jm()},this.Lm=[],this.qm()}function IN(){}B_.Ur(new mN),(lN=Gl).INTERNAL.registerComponent(new da("firestore",function(t){var e=t.getProvider("app").getImmediate();return new NC(e,t.getProvider("auth-internal"))},"PUBLIC").setServiceProps((ig((hN=cN)&&"object"==typeof hN,"shallowCopy() expects object parameter."),Is({},hN)))),lN.registerVersion("@firebase/firestore","1.12.1");var TN,SN={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},CN=(Es(NN,TN=Error),NN);function NN(t,e,n){var r=TN.call(this,e)||this;return Object.setPrototypeOf(r,NN.prototype),r.code=t,r.details=n,r}function AN(t,e,n){var r=function(t){if(200<=t&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!SN[a])return new CN("internal","internal");r=SN[a],i=a}var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new CN(r,i,o)}var kN=(ON.prototype.getAuthToken=function(){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},ON.prototype.getInstanceIdToken=function(){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){if(!(this.messaging&&"Notification"in self&&"granted"===Notification.permission))return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]})})},ON.prototype.getContext=function(){return Ts(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return[4,this.getAuthToken()];case 1:return e=t.sent(),[4,this.getInstanceIdToken()];case 2:return n=t.sent(),[2,{authToken:e,instanceIdToken:n}]}})})},ON);function ON(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}function RN(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var DN=(PN.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return RN(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},PN.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?RN(t,function(t){return e.decode(t)}):t},PN);function PN(){}var xN=(Object.defineProperty(LN.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),LN.prototype._url=function(t){var e=this.app_.options.projectId,n=this.region_;return null===this.emulatorOrigin?"https://"+n+"-"+e+".cloudfunctions.net/"+t:this.emulatorOrigin+"/"+e+"/"+n+"/"+t},LN.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},LN.prototype.httpsCallable=function(e,n){var r=this;return function(t){return r.call(e,t,n||{})}},LN.prototype.postJSON=function(r,i,o){return Ts(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:o.append("Content-Type","application/json"),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,fetch(r,{method:"POST",body:JSON.stringify(i),headers:o})];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[2,{status:0,json:null}];case 4:n=null,t.label=5;case 5:return t.trys.push([5,7,,8]),[4,e.json()];case 6:return n=t.sent(),[3,8];case 7:return t.sent(),[3,8];case 8:return[2,{status:e.status,json:n}]}})})},LN.prototype.call=function(c,h,l){return Ts(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u;return Ss(this,function(t){switch(t.label){case 0:return e=this._url(c),h=this.serializer.encode(h),n={data:h},r=new Headers,[4,this.contextProvider.getContext()];case 1:return(i=t.sent()).authToken&&r.append("Authorization","Bearer "+i.authToken),i.instanceIdToken&&r.append("Firebase-Instance-ID-Token",i.instanceIdToken),o=l.timeout||7e4,[4,Promise.race([this.postJSON(e,n,r),function(n){return new Promise(function(t,e){setTimeout(function(){e(new CN("deadline-exceeded","deadline-exceeded"))},n)})}(o),this.cancelAllRequests])];case 2:if(!(s=t.sent()))throw new CN("cancelled","Firebase Functions instance was deleted.");if(a=AN(s.status,s.json,this.serializer))throw a;if(!s.json)throw new CN("internal","Response is not valid JSON object.");if(void 0===(u=s.json.data)&&(u=s.json.result),void 0===u)throw new CN("internal","Response is missing data field.");return[2,{data:this.serializer.decode(u)}]}})})},LN);function LN(t,e,n,r){var i=this;void 0===r&&(r="us-central1"),this.app_=t,this.region_=r,this.serializer=new DN,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return i.deleteService()}},this.contextProvider=new kN(e,n),this.cancelAllRequests=new Promise(function(t){i.deleteService=function(){return t()}})}function MN(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("messaging");return new xN(n,r,i,e)}var FN;function UN(n){return new Promise(function(t,e){n.onsuccess=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function jN(n,r,i){var o,t=new Promise(function(t,e){UN(o=n[r].apply(n,i)).then(t,e)});return t.request=o,t}function qN(t,n,e){e.forEach(function(e){Object.defineProperty(t.prototype,e,{get:function(){return this[n][e]},set:function(t){this[n][e]=t}})})}function VN(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return jN(this[n],t,arguments)})})}function BN(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return this[n][t].apply(this[n],arguments)})})}function WN(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return function(t,e,n){var r=jN(t,e,n);return r.then(function(t){if(t)return new GN(t,r.request)})}(this[n],t,arguments)})})}function HN(t){this._index=t}function GN(t,e){this._cursor=t,this._request=e}function zN(t){this._store=t}function KN(n){this._tx=n,this.complete=new Promise(function(t,e){n.oncomplete=function(){t()},n.onerror=function(){e(n.error)},n.onabort=function(){e(n.error)}})}function QN(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new KN(n)}function YN(t){this._db=t}function XN(t,e,n){var r=jN(indexedDB,"open",[t,e]),i=r.request;return i&&(i.onupgradeneeded=function(t){n&&n(new QN(i.result,t.oldVersion,i.transaction))}),r.then(function(t){return new YN(t)})}function JN(t){return jN(indexedDB,"deleteDatabase",[t])}FN={Functions:xN},Gl.INTERNAL.registerComponent(new da("functions",MN,"PUBLIC").setServiceProps(FN).setMultipleInstances(!0)),Gl.registerVersion("@firebase/functions","0.4.37"),qN(HN,"_index",["name","keyPath","multiEntry","unique"]),VN(HN,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),WN(HN,"_index",IDBIndex,["openCursor","openKeyCursor"]),qN(GN,"_cursor",["direction","key","primaryKey","value"]),VN(GN,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(GN.prototype[n]=function(){var e=this,t=arguments;return Promise.resolve().then(function(){return e._cursor[n].apply(e._cursor,t),UN(e._request).then(function(t){if(t)return new GN(t,e._request)})})})}),zN.prototype.createIndex=function(){return new HN(this._store.createIndex.apply(this._store,arguments))},zN.prototype.index=function(){return new HN(this._store.index.apply(this._store,arguments))},qN(zN,"_store",["name","keyPath","indexNames","autoIncrement"]),VN(zN,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),WN(zN,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),BN(zN,"_store",IDBObjectStore,["deleteIndex"]),KN.prototype.objectStore=function(){return new zN(this._tx.objectStore.apply(this._tx,arguments))},qN(KN,"_tx",["objectStoreNames","mode"]),BN(KN,"_tx",IDBTransaction,["abort"]),QN.prototype.createObjectStore=function(){return new zN(this._db.createObjectStore.apply(this._db,arguments))},qN(QN,"_db",["name","version","objectStoreNames"]),BN(QN,"_db",IDBDatabase,["deleteObjectStore","close"]),YN.prototype.transaction=function(){return new KN(this._db.transaction.apply(this._db,arguments))},qN(YN,"_db",["name","version","objectStoreNames"]),BN(YN,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(i){[zN,HN].forEach(function(t){i in t.prototype&&(t.prototype[i.replace("open","iterate")]=function(){var t=function(t){return Array.prototype.slice.call(t)}(arguments),e=t[t.length-1],n=this._store||this._index,r=n[i].apply(n,t.slice(0,-1));r.onsuccess=function(){e(r.result)}})})}),[HN,zN].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,n){var r=this,i=[];return new Promise(function(e){r.iterateCursor(t,function(t){t?(i.push(t.value),void 0===n||i.length!=n?t.continue():e(i)):e(i)})})})});var $N,ZN=1e4,tA="w:0.4.5",eA="FIS_v2",nA="https://firebaseinstallations.googleapis.com/v1",rA=36e5,iA=(($N={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',$N["not-registered"]="Firebase Installation is not registered.",$N["installation-not-found"]="Firebase Installation not found.",$N["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',$N["app-offline"]="Could not process request. Application offline.",$N["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",$N),oA=new Ks("installations","Installations",iA);function sA(t){return t instanceof Gs&&t.code.includes("request-failed")}function aA(t){var e=t.projectId;return nA+"/projects/"+e+"/installations"}function uA(t){return{token:t.token,requestStatus:2,expiresIn:function(t){return Number(t.replace("s","000"))}(t.expiresIn),creationTime:Date.now()}}function cA(r,i){return Ts(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return[4,i.json()];case 1:return e=t.sent(),n=e.error,[2,oA.create("request-failed",{requestName:r,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})]}})})}function hA(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function lA(t,e){var n=e.refreshToken,r=hA(t);return r.append("Authorization",function(t){return eA+" "+t}(n)),r}function fA(n){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return[4,n()];case 1:return 500<=(e=t.sent()).status&&e.status<600?[2,n()]:[2,e]}})})}function pA(e){return new Promise(function(t){setTimeout(t,e)})}var dA=/^[cdef][\w-]{21}$/,vA="";function yA(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return function(t){return btoa(String.fromCharCode.apply(String,As(t))).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22)}(t);return dA.test(e)?e:vA}catch(t){return vA}}function gA(t){return t.appName+"!"+t.appId}var mA=new Map;function wA(t,e){var n=gA(t);bA(n,e),function(t,e){var n=EA();n&&n.postMessage({key:t,fid:e});IA()}(n,e)}function bA(t,e){var n,r,i=mA.get(t);if(i)try{for(var o=Cs(i),s=o.next();!s.done;s=o.next()){(0,s.value)(e)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var _A=null;function EA(){return!_A&&"BroadcastChannel"in self&&((_A=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){bA(t.data.key,t.data.fid)}),_A}function IA(){0===mA.size&&_A&&(_A.close(),_A=null)}var TA,SA,CA="firebase-installations-database",NA=1,AA="firebase-installations-store",kA=null;function OA(){return kA=kA||XN(CA,NA,function(t){switch(t.oldVersion){case 0:t.createObjectStore(AA)}})}function RA(s,a){return Ts(this,void 0,void 0,function(){var e,n,r,i,o;return Ss(this,function(t){switch(t.label){case 0:return e=gA(s),[4,OA()];case 1:return n=t.sent(),r=n.transaction(AA,"readwrite"),[4,(i=r.objectStore(AA)).get(e)];case 2:return o=t.sent(),[4,i.put(a,e)];case 3:return t.sent(),[4,r.complete];case 4:return t.sent(),o&&o.fid===a.fid||wA(s,a.fid),[2,a]}})})}function DA(i){return Ts(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return e=gA(i),[4,OA()];case 1:return n=t.sent(),[4,(r=n.transaction(AA,"readwrite")).objectStore(AA).delete(e)];case 2:return t.sent(),[4,r.complete];case 3:return t.sent(),[2]}})})}function PA(a,u){return Ts(this,void 0,void 0,function(){var e,n,r,i,o,s;return Ss(this,function(t){switch(t.label){case 0:return e=gA(a),[4,OA()];case 1:return n=t.sent(),r=n.transaction(AA,"readwrite"),[4,(i=r.objectStore(AA)).get(e)];case 2:return o=t.sent(),void 0!==(s=u(o))?[3,4]:[4,i.delete(e)];case 3:return t.sent(),[3,6];case 4:return[4,i.put(s,e)];case 5:t.sent(),t.label=6;case 6:return[4,r.complete];case 7:return t.sent(),!s||o&&o.fid===s.fid||wA(a,s.fid),[2,s]}})})}function xA(i){return Ts(this,void 0,void 0,function(){var r,e,n;return Ss(this,function(t){switch(t.label){case 0:return[4,PA(i,function(t){var e=function(t){return MA(t||{fid:yA(),registrationStatus:0})}(t),n=function(t,e){{if(0!==e.registrationStatus)return 1===e.registrationStatus?{installationEntry:e,registrationPromise:function(o){return Ts(this,void 0,void 0,function(){var e,n,r,i;return Ss(this,function(t){switch(t.label){case 0:return[4,LA(o)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,pA(100)];case 3:return t.sent(),[4,LA(o)];case 4:return e=t.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,xA(o)];case 6:return n=t.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}})})}(t)}:{installationEntry:e};if(!navigator.onLine){var n=Promise.reject(oA.create("app-offline"));return{installationEntry:e,registrationPromise:n}}var r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=function(r,i){return Ts(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,7]),[4,function(a,t){var u=t.fid;return Ts(this,void 0,void 0,function(){var e,n,r,i,o,s;return Ss(this,function(t){switch(t.label){case 0:return e=aA(a),n=hA(a),r={fid:u,authVersion:eA,appId:a.appId,sdkVersion:tA},i={method:"POST",headers:n,body:JSON.stringify(r)},[4,fA(function(){return fetch(e,i)})];case 1:return(o=t.sent()).ok?[4,o.json()]:[3,3];case 2:return s=t.sent(),[2,{fid:s.fid||u,registrationStatus:2,refreshToken:s.refreshToken,authToken:uA(s.authToken)}];case 3:return[4,cA("Create Installation",o)];case 4:throw t.sent()}})})}(r,i)];case 1:return e=t.sent(),[2,RA(r,e)];case 2:return sA(n=t.sent())&&409===n.serverCode?[4,DA(r)]:[3,4];case 3:return t.sent(),[3,6];case 4:return[4,RA(r,{fid:i.fid,registrationStatus:0})];case 5:t.sent(),t.label=6;case 6:throw n;case 7:return[2]}})})}(t,r);return{installationEntry:r,registrationPromise:i}}}(i,e);return r=n.registrationPromise,n.installationEntry})];case 1:return(e=t.sent()).fid!==vA?[3,3]:(n={},[4,r]);case 2:return[2,(n.installationEntry=t.sent(),n)];case 3:return[2,{installationEntry:e,registrationPromise:r}]}})})}function LA(t){return PA(t,function(t){if(!t)throw oA.create("installation-not-found");return MA(t)})}function MA(t){return function(t){return 1===t.registrationStatus&&t.registrationTime+ZN<Date.now()}(t)?{fid:t.fid,registrationStatus:0}:t}function FA(t,u){var c=t.appConfig,h=t.platformLoggerProvider;return Ts(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return Ss(this,function(t){switch(t.label){case 0:return e=function(t,e){var n=e.fid;return aA(t)+"/"+n+"/authTokens:generate"}(c,u),n=lA(c,u),(r=h.getImmediate({optional:!0}))&&n.append("x-firebase-client",r.getPlatformInfoString()),i={installation:{sdkVersion:tA}},o={method:"POST",headers:n,body:JSON.stringify(i)},[4,fA(function(){return fetch(e,o)})];case 1:return(s=t.sent()).ok?[4,s.json()]:[3,3];case 2:return a=t.sent(),[2,uA(a)];case 3:return[4,cA("Generate Auth Token",s)];case 4:throw t.sent()}})})}function UA(i,o){return void 0===o&&(o=!1),Ts(this,void 0,void 0,function(){var r,e,n;return Ss(this,function(t){switch(t.label){case 0:return[4,PA(i.appConfig,function(t){if(!qA(t))throw oA.create("not-registered");var e=t.authToken;if(!o&&function(t){return 2===t.requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+rA}(t)}(e))return t;if(1===e.requestStatus)return r=function(r,i){return Ts(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return[4,jA(r.appConfig)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.authToken.requestStatus?[3,5]:[4,pA(100)];case 3:return t.sent(),[4,jA(r.appConfig)];case 4:return e=t.sent(),[3,2];case 5:return 0===(n=e.authToken).requestStatus?[2,UA(r,i)]:[2,n]}})})}(i,o),t;if(!navigator.onLine)throw oA.create("app-offline");var n=function(t){var e={requestStatus:1,requestTime:Date.now()};return Is(Is({},t),{authToken:e})}(t);return r=function(i,o){return Ts(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,8]),[4,FA(i,o)];case 1:return e=t.sent(),r=Is(Is({},o),{authToken:e}),[4,RA(i.appConfig,r)];case 2:return t.sent(),[2,e];case 3:return!sA(n=t.sent())||401!==n.serverCode&&404!==n.serverCode?[3,5]:[4,DA(i.appConfig)];case 4:return t.sent(),[3,7];case 5:return r=Is(Is({},o),{authToken:{requestStatus:0}}),[4,RA(i.appConfig,r)];case 6:t.sent(),t.label=7;case 7:throw n;case 8:return[2]}})})}(i,n),n})];case 1:return e=t.sent(),r?[4,r]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=e.authToken,t.label=4;case 4:return[2,n]}})})}function jA(t){return PA(t,function(t){if(!qA(t))throw oA.create("not-registered");return function(t){return 1===t.requestStatus&&t.requestTime+ZN<Date.now()}(t.authToken)?Is(Is({},t),{authToken:{requestStatus:0}}):t})}function qA(t){return void 0!==t&&2===t.registrationStatus}function VA(e,n){return void 0===n&&(n=!1),Ts(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return[4,function(n){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return[4,xA(n)];case 1:return(e=t.sent().registrationPromise)?[4,e]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e.appConfig)];case 1:return t.sent(),[4,UA(e,n)];case 2:return[2,t.sent().token]}})})}function BA(o,s){return Ts(this,void 0,void 0,function(){var e,n,r,i;return Ss(this,function(t){switch(t.label){case 0:return e=function(t,e){var n=e.fid;return aA(t)+"/"+n}(o,s),n=lA(o,s),r={method:"DELETE",headers:n},[4,fA(function(){return fetch(e,r)})];case 1:return(i=t.sent()).ok?[3,3]:[4,cA("Delete Installation",i)];case 2:throw t.sent();case 3:return[2]}})})}function WA(t,e){var n=t.appConfig;return function(t,e){EA();var n=gA(t),r=mA.get(n);r||(r=new Set,mA.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=gA(t),r=mA.get(n);r&&(r.delete(e),0===r.size&&mA.delete(n),IA())}(n,e)}}function HA(t){return oA.create("missing-app-config-values",{valueName:t})}(TA=Gl).INTERNAL.registerComponent(new da("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw HA("App Configuration");if(!t.name)throw HA("App Name");try{for(var r=Cs(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw HA(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(i){return Ts(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return[4,xA(i.appConfig)];case 1:return e=t.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):UA(i).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return VA(n,t)},delete:function(){return function(r){return Ts(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return[4,PA(e=r.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=t.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw oA.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw oA.create("app-offline");case 3:return[4,BA(e,n)];case 4:return t.sent(),[4,DA(e)];case 5:t.sent(),t.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return WA(n,t)}}},"PUBLIC")),TA.registerVersion("@firebase/installations","0.4.5");var GA=((SA={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',SA["only-available-in-window"]="This method is available in a Window context.",SA["only-available-in-sw"]="This method is available in a service worker context.",SA["permission-default"]="The notification permission was not granted and dismissed instead.",SA["permission-blocked"]="The notification permission was not granted and blocked instead.",SA["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",SA["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",SA["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",SA["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",SA["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",SA["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",SA["token-update-no-token"]="FCM returned no token when updating the user to push.",SA["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",SA["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",SA["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",SA["invalid-vapid-key"]="The public VAPID key must be a string.",SA["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",SA),zA=new Ks("messaging","Messaging",GA);function KA(t){return zA.create("missing-app-config-values",{valueName:t})}function QA(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,As(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var YA="fcm_token_details_db",XA=5,JA="fcm_token_object_Store";function $A(a){return Ts(this,void 0,void 0,function(){var e,s,n=this;return Ss(this,function(t){switch(t.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=t.sent(),!e.map(function(t){return t.name}).includes(YA))return[2,null];t.label=2;case 2:return s=null,[4,XN(YA,XA,function(o){return Ts(n,void 0,void 0,function(){var e,n,r,i;return Ss(this,function(t){switch(t.label){case 0:return o.oldVersion<2?[2]:o.objectStoreNames.contains(JA)?[4,(e=o.transaction.objectStore(JA)).index("fcmSenderId").get(a)]:[2];case 1:return n=t.sent(),[4,e.clear()];case 2:if(t.sent(),!n)return[2];if(2===o.oldVersion){if(!(r=n).auth||!r.p256dh||!r.endpoint)return[2];s={token:r.fcmToken,createTime:null!==(i=r.createTime)&&void 0!==i?i:Date.now(),subscriptionOptions:{auth:r.auth,p256dh:r.p256dh,endpoint:r.endpoint,swScope:r.swScope,vapidKey:"string"==typeof r.vapidKey?r.vapidKey:QA(r.vapidKey)}}}else 3===o.oldVersion?s={token:(r=n).fcmToken,createTime:r.createTime,subscriptionOptions:{auth:QA(r.auth),p256dh:QA(r.p256dh),endpoint:r.endpoint,swScope:r.swScope,vapidKey:QA(r.vapidKey)}}:4===o.oldVersion&&(s={token:(r=n).fcmToken,createTime:r.createTime,subscriptionOptions:{auth:QA(r.auth),p256dh:QA(r.p256dh),endpoint:r.endpoint,swScope:r.swScope,vapidKey:QA(r.vapidKey)}});return[2]}})})})];case 3:return t.sent().close(),[4,JN(YA)];case 4:return t.sent(),[4,JN("fcm_vapid_details_db")];case 5:return t.sent(),[4,JN("undefined")];case 6:return t.sent(),[2,function(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&0<t.createTime&&"string"==typeof t.token&&0<t.token.length&&"string"==typeof e.auth&&0<e.auth.length&&"string"==typeof e.p256dh&&0<e.p256dh.length&&"string"==typeof e.endpoint&&0<e.endpoint.length&&"string"==typeof e.swScope&&0<e.swScope.length&&"string"==typeof e.vapidKey&&0<e.vapidKey.length}(s)?s:null]}})})}var ZA="firebase-messaging-database",tk=1,ek="firebase-messaging-store",nk=null;function rk(){return nk=nk||XN(ZA,tk,function(t){switch(t.oldVersion){case 0:t.createObjectStore(ek)}})}function ik(i){return Ts(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return e=sk(i),[4,rk()];case 1:return[4,t.sent().transaction(ek).objectStore(ek).get(e)];case 2:return(n=t.sent())?[2,n]:[3,3];case 3:return[4,$A(i.appConfig.senderId)];case 4:return(r=t.sent())?[4,ok(i,r)]:[3,6];case 5:return t.sent(),[2,r];case 6:return[2]}})})}function ok(i,o){return Ts(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return e=sk(i),[4,rk()];case 1:return n=t.sent(),[4,(r=n.transaction(ek,"readwrite")).objectStore(ek).put(o,e)];case 2:return t.sent(),[4,r.complete];case 3:return t.sent(),[2,o]}})})}function sk(t){return t.appConfig.appId}var ak="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",uk="https://fcmregistrations.googleapis.com/v1",ck="FCM_MSG",hk="google.c.a.c_id";function lk(s,a){return Ts(this,void 0,void 0,function(){var e,n,r,i,o;return Ss(this,function(t){switch(t.label){case 0:return[4,pk(s)];case 1:e=t.sent(),n={method:"DELETE",headers:e},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(fk(s.appConfig)+"/"+a,n)];case 3:return[4,t.sent().json()];case 4:if((r=t.sent()).error)throw i=r.error.message,zA.create("token-unsubscribe-failed",{errorInfo:i});return[3,6];case 5:throw o=t.sent(),zA.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}})})}function fk(t){var e=t.projectId;return uk+"/projects/"+e+"/registrations"}function pk(t){var n=t.appConfig,r=t.installations;return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return[4,r.getToken()];case 1:return e=t.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}})})}function dk(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==ak&&(o.web.applicationPubKey=i),o}var vk,yk;function gk(o,s,a){return Ts(this,void 0,void 0,function(){var e,n,r,i;return Ss(this,function(t){switch(t.label){case 0:if("granted"!==Notification.permission)throw zA.create("permission-blocked");return[4,function(n,r){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return[4,n.pushManager.getSubscription()];case 1:return(e=t.sent())?[2,e]:[2,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:r})]}})})}(s,a)];case 1:return e=t.sent(),[4,ik(o)];case 2:return n=t.sent(),r={vapidKey:a,swScope:s.scope,endpoint:e.endpoint,auth:QA(e.getKey("auth")),p256dh:QA(e.getKey("p256dh"))},n?[3,3]:[2,wk(o,r)];case 3:if(function(t,e){var n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,o=e.p256dh===t.p256dh;return n&&r&&i&&o}(n.subscriptionOptions,r))return[3,8];t.label=4;case 4:return t.trys.push([4,6,,7]),[4,lk(o,n.token)];case 5:return t.sent(),[3,7];case 6:return i=t.sent(),console.warn(i),[3,7];case 7:return[2,wk(o,r)];case 8:return Date.now()>=n.createTime+6048e5?[2,function(i,o,s){return Ts(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,5]),[4,function(a,u){return Ts(this,void 0,void 0,function(){var e,n,r,i,o,s;return Ss(this,function(t){switch(t.label){case 0:return[4,pk(a)];case 1:e=t.sent(),n=dk(u.subscriptionOptions),r={method:"PATCH",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(fk(a.appConfig)+"/"+u.token,r)];case 3:return[4,t.sent().json()];case 4:return i=t.sent(),[3,6];case 5:throw o=t.sent(),zA.create("token-update-failed",{errorInfo:o});case 6:if(i.error)throw s=i.error.message,zA.create("token-update-failed",{errorInfo:s});if(!i.token)throw zA.create("token-update-no-token");return[2,i.token]}})})}(o,i)];case 1:return e=t.sent(),n=Is({token:e,createTime:Date.now()},i),[4,ok(o,n)];case 2:return t.sent(),[2,e];case 3:return r=t.sent(),[4,mk(o,s)];case 4:throw t.sent(),r;case 5:return[2]}})})}({token:n.token,createTime:Date.now(),subscriptionOptions:r},o,s)]:[2,n.token];case 9:return[2]}})})}function mk(r,i){return Ts(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return[4,ik(r)];case 1:return(e=t.sent())?[4,lk(r,e.token)]:[3,4];case 2:return t.sent(),[4,function(i){return Ts(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return e=sk(i),[4,rk()];case 1:return n=t.sent(),[4,(r=n.transaction(ek,"readwrite")).objectStore(ek).delete(e)];case 2:return t.sent(),[4,r.complete];case 3:return t.sent(),[2]}})})}(r)];case 3:t.sent(),t.label=4;case 4:return[4,i.pushManager.getSubscription()];case 5:return(n=t.sent())?[2,n.unsubscribe()]:[2,!0]}})})}function wk(r,i){return Ts(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return[4,function(a,u){return Ts(this,void 0,void 0,function(){var e,n,r,i,o,s;return Ss(this,function(t){switch(t.label){case 0:return[4,pk(a)];case 1:e=t.sent(),n=dk(u),r={method:"POST",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(fk(a.appConfig),r)];case 3:return[4,t.sent().json()];case 4:return i=t.sent(),[3,6];case 5:throw o=t.sent(),zA.create("token-subscribe-failed",{errorInfo:o});case 6:if(i.error)throw s=i.error.message,zA.create("token-subscribe-failed",{errorInfo:s});if(!i.token)throw zA.create("token-subscribe-no-token");return[2,i.token]}})})}(r,i)];case 1:return e=t.sent(),n={token:e,createTime:Date.now(),subscriptionOptions:i},[4,ok(r,n)];case 2:return t.sent(),[2,n.token]}})})}function bk(t){return"object"==typeof t&&!!t&&hk in t}(yk=vk=vk||{}).PUSH_RECEIVED="push-received",yk.NOTIFICATION_CLICKED="notification-clicked";var _k=(Object.defineProperty(Ek.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!0,configurable:!0}),Ek.prototype.getToken=function(){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return this.vapidKey||(this.vapidKey=ak),[4,this.getServiceWorkerRegistration()];case 1:return e=t.sent(),"default"!==Notification.permission?[3,3]:[4,Notification.requestPermission()];case 2:t.sent(),t.label=3;case 3:if("granted"!==Notification.permission)throw zA.create("permission-blocked");return[2,gk(this.firebaseDependencies,e,this.vapidKey)]}})})},Ek.prototype.deleteToken=function(){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return[4,this.getServiceWorkerRegistration()];case 1:return e=t.sent(),[2,mk(this.firebaseDependencies,e)]}})})},Ek.prototype.requestPermission=function(){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?zA.create("permission-blocked"):zA.create("permission-default")}})})},Ek.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw zA.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw zA.create("invalid-vapid-key");this.vapidKey=t},Ek.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw zA.create("invalid-sw-registration");if(this.swRegistration)throw zA.create("use-sw-after-get-token");this.swRegistration=t},Ek.prototype.onMessage=function(t){var e=this;return this.onMessageCallback="function"==typeof t?t:t.next,function(){e.onMessageCallback=null}},Ek.prototype.setBackgroundMessageHandler=function(){throw zA.create("only-available-in-sw")},Ek.prototype.onTokenRefresh=function(){return function(){}},Ek.prototype.getServiceWorkerRegistration=function(){return Ts(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:if(this.swRegistration)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 2:return e.swRegistration=t.sent(),this.swRegistration.update().catch(function(){}),[3,4];case 3:throw n=t.sent(),zA.create("failed-service-worker-registration",{browserErrorMessage:n.message});case 4:return[2,this.swRegistration]}})})},Ek.prototype.messageEventListener=function(o){var s;return Ts(this,void 0,void 0,function(){var e,n,r,i;return Ss(this,function(t){switch(t.label){case 0:return(null===(s=o.data)||void 0===s?void 0:s.firebaseMessaging)?(e=o.data.firebaseMessaging,n=e.type,r=e.payload,this.onMessageCallback&&n===vk.PUSH_RECEIVED&&this.onMessageCallback(r),bk(i=r.data)&&"1"===i["google.c.a.e"]?[4,this.logEvent(n,i)]:[3,2]):[2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},Ek.prototype.logEvent=function(n,r){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return e=function(t){switch(t){case vk.NOTIFICATION_CLICKED:return"notification_open";case vk.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(n),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return t.sent().logEvent(e,{message_id:r[hk],message_name:r["google.c.a.c_l"],message_time:r["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},Ek);function Ek(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}var Ik=(Object.defineProperty(Tk.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!0,configurable:!0}),Tk.prototype.setBackgroundMessageHandler=function(t){if(!t||"function"!=typeof t)throw zA.create("invalid-bg-handler");this.bgMessageHandler=t},Tk.prototype.getToken=function(){var n,r;return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return this.vapidKey?[3,2]:[4,ik(this.firebaseDependencies)];case 1:e=t.sent(),this.vapidKey=null!==(r=null===(n=null==e?void 0:e.subscriptionOptions)||void 0===n?void 0:n.vapidKey)&&void 0!==r?r:ak,t.label=2;case 2:return[2,gk(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},Tk.prototype.deleteToken=function(){return mk(this.firebaseDependencies,self.registration)},Tk.prototype.requestPermission=function(){throw zA.create("only-available-in-window")},Tk.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw zA.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw zA.create("invalid-vapid-key");this.vapidKey=t},Tk.prototype.useServiceWorker=function(){throw zA.create("only-available-in-window")},Tk.prototype.onMessage=function(){throw zA.create("only-available-in-window")},Tk.prototype.onTokenRefresh=function(){throw zA.create("only-available-in-window")},Tk.prototype.onPush=function(i){return Ts(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(t){return null}}(i))?[4,Sk()]:[2];case 1:return function(t){return t.some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})}(n=t.sent())?[2,function(t,e){var n,r,i=Ck(vk.PUSH_RECEIVED,e);try{for(var o=Cs(t),s=o.next();!s.done;s=o.next())s.value.postMessage(i)}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}(n,e)]:(r=function(t){var e;if(t&&"object"==typeof t.notification){var n=Is({},t.notification);return n.data=Is(Is({},t.notification.data),((e={})[ck]=t,e)),n}}(e))?[4,function(t){var e,n=null!==(e=t.title)&&void 0!==e?e:"",r=t.actions,i=Notification.maxActions;return r&&i&&r.length>i&&console.warn("This browser only supports "+i+" actions. The remaining actions will not be displayed."),self.registration.showNotification(n,t)}(r)]:[3,3];case 2:return t.sent(),[3,5];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(e)]:[3,5];case 4:t.sent(),t.label=5;case 5:return[2]}})})},Tk.prototype.onSubChange=function(n){var r,i;return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return n.newSubscription?[3,2]:[4,mk(this.firebaseDependencies,self.registration)];case 1:return t.sent(),[2];case 2:return[4,ik(this.firebaseDependencies)];case 3:return e=t.sent(),[4,mk(this.firebaseDependencies,self.registration)];case 4:return t.sent(),[4,gk(this.firebaseDependencies,self.registration,null!==(i=null===(r=null==e?void 0:e.subscriptionOptions)||void 0===r?void 0:r.vapidKey)&&void 0!==i?i:ak)];case 5:return t.sent(),[2]}})})},Tk.prototype.onNotificationClick=function(o){var s,a;return Ts(this,void 0,void 0,function(){var e,n,r,i;return Ss(this,function(t){switch(t.label){case 0:return(e=null===(a=null===(s=o.notification)||void 0===s?void 0:s.data)||void 0===a?void 0:a[ck])?o.action?[2]:(o.stopImmediatePropagation(),o.notification.close(),(n=function(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;return i||(bk(t.data)?self.location.origin:null)}(e))?[4,function(u){return Ts(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return Ss(this,function(t){switch(t.label){case 0:return e=new URL(u,self.location.href).href,[4,Sk()];case 1:n=t.sent();try{for(r=Cs(n),i=r.next();!i.done;i=r.next())if(o=i.value,new URL(o.url,self.location.href).href===e)return[2,o]}catch(t){s={error:t}}finally{try{i&&!i.done&&(a=r.return)&&a.call(r)}finally{if(s)throw s.error}}return[2,null]}})})}(n)]:[2]):[2];case 1:return(r=t.sent())?[3,4]:[4,self.clients.openWindow(n)];case 2:return r=t.sent(),[4,function(e){return new Promise(function(t){setTimeout(t,e)})}(3e3)];case 3:return t.sent(),[3,6];case 4:return[4,r.focus()];case 5:r=t.sent(),t.label=6;case 6:return r?(i=Ck(vk.NOTIFICATION_CLICKED,e),[2,r.postMessage(i)]):[2]}})})},Tk);function Tk(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}function Sk(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Ck(t,e){return{firebaseMessaging:{type:t,payload:e}}}var Nk={isSupported:Ak};function Ak(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Gl.INTERNAL.registerComponent(new da("messaging",function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw KA("App Configuration Object");if(!t.name)throw KA("App Name");var r=t.options;try{for(var i=Cs(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw KA(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!Ak())throw zA.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new Ik(n):new _k(n)},"PUBLIC").setServiceProps(Nk));var kk="firebasestorage.googleapis.com",Ok="storageBucket",Rk=(Dk.prototype.codeProp=function(){return this.code},Dk.prototype.codeEquals=function(t){return xk(t)===this.codeProp()},Dk.prototype.serverResponseProp=function(){return this.serverResponse_},Dk.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(Dk.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(Dk.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(Dk.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(Dk.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),Dk);function Dk(t,e){this.code_=xk(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}var Pk={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function xk(t){return"storage/"+t}function Lk(){return new Rk(Pk.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Mk(){return new Rk(Pk.CANCELED,"User canceled the upload/download.")}function Fk(){return new Rk(Pk.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Uk(t,e,n){return new Rk(Pk.INVALID_ARGUMENT,"Invalid argument in `"+e+"` at index "+t+": "+n)}function jk(){return new Rk(Pk.APP_DELETED,"The Firebase app was deleted.")}function qk(t,e){return new Rk(Pk.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Vk(t){throw new Rk(Pk.INTERNAL_ERROR,"Internal error: "+t)}var Bk={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function Wk(t){switch(t){case Bk.RAW:case Bk.BASE64:case Bk.BASE64URL:case Bk.DATA_URL:return;default:throw"Expected one of the event types: ["+Bk.RAW+", "+Bk.BASE64+", "+Bk.BASE64URL+", "+Bk.DATA_URL+"]."}}var Hk=function(t,e){this.data=t,this.contentType=e||null};function Gk(t,e){switch(t){case Bk.RAW:return new Hk(zk(e));case Bk.BASE64:case Bk.BASE64URL:return new Hk(Kk(t,e));case Bk.DATA_URL:return new Hk(function(t){var e=new Qk(t);return e.base64?Kk(Bk.BASE64,e.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw qk(Bk.DATA_URL,"Malformed data URL.")}return zk(e)}(e.rest)}(e),function(t){return new Qk(t).contentType}(e))}throw Lk()}function zk(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Kk(e,t){switch(e){case Bk.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw qk(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Bk.BASE64URL:var i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw qk(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(t)}catch(t){throw qk(e,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var Qk=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw qk(Bk.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=function(t,e){return t.length>=e.length&&t.substring(t.length-e.length)===e}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1)};var Yk,Xk,Jk={STATE_CHANGED:"state_changed"},$k="running",Zk="pausing",tO="paused",eO="success",nO="canceling",rO="canceled",iO="error",oO={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function sO(t){switch(t){case $k:case Zk:case nO:return oO.RUNNING;case tO:return oO.PAUSED;case eO:return oO.SUCCESS;case rO:return oO.CANCELED;case iO:default:return oO.ERROR}}function aO(t){return null!=t}function uO(t){return void 0!==t}function cO(t){return"function"==typeof t}function hO(t){return"object"==typeof t}function lO(t){return"string"==typeof t||t instanceof String}function fO(t){return"number"==typeof t||t instanceof Number}function pO(t){return dO()&&t instanceof Blob}function dO(){return"undefined"!=typeof Blob}(Xk=Yk=Yk||{})[Xk.NO_ERROR=0]="NO_ERROR",Xk[Xk.NETWORK_ERROR=1]="NETWORK_ERROR",Xk[Xk.ABORT=2]="ABORT";var vO=(yO.prototype.send=function(t,e,n,r){if(this.sent_)throw Vk("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),aO(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return aO(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},yO.prototype.getErrorCode=function(){if(!this.sent_)throw Vk("cannot .getErrorCode() before sending");return this.errorCode_},yO.prototype.getStatus=function(){if(!this.sent_)throw Vk("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},yO.prototype.getResponseText=function(){if(!this.sent_)throw Vk("cannot .getResponseText() before sending");return this.xhr_.responseText},yO.prototype.abort=function(){this.xhr_.abort()},yO.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},yO.prototype.addUploadProgressListener=function(t){aO(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},yO.prototype.removeUploadProgressListener=function(t){aO(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},yO);function yO(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Yk.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=Yk.ABORT,t(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=Yk.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(){t(e)})})}var gO=(mO.prototype.createXhrIo=function(){return new vO},mO);function mO(){}function wO(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(dO())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}var bO=(_O.prototype.size=function(){return this.size_},_O.prototype.type=function(){return this.type_},_O.prototype.slice=function(t,e){if(pO(this.data_)){var n=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,t,e);return null===n?null:new _O(n)}return new _O(new Uint8Array(this.data_.buffer,t,e-t),!0)},_O.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(dO()){var n=t.map(function(t){return t instanceof _O?t.data_:t});return new _O(wO.apply(null,n))}var r=t.map(function(t){return lO(t)?Gk(Bk.RAW,t).data:t.data_}),i=0;r.forEach(function(t){i+=t.byteLength});var o=new Uint8Array(i),s=0;return r.forEach(function(t){for(var e=0;e<t.length;e++)o[s++]=t[e]}),new _O(o,!0)},_O.prototype.uploadData=function(){return this.data_},_O);function _O(t,e){var n=0,r="";pO(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}var EO=(Object.defineProperty(IO.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(IO.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!0,configurable:!0}),IO.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},IO.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},IO.makeFromBucketSpec=function(e){var t;try{t=IO.makeFromUrl(e)}catch(t){return new IO(e,"")}if(""===t.path)return t;throw function(t){return new Rk(Pk.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}(e)},IO.makeFromUrl=function(t){for(var e=null,n="([A-Za-z0-9.\\-_]+)",r=new RegExp("^gs://"+n+"(/(.*))?$","i"),i=kk.replace(/[.]/g,"\\."),o=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+i+"/v[A-Za-z0-9_]+/b/"+n+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:function(t){t.path_=decodeURIComponent(t.path)}}],s=0;s<o.length;s++){var a=o[s],u=a.regex.exec(t);if(u){var c=u[a.indices.bucket],h=u[a.indices.path];e=new IO(c,h=h||""),a.postModify(e);break}}if(null==e)throw function(t){return new Rk(Pk.INVALID_URL,"Invalid URL '"+t+"'.")}(t);return e},IO);function IO(t,e){this.bucket=t,this.path_=e}function TO(t){var e;try{e=JSON.parse(t)}catch(t){return null}return function(t){return hO(t)&&!Array.isArray(t)}(e)?e:null}function SO(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function CO(t){return"https://"+kk+"/v0"+t}function NO(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}function AO(t,e){return e}var kO=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||AO},OO=null;function RO(){if(OO)return OO;var t=[];t.push(new kO("bucket")),t.push(new kO("generation")),t.push(new kO("metageneration")),t.push(new kO("name","fullPath",!0));var e=new kO("name");e.xform=function(t,e){return function(t){return!lO(t)||t.length<2?t:SO(t)}(e)},t.push(e);var n=new kO("size");return n.xform=function(t,e){return aO(e)?Number(e):e},t.push(n),t.push(new kO("timeCreated")),t.push(new kO("updated")),t.push(new kO("md5Hash",null,!0)),t.push(new kO("cacheControl",null,!0)),t.push(new kO("contentDisposition",null,!0)),t.push(new kO("contentEncoding",null,!0)),t.push(new kO("contentLanguage",null,!0)),t.push(new kO("contentType",null,!0)),t.push(new kO("metadata","customMetadata",!0)),OO=t}function DO(r,i){Object.defineProperty(r,"ref",{get:function(){var t=r.bucket,e=r.fullPath,n=new EO(t,e);return i.makeStorageReference(n)}})}function PO(t,e,n){var r=TO(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return DO(r,t),r}(t,r,n)}function xO(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function LO(t){if(!hO(t)||!t)throw"Expected Metadata object.";for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if("customMetadata"===e){if(!hO(n))throw"Expected object for 'customMetadata' mapping."}else if(hO(r=n)&&null!==r)throw"Mapping for '"+e+"' cannot be an object."}var r}var MO="maxResults",FO=1e3,UO="pageToken",jO="prefixes",qO="items";function VO(t,e){var n={prefixes:[],items:[],nextPageToken:e.nextPageToken},r=t.bucket();if(null===r)throw new Rk(Pk.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Ok+"' property when initializing the app?");if(e[jO])for(var i=0,o=e[jO];i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new EO(r,s));n.prefixes.push(a)}if(e[qO])for(var u=0,c=e[qO];u<c.length;u++){var h=c[u];a=t.makeStorageReference(new EO(r,h.name));n.items.push(a)}return n}function BO(t){if(!hO(t)||!t)throw"Expected ListOptions object.";for(var e in t)if(e===MO){if(!fO(n=t[MO])||!Number.isInteger(n)||t[MO]<=0)throw"Expected maxResults to be a positive number.";if(1e3<t[MO])throw"Expected maxResults to be less than or equal to "+FO+"."}else{if(e!==UO)throw"Unknown option: "+e;if(t[UO]&&!lO(t[UO]))throw"Expected pageToken to be string."}var n}var WO=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function HO(t){if(!t)throw Lk()}function GO(r,i){return function(t,e){var n=PO(r,e,i);return HO(null!==n),n}}function zO(r){return function(t,e){var n=function(t,e){var n=TO(e);return null===n?null:VO(t,n)}(r,e);return HO(null!==n),n}}function KO(r,i){return function(t,e){var n=PO(r,e,i);return HO(null!==n),function(r,t){var e=TO(t);if(null===e)return null;if(!lO(e.downloadTokens))return null;var n=e.downloadTokens;if(0===n.length)return null;var i=encodeURIComponent;return n.split(",").map(function(t){var e=r.bucket,n=r.fullPath;return CO("/b/"+i(e)+"/o/"+i(n))+NO({alt:"media",token:t})})[0]}(n,e)}}function QO(r){return function(t,e){var n;return(n=401===t.getStatus()?new Rk(Pk.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?function(t){return new Rk(Pk.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(r.bucket):403===t.getStatus()?function(t){return new Rk(Pk.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}(r.path):e).setServerResponseProp(e.serverResponseProp()),n}}function YO(r){var i=QO(r);return function(t,e){var n=i(t,e);return 404===t.getStatus()&&(n=function(t){return new Rk(Pk.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}(r.path)),n.setServerResponseProp(e.serverResponseProp()),n}}function XO(t,e,n){var r=CO(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new WO(r,"GET",GO(t,n),i);return o.errorHandler=YO(e),o}function JO(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}function $O(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};var a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=JO(e,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+xO(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+a+"--",l=bO.getBlob(c,r,h);if(null===l)throw Fk();var f={name:u.fullPath},p=CO(o),d=t.maxUploadRetryTime(),v=new WO(p,"POST",GO(t,n),d);return v.urlParams=f,v.headers=s,v.body=l.uploadData(),v.errorHandler=QO(e),v}var ZO=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function tR(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){HO(!1)}return HO(!!n&&-1!==(e||["active"]).indexOf(n)),n}function eR(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=JO(e,r,i),a={name:s.fullPath},u=CO(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},h=xO(s,n),l=t.maxUploadRetryTime();var f=new WO(u,"POST",function(t){var e;tR(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){HO(!1)}return HO(lO(e)),e},l);return f.urlParams=a,f.headers=c,f.body=h,f.errorHandler=QO(e),f}function nR(t,e,n,i){var r=t.maxUploadRetryTime(),o=new WO(n,"POST",function(t){var e=tR(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){HO(!1)}n||HO(!1);var r=Number(n);return HO(!isNaN(r)),new ZO(r,i.size(),"final"===e)},r);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=QO(e),o}function rR(t,s,e,a,n,u,r,i){var c=new ZO(0,0);if(r?(c.current=r.current,c.total=r.total):(c.current=0,c.total=a.size()),a.size()!==c.total)throw new Rk(Pk.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var o=c.total-c.current,h=o;0<n&&(h=Math.min(h,n));var l=c.current,f=l+h,p={"X-Goog-Upload-Command":h===o?"upload, finalize":"upload","X-Goog-Upload-Offset":c.current},d=a.slice(l,f);if(null===d)throw Fk();var v=s.maxUploadRetryTime(),y=new WO(e,"POST",function(t,e){var n,r=tR(t,["active","final"]),i=c.current+h,o=a.size();return n="final"===r?GO(s,u)(t,e):null,new ZO(i,o,"final"===r,n)},v);return y.headers=p,y.body=d.uploadData(),y.progressCallback=i||null,y.errorHandler=QO(t),y}var iR=function(t,e,n){if(cO(t)||aO(e)||aO(n))this.next=t,this.error=e||null,this.complete=n||null;else{var r=t;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}},oR=function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o};function sR(e,t,n){for(var r=t.length,i=t.length,o=0;o<t.length;o++)if(t[o].optional){r=o;break}if(!(r<=n.length&&n.length<=i))throw function(t,e,n,r){var i,o;return o=t===e?1===(i=t)?"argument":"arguments":(i="between "+t+" and "+e,"arguments"),new Rk(Pk.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+n+"`: Expected "+i+" "+o+", received "+r+".")}(r,i,e,n.length);for(o=0;o<n.length;o++)try{t[o].validator(n[o])}catch(t){throw t instanceof Error?Uk(o,e,t.message):Uk(o,e,t)}}var aR=function(e,t){var n=this;this.validator=function(t){n.optional&&!uO(t)||e(t)},this.optional=!!t};function uR(t,e){function n(t){if(!lO(t))throw"Expected string."}var r;return r=t?function(e,n){return function(t){e(t),n(t)}}(n,t):n,new aR(r,e)}function cR(){return new aR(function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||dO()&&t instanceof Blob))throw"Expected Blob or File."})}function hR(t){return new aR(LO,t)}function lR(){return new aR(function(t){if(!(fO(t)&&0<=t))throw"Expected a number 0 or greater."})}function fR(e,t){return new aR(function(t){if(!(null===t||aO(t)&&t instanceof Object))throw"Expected an Object.";null!=e&&e(t)},t)}function pR(t){return new aR(function(t){if(!(null===t||cO(t)))throw"Expected a Function."},t)}function dR(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Promise.resolve().then(function(){return n.apply(void 0,t)})}}var vR=(yR.prototype.makeProgressCallback_=function(){var e=this,n=this.transferred_;return function(t){return e.updateProgress_(n+t)}},yR.prototype.shouldDoResumable_=function(t){return 262144<t.size()},yR.prototype.start_=function(){this.state_===$k&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},yR.prototype.resolveToken_=function(e){var n=this;this.authWrapper_.getAuthToken().then(function(t){switch(n.state_){case $k:e(t);break;case nO:n.transition_(rO);break;case Zk:n.transition_(tO)}})},yR.prototype.createResumable_=function(){var r=this;this.resolveToken_(function(t){var e=eR(r.authWrapper_,r.location_,r.mappings_,r.blob_,r.metadata_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.uploadUrl_=t,r.needToFetchStatus_=!1,r.completeTransitions_()},r.errorHandler_)})},yR.prototype.fetchStatus_=function(){var r=this,i=this.uploadUrl_;this.resolveToken_(function(t){var e=nR(r.authWrapper_,r.location_,i,r.blob_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){t=t,r.request_=null,r.updateProgress_(t.current),r.needToFetchStatus_=!1,t.finalized&&(r.needToFetchMetadata_=!0),r.completeTransitions_()},r.errorHandler_)})},yR.prototype.continueUpload_=function(){var r=this,i=262144*this.chunkMultiplier_,o=new ZO(this.transferred_,this.blob_.size()),s=this.uploadUrl_;this.resolveToken_(function(t){var e;try{e=rR(r.location_,r.authWrapper_,s,r.blob_,i,r.mappings_,o,r.makeProgressCallback_())}catch(t){return r.error_=t,void r.transition_(iO)}var n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.increaseMultiplier_(),r.request_=null,r.updateProgress_(t.current),t.finalized?(r.metadata_=t.metadata,r.transition_(eO)):r.completeTransitions_()},r.errorHandler_)})},yR.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},yR.prototype.fetchMetadata_=function(){var r=this;this.resolveToken_(function(t){var e=XO(r.authWrapper_,r.location_,r.mappings_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.metadata_=t,r.transition_(eO)},r.metadataErrorHandler_)})},yR.prototype.oneShotUpload_=function(){var r=this;this.resolveToken_(function(t){var e=$O(r.authWrapper_,r.location_,r.mappings_,r.blob_,r.metadata_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.metadata_=t,r.updateProgress_(r.blob_.size()),r.transition_(eO)},r.errorHandler_)})},yR.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},yR.prototype.transition_=function(t){if(this.state_!==t)switch(t){case nO:case Zk:this.state_=t,null!==this.request_&&this.request_.cancel();break;case $k:var e=this.state_===tO;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case tO:this.state_=t,this.notifyObservers_();break;case rO:this.error_=Mk(),this.state_=t,this.notifyObservers_();break;case iO:case eO:this.state_=t,this.notifyObservers_()}},yR.prototype.completeTransitions_=function(){switch(this.state_){case Zk:this.transition_(tO);break;case nO:this.transition_(rO);break;case $k:this.start_()}},Object.defineProperty(yR.prototype,"snapshot",{get:function(){var t=sO(this.state_);return new oR(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),yR.prototype.on=function(t,e,n,o){var r="Expected a function or an Object with one of `next`, `error`, `complete` properties.",i=pR(!0).validator,s=fR(null,!0).validator;function a(t){try{return void i(t)}catch(t){}try{if(s(t),!(uO(t.next)||uO(t.error)||uO(t.complete)))throw"";return}catch(t){throw r}}sR("on",[uR(function(){if(t!==Jk.STATE_CHANGED)throw"Expected one of the event types: ["+Jk.STATE_CHANGED+"]."}),fR(a,!0),pR(!0),pR(!0)],arguments);var u=this;function c(i){return function(t,e,n){null!==i&&sR("on",i,arguments);var r=new iR(t,e,o);return u.addObserver_(r),function(){u.removeObserver_(r)}}}var h=[fR(function(t){if(null===t)throw r;a(t)}),pR(!0),pR(!0)];return uO(e)||uO(n)||uO(o)?c(null)(e,n,o):c(h)},yR.prototype.then=function(t,e){return this.promise_.then(t,e)},yR.prototype.catch=function(t){return this.then(null,t)},yR.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},yR.prototype.removeObserver_=function(t){var e=this.observers_.indexOf(t);-1!==e&&this.observers_.splice(e,1)},yR.prototype.notifyObservers_=function(){var e=this;this.finishPromise_(),this.observers_.slice().forEach(function(t){e.notifyObserver_(t)})},yR.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(sO(this.state_)){case oO.SUCCESS:dR(this.resolve_.bind(null,this.snapshot))();break;case oO.CANCELED:case oO.ERROR:dR(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},yR.prototype.notifyObserver_=function(t){switch(sO(this.state_)){case oO.RUNNING:case oO.PAUSED:t.next&&dR(t.next.bind(t,this.snapshot))();break;case oO.SUCCESS:t.complete&&dR(t.complete.bind(t))();break;case oO.CANCELED:case oO.ERROR:t.error&&dR(t.error.bind(t,this.error_))();break;default:t.error&&dR(t.error.bind(t,this.error_))()}},yR.prototype.resume=function(){sR("resume",[],arguments);var t=this.state_===tO||this.state_===Zk;return t&&this.transition_($k),t},yR.prototype.pause=function(){sR("pause",[],arguments);var t=this.state_===$k;return t&&this.transition_(Zk),t},yR.prototype.cancel=function(){sR("cancel",[],arguments);var t=this.state_===$k||this.state_===Zk;return t&&this.transition_(nO),t},yR);function yR(t,e,n,r,i,o){var s=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.authWrapper_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=$k,this.errorHandler_=function(t){s.request_=null,s.chunkMultiplier_=1,t.codeEquals(Pk.CANCELED)?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=t,s.transition_(iO))},this.metadataErrorHandler_=function(t){s.request_=null,t.codeEquals(Pk.CANCELED)?s.completeTransitions_():(s.error_=t,s.transition_(iO))},this.promise_=new Promise(function(t,e){s.resolve_=t,s.reject_=e,s.start_()}),this.promise_.then(null,function(){})}var gR=(mR.prototype.toString=function(){return sR("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},mR.prototype.newRef=function(t,e){return new mR(t,e)},mR.prototype.mappings=function(){return RO()},mR.prototype.child=function(t){sR("child",[uR()],arguments);var e=function(t,e){var n=e.split("/").filter(function(t){return 0<t.length}).join("/");return 0===t.length?n:t+"/"+n}(this.location.path,t),n=new EO(this.location.bucket,e);return this.newRef(this.authWrapper,n)},Object.defineProperty(mR.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new EO(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(mR.prototype,"root",{get:function(){var t=new EO(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(mR.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(mR.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(mR.prototype,"name",{get:function(){return SO(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(mR.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),mR.prototype.put=function(t,e){return void 0===e&&(e=null),sR("put",[cR(),hR(!0)],arguments),this.throwIfRoot_("put"),new vR(this,this.authWrapper,this.location,this.mappings(),new bO(t),e)},mR.prototype.putString=function(t,e,n){void 0===e&&(e=Bk.RAW),sR("putString",[uR(),uR(Wk,!0),hR(!0)],arguments),this.throwIfRoot_("putString");var r=Gk(e,t),i=Object.assign({},n);return!aO(i.contentType)&&aO(r.contentType)&&(i.contentType=r.contentType),new vR(this,this.authWrapper,this.location,this.mappings(),new bO(r.data,!0),i)},mR.prototype.delete=function(){var n=this;return sR("delete",[],arguments),this.throwIfRoot_("delete"),this.authWrapper.getAuthToken().then(function(t){var e=function(t,e){var n=CO(e.fullServerUrl()),r=t.maxOperationRetryTime(),i=new WO(n,"DELETE",function(t,e){},r);return i.successCodes=[200,204],i.errorHandler=YO(e),i}(n.authWrapper,n.location);return n.authWrapper.makeRequest(e,t).getPromise()})},mR.prototype.listAll=function(){sR("listAll",[],arguments);var t={prefixes:[],items:[]};return this.listAllHelper(t).then(function(){return t})},mR.prototype.listAllHelper=function(o,s){return Ts(this,void 0,void 0,function(){var e,n,r,i;return Ss(this,function(t){switch(t.label){case 0:return e={pageToken:s},[4,this.list(e)];case 1:return n=t.sent(),(r=o.prefixes).push.apply(r,n.prefixes),(i=o.items).push.apply(i,n.items),null==n.nextPageToken?[3,3]:[4,this.listAllHelper(o,n.nextPageToken)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},mR.prototype.list=function(r){sR("list",[function(t){return new aR(BO,t)}(!0)],arguments);var i=this;return this.authWrapper.getAuthToken().then(function(t){var e=r||{},n=function(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&0<n.length&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=CO(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime(),u=new WO(s,"GET",zO(t),a);return u.urlParams=o,u.errorHandler=QO(e),u}(i.authWrapper,i.location,"/",e.pageToken,e.maxResults);return i.authWrapper.makeRequest(n,t).getPromise()})},mR.prototype.getMetadata=function(){var n=this;return sR("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.authWrapper.getAuthToken().then(function(t){var e=XO(n.authWrapper,n.location,n.mappings());return n.authWrapper.makeRequest(e,t).getPromise()})},mR.prototype.updateMetadata=function(n){var r=this;return sR("updateMetadata",[hR()],arguments),this.throwIfRoot_("updateMetadata"),this.authWrapper.getAuthToken().then(function(t){var e=function(t,e,n,r){var i=CO(e.fullServerUrl()),o=xO(n,r),s=t.maxOperationRetryTime(),a=new WO(i,"PATCH",GO(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=YO(e),a}(r.authWrapper,r.location,n,r.mappings());return r.authWrapper.makeRequest(e,t).getPromise()})},mR.prototype.getDownloadURL=function(){var n=this;return sR("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.authWrapper.getAuthToken().then(function(t){var e=function(t,e,n){var r=CO(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new WO(r,"GET",KO(t,n),i);return o.errorHandler=YO(e),o}(n.authWrapper,n.location,n.mappings());return n.authWrapper.makeRequest(e,t).getPromise().then(function(t){if(null===t)throw new Rk(Pk.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return t})})},mR.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw function(t){return new Rk(Pk.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)},mR);function mR(t,e){this.authWrapper=t,this.location=e instanceof EO?e:EO.makeFromUrl(e)}var wR=(bR.prototype.getPromise=function(){return this.promise_},bR.prototype.cancel=function(t){},bR);function bR(t){this.promise_=Promise.reject(t)}var _R=(ER.prototype.addRequest=function(t){var e=this,n=this.id;this.id++,this.map.set(n,t),t.getPromise().then(function(){return e.map.delete(n)},function(){return e.map.delete(n)})},ER.prototype.clear=function(){this.map.forEach(function(t){t&&t.cancel(!0)}),this.map.clear()},ER);function ER(){this.map=new Map,this.id=-9007199254740991}var IR=(TR.extractBucket_=function(t){var e=t[Ok]||null;return null==e?null:EO.makeFromBucketSpec(e).bucket},TR.prototype.getAuthToken=function(){var t=this.authProvider_.getImmediate({optional:!0});return t?t.getToken().then(function(t){return null!==t?t.accessToken:null},function(){return null}):Promise.resolve(null)},TR.prototype.bucket=function(){if(this.deleted_)throw jk();return this.bucket_},TR.prototype.service=function(){return this.service_},TR.prototype.makeStorageReference=function(t){return this.storageRefMaker_(this,t)},TR.prototype.makeRequest=function(t,e){if(this.deleted_)return new wR(jk());var n=this.requestMaker_(t,e,this.pool_);return this.requestMap_.addRequest(n),n},TR.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},TR.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},TR.prototype.setMaxUploadRetryTime=function(t){this.maxUploadRetryTime_=t},TR.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},TR.prototype.setMaxOperationRetryTime=function(t){this.maxOperationRetryTime_=t},TR);function TR(t,e,n,r,i,o){if(this.bucket_=null,this.deleted_=!1,this.app_=t,null!==this.app_){var s=this.app_.options;aO(s)&&(this.bucket_=TR.extractBucket_(s))}this.authProvider_=e,this.storageRefMaker_=n,this.requestMaker_=r,this.pool_=o,this.service_=i,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requestMap_=new _R}var SR=(CR.prototype.start_=function(){var a=this;function t(t,e){var n,r=a.resolve_,i=a.reject_,o=e.xhr;if(e.wasSuccessCode)try{var s=a.callback_(o,o.getResponseText());uO(s)?r(s):r()}catch(t){i(t)}else null!==o?((n=Lk()).setServerResponseProp(o.getResponseText()),a.errorCallback_?i(a.errorCallback_(o,n)):i(n)):e.canceled?i(n=a.appDelete_?jk():Mk()):i(n=new Rk(Pk.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}this.canceled_?t(0,new NR(!1,null,!0)):this.backoffId_=function(e,n,t){var r=1,i=null,o=!1,s=0;function a(){return 2===s}var u=!1;function c(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];u||(u=!0,n.apply(null,t))}function h(t){i=setTimeout(function(){i=null,e(l,a())},t)}function l(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];u||(t?c.call.apply(c,ks([null,t],e)):a()||o?c.call.apply(c,ks([null,t],e)):(r<64&&(r*=2),h(1===s?(s=2,0):1e3*(r+Math.random()))))}var f=!1;function p(t){f||(f=!0,u||(null!==i?(t||(s=2),clearTimeout(i),h(0)):t||(s=1)))}return h(0),setTimeout(function(){p(o=!0)},t),p}(function(o,t){if(t)o(!1,new NR(!1,null,!0));else{var e=a.pool_.createXhrIo();a.pendingXhr_=e,null!==a.progressCallback_&&e.addUploadProgressListener(s),e.send(a.url_,a.method_,a.body_,a.headers_).then(function(t){null!==a.progressCallback_&&t.removeUploadProgressListener(s),a.pendingXhr_=null;var e=(t=t).getErrorCode()===Yk.NO_ERROR,n=t.getStatus();if(e&&!a.isRetryStatusCode_(n)){var r=-1!==a.successCodes_.indexOf(n);o(!0,new NR(r,t))}else{var i=t.getErrorCode()===Yk.ABORT;o(!1,new NR(!1,null,i))}})}function s(t){var e=t.loaded,n=t.lengthComputable?t.total:-1;null!==a.progressCallback_&&a.progressCallback_(e,n)}},t,this.timeout_)},CR.prototype.getPromise=function(){return this.promise_},CR.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},CR.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},CR);function CR(t,e,n,r,i,o,s,a,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise(function(t,e){l.resolve_=t,l.reject_=e,l.start_()})}var NR=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function AR(t,e,n){var r=NO(t.urlParams),i=t.url+r,o=Object.assign({},t.headers);return function(t,e){null!==e&&0<e.length&&(t.Authorization="Firebase "+e)}(o,e),function(t){var e=void 0!==Gl?Gl.SDK_VERSION:"AppManager";t["X-Firebase-Storage-Version"]="webjs/"+e}(o),new SR(i,t.method,o,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,n)}var kR=(OR.prototype.ref=function(t){if(sR("ref",[uR(function(t){if("string"!=typeof t)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var e=new gR(this.authWrapper_,this.bucket_);return null!=t?e.child(t):e},OR.prototype.refFromURL=function(t){return sR("refFromURL",[uR(function(t){if("string"!=typeof t)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{EO.makeFromUrl(t)}catch(t){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new gR(this.authWrapper_,t)},Object.defineProperty(OR.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),OR.prototype.setMaxUploadRetryTime=function(t){sR("setMaxUploadRetryTime",[lR()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},OR.prototype.setMaxOperationRetryTime=function(t){sR("setMaxOperationRetryTime",[lR()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(OR.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(OR.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),OR);function OR(t,e,n,r){if(this.bucket_=null,this.authWrapper_=new IR(t,e,function(t,e){return new gR(t,e)},AR,this,n),this.app_=t,null!=r)this.bucket_=EO.makeFromBucketSpec(r);else{var i=this.authWrapper_.bucket();null!=i&&(this.bucket_=new EO(i,""))}this.internals_=new RR(this)}var RR=(DR.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Promise.resolve()},DR);function DR(t){this.service_=t}var PR,xR;function LR(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new kR(n,r,new gO,e)}xR={TaskState:oO,TaskEvent:Jk,StringFormat:Bk,Storage:kR,Reference:gR},(PR=Gl).INTERNAL.registerComponent(new da("storage",LR,"PUBLIC").setServiceProps(xR).setMultipleInstances(!0)),PR.registerVersion("@firebase/storage","0.3.29");var MR,FR,UR,jR,qR="0.2.35",VR="FB-PERF-TRACE-MEASURE",BR="@firebase/performance/config",WR="@firebase/performance/configexpire",HR="Performance",GR=((MR={})["trace started"]="Trace {$traceName} was started before.",MR["trace stopped"]="Trace {$traceName} is not running.",MR["no window"]="Window is not available.",MR["no app id"]="App id is not available.",MR["no project id"]="Project id is not available.",MR["no api key"]="Api key is not available.",MR["invalid cc log"]="Attempted to queue invalid cc event",MR["FB not default"]="Performance can only start when Firebase app instance is the default one.",MR["RC response not ok"]="RC response is not ok",MR["invalid attribute name"]="Attribute name {$attributeName} is invalid.",MR["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",MR["invalide custom metric name"]="Custom metric name {$customMetricName} is invalid",MR),zR=new Ks("performance",HR,GR),KR=(QR.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},QR.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},QR.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},QR.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},QR.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},QR.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},QR.prototype.requiredApisAvailable=function(){return!!(fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled)},QR.prototype.setupObserver=function(t,i){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var e=0,n=t.getEntries();e<n.length;e++){var r=n[e];i(r)}}).observe({entryTypes:[t]})},QR.getInstance=function(){return void 0===FR&&(FR=new QR(UR)),FR},QR);function QR(t){if(!(this.window=t))throw zR.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}var YR,XR,JR,$R=(ZR.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw zR.create("no app id");return t},ZR.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw zR.create("no project id");return t},ZR.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw zR.create("no api key");return t},ZR.getInstance=function(){return void 0===jR&&(jR=new ZR),jR},ZR);function ZR(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}function tD(){return YR}(JR=XR=XR||{})[JR.UNKNOWN=0]="UNKNOWN",JR[JR.VISIBLE=1]="VISIBLE",JR[JR.HIDDEN=2]="HIDDEN";var eD=["firebase_","google_","ga_"],nD=new RegExp("^[a-zA-Z]\\w*$");function rD(){switch(KR.getInstance().document.visibilityState){case"visible":return XR.VISIBLE;case"hidden":return XR.HIDDEN;default:return XR.UNKNOWN}}var iD=new Na(HR);iD.logLevel=wa.INFO;var oD="0.0.1",sD={loggingEnabled:!0},aD="FIREBASE_INSTALLATIONS_AUTH";function uD(t){var e=function(){var t=KR.getInstance().localStorage;if(!t)return;var e=t.getItem(WR);if(!e||!function(t){return Number(t)>Date.now()}(e))return;var n=t.getItem(BR);if(!n)return;try{return JSON.parse(n)}catch(t){return}}();return e?(hD(e),Promise.resolve()):function(r){return function(){var t=$R.getInstance().installationsService.getToken();return t.then(function(t){}),t}().then(function(t){var e="https://firebaseremoteconfig.googleapis.com/v1/projects/"+$R.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+$R.getInstance().getApiKey(),n=new Request(e,{method:"POST",headers:{Authorization:aD+" "+t},body:JSON.stringify({app_instance_id:r,app_instance_id_token:t,app_id:$R.getInstance().getAppId(),app_version:qR,sdk_version:oD})});return fetch(n).then(function(t){if(t.ok)return t.json();throw zR.create("RC response not ok")})}).catch(function(){iD.info(cD)})}(t).then(function(t){return hD(t)}).then(function(t){return function(t){var e=KR.getInstance().localStorage;if(!t||!e)return;e.setItem(BR,JSON.stringify(t)),e.setItem(WR,String(Date.now()+60*$R.getInstance().configTimeToLive*60*1e3))}(t)},function(){})}var cD="Could not fetch config, will use default configs";function hD(t){if(!t)return t;var e=$R.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=sD.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=lD(e.tracesSamplingRate),e.logNetworkAfterSampling=lD(e.networkRequestsSamplingRate),t}function lD(t){return Math.random()<=t}var fD,pD=1;function dD(){return pD=2,fD=fD||function(){var n=KR.getInstance().document;return new Promise(function(t){if(n&&"complete"!==n.readyState){var e=function(){"complete"===n.readyState&&(n.removeEventListener("readystatechange",e),t())};n.addEventListener("readystatechange",e)}else t()})}().then(function(){return function(){var t=$R.getInstance().installationsService.getId();return t.then(function(t){YR=t}),t}()}).then(function(t){return uD(t)}).then(function(){return vD()},function(){return vD()})}function vD(){pD=3}var yD,gD=1e4,mD=5500,wD=3,bD=wD,_D=[],ED=!1;function ID(){ED||(!function r(t){setTimeout(function(){if(0!==bD){if(!_D.length)return r(gD);var t=ks(_D);_D=[];var e=t.map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}}),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:$R.getInstance().logSource,log_event:e};fetch($R.getInstance().logEndPointUrl,{method:"POST",body:JSON.stringify(n)}).then(function(t){return t.ok||iD.info("Call to Firebase backend failed."),t.json()}).then(function(t){var e=Number(t.next_request_wait_millis),n=isNaN(e)?gD:Math.max(gD,e);bD=wD,r(n)}).catch(function(){_D=ks(t,_D),bD--,iD.info("Tries left: "+bD+"."),r(gD)})}},t)}(mD),ED=!0)}function TD(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t){if(!t.eventTime||!t.message)throw zR.create("invalid cc log");_D=ks(_D,[t])}({message:n.apply(void 0,t),eventTime:Date.now()})}}function SD(t,e){(yD=yD||TD(AD))(t,e)}function CD(t){var e=$R.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&KR.getInstance().requiredApisAvailable()&&(t.isAuto&&rD()!==XR.VISIBLE||e.loggingEnabled&&e.logTraceAfterSampling&&(3===pD?ND(t):dD().then(function(){return ND(t)},function(){return ND(t)})))}function ND(t){tD()&&setTimeout(function(){return SD(t,1)},0)}function AD(t,e){return 0===e?function(t){var e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},n={application_info:kD(),network_request_metric:e};return JSON.stringify(n)}(t):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:kD(),trace_metric:e};return JSON.stringify(r)}(t)}function kD(){return{google_app_id:$R.getInstance().getAppId(),app_instance_id:tD(),web_app_info:{sdk_version:qR,page_url:KR.getInstance().getUrl(),service_worker_status:function(){var t=KR.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}(),visibility_state:rD(),effective_connection_type:function(){var t=KR.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0}}var OD=["_fp","_fcp","_fid"];var RD=(DD.prototype.start=function(){if(1!==this.state)throw zR.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},DD.prototype.stop=function(){if(2!==this.state)throw zR.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),CD(this)},DD.prototype.record=function(t,e,n){if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Is({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}CD(this)},DD.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]&&this.putMetric(t,0),this.counters[t]+=e},DD.prototype.putMetric=function(t,e){if(!function(t,e){return!(0===t.length||100<t.length)&&(e&&e.startsWith("_wt_")&&-1<OD.indexOf(t)||!t.startsWith("_"))}(t,this.name))throw zR.create("invalide custom metric name",{customMetricName:t});this.counters[t]=e},DD.prototype.getMetric=function(t){return this.counters[t]||0},DD.prototype.putAttribute=function(t,e){var n=function(e){return!(0===e.length||40<e.length||eD.some(function(t){return e.startsWith(t)})||!e.match(nD))}(t),r=function(t){return 0!==t.length&&t.length<=100}(e);if(n&&r)this.customAttributes[t]=e;else{if(!n)throw zR.create("invalid attribute name",{attributeName:t});if(!r)throw zR.create("invalid attribute value",{attributeValue:e})}},DD.prototype.getAttribute=function(t){return this.customAttributes[t]},DD.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},DD.prototype.getAttributes=function(){return Is({},this.customAttributes)},DD.prototype.setStartTime=function(t){this.startTimeUs=t},DD.prototype.setDuration=function(t){this.durationUs=t},DD.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},DD.createOobTrace=function(t,e,n){var r=KR.getInstance().getUrl();if(r){var i=new DD("_wt_"+r,!0),o=Math.floor(1e3*KR.getInstance().getTimeOrigin());if(i.setStartTime(o),t&&t[0]&&(i.setDuration(Math.floor(1e3*t[0].duration)),i.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),i.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),i.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),e){var s=e.find(function(t){return"first-paint"===t.name});s&&s.startTime&&i.putMetric("_fp",Math.floor(1e3*s.startTime));var a=e.find(function(t){return"first-contentful-paint"===t.name});a&&a.startTime&&i.putMetric("_fcp",Math.floor(1e3*a.startTime)),n&&i.putMetric("_fid",Math.floor(1e3*n))}CD(i)}},DD.createUserTimingTrace=function(t){CD(new DD(t,!1,t))},DD);function DD(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=KR.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||VR+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function PD(t){var e=t;if(e&&void 0!==e.responseStart){var n=KR.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=$R.getInstance();e.instrumentationEnabled&&t.url!==e.logEndPointUrl.split("?")[0]&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout(function(){return SD(t,0)},0)}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}var xD=5e3;function LD(){tD()&&(setTimeout(function(){return function(){var t=KR.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout(function(){RD.createOobTrace(e,n),r=void 0},xD);t.onFirstInputDelay(function(t){r&&(clearTimeout(r),RD.createOobTrace(e,n,t))})}else RD.createOobTrace(e,n)}()},0),setTimeout(function(){return function(){for(var t=KR.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){PD(r[n])}t.setupObserver("resource",PD)}()},0),setTimeout(function(){return function(){for(var t=KR.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){MD(r[n])}t.setupObserver("measure",MD)}()},0))}function MD(t){var e=t.name;e.substring(0,VR.length)!==VR&&RD.createUserTimingTrace(e)}var FD=(UD.prototype.trace=function(t){return new RD(t)},Object.defineProperty(UD.prototype,"instrumentationEnabled",{get:function(){return $R.getInstance().instrumentationEnabled},set:function(t){$R.getInstance().instrumentationEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(UD.prototype,"dataCollectionEnabled",{get:function(){return $R.getInstance().dataCollectionEnabled},set:function(t){$R.getInstance().dataCollectionEnabled=t},enumerable:!0,configurable:!0}),UD);function UD(t){this.app=t,KR.getInstance().requiredApisAvailable()?(ID(),dD().then(LD,LD)):iD.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled.")}var jD;function qD(t,e){if("[DEFAULT]"!==t.name)throw zR.create("FB not default");if("undefined"==typeof window)throw zR.create("no window");return function(t){UR=t}(window),$R.getInstance().firebaseAppInstance=t,$R.getInstance().installationsService=e,new FD(t)}(jD=Gl).INTERNAL.registerComponent(new da("performance",function(t){var e=t.getProvider("app").getImmediate(),n=t.getProvider("installations").getImmediate();return qD(e,n)},"PUBLIC")),jD.registerVersion("@firebase/performance","0.2.35");var VD,BD,WD,HD,GD,zD="measurementId",KD="firebase_id",QD="origin",YD="https://www.googletagmanager.com/gtag/js";function XD(t,n,e){var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[n].push(arguments)};return window[e]&&"function"==typeof window[e]&&(r=window[e]),window[e]=function(f,p){return function(t,e,n){if(t===VD.EVENT){var r=[];if(n&&n.send_to){var i=n.send_to;Array.isArray(i)||(i=[i]);for(var o=0,s=i;o<s.length;o++){var a=s[o],u=p[a];if(!u){r=[];break}r.push(u)}}if(0===r.length)for(var c=0,h=Object.values(p);c<h.length;c++){var l=h[c];r.push(l)}Promise.all(r).then(function(){return f(VD.EVENT,e,n||{})}).catch(function(t){return console.error(t)})}else if(t===VD.CONFIG){(p[e]||Promise.resolve()).then(function(){f(VD.CONFIG,e,n)}).catch(function(t){return console.error(t)})}else f(VD.SET,e)}}(r,t),{gtagCore:r,wrappedGtag:window[e]}}(BD=VD=VD||{}).EVENT="event",BD.SET="set",BD.CONFIG="config",(HD=WD=WD||{}).ADD_PAYMENT_INFO="add_payment_info",HD.ADD_TO_CART="add_to_cart",HD.ADD_TO_WISHLIST="add_to_wishlist",HD.BEGIN_CHECKOUT="begin_checkout",HD.CHECKOUT_PROGRESS="checkout_progress",HD.EXCEPTION="exception",HD.GENERATE_LEAD="generate_lead",HD.LOGIN="login",HD.PAGE_VIEW="page_view",HD.PURCHASE="purchase",HD.REFUND="refund",HD.REMOVE_FROM_CART="remove_from_cart",HD.SCREEN_VIEW="screen_view",HD.SEARCH="search",HD.SELECT_CONTENT="select_content",HD.SET_CHECKOUT_OPTION="set_checkout_option",HD.SHARE="share",HD.SIGN_UP="sign_up",HD.TIMING_COMPLETE="timing_complete",HD.VIEW_ITEM="view_item",HD.VIEW_ITEM_LIST="view_item_list",HD.VIEW_PROMOTION="view_promotion",HD.VIEW_SEARCH_RESULTS="view_search_results";var JD,$D,ZD=((GD={})["no-ga-id"]='"'+zD+'" field is empty in Firebase config. Firebase Analytics requires this field to contain a valid measurement ID.',GD["already-exists"]="A Firebase Analytics instance with the measurement ID ${id}  already exists. Only one Firebase Analytics instance can be created for each measurement ID.",GD["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",GD["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate",GD),tP=new Ks("analytics","Analytics",ZD),eP={},nP="dataLayer",rP="gtag",iP=!1;function oP(t){if(iP)throw tP.create("already-initialized");t.dataLayerName&&(nP=t.dataLayerName),t.gtagName&&(rP=t.gtagName)}function sP(t,e){var r=t.options[zD];if(!r)throw tP.create("no-ga-id");if(null!=eP[r])throw tP.create("already-exists",{id:r});if(!iP){!function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(YD))return r}return null}()&&function(t){var e=document.createElement("script");e.src=YD+"?l="+t,e.async=!0,document.head.appendChild(e)}(nP),function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(nP);var n=XD(eP,nP,rP),i=n.wrappedGtag,o=n.gtagCore;$D=i,JD=o,iP=!0}return eP[r]=function(r,i,o){return Ts(this,void 0,void 0,function(){var e,n;return Ss(this,function(t){switch(t.label){case 0:return[4,i.getId()];case 1:return e=t.sent(),o("js",new Date),o(VD.CONFIG,r.options[zD],((n={})[KD]=e,n[QD]="firebase",n.update=!0,n)),[2]}})})}(t,e,JD),{app:t,logEvent:function(t,e,n){return function(t,e,n,r,i){var o=r||{};i&&i.global||(o=Is(Is({},r),{send_to:e})),t(VD.EVENT,n,o||{})}($D,r,t,e,n)},setCurrentScreen:function(t,e){return function(t,e,n,r){r&&r.global?t(VD.SET,{screen_name:n}):t(VD.CONFIG,e,{update:!0,screen_name:n})}($D,r,t,e)},setUserId:function(t,e){return function(t,e,n,r){r&&r.global?t(VD.SET,{user_id:n}):t(VD.CONFIG,e,{update:!0,user_id:n})}($D,r,t,e)},setUserProperties:function(t,e){return function(t,e,n,r){if(r&&r.global){for(var i={},o=0,s=Object.keys(n);o<s.length;o++){var a=s[o];i["user_properties."+a]=n[a]}t(VD.SET,i)}else t(VD.CONFIG,e,{update:!0,user_properties:n})}($D,r,t,e)},setAnalyticsCollectionEnabled:function(t){return function(t,e){window["ga-disable-"+t]=!e}(r,t)}}}var aP,uP="analytics";(aP=Gl).INTERNAL.registerComponent(new da(uP,function(t){return sP(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:oP,EventName:WD})),aP.INTERNAL.registerComponent(new da("analytics-internal",function(t){try{return{logEvent:t.getProvider(uP).getImmediate().logEvent}}catch(t){throw tP.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),aP.registerVersion("@firebase/analytics","0.2.17");var cP,hP=(lP.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},lP.prototype.fetch=function(s){return Ts(this,void 0,void 0,function(){var e,n,r,i,o;return Ss(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=t.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(s.cacheMaxAgeMillis,n)?[2,r]:(s.eTag=r&&r.eTag,[4,this.client.fetch(s)]);case 2:return i=t.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return t.sent(),[2,i]}})})},lP);function lP(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}var fP=((cP={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",cP["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",cP["registration-api-key"]="Undefined API key. Check Firebase app initialization.",cP["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",cP["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",cP["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",cP["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",cP["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",cP["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",cP["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',cP["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',cP["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",cP["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",cP),pP=new Ks("remoteconfig","Remote Config",fP);var dP=(vP.prototype.fetch=function(b){return Ts(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f,p,d,v,y,g,m,w;return Ss(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=t.sent(),n=e[0],r=e[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:function(t){return void 0===t&&(t=navigator),t.languages&&t.languages[0]||t.language}()},u={method:"POST",headers:s,body:JSON.stringify(a)},c=fetch(o,u),h=new Promise(function(t,e){b.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",e(t)})}),t.label=2;case 2:return t.trys.push([2,5,,6]),[4,Promise.race([c,h])];case 3:return t.sent(),[4,c];case 4:return l=t.sent(),[3,6];case 5:throw f=t.sent(),p="fetch-client-network","AbortError"===f.name&&(p="fetch-timeout"),pP.create(p,{originalErrorMessage:f.message});case 6:if(d=l.status,v=l.headers.get("ETag")||void 0,200!==l.status)return[3,11];m=void 0,t.label=7;case 7:return t.trys.push([7,9,,10]),[4,l.json()];case 8:return m=t.sent(),[3,10];case 9:throw w=t.sent(),pP.create("fetch-client-parse",{originalErrorMessage:w.message});case 10:y=m.entries,g=m.state,t.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===g?d=500:"NO_CHANGE"===g?d=304:"NO_TEMPLATE"!==g&&"EMPTY_CONFIG"!==g||(y={}),304!==d&&200!==d)throw pP.create("fetch-status",{httpStatus:d});return[2,{status:d,eTag:v,config:y}]}})})},vP);function vP(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var yP=(gP.prototype.addEventListener=function(t){this.listeners.push(t)},gP.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},gP);function gP(){this.listeners=[]}var mP=["1","true","t","yes","y","on"],wP=(bP.prototype.asString=function(){return this._value},bP.prototype.asBoolean=function(){return"static"!==this._source&&0<=mP.indexOf(this._value.toLowerCase())},bP.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},bP.prototype.getSource=function(){return this._source},bP);function bP(t,e){void 0===e&&(e=""),this._source=t,this._value=e}var _P=(EP.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=wa.DEBUG;break;case"silent":this._logger.logLevel=wa.SILENT;break;default:this._logger.logLevel=wa.ERROR}},Object.defineProperty(EP.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!0,configurable:!0}),Object.defineProperty(EP.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!0,configurable:!0}),EP.prototype.activate=function(){return Ts(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=t.sent(),n=e[0],r=e[1],n&&n.config&&n.eTag&&n.eTag!==r?[4,Promise.all([this._storageCache.setActiveConfig(n.config),this._storage.setActiveConfigEtag(n.eTag)])]:[2,!1];case 2:return t.sent(),[2,!0]}})})},EP.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},EP.prototype.fetch=function(){return Ts(this,void 0,void 0,function(){var e,n,r,i=this;return Ss(this,function(t){switch(t.label){case 0:e=new yP,setTimeout(function(){return Ts(i,void 0,void 0,function(){return Ss(this,function(t){return e.abort(),[2]})})},this.settings.fetchTimeoutMillis),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:e})];case 2:return t.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return t.sent(),[3,6];case 4:return n=t.sent(),r=function(t,e){return t instanceof Gs&&-1!==t.code.indexOf(e)}(n,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(r)];case 5:throw t.sent(),n;case 6:return[2]}})})},EP.prototype.fetchAndActivate=function(){return Ts(this,void 0,void 0,function(){return Ss(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},EP.prototype.getAll=function(){var n=this;return function(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(Is(Is({},t),e))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},EP.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},EP.prototype.getNumber=function(t){return this.getValue(t).asNumber()},EP.prototype.getString=function(t){return this.getValue(t).asString()},EP.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new wP("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new wP("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new wP("static"))},EP);function EP(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function IP(t,e){var n=t.target.error||void 0;return pP.create(e,{originalErrorMessage:n&&n.message})}var TP="app_namespace_store",SP="firebase_remote_config",CP=1;var NP=(AP.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},AP.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},AP.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},AP.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},AP.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},AP.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},AP.prototype.getActiveConfig=function(){return this.get("active_config")},AP.prototype.setActiveConfig=function(t){return this.set("active_config",t)},AP.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},AP.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},AP.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},AP.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},AP.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},AP.prototype.get=function(a){return Ts(this,void 0,void 0,function(){var o,s=this;return Ss(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(n,e){var t=o.transaction([TP],"readonly").objectStore(TP),r=s.createCompositeKey(a);try{var i=t.get(r);i.onerror=function(t){e(IP(t,"storage-get"))},i.onsuccess=function(t){var e=t.target.result;n(e?e.value:void 0)}}catch(t){e(pP.create("storage-get",{originalErrorMessage:t&&t.message}))}})]}})})},AP.prototype.set=function(a,u){return Ts(this,void 0,void 0,function(){var o,s=this;return Ss(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([TP],"readwrite").objectStore(TP),r=s.createCompositeKey(a);try{var i=n.put({compositeKey:r,value:u});i.onerror=function(t){e(IP(t,"storage-set"))},i.onsuccess=function(){t()}}catch(t){e(pP.create("storage-set",{originalErrorMessage:t&&t.message}))}})]}})})},AP.prototype.delete=function(a){return Ts(this,void 0,void 0,function(){var o,s=this;return Ss(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([TP],"readwrite").objectStore(TP),r=s.createCompositeKey(a);try{var i=n.delete(r);i.onerror=function(t){e(IP(t,"storage-delete"))},i.onsuccess=function(){t()}}catch(t){e(pP.create("storage-delete",{originalErrorMessage:t&&t.message}))}})]}})})},AP.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},AP);function AP(t,e,n,r){void 0===r&&(r=new Promise(function(e,n){var t=indexedDB.open(SP,CP);t.onerror=function(t){n(IP(t,"storage-open"))},t.onsuccess=function(t){e(t.target.result)},t.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(TP,{keyPath:"compositeKey"})}}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}var kP=(OP.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},OP.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},OP.prototype.getActiveConfig=function(){return this.activeConfig},OP.prototype.loadFromStorage=function(){return Ts(this,void 0,void 0,function(){var e,n,r,i,o,s;return Ss(this,function(t){switch(t.label){case 0:return e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,e];case 1:return(i=t.sent())&&(this.lastFetchStatus=i),[4,n];case 2:return(o=t.sent())&&(this.lastSuccessfulFetchTimestampMillis=o),[4,r];case 3:return(s=t.sent())&&(this.activeConfig=s),[2]}})})},OP.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},OP.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},OP.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},OP);function OP(t){this.storage=t}var RP=(DP.prototype.fetch=function(n){return Ts(this,void 0,void 0,function(){var e;return Ss(this,function(t){switch(t.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=t.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(n,e)]}})})},DP.prototype.attemptFetch=function(i,t){var o=t.throttleEndTimeMillis,s=t.backoffCount;return Ts(this,void 0,void 0,function(){var e,n,r;return Ss(this,function(t){switch(t.label){case 0:return[4,function(i,o){return new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(pP.create("fetch-throttle",{throttleEndTimeMillis:o}))})})}(i.signal,o)];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this.client.fetch(i)];case 3:return e=t.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return t.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof Gs))return!1;var e=Number(t.httpStatus);return 429===e||500===e||503===e||504===e}(n=t.sent()))throw n;return r={throttleEndTimeMillis:Date.now()+function(t){var e=1e3*Math.pow(2,t),n=Math.round(.5*e*(Math.random()-.5)*2);return Math.min(144e5,e+n)}(s),backoffCount:s+1},[4,this.storage.setThrottleMetadata(r)];case 6:return t.sent(),[2,this.attemptFetch(i,r)];case 7:return[2]}})})},DP);function DP(t,e){this.client=t,this.storage=e}var PP,xP="@firebase/remote-config";return(PP=Gl).INTERNAL.registerComponent(new da("remoteConfig",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw pP.create("registration-window");var i=n.options,o=i.projectId,s=i.apiKey,a=i.appId;if(!o)throw pP.create("registration-project-id");if(!s)throw pP.create("registration-api-key");if(!a)throw pP.create("registration-app-id");e=e||"firebase";var u=new NP(a,n.name,e),c=new kP(u),h=new Na(xP);h.logLevel=wa.ERROR;var l=new dP(r,PP.SDK_VERSION,e,o,s,a),f=new RP(l,u),p=new hP(f,u,c,h),d=new _P(n,p,c,u,h);return d.ensureInitialized(),d},"PUBLIC").setMultipleInstances(!0)),PP.registerVersion(xP,"0.1.16"),Gl.registerVersion("firebase","7.11.0","cdn"),Gl});


/** END OF firebase **/
 
/** START OF almond **/
/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */










































var requirejs,require,define;(function(e){function h(e,t){return f.call(e,t)}function p(e,t){var n,r,i,s,o,a,f,l,h,p,d,v=t&&t.split("/"),m=u.map,g=m&&m["*"]||{};if(e&&e.charAt(0)===".")if(t){v=v.slice(0,v.length-1),e=e.split("/"),o=e.length-1,u.nodeIdCompat&&c.test(e[o])&&(e[o]=e[o].replace(c,"")),e=v.concat(e);for(h=0;h<e.length;h+=1){d=e[h];if(d===".")e.splice(h,1),h-=1;else if(d===".."){if(h===1&&(e[2]===".."||e[0]===".."))break;h>0&&(e.splice(h-1,2),h-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((v||g)&&m){n=e.split("/");for(h=n.length;h>0;h-=1){r=n.slice(0,h).join("/");if(v)for(p=v.length;p>0;p-=1){i=m[v.slice(0,p).join("/")];if(i){i=i[r];if(i){s=i,a=h;break}}}if(s)break;!f&&g&&g[r]&&(f=g[r],l=h)}!s&&f&&(s=f,a=l),s&&(n.splice(0,a,s),e=n.join("/"))}return e}function d(t,r){return function(){return n.apply(e,l.call(arguments,0).concat([t,r]))}}function v(e){return function(t){return p(t,e)}}function m(e){return function(t){s[e]=t}}function g(n){if(h(o,n)){var r=o[n];delete o[n],a[n]=!0,t.apply(e,r)}if(!h(s,n)&&!h(a,n))throw new Error("No "+n);return s[n]}function y(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function b(e){return function(){return u&&u.config&&u.config[e]||{}}}var t,n,r,i,s={},o={},u={},a={},f=Object.prototype.hasOwnProperty,l=[].slice,c=/\.js$/;r=function(e,t){var n,r=y(e),i=r[0];return e=r[1],i&&(i=p(i,t),n=g(i)),i?n&&n.normalize?e=n.normalize(e,v(t)):e=p(e,t):(e=p(e,t),r=y(e),i=r[0],e=r[1],i&&(n=g(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},i={require:function(e){return d(e)},exports:function(e){var t=s[e];return typeof t!="undefined"?t:s[e]={}},module:function(e){return{id:e,uri:"",exports:s[e],config:b(e)}}},t=function(t,n,u,f){var l,c,p,v,y,b=[],w=typeof u,E;f=f||t;if(w==="undefined"||w==="function"){n=!n.length&&u.length?["require","exports","module"]:n;for(y=0;y<n.length;y+=1){v=r(n[y],f),c=v.f;if(c==="require")b[y]=i.require(t);else if(c==="exports")b[y]=i.exports(t),E=!0;else if(c==="module")l=b[y]=i.module(t);else if(h(s,c)||h(o,c)||h(a,c))b[y]=g(c);else{if(!v.p)throw new Error(t+" missing "+c);v.p.load(v.n,d(f,!0),m(c),{}),b[y]=s[c]}}p=u?u.apply(s[t],b):undefined;if(t)if(l&&l.exports!==e&&l.exports!==s[t])s[t]=l.exports;else if(p!==e||!E)s[t]=p}else t&&(s[t]=u)},requirejs=require=n=function(s,o,a,f,l){if(typeof s=="string")return i[s]?i[s](o):g(r(s,o).f);if(!s.splice){u=s,u.deps&&n(u.deps,u.callback);if(!o)return;o.splice?(s=o,o=a,a=null):s=e}return o=o||function(){},typeof a=="function"&&(a=f,f=l),f?t(e,s,o,a):setTimeout(function(){t(e,s,o,a)},4),n},n.config=function(e){return n(e)},requirejs._defined=s,define=function(e,t,n){t.splice||(n=t,t=[]),!h(s,e)&&!h(o,e)&&(o[e]=[e,t,n])},define.amd={jQuery:!0}})(),define("almond",function(){})
/** END OF almond **/
,define("es5_shim",["require","exports","module"],function(e,t,n){var r=Function.prototype.call,i=r.bind(Object.prototype.toString);String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s*(\S*(?:\s+\S+)*)\s*$/,"$1")}),typeof Array.isArray!="function"&&(Array.isArray=function(e){return Array.prototype.toString.apply(e)==="[object Array]"}),typeof Object.create!="function"&&(Object.create=function(e){function t(){}return t.prototype=e,new t});var s=Object("a"),o=s[0]!="a"||!(0 in s);Array.prototype.forEach||(Array.prototype.forEach=function(t){var n=u(this),r=o&&i(this)=="[object String]"?this.split(""):n,s=arguments[1],a=-1,f=r.length>>>0;if(i(t)!="[object Function]")throw new TypeError;while(++a<f)a in r&&t.call(s,r[a],a,n)});var u=function(e){if(e==null)throw new TypeError("can't convert "+e+" to object");return Object(e)}}),define("global",["require","exports","module"],function(e,t,n){function i(){var e=window.location.hash,e=e.split("&"),t="",n="";for(var r=0;r<e.length;r++)n=e[r].split("="),n[0]=n[0].replace("#",""),n[0].toLowerCase()=="name"?n[1]&&(GLOBAL.currentSampleName=n[1]):n[0].toLowerCase()=="line"?n[1]&&(GLOBAL.lineFromURL=n[1]):n[0].toLowerCase()=="c"?n[1]&&(GLOBAL.sharedSampleFirebase=n[1]):n[0].toLowerCase()=="reset"?n[1]&&(GLOBAL.resetPassRequest=n[1]):n[0].toLowerCase()=="passtemp"&&n[1]&&(GLOBAL.resetPassTemp=n[1])}GLOBAL={},GLOBAL.expandAllNodes=!0,GLOBAL.currentSampleName="",GLOBAL.lineFromURL="",GLOBAL.updateFromTreeUI=!1,GLOBAL.sharedSampleFirebase=null;var r=window.location.hash;r&&i()}),define("events",["require","exports","module"],function(e,t,n){t.addListener=function(e,t,n){if(e.addEventListener)return e.addEventListener(t,n,!1);if(e.attachEvent){var r=function(){n.call(e,window.event)};n._wrapper=r,e.attachEvent("on"+t,r)}},t.removeListener=function(e,t,n){if(e.removeEventListener)return e.removeEventListener(t,n,!1);e.detachEvent&&e.detachEvent("on"+t,n._wrapper||n)},t.stopEvent=function(e){return t.stopPropagation(e),t.preventDefault(e),!1},t.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},t.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},t.fixEvent=function(e){function t(){return!0}function n(){return!1}if(!e||!e.stopPropagation){var r=e||window.event;e={};for(var i in r)e[i]=r[i];e.target||(e.target=e.srcElement||document),e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement,e.preventDefault=function(){e.returnValue=!1,e.isDefaultPrevented=t},e.isDefaultPrevented=n,e.stopPropagation=function(){e.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){this.isImmediatePropagationStopped=t,this.stopPropagation()},e.isImmediatePropagationStopped=n;if(e.clientX!=null){var s=document.documentElement,o=document.body;e.pageX=e.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),e.pageY=e.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)}e.which=e.charCode||e.keyCode,e.button!=null&&(e.button=e.button&1?0:e.button&4?1:e.button&2?2:0)}return e}}),define("ajax",["require","exports","module"],function(require,exports,module){(function(){exports.Ajax=function(options,inputOptions){function httpSuccess(e){try{return!e.status&&location.protocol=="file:"||e.status>=200&&e.status<300||e.status==304||navigator.userAgent.indexOf("Safari")>=0&&typeof e.status=="undefined"}catch(t){}return!1}function httpData(r,type){var ct=r.getResponseHeader("content-type"),data=!type&&ct&&ct.indexOf("xml")>=0;return data=type=="xml"||data?r.responseXML:r.responseText,type=="script"&&eval.call(window,data),data}options={type:options.type||"GET",url:options.url,timeout:options.timeout||5e3,onComplete:options.onComplete||function(){},onError:options.onError||function(){},onSuccess:options.onSuccess||function(){},data:options.data||"",inputOptions:inputOptions};var xml=new XMLHttpRequest;xml.open(options.type,options.url,!0);var timeoutLength=5e3,requestDone=!1;setTimeout(function(){requestDone=!0},timeoutLength),xml.onreadystatechange=function(){xml&&xml.readyState==4&&!requestDone?(httpSuccess(xml)?options.onSuccess(httpData(xml,options.type)):options.onError(options.url),options.onComplete(),xml=null):xml&&xml.readyState==404&&!requestDone&&options.onError(xml.statusText)};try{xml.send()}catch(e1){var p1=document.getElementById("nodePageContent");p1&&(p1.innerHTML="Invalid Deployment Detected: Please ensure you access the bundle directly from your web server (for example through http://localhost if doing local development and testing).  All features of the bundle will not work as expected when opened directly through the local file system.  Please copy all files to a directory within your web root such as JSCharting and load http://localhost/JSCharting")}}})()}),
/** START OF esprima **/
/** @preserve
Copyright (C) 2013 Ariya Hidayat <ariya.hidayat@gmail.com>
Copyright (C) 2013 Thaddee Tyl <thaddee.tyl@gmail.com>
Copyright (C) 2013 Mathias Bynens <mathias@qiwi.be>
Copyright (C) 2012 Ariya Hidayat <ariya.hidayat@gmail.com>
Copyright (C) 2012 Mathias Bynens <mathias@qiwi.be>
Copyright (C) 2012 Joost-Wim Boekesteijn <joost-wim@boekesteijn.nl>
Copyright (C) 2012 Kris Kowal <kris.kowal@cixar.com>
Copyright (C) 2012 Yusuke Suzuki <utatane.tea@gmail.com>
Copyright (C) 2012 Arpad Borsos <arpad.borsos@googlemail.com>
Copyright (C) 2011 Ariya Hidayat <ariya.hidayat@gmail.com>

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

* Redistributions of source code must retain the above copyright
notice, this list of conditions and the following disclaimer.
* Redistributions in binary form must reproduce the above copyright
notice, this list of conditions and the following disclaimer in the
documentation and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
ARE DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
function(t,n){typeof exports=="object"&&typeof module=="object"?module.exports=n():typeof define=="function"&&define.amd?define("esprima",[],n):typeof exports=="object"?exports.esprima=n():t.esprima=n()}(this,function(){return function(e){function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){function u(e,t,n){var o=null,u=function(e,t){n&&n(e,t),o&&o.visit(e,t)},a=typeof n=="function"?u:null,f=!1;if(t){f=typeof t.comment=="boolean"&&t.comment;var l=typeof t.attachComment=="boolean"&&t.attachComment;if(f||l)o=new r.CommentHandler,o.attach=l,t.comment=!0,a=u}var c=!1;t&&typeof t.sourceType=="string"&&(c=t.sourceType==="module");var h;t&&typeof t.jsx=="boolean"&&t.jsx?h=new i.JSXParser(e,t,a):h=new s.Parser(e,t,a);var p=c?h.parseModule():h.parseScript(),d=p;return f&&o&&(d.comments=o.comments),h.config.tokens&&(d.tokens=h.tokens),h.config.tolerant&&(d.errors=h.errorHandler.errors),d}function a(e,t,n){var r=t||{};return r.sourceType="module",u(e,r,n)}function f(e,t,n){var r=t||{};return r.sourceType="script",u(e,r,n)}function l(e,t,n){var r=new o.Tokenizer(e,t),i;i=[];try{for(;;){var s=r.getNextToken();if(!s)break;n&&(s=n(s)),i.push(s)}}catch(u){r.errorHandler.tolerate(u)}return r.errorHandler.tolerant&&(i.errors=r.errors()),i}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(3),s=n(8),o=n(15);t.parse=u,t.parseModule=a,t.parseScript=f,t.tokenize=l;var c=n(2);t.Syntax=c.Syntax,t.version="4.0.0-dev"},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=function(){function e(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}return e.prototype.insertInnerComments=function(e,t){if(e.type===r.Syntax.BlockStatement&&e.body.length===0){var n=[];for(var i=this.leading.length-1;i>=0;--i){var s=this.leading[i];t.end.offset>=s.start&&(n.unshift(s.comment),this.leading.splice(i,1),this.trailing.splice(i,1))}n.length&&(e.innerComments=n)}},e.prototype.findTrailingComments=function(e){var t=[];if(this.trailing.length>0){for(var n=this.trailing.length-1;n>=0;--n){var r=this.trailing[n];r.start>=e.end.offset&&t.unshift(r.comment)}return this.trailing.length=0,t}var i=this.stack[this.stack.length-1];if(i&&i.node.trailingComments){var s=i.node.trailingComments[0];s&&s.range[0]>=e.end.offset&&(t=i.node.trailingComments,delete i.node.trailingComments)}return t},e.prototype.findLeadingComments=function(e){var t=[],n;while(this.stack.length>0){var r=this.stack[this.stack.length-1];if(!(r&&r.start>=e.start.offset))break;n=r.node,this.stack.pop()}if(n){var i=n.leadingComments?n.leadingComments.length:0;for(var s=i-1;s>=0;--s){var o=n.leadingComments[s];o.range[1]<=e.start.offset&&(t.unshift(o),n.leadingComments.splice(s,1))}return n.leadingComments&&n.leadingComments.length===0&&delete n.leadingComments,t}for(var s=this.leading.length-1;s>=0;--s){var r=this.leading[s];r.start<=e.start.offset&&(t.unshift(r.comment),this.leading.splice(s,1))}return t},e.prototype.visitNode=function(e,t){if(e.type===r.Syntax.Program&&e.body.length>0)return;this.insertInnerComments(e,t);var n=this.findTrailingComments(t),i=this.findLeadingComments(t);i.length>0&&(e.leadingComments=i),n.length>0&&(e.trailingComments=n),this.stack.push({node:e,start:t.start.offset})},e.prototype.visitComment=function(e,t){var n=e.type[0]==="L"?"Line":"Block",r={type:n,value:e.value};e.range&&(r.range=e.range),e.loc&&(r.loc=e.loc),this.comments.push(r);if(this.attach){var i={comment:{type:n,value:e.value,range:[t.start.offset,t.end.offset]},start:t.start.offset};e.loc&&(i.comment.loc=e.loc),e.type=n,this.leading.push(i),this.trailing.push(i)}},e.prototype.visit=function(e,t){e.type==="LineComment"?this.visitComment(e,t):e.type==="BlockComment"?this.visitComment(e,t):this.attach&&this.visitNode(e,t)},e}();t.CommentHandler=i},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Import:"Import",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(e,t,n){function c(e){var t;switch(e.type){case o.JSXSyntax.JSXIdentifier:var n=e;t=n.name;break;case o.JSXSyntax.JSXNamespacedName:var r=e;t=c(r.namespace)+":"+c(r.name);break;case o.JSXSyntax.JSXMemberExpression:var i=e;t=c(i.object)+"."+c(i.property);break;default:}return t}var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),s=n(5),o=n(6),u=n(7),a=n(8),f=n(13),l=n(14);f.TokenName[100]="JSXIdentifier",f.TokenName[101]="JSXText";var h=function(e){function t(t,n,r){return e.call(this,t,n,r)||this}return r(t,e),t.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():e.prototype.parsePrimaryExpression.call(this)},t.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.line,this.scanner.lineStart=this.startMarker.index-this.startMarker.column},t.prototype.finishJSX=function(){this.nextToken()},t.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX("}"),this.config.tokens&&this.tokens.pop()},t.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},t.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},t.prototype.scanXHTMLEntity=function(e){var t="&",n=!0,r=!1,s=!1,o=!1;while(!this.scanner.eof()&&n&&!r){var u=this.scanner.source[this.scanner.index];if(u===e)break;r=u===";",t+=u,++this.scanner.index;if(!r)switch(t.length){case 2:s=u==="#";break;case 3:s&&(o=u==="x",n=o||i.Character.isDecimalDigit(u.charCodeAt(0)),s=s&&!o);break;default:n=n&&(!s||!!i.Character.isDecimalDigit(u.charCodeAt(0))),n=n&&(!o||!!i.Character.isHexDigit(u.charCodeAt(0)))}}if(n&&r&&t.length>2){var a=t.substr(1,t.length-2);s&&a.length>1?t=String.fromCharCode(parseInt(a.substr(1),10)):o&&a.length>2?t=String.fromCharCode(parseInt("0"+a.substr(1),16)):!s&&!o&&l.XHTMLEntities[a]&&(t=l.XHTMLEntities[a])}return t},t.prototype.lexJSX=function(){var e=this.scanner.source.charCodeAt(this.scanner.index);if(e===60||e===62||e===47||e===58||e===61||e===123||e===125){var t=this.scanner.source[this.scanner.index++];return{type:7,value:t,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index}}if(e===34||e===39){var n=this.scanner.index,r=this.scanner.source[this.scanner.index++],s="";while(!this.scanner.eof()){var o=this.scanner.source[this.scanner.index++];if(o===r)break;o==="&"?s+=this.scanXHTMLEntity(r):s+=o}return{type:8,value:s,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:n,end:this.scanner.index}}if(e===46){var u=this.scanner.source.charCodeAt(this.scanner.index+1),a=this.scanner.source.charCodeAt(this.scanner.index+2),t=u===46&&a===46?"...":".",n=this.scanner.index;return this.scanner.index+=t.length,{type:7,value:t,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:n,end:this.scanner.index}}if(e===96)return{type:10,value:"",lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(i.Character.isIdentifierStart(e)&&e!==92){var n=this.scanner.index;++this.scanner.index;while(!this.scanner.eof()){var o=this.scanner.source.charCodeAt(this.scanner.index);if(i.Character.isIdentifierPart(o)&&o!==92)++this.scanner.index;else{if(o!==45)break;++this.scanner.index}}var f=this.scanner.source.slice(n,this.scanner.index);return{type:100,value:f,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:n,end:this.scanner.index}}return this.scanner.lex()},t.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;var e=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(e)),e},t.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;var e=this.scanner.index,t="";while(!this.scanner.eof()){var n=this.scanner.source[this.scanner.index];if(n==="{"||n==="<")break;++this.scanner.index,t+=n,i.Character.isLineTerminator(n.charCodeAt(0))&&(++this.scanner.lineNumber,n==="\r"&&this.scanner.source[this.scanner.index]==="\n"&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart;var r={type:101,value:t,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:e,end:this.scanner.index};return t.length>0&&this.config.tokens&&this.tokens.push(this.convertToken(r)),r},t.prototype.peekJSXToken=function(){var e=this.scanner.saveState();this.scanner.scanComments();var t=this.lexJSX();return this.scanner.restoreState(e),t},t.prototype.expectJSX=function(e){var t=this.nextJSXToken();(t.type!==7||t.value!==e)&&this.throwUnexpectedToken(t)},t.prototype.matchJSX=function(e){var t=this.peekJSXToken();return t.type===7&&t.value===e},t.prototype.parseJSXIdentifier=function(){var e=this.createJSXNode(),t=this.nextJSXToken();return t.type!==100&&this.throwUnexpectedToken(t),this.finalize(e,new s.JSXIdentifier(t.value))},t.prototype.parseJSXElementName=function(){var e=this.createJSXNode(),t=this.parseJSXIdentifier();if(this.matchJSX(":")){var n=t;this.expectJSX(":");var r=this.parseJSXIdentifier();t=this.finalize(e,new s.JSXNamespacedName(n,r))}else if(this.matchJSX("."))while(this.matchJSX(".")){var i=t;this.expectJSX(".");var o=this.parseJSXIdentifier();t=this.finalize(e,new s.JSXMemberExpression(i,o))}return t},t.prototype.parseJSXAttributeName=function(){var e=this.createJSXNode(),t,n=this.parseJSXIdentifier();if(this.matchJSX(":")){var r=n;this.expectJSX(":");var i=this.parseJSXIdentifier();t=this.finalize(e,new s.JSXNamespacedName(r,i))}else t=n;return t},t.prototype.parseJSXStringLiteralAttribute=function(){var e=this.createJSXNode(),t=this.nextJSXToken();t.type!==8&&this.throwUnexpectedToken(t);var n=this.getTokenRaw(t);return this.finalize(e,new u.Literal(t.value,n))},t.prototype.parseJSXExpressionAttribute=function(){var e=this.createJSXNode();this.expectJSX("{"),this.finishJSX(),this.match("}")&&this.tolerateError("JSX attributes must only be assigned a non-empty expression");var t=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(e,new s.JSXExpressionContainer(t))},t.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},t.prototype.parseJSXNameValueAttribute=function(){var e=this.createJSXNode(),t=this.parseJSXAttributeName(),n=null;return this.matchJSX("=")&&(this.expectJSX("="),n=this.parseJSXAttributeValue()),this.finalize(e,new s.JSXAttribute(t,n))},t.prototype.parseJSXSpreadAttribute=function(){var e=this.createJSXNode();this.expectJSX("{"),this.expectJSX("..."),this.finishJSX();var t=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(e,new s.JSXSpreadAttribute(t))},t.prototype.parseJSXAttributes=function(){var e=[];while(!this.matchJSX("/")&&!this.matchJSX(">")){var t=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();e.push(t)}return e},t.prototype.parseJSXOpeningElement=function(){var e=this.createJSXNode();this.expectJSX("<");var t=this.parseJSXElementName(),n=this.parseJSXAttributes(),r=this.matchJSX("/");return r&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(e,new s.JSXOpeningElement(t,r,n))},t.prototype.parseJSXBoundaryElement=function(){var e=this.createJSXNode();this.expectJSX("<");if(this.matchJSX("/")){this.expectJSX("/");var t=this.parseJSXElementName();return this.expectJSX(">"),this.finalize(e,new s.JSXClosingElement(t))}var n=this.parseJSXElementName(),r=this.parseJSXAttributes(),i=this.matchJSX("/");return i&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(e,new s.JSXOpeningElement(n,i,r))},t.prototype.parseJSXEmptyExpression=function(){var e=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.finalize(e,new s.JSXEmptyExpression)},t.prototype.parseJSXExpressionContainer=function(){var e=this.createJSXNode();this.expectJSX("{");var t;return this.matchJSX("}")?(t=this.parseJSXEmptyExpression(),this.expectJSX("}")):(this.finishJSX(),t=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(e,new s.JSXExpressionContainer(t))},t.prototype.parseJSXChildren=function(){var e=[];while(!this.scanner.eof()){var t=this.createJSXChildNode(),n=this.nextJSXText();if(n.start<n.end){var r=this.getTokenRaw(n),i=this.finalize(t,new s.JSXText(n.value,r));e.push(i)}if(this.scanner.source[this.scanner.index]!=="{")break;var o=this.parseJSXExpressionContainer();e.push(o)}return e},t.prototype.parseComplexJSXElement=function(e){var t=[];while(!this.scanner.eof()){e.children=e.children.concat(this.parseJSXChildren());var n=this.createJSXChildNode(),r=this.parseJSXBoundaryElement();if(r.type===o.JSXSyntax.JSXOpeningElement){var i=r;if(i.selfClosing){var u=this.finalize(n,new s.JSXElement(i,[],null));e.children.push(u)}else t.push(e),e={node:n,opening:i,closing:null,children:[]}}if(r.type===o.JSXSyntax.JSXClosingElement){e.closing=r;var a=c(e.opening.name),f=c(e.closing.name);a!==f&&this.tolerateError("Expected corresponding JSX closing tag for %0",a);if(!(t.length>0))break;var u=this.finalize(e.node,new s.JSXElement(e.opening,e.children,e.closing));e=t[t.length-1],e.children.push(u),t.pop()}}return e},t.prototype.parseJSXElement=function(){var e=this.createJSXNode(),t=this.parseJSXOpeningElement(),n=[],r=null;if(!t.selfClosing){var i=this.parseComplexJSXElement({node:e,opening:t,closing:r,children:n});n=i.children,r=i.closing}return this.finalize(e,new s.JSXElement(t,n,r))},t.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var e=this.parseJSXElement();return this.finishJSX(),e},t.prototype.isStartOfExpression=function(){return e.prototype.isStartOfExpression.call(this)||this.match("<")},t}(a.Parser);t.JSXParser=h},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDEC0-\uDEEB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D3-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD27\uDD30-\uDD39\uDF00-\uDF1C\uDF27\uDF30-\uDF50\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD46\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E\uDC5F\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCE9\uDCFF\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};t.Character={fromCodePoint:function(e){return e<65536?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10))+String.fromCharCode(56320+(e-65536&1023))},isWhiteSpace:function(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0},isLineTerminator:function(e){return e===10||e===13||e===8232||e===8233},isIdentifierStart:function(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&n.NonAsciiIdentifierStart.test(t.Character.fromCodePoint(e))},isIdentifierPart:function(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&n.NonAsciiIdentifierPart.test(t.Character.fromCodePoint(e))},isDecimalDigit:function(e){return e>=48&&e<=57},isHexDigit:function(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102},isOctalDigit:function(e){return e>=48&&e<=55}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=function(){function e(e){this.type=r.JSXSyntax.JSXClosingElement,this.name=e}return e}();t.JSXClosingElement=i;var s=function(){function e(e,t,n){this.type=r.JSXSyntax.JSXElement,this.openingElement=e,this.children=t,this.closingElement=n}return e}();t.JSXElement=s;var o=function(){function e(){this.type=r.JSXSyntax.JSXEmptyExpression}return e}();t.JSXEmptyExpression=o;var u=function(){function e(e){this.type=r.JSXSyntax.JSXExpressionContainer,this.expression=e}return e}();t.JSXExpressionContainer=u;var a=function(){function e(e){this.type=r.JSXSyntax.JSXIdentifier,this.name=e}return e}();t.JSXIdentifier=a;var f=function(){function e(e,t){this.type=r.JSXSyntax.JSXMemberExpression,this.object=e,this.property=t}return e}();t.JSXMemberExpression=f;var l=function(){function e(e,t){this.type=r.JSXSyntax.JSXAttribute,this.name=e,this.value=t}return e}();t.JSXAttribute=l;var c=function(){function e(e,t){this.type=r.JSXSyntax.JSXNamespacedName,this.namespace=e,this.name=t}return e}();t.JSXNamespacedName=c;var h=function(){function e(e,t,n){this.type=r.JSXSyntax.JSXOpeningElement,this.name=e,this.selfClosing=t,this.attributes=n}return e}();t.JSXOpeningElement=h;var p=function(){function e(e){this.type=r.JSXSyntax.JSXSpreadAttribute,this.argument=e}return e}();t.JSXSpreadAttribute=p;var d=function(){function e(e,t){this.type=r.JSXSyntax.JSXText,this.value=e,this.raw=t}return e}();t.JSXText=d},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),i=function(){function e(e){this.type=r.Syntax.ArrayExpression,this.elements=e}return e}();t.ArrayExpression=i;var s=function(){function e(e){this.type=r.Syntax.ArrayPattern,this.elements=e}return e}();t.ArrayPattern=s;var o=function(){function e(e,t,n){this.type=r.Syntax.ArrowFunctionExpression,this.id=null,this.params=e,this.body=t,this.generator=!1,this.expression=n,this.async=!1}return e}();t.ArrowFunctionExpression=o;var u=function(){function e(e,t,n){this.type=r.Syntax.AssignmentExpression,this.operator=e,this.left=t,this.right=n}return e}();t.AssignmentExpression=u;var a=function(){function e(e,t){this.type=r.Syntax.AssignmentPattern,this.left=e,this.right=t}return e}();t.AssignmentPattern=a;var f=function(){function e(e,t,n){this.type=r.Syntax.ArrowFunctionExpression,this.id=null,this.params=e,this.body=t,this.generator=!1,this.expression=n,this.async=!0}return e}();t.AsyncArrowFunctionExpression=f;var l=function(){function e(e,t,n){this.type=r.Syntax.FunctionDeclaration,this.id=e,this.params=t,this.body=n,this.generator=!1,this.expression=!1,this.async=!0}return e}();t.AsyncFunctionDeclaration=l;var c=function(){function e(e,t,n){this.type=r.Syntax.FunctionExpression,this.id=e,this.params=t,this.body=n,this.generator=!1,this.expression=!1,this.async=!0}return e}();t.AsyncFunctionExpression=c;var h=function(){function e(e){this.type=r.Syntax.AwaitExpression,this.argument=e}return e}();t.AwaitExpression=h;var p=function(){function e(e,t,n){var i=e==="||"||e==="&&";this.type=i?r.Syntax.LogicalExpression:r.Syntax.BinaryExpression,this.operator=e,this.left=t,this.right=n}return e}();t.BinaryExpression=p;var d=function(){function e(e){this.type=r.Syntax.BlockStatement,this.body=e}return e}();t.BlockStatement=d;var v=function(){function e(e){this.type=r.Syntax.BreakStatement,this.label=e}return e}();t.BreakStatement=v;var m=function(){function e(e,t){this.type=r.Syntax.CallExpression,this.callee=e,this.arguments=t}return e}();t.CallExpression=m;var g=function(){function e(e,t){this.type=r.Syntax.CatchClause,this.param=e,this.body=t}return e}();t.CatchClause=g;var y=function(){function e(e){this.type=r.Syntax.ClassBody,this.body=e}return e}();t.ClassBody=y;var b=function(){function e(e,t,n){this.type=r.Syntax.ClassDeclaration,this.id=e,this.superClass=t,this.body=n}return e}();t.ClassDeclaration=b;var w=function(){function e(e,t,n){this.type=r.Syntax.ClassExpression,this.id=e,this.superClass=t,this.body=n}return e}();t.ClassExpression=w;var E=function(){function e(e,t){this.type=r.Syntax.MemberExpression,this.computed=!0,this.object=e,this.property=t}return e}();t.ComputedMemberExpression=E;var S=function(){function e(e,t,n){this.type=r.Syntax.ConditionalExpression,this.test=e,this.consequent=t,this.alternate=n}return e}();t.ConditionalExpression=S;var x=function(){function e(e){this.type=r.Syntax.ContinueStatement,this.label=e}return e}();t.ContinueStatement=x;var T=function(){function e(){this.type=r.Syntax.DebuggerStatement}return e}();t.DebuggerStatement=T;var N=function(){function e(e,t){this.type=r.Syntax.ExpressionStatement,this.expression=e,this.directive=t}return e}();t.Directive=N;var C=function(){function e(e,t){this.type=r.Syntax.DoWhileStatement,this.body=e,this.test=t}return e}();t.DoWhileStatement=C;var k=function(){function e(){this.type=r.Syntax.EmptyStatement}return e}();t.EmptyStatement=k;var L=function(){function e(e){this.type=r.Syntax.ExportAllDeclaration,this.source=e}return e}();t.ExportAllDeclaration=L;var A=function(){function e(e){this.type=r.Syntax.ExportDefaultDeclaration,this.declaration=e}return e}();t.ExportDefaultDeclaration=A;var O=function(){function e(e,t,n){this.type=r.Syntax.ExportNamedDeclaration,this.declaration=e,this.specifiers=t,this.source=n}return e}();t.ExportNamedDeclaration=O;var M=function(){function e(e,t){this.type=r.Syntax.ExportSpecifier,this.exported=t,this.local=e}return e}();t.ExportSpecifier=M;var _=function(){function e(e){this.type=r.Syntax.ExpressionStatement,this.expression=e}return e}();t.ExpressionStatement=_;var D=function(){function e(e,t,n){this.type=r.Syntax.ForInStatement,this.left=e,this.right=t,this.body=n,this.each=!1}return e}();t.ForInStatement=D;var P=function(){function e(e,t,n){this.type=r.Syntax.ForOfStatement,this.left=e,this.right=t,this.body=n}return e}();t.ForOfStatement=P;var H=function(){function e(e,t,n,i){this.type=r.Syntax.ForStatement,this.init=e,this.test=t,this.update=n,this.body=i}return e}();t.ForStatement=H;var B=function(){function e(e,t,n,i){this.type=r.Syntax.FunctionDeclaration,this.id=e,this.params=t,this.body=n,this.generator=i,this.expression=!1,this.async=!1}return e}();t.FunctionDeclaration=B;var j=function(){function e(e,t,n,i){this.type=r.Syntax.FunctionExpression,this.id=e,this.params=t,this.body=n,this.generator=i,this.expression=!1,this.async=!1}return e}();t.FunctionExpression=j;var F=function(){function e(e){this.type=r.Syntax.Identifier,this.name=e}return e}();t.Identifier=F;var I=function(){function e(e,t,n){this.type=r.Syntax.IfStatement,this.test=e,this.consequent=t,this.alternate=n}return e}();t.IfStatement=I;var q=function(){function e(){this.type=r.Syntax.Import}return e}();t.Import=q;var R=function(){function e(e,t){this.type=r.Syntax.ImportDeclaration,this.specifiers=e,this.source=t}return e}();t.ImportDeclaration=R;var U=function(){function e(e){this.type=r.Syntax.ImportDefaultSpecifier,this.local=e}return e}();t.ImportDefaultSpecifier=U;var z=function(){function e(e){this.type=r.Syntax.ImportNamespaceSpecifier,this.local=e}return e}();t.ImportNamespaceSpecifier=z;var W=function(){function e(e,t){this.type=r.Syntax.ImportSpecifier,this.local=e,this.imported=t}return e}();t.ImportSpecifier=W;var X=function(){function e(e,t){this.type=r.Syntax.LabeledStatement,this.label=e,this.body=t}return e}();t.LabeledStatement=X;var V=function(){function e(e,t){this.type=r.Syntax.Literal,this.value=e,this.raw=t}return e}();t.Literal=V;var $=function(){function e(e,t){this.type=r.Syntax.MetaProperty,this.meta=e,this.property=t}return e}();t.MetaProperty=$;var J=function(){function e(e,t,n,i,s){this.type=r.Syntax.MethodDefinition,this.key=e,this.computed=t,this.value=n,this.kind=i,this.static=s}return e}();t.MethodDefinition=J;var K=function(){function e(e){this.type=r.Syntax.Program,this.body=e,this.sourceType="module"}return e}();t.Module=K;var Q=function(){function e(e,t){this.type=r.Syntax.NewExpression,this.callee=e,this.arguments=t}return e}();t.NewExpression=Q;var G=function(){function e(e){this.type=r.Syntax.ObjectExpression,this.properties=e}return e}();t.ObjectExpression=G;var Y=function(){function e(e){this.type=r.Syntax.ObjectPattern,this.properties=e}return e}();t.ObjectPattern=Y;var Z=function(){function e(e,t,n,i,s,o){this.type=r.Syntax.Property,this.key=t,this.computed=n,this.value=i,this.kind=e,this.method=s,this.shorthand=o}return e}();t.Property=Z;var et=function(){function e(e,t,n,i){this.type=r.Syntax.Literal,this.value=e,this.raw=t,this.regex={pattern:n,flags:i}}return e}();t.RegexLiteral=et;var tt=function(){function e(e){this.type=r.Syntax.RestElement,this.argument=e}return e}();t.RestElement=tt;var nt=function(){function e(e){this.type=r.Syntax.ReturnStatement,this.argument=e}return e}();t.ReturnStatement=nt;var rt=function(){function e(e){this.type=r.Syntax.Program,this.body=e,this.sourceType="script"}return e}();t.Script=rt;var it=function(){function e(e){this.type=r.Syntax.SequenceExpression,this.expressions=e}return e}();t.SequenceExpression=it;var st=function(){function e(e){this.type=r.Syntax.SpreadElement,this.argument=e}return e}();t.SpreadElement=st;var ot=function(){function e(e,t){this.type=r.Syntax.MemberExpression,this.computed=!1,this.object=e,this.property=t}return e}();t.StaticMemberExpression=ot;var ut=function(){function e(){this.type=r.Syntax.Super}return e}();t.Super=ut;var at=function(){function e(e,t){this.type=r.Syntax.SwitchCase,this.test=e,this.consequent=t}return e}();t.SwitchCase=at;var ft=function(){function e(e,t){this.type=r.Syntax.SwitchStatement,this.discriminant=e,this.cases=t}return e}();t.SwitchStatement=ft;var lt=function(){function e(e,t){this.type=r.Syntax.TaggedTemplateExpression,this.tag=e,this.quasi=t}return e}();t.TaggedTemplateExpression=lt;var ct=function(){function e(e,t){this.type=r.Syntax.TemplateElement,this.value=e,this.tail=t}return e}();t.TemplateElement=ct;var ht=function(){function e(e,t){this.type=r.Syntax.TemplateLiteral,this.quasis=e,this.expressions=t}return e}();t.TemplateLiteral=ht;var pt=function(){function e(){this.type=r.Syntax.ThisExpression}return e}();t.ThisExpression=pt;var dt=function(){function e(e){this.type=r.Syntax.ThrowStatement,this.argument=e}return e}();t.ThrowStatement=dt;var vt=function(){function e(e,t,n){this.type=r.Syntax.TryStatement,this.block=e,this.handler=t,this.finalizer=n}return e}();t.TryStatement=vt;var mt=function(){function e(e,t){this.type=r.Syntax.UnaryExpression,this.operator=e,this.argument=t,this.prefix=!0}return e}();t.UnaryExpression=mt;var gt=function(){function e(e,t,n){this.type=r.Syntax.UpdateExpression,this.operator=e,this.argument=t,this.prefix=n}return e}();t.UpdateExpression=gt;var yt=function(){function e(e,t){this.type=r.Syntax.VariableDeclaration,this.declarations=e,this.kind=t}return e}();t.VariableDeclaration=yt;var bt=function(){function e(e,t){this.type=r.Syntax.VariableDeclarator,this.id=e,this.init=t}return e}();t.VariableDeclarator=bt;var wt=function(){function e(e,t){this.type=r.Syntax.WhileStatement,this.test=e,this.body=t}return e}();t.WhileStatement=wt;var Et=function(){function e(e,t){this.type=r.Syntax.WithStatement,this.object=e,this.body=t}return e}();t.WithStatement=Et;var St=function(){function e(e,t){this.type=r.Syntax.YieldExpression,this.argument=e,this.delegate=t}return e}();t.YieldExpression=St},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),i=n(10),s=n(11),o=n(7),u=n(12),a=n(2),f=n(13),l="ArrowParameterPlaceHolder",c=function(){function e(e,t,n){t===void 0&&(t={}),this.config={range:typeof t.range=="boolean"&&t.range,loc:typeof t.loc=="boolean"&&t.loc,source:null,tokens:typeof t.tokens=="boolean"&&t.tokens,comment:typeof t.comment=="boolean"&&t.comment,tolerant:typeof t.tolerant=="boolean"&&t.tolerant},this.config.loc&&t.source&&t.source!==null&&(this.config.source=String(t.source)),this.delegate=n,this.errorHandler=new i.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new u.Scanner(e,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={isModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}return e.prototype.throwError=function(e){var t=[];for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=Array.prototype.slice.call(arguments,1),s=e.replace(/%(\d)/g,function(e,t){return r.assert(t<i.length,"Message reference must be in range"),i[t]}),o=this.lastMarker.index,u=this.lastMarker.line,a=this.lastMarker.column+1;throw this.errorHandler.createError(o,u,a,s)},e.prototype.tolerateError=function(e){var t=[];for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=Array.prototype.slice.call(arguments,1),s=e.replace(/%(\d)/g,function(e,t){return r.assert(t<i.length,"Message reference must be in range"),i[t]}),o=this.lastMarker.index,u=this.scanner.lineNumber,a=this.lastMarker.column+1;this.errorHandler.tolerateError(o,u,a,s)},e.prototype.unexpectedTokenError=function(e,t){var n=t||s.Messages.UnexpectedToken,r;e?(t||(n=e.type===2?s.Messages.UnexpectedEOS:e.type===3?s.Messages.UnexpectedIdentifier:e.type===6?s.Messages.UnexpectedNumber:e.type===8?s.Messages.UnexpectedString:e.type===10?s.Messages.UnexpectedTemplate:s.Messages.UnexpectedToken,e.type===4&&(this.scanner.isFutureReservedWord(e.value)?n=s.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(e.value)&&(n=s.Messages.StrictReservedWord))),r=e.value):r="ILLEGAL",n=n.replace("%0",r);if(e&&typeof e.lineNumber=="number"){var i=e.start,o=e.lineNumber,u=this.lastMarker.index-this.lastMarker.column,a=e.start-u+1;return this.errorHandler.createError(i,o,a,n)}var i=this.lastMarker.index,o=this.lastMarker.line,a=this.lastMarker.column+1;return this.errorHandler.createError(i,o,a,n)},e.prototype.throwUnexpectedToken=function(e,t){throw this.unexpectedTokenError(e,t)},e.prototype.tolerateUnexpectedToken=function(e,t){this.errorHandler.tolerate(this.unexpectedTokenError(e,t))},e.prototype.collectComments=function(){if(!this.config.comment)this.scanner.scanComments();else{var e=this.scanner.scanComments();if(e.length>0&&this.delegate)for(var t=0;t<e.length;++t){var n=e[t],r=void 0;r={type:n.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(n.slice[0],n.slice[1])},this.config.range&&(r.range=n.range),this.config.loc&&(r.loc=n.loc);var i={start:{line:n.loc.start.line,column:n.loc.start.column,offset:n.range[0]},end:{line:n.loc.end.line,column:n.loc.end.column,offset:n.range[1]}};this.delegate(r,i)}}},e.prototype.getTokenRaw=function(e){return this.scanner.source.slice(e.start,e.end)},e.prototype.convertToken=function(e){var t={type:f.TokenName[e.type],value:this.getTokenRaw(e)};this.config.range&&(t.range=[e.start,e.end]),this.config.loc&&(t.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}});if(e.type===9){var n=e.pattern,r=e.flags;t.regex={pattern:n,flags:r}}return t},e.prototype.nextToken=function(){var e=this.lookahead;this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var t=this.scanner.lex();return this.hasLineTerminator=e.lineNumber!==t.lineNumber,t&&this.context.strict&&t.type===3&&this.scanner.isStrictModeReservedWord(t.value)&&(t.type=4),this.lookahead=t,this.config.tokens&&t.type!==2&&this.tokens.push(this.convertToken(t)),e},e.prototype.nextRegexToken=function(){this.collectComments();var e=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(e))),this.lookahead=e,this.nextToken(),e},e.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}},e.prototype.startNode=function(e,t){t===void 0&&(t=0);var n=e.start-e.lineStart,r=e.lineNumber;return n<0&&(n+=t,r--),{index:e.start,line:r,column:n}},e.prototype.finalize=function(e,t){this.config.range&&(t.range=[e.index,this.lastMarker.index]),this.config.loc&&(t.loc={start:{line:e.line,column:e.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(t.loc.source=this.config.source));if(this.delegate){var n={start:{line:e.line,column:e.column,offset:e.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}};this.delegate(t,n)}return t},e.prototype.expect=function(e){var t=this.nextToken();(t.type!==7||t.value!==e)&&this.throwUnexpectedToken(t)},e.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var e=this.lookahead;e.type===7&&e.value===","?this.nextToken():e.type===7&&e.value===";"?(this.nextToken(),this.tolerateUnexpectedToken(e)):this.tolerateUnexpectedToken(e,s.Messages.UnexpectedToken)}else this.expect(",")},e.prototype.expectKeyword=function(e){var t=this.nextToken();(t.type!==4||t.value!==e)&&this.throwUnexpectedToken(t)},e.prototype.match=function(e){return this.lookahead.type===7&&this.lookahead.value===e},e.prototype.matchKeyword=function(e){return this.lookahead.type===4&&this.lookahead.value===e},e.prototype.matchContextualKeyword=function(e){return this.lookahead.type===3&&this.lookahead.value===e},e.prototype.matchAssign=function(){if(this.lookahead.type!==7)return!1;var e=this.lookahead.value;return e==="="||e==="*="||e==="**="||e==="/="||e==="%="||e==="+="||e==="-="||e==="<<="||e===">>="||e===">>>="||e==="&="||e==="^="||e==="|="},e.prototype.isolateCoverGrammar=function(e){var t=this.context.isBindingElement,n=this.context.isAssignmentTarget,r=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var i=e.call(this);return this.context.firstCoverInitializedNameError!==null&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=t,this.context.isAssignmentTarget=n,this.context.firstCoverInitializedNameError=r,i},e.prototype.inheritCoverGrammar=function(e){var t=this.context.isBindingElement,n=this.context.isAssignmentTarget,r=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var i=e.call(this);return this.context.isBindingElement=this.context.isBindingElement&&t,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&n,this.context.firstCoverInitializedNameError=r||this.context.firstCoverInitializedNameError,i},e.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(this.lookahead.type!==2&&!this.match("}")&&this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)},e.prototype.parsePrimaryExpression=function(){var e=this.createNode(),t,n,r;switch(this.lookahead.type){case 3:(this.context.isModule||this.context.await)&&this.lookahead.value==="await"&&this.tolerateUnexpectedToken(this.lookahead),t=this.matchAsyncFunction()?this.parseFunctionExpression():this.finalize(e,new o.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,s.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,n=this.nextToken(),r=this.getTokenRaw(n),t=this.finalize(e,new o.Literal(n.value,r));break;case 1:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,n=this.nextToken(),r=this.getTokenRaw(n),t=this.finalize(e,new o.Literal(n.value==="true",r));break;case 5:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,n=this.nextToken(),r=this.getTokenRaw(n),t=this.finalize(e,new o.Literal(null,r));break;case 10:t=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,t=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":t=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":t=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,n=this.nextRegexToken(),r=this.getTokenRaw(n),t=this.finalize(e,new o.RegexLiteral(n.regex,r,n.pattern,n.flags));break;default:t=this.throwUnexpectedToken(this.nextToken())}break;case 4:!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")?t=this.parseIdentifierName():!this.context.strict&&this.matchKeyword("let")?t=this.finalize(e,new o.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword("function")?t=this.parseFunctionExpression():this.matchKeyword("this")?(this.nextToken(),t=this.finalize(e,new o.ThisExpression)):this.matchKeyword("class")?t=this.parseClassExpression():this.matchImportCall()?t=this.parseImportCall():t=this.throwUnexpectedToken(this.nextToken()));break;default:t=this.throwUnexpectedToken(this.nextToken())}return t},e.prototype.parseSpreadElement=function(){var e=this.createNode();this.expect("...");var t=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.finalize(e,new o.SpreadElement(t))},e.prototype.parseArrayInitializer=function(){var e=this.createNode(),t=[];this.expect("[");while(!this.match("]"))if(this.match(","))this.nextToken(),t.push(null);else if(this.match("...")){var n=this.parseSpreadElement();this.match("]")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(",")),t.push(n)}else t.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(",");return this.expect("]"),this.finalize(e,new o.ArrayExpression(t))},e.prototype.parsePropertyMethod=function(e){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var t=this.context.strict,n=this.context.allowStrictDirective;this.context.allowStrictDirective=e.simple;var r=this.isolateCoverGrammar(this.parseFunctionSourceElements);return this.context.strict&&e.firstRestricted&&this.tolerateUnexpectedToken(e.firstRestricted,e.message),this.context.strict&&e.stricted&&this.tolerateUnexpectedToken(e.stricted,e.message),this.context.strict=t,this.context.allowStrictDirective=n,r},e.prototype.parsePropertyMethodFunction=function(){var e=!1,t=this.createNode(),n=this.context.allowYield;this.context.allowYield=!0;var r=this.parseFormalParameters(),i=this.parsePropertyMethod(r);return this.context.allowYield=n,this.finalize(t,new o.FunctionExpression(null,r.params,i,e))},e.prototype.parsePropertyMethodAsyncFunction=function(){var e=this.createNode(),t=this.context.allowYield,n=this.context.await;this.context.allowYield=!1,this.context.await=!0;var r=this.parseFormalParameters(),i=this.parsePropertyMethod(r);return this.context.allowYield=t,this.context.await=n,this.finalize(e,new o.AsyncFunctionExpression(null,r.params,i))},e.prototype.parseObjectPropertyKey=function(){var e=this.createNode(),t=this.nextToken(),n;switch(t.type){case 8:case 6:this.context.strict&&t.octal&&this.tolerateUnexpectedToken(t,s.Messages.StrictOctalLiteral);var r=this.getTokenRaw(t);n=this.finalize(e,new o.Literal(t.value,r));break;case 3:case 1:case 5:case 4:n=this.finalize(e,new o.Identifier(t.value));break;case 7:t.value==="["?(n=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):n=this.throwUnexpectedToken(t);break;default:n=this.throwUnexpectedToken(t)}return n},e.prototype.isPropertyKey=function(e,t){return e.type===a.Syntax.Identifier&&e.name===t||e.type===a.Syntax.Literal&&e.value===t},e.prototype.parseObjectProperty=function(e){var t=this.createNode(),n=this.lookahead,r,i=null,u=null,a=!1,f=!1,l=!1,c=!1;if(n.type===3){var h=n.value;this.nextToken(),a=this.match("["),c=!this.hasLineTerminator&&h==="async"&&!this.match(":")&&!this.match("(")&&!this.match("*")&&!this.match(","),i=c?this.parseObjectPropertyKey():this.finalize(t,new o.Identifier(h))}else this.match("*")?this.nextToken():(a=this.match("["),i=this.parseObjectPropertyKey());var p=this.qualifiedPropertyName(this.lookahead);if(n.type===3&&!c&&n.value==="get"&&p)r="get",a=this.match("["),i=this.parseObjectPropertyKey(),this.context.allowYield=!1,u=this.parseGetterMethod();else if(n.type===3&&!c&&n.value==="set"&&p)r="set",a=this.match("["),i=this.parseObjectPropertyKey(),u=this.parseSetterMethod();else if(n.type===7&&n.value==="*"&&p)r="init",a=this.match("["),i=this.parseObjectPropertyKey(),u=this.parseGeneratorMethod(),f=!0;else{i||this.throwUnexpectedToken(this.lookahead),r="init";if(this.match(":")&&!c)!a&&this.isPropertyKey(i,"__proto__")&&(e.value&&this.tolerateError(s.Messages.DuplicateProtoProperty),e.value=!0),this.nextToken(),u=this.inheritCoverGrammar(this.parseAssignmentExpression);else if(this.match("("))u=c?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),f=!0;else if(n.type===3){var h=this.finalize(t,new o.Identifier(n.value));if(this.match("=")){this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),l=!0;var d=this.isolateCoverGrammar(this.parseAssignmentExpression);u=this.finalize(t,new o.AssignmentPattern(h,d))}else l=!0,u=h}else this.throwUnexpectedToken(this.nextToken())}return this.finalize(t,new o.Property(r,i,a,u,f,l))},e.prototype.parseObjectInitializer=function(){var e=this.createNode();this.expect("{");var t=[],n={value:!1};while(!this.match("}"))t.push(this.match("...")?this.parseSpreadElement():this.parseObjectProperty(n)),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(e,new o.ObjectExpression(t))},e.prototype.parseTemplateHead=function(){r.assert(this.lookahead.head,"Template literal must start with a template head");var e=this.createNode(),t=this.nextToken(),n=t.value,i=t.cooked;return this.finalize(e,new o.TemplateElement({raw:n,cooked:i},t.tail))},e.prototype.parseTemplateElement=function(){this.lookahead.type!==10&&this.throwUnexpectedToken();var e=this.createNode(),t=this.nextToken(),n=t.value,r=t.cooked;return this.finalize(e,new o.TemplateElement({raw:n,cooked:r},t.tail))},e.prototype.parseTemplateLiteral=function(){var e=this.createNode(),t=[],n=[],r=this.parseTemplateHead();n.push(r);while(!r.tail)t.push(this.parseExpression()),r=this.parseTemplateElement(),n.push(r);return this.finalize(e,new o.TemplateLiteral(n,t))},e.prototype.reinterpretExpressionAsPattern=function(e){switch(e.type){case a.Syntax.Identifier:case a.Syntax.MemberExpression:case a.Syntax.RestElement:case a.Syntax.AssignmentPattern:break;case a.Syntax.SpreadElement:e.type=a.Syntax.RestElement,this.reinterpretExpressionAsPattern(e.argument);break;case a.Syntax.ArrayExpression:e.type=a.Syntax.ArrayPattern;for(var t=0;t<e.elements.length;t++)e.elements[t]!==null&&this.reinterpretExpressionAsPattern(e.elements[t]);break;case a.Syntax.ObjectExpression:e.type=a.Syntax.ObjectPattern;for(var t=0;t<e.properties.length;t++){var n=e.properties[t];this.reinterpretExpressionAsPattern(n.type===a.Syntax.SpreadElement?n:n.value)}break;case a.Syntax.AssignmentExpression:e.type=a.Syntax.AssignmentPattern,delete e.operator,this.reinterpretExpressionAsPattern(e.left);break;default:}},e.prototype.parseGroupExpression=function(){var e;this.expect("(");if(this.match(")"))this.nextToken(),this.match("=>")||this.expect("=>"),e={type:l,params:[],async:!1};else{var t=this.lookahead,n=[];if(this.match("..."))e=this.parseRestElement(n),this.expect(")"),this.match("=>")||this.expect("=>"),e={type:l,params:[e],async:!1};else{var r=!1;this.context.isBindingElement=!0,e=this.inheritCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var i=[];this.context.isAssignmentTarget=!1,i.push(e);while(this.lookahead.type!==2){if(!this.match(","))break;this.nextToken();if(this.match(")")){this.nextToken();for(var s=0;s<i.length;s++)this.reinterpretExpressionAsPattern(i[s]);r=!0,e={type:l,params:i,async:!1}}else if(this.match("...")){this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),i.push(this.parseRestElement(n)),this.expect(")"),this.match("=>")||this.expect("=>"),this.context.isBindingElement=!1;for(var s=0;s<i.length;s++)this.reinterpretExpressionAsPattern(i[s]);r=!0,e={type:l,params:i,async:!1}}else i.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(r)break}r||(e=this.finalize(this.startNode(t),new o.SequenceExpression(i)))}if(!r){this.expect(")");if(this.match("=>")){e.type===a.Syntax.Identifier&&e.name==="yield"&&(r=!0,e={type:l,params:[e],async:!1});if(!r){this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead);if(e.type===a.Syntax.SequenceExpression)for(var s=0;s<e.expressions.length;s++)this.reinterpretExpressionAsPattern(e.expressions[s]);else this.reinterpretExpressionAsPattern(e);var u=e.type===a.Syntax.SequenceExpression?e.expressions:[e];e={type:l,params:u,async:!1}}}this.context.isBindingElement=!1}}}return e},e.prototype.parseArguments=function(){this.expect("(");var e=[];if(!this.match(")"))for(;;){var t=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);e.push(t);if(this.match(")"))break;this.expectCommaSeparator();if(this.match(")"))break}return this.expect(")"),e},e.prototype.isIdentifierName=function(e){return e.type===3||e.type===4||e.type===1||e.type===5},e.prototype.parseIdentifierName=function(){var e=this.createNode(),t=this.nextToken();return this.isIdentifierName(t)||this.throwUnexpectedToken(t),this.finalize(e,new o.Identifier(t.value))},e.prototype.parseNewExpression=function(){var e=this.createNode(),t=this.parseIdentifierName();r.assert(t.name==="new","New expression must start with `new`");var n;if(this.match(".")){this.nextToken();if(this.lookahead.type===3&&this.context.inFunctionBody&&this.lookahead.value==="target"){var i=this.parseIdentifierName();n=new o.MetaProperty(t,i)}else this.throwUnexpectedToken(this.lookahead)}else if(this.matchKeyword("import"))this.throwUnexpectedToken(this.lookahead);else{var s=this.isolateCoverGrammar(this.parseLeftHandSideExpression),u=this.match("(")?this.parseArguments():[];n=new o.NewExpression(s,u),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return this.finalize(e,n)},e.prototype.parseAsyncArgument=function(){var e=this.parseAssignmentExpression();return this.context.firstCoverInitializedNameError=null,e},e.prototype.parseAsyncArguments=function(){this.expect("(");var e=[];if(!this.match(")"))for(;;){var t=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAsyncArgument);e.push(t);if(this.match(")"))break;this.expectCommaSeparator();if(this.match(")"))break}return this.expect(")"),e},e.prototype.matchImportCall=function(){var e=this.matchKeyword("import");if(e){var t=this.scanner.saveState();this.scanner.scanComments();var n=this.scanner.lex();this.scanner.restoreState(t),e=n.type===7&&n.value==="("}return e},e.prototype.parseImportCall=function(){var e=this.createNode();return this.expectKeyword("import"),this.finalize(e,new o.Import)},e.prototype.parseLeftHandSideExpressionAllowCall=function(){var e=this.lookahead,t=this.matchContextualKeyword("async"),n=this.context.allowIn;this.context.allowIn=!0;var r;this.matchKeyword("super")&&this.context.inFunctionBody?(r=this.createNode(),this.nextToken(),r=this.finalize(r,new o.Super),!this.match("(")&&!this.match(".")&&!this.match("[")&&this.throwUnexpectedToken(this.lookahead)):r=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);for(;;)if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var i=this.parseIdentifierName();r=this.finalize(this.startNode(e),new o.StaticMemberExpression(r,i))}else if(this.match("(")){var u=t&&e.lineNumber===this.lookahead.lineNumber;this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;var f=u?this.parseAsyncArguments():this.parseArguments();r.type===a.Syntax.Import&&f.length!==1&&this.tolerateError(s.Messages.BadImportCallArity),r=this.finalize(this.startNode(e),new o.CallExpression(r,f));if(u&&this.match("=>")){for(var c=0;c<f.length;++c)this.reinterpretExpressionAsPattern(f[c]);r={type:l,params:f,async:!0}}}else if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var i=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),r=this.finalize(this.startNode(e),new o.ComputedMemberExpression(r,i))}else{if(this.lookahead.type!==10||!this.lookahead.head)break;var h=this.parseTemplateLiteral();r=this.finalize(this.startNode(e),new o.TaggedTemplateExpression(r,h))}return this.context.allowIn=n,r},e.prototype.parseSuper=function(){var e=this.createNode();return this.expectKeyword("super"),!this.match("[")&&!this.match(".")&&this.throwUnexpectedToken(this.lookahead),this.finalize(e,new o.Super)},e.prototype.parseLeftHandSideExpression=function(){r.assert(this.context.allowIn,"callee of new expression always allow in keyword.");var e=this.startNode(this.lookahead),t=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);for(;;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var n=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),t=this.finalize(e,new o.ComputedMemberExpression(t,n))}else if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var n=this.parseIdentifierName();t=this.finalize(e,new o.StaticMemberExpression(t,n))}else{if(this.lookahead.type!==10||!this.lookahead.head)break;var i=this.parseTemplateLiteral();t=this.finalize(e,new o.TaggedTemplateExpression(t,i))}return t},e.prototype.parseUpdateExpression=function(){var e,t=this.lookahead;if(this.match("++")||this.match("--")){var n=this.startNode(t),r=this.nextToken();e=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&e.type===a.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(s.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(s.Messages.InvalidLHSInAssignment);var i=!0;e=this.finalize(n,new o.UpdateExpression(r.value,e,i)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else{e=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall);if(!this.hasLineTerminator&&this.lookahead.type===7)if(this.match("++")||this.match("--")){this.context.strict&&e.type===a.Syntax.Identifier&&this.scanner.isRestrictedWord(e.name)&&this.tolerateError(s.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(s.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var u=this.nextToken().value,i=!1;e=this.finalize(this.startNode(t),new o.UpdateExpression(u,e,i))}}return e},e.prototype.parseAwaitExpression=function(){var e=this.createNode();this.nextToken();var t=this.parseUnaryExpression();return this.finalize(e,new o.AwaitExpression(t))},e.prototype.parseUnaryExpression=function(){var e;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var t=this.startNode(this.lookahead),n=this.nextToken();e=this.inheritCoverGrammar(this.parseUnaryExpression),e=this.finalize(t,new o.UnaryExpression(n.value,e)),this.context.strict&&e.operator==="delete"&&e.argument.type===a.Syntax.Identifier&&this.tolerateError(s.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else this.context.await&&this.matchContextualKeyword("await")?e=this.parseAwaitExpression():e=this.parseUpdateExpression();return e},e.prototype.parseExponentiationExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseUnaryExpression);if(t.type!==a.Syntax.UnaryExpression&&this.match("**")){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var n=t,r=this.isolateCoverGrammar(this.parseExponentiationExpression);t=this.finalize(this.startNode(e),new o.BinaryExpression("**",n,r))}return t},e.prototype.binaryPrecedence=function(e){var t=e.value,n;return e.type===7?n=this.operatorPrecedence[t]||0:e.type===4?n=t==="instanceof"||this.context.allowIn&&t==="in"?7:0:n=0,n},e.prototype.parseBinaryExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseExponentiationExpression),n=this.lookahead,r=this.binaryPrecedence(n);if(r>0){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var i=[e,this.lookahead],s=t,u=this.isolateCoverGrammar(this.parseExponentiationExpression),a=[s,n.value,u],f=[r];for(;;){r=this.binaryPrecedence(this.lookahead);if(r<=0)break;while(a.length>2&&r<=f[f.length-1]){u=a.pop();var l=a.pop();f.pop(),s=a.pop(),i.pop();var c=this.startNode(i[i.length-1]);a.push(this.finalize(c,new o.BinaryExpression(l,s,u)))}a.push(this.nextToken().value),f.push(r),i.push(this.lookahead),a.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}var h=a.length-1;t=a[h];var p=i.pop();while(h>1){var d=i.pop(),v=p&&p.lineStart,c=this.startNode(d,v),l=a[h-1];t=this.finalize(c,new o.BinaryExpression(l,a[h-2],t)),h-=2,p=d}}return t},e.prototype.parseConditionalExpression=function(){var e=this.lookahead,t=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var n=this.context.allowIn;this.context.allowIn=!0;var r=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=n,this.expect(":");var i=this.isolateCoverGrammar(this.parseAssignmentExpression);t=this.finalize(this.startNode(e),new o.ConditionalExpression(t,r,i)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return t},e.prototype.checkPatternParam=function(e,t){switch(t.type){case a.Syntax.Identifier:this.validateParam(e,t,t.name);break;case a.Syntax.RestElement:this.checkPatternParam(e,t.argument);break;case a.Syntax.AssignmentPattern:this.checkPatternParam(e,t.left);break;case a.Syntax.ArrayPattern:for(var n=0;n<t.elements.length;n++)t.elements[n]!==null&&this.checkPatternParam(e,t.elements[n]);break;case a.Syntax.ObjectPattern:for(var n=0;n<t.properties.length;n++){var r=t.properties[n];this.checkPatternParam(e,r.type===a.Syntax.RestElement?r:r.value)}break;default:}e.simple=e.simple&&t instanceof o.Identifier},e.prototype.reinterpretAsCoverFormalsList=function(e){var t=[e],n,r=!1;switch(e.type){case a.Syntax.Identifier:break;case l:t=e.params,r=e.async;break;default:return null}n={simple:!0,paramSet:{}};for(var i=0;i<t.length;++i){var o=t[i];o.type===a.Syntax.AssignmentPattern?o.right.type===a.Syntax.YieldExpression&&(o.right.argument&&this.throwUnexpectedToken(this.lookahead),o.right.type=a.Syntax.Identifier,o.right.name="yield",delete o.right.argument,delete o.right.delegate):r&&o.type===a.Syntax.Identifier&&o.name==="await"&&this.throwUnexpectedToken(this.lookahead),this.checkPatternParam(n,o),t[i]=o}if(this.context.strict||!this.context.allowYield)for(var i=0;i<t.length;++i){var o=t[i];o.type===a.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead)}if(n.message===s.Messages.StrictParamDupe){var u=this.context.strict?n.stricted:n.firstRestricted;this.throwUnexpectedToken(u,n.message)}return{simple:n.simple,params:t,stricted:n.stricted,firstRestricted:n.firstRestricted,message:n.message}},e.prototype.parseAssignmentExpression=function(){var e;if(!this.context.allowYield&&this.matchKeyword("yield"))e=this.parseYieldExpression();else{var t=this.lookahead,n=t;e=this.parseConditionalExpression();if(n.type===3&&n.lineNumber===this.lookahead.lineNumber&&n.value==="async")if(this.lookahead.type===3||this.matchKeyword("yield")){var r=this.parsePrimaryExpression();this.reinterpretExpressionAsPattern(r),e={type:l,params:[r],async:!0}}if(e.type===l||this.match("=>")){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var i=e.async,u=this.reinterpretAsCoverFormalsList(e);if(u){this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null;var f=this.context.strict,c=this.context.allowStrictDirective;this.context.allowStrictDirective=u.simple;var h=this.context.allowYield,p=this.context.await;this.context.allowYield=!0,this.context.await=i;var d=this.startNode(t);this.expect("=>");var v=void 0;if(this.match("{")){var m=this.context.allowIn;this.context.allowIn=!0,v=this.parseFunctionSourceElements(),this.context.allowIn=m}else v=this.isolateCoverGrammar(this.parseAssignmentExpression);var g=v.type!==a.Syntax.BlockStatement;this.context.strict&&u.firstRestricted&&this.throwUnexpectedToken(u.firstRestricted,u.message),this.context.strict&&u.stricted&&this.tolerateUnexpectedToken(u.stricted,u.message),e=i?this.finalize(d,new o.AsyncArrowFunctionExpression(u.params,v,g)):this.finalize(d,new o.ArrowFunctionExpression(u.params,v,g)),this.context.strict=f,this.context.allowStrictDirective=c,this.context.allowYield=h,this.context.await=p}}else if(this.matchAssign()){this.context.isAssignmentTarget||this.tolerateError(s.Messages.InvalidLHSInAssignment);if(this.context.strict&&e.type===a.Syntax.Identifier){var y=e;this.scanner.isRestrictedWord(y.name)&&this.tolerateUnexpectedToken(n,s.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(y.name)&&this.tolerateUnexpectedToken(n,s.Messages.StrictReservedWord)}this.match("=")?this.reinterpretExpressionAsPattern(e):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1),n=this.nextToken();var b=n.value,w=this.isolateCoverGrammar(this.parseAssignmentExpression);e=this.finalize(this.startNode(t),new o.AssignmentExpression(b,e,w)),this.context.firstCoverInitializedNameError=null}}return e},e.prototype.parseExpression=function(){var e=this.lookahead,t=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var n=[];n.push(t);while(this.lookahead.type!==2){if(!this.match(","))break;this.nextToken(),n.push(this.isolateCoverGrammar(this.parseAssignmentExpression))}t=this.finalize(this.startNode(e),new o.SequenceExpression(n))}return t},e.prototype.parseStatementListItem=function(){var e;this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0;if(this.lookahead.type===4)switch(this.lookahead.value){case"export":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,s.Messages.IllegalExportDeclaration),e=this.parseExportDeclaration();break;case"import":this.matchImportCall()?e=this.parseExpressionStatement():(this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,s.Messages.IllegalImportDeclaration),e=this.parseImportDeclaration());break;case"const":e=this.parseLexicalDeclaration({inFor:!1});break;case"function":e=this.parseFunctionDeclaration();break;case"class":e=this.parseClassDeclaration();break;case"let":e=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:e=this.parseStatement()}else e=this.parseStatement();return e},e.prototype.parseBlock=function(){var e=this.createNode();this.expect("{");var t=[];for(;;){if(this.match("}"))break;t.push(this.parseStatementListItem())}return this.expect("}"),this.finalize(e,new o.BlockStatement(t))},e.prototype.parseLexicalBinding=function(e,t){var n=this.createNode(),r=[],i=this.parsePattern(r,e);this.context.strict&&i.type===a.Syntax.Identifier&&this.scanner.isRestrictedWord(i.name)&&this.tolerateError(s.Messages.StrictVarName);var u=null;if(e==="const")!this.matchKeyword("in")&&!this.matchContextualKeyword("of")&&(this.match("=")?(this.nextToken(),u=this.isolateCoverGrammar(this.parseAssignmentExpression)):this.throwError(s.Messages.DeclarationMissingInitializer,"const"));else if(!t.inFor&&i.type!==a.Syntax.Identifier||this.match("="))this.expect("="),u=this.isolateCoverGrammar(this.parseAssignmentExpression);return this.finalize(n,new o.VariableDeclarator(i,u))},e.prototype.parseBindingList=function(e,t){var n=[this.parseLexicalBinding(e,t)];while(this.match(","))this.nextToken(),n.push(this.parseLexicalBinding(e,t));return n},e.prototype.isLexicalDeclaration=function(){var e=this.scanner.saveState();this.scanner.scanComments();var t=this.scanner.lex();return this.scanner.restoreState(e),t.type===3||t.type===7&&t.value==="["||t.type===7&&t.value==="{"||t.type===4&&t.value==="let"||t.type===4&&t.value==="yield"},e.prototype.parseLexicalDeclaration=function(e){var t=this.createNode(),n=this.nextToken().value;r.assert(n==="let"||n==="const","Lexical declaration must be either let or const");var i=this.parseBindingList(n,e);return this.consumeSemicolon(),this.finalize(t,new o.VariableDeclaration(i,n))},e.prototype.parseBindingRestElement=function(e,t){var n=this.createNode();this.expect("...");var r=this.parsePattern(e,t);return this.finalize(n,new o.RestElement(r))},e.prototype.parseArrayPattern=function(e,t){var n=this.createNode();this.expect("[");var r=[];while(!this.match("]"))if(this.match(","))this.nextToken(),r.push(null);else{if(this.match("...")){r.push(this.parseBindingRestElement(e,t));break}r.push(this.parsePatternWithDefault(e,t)),this.match("]")||this.expect(",")}return this.expect("]"),this.finalize(n,new o.ArrayPattern(r))},e.prototype.parsePropertyPattern=function(e,t){var n=this.createNode(),r=!1,i=!1,s=!1,u,a;if(this.lookahead.type===3){var f=this.lookahead;u=this.parseVariableIdentifier();var l=this.finalize(n,new o.Identifier(f.value));if(this.match("=")){e.push(f),i=!0,this.nextToken();var c=this.parseAssignmentExpression();a=this.finalize(this.startNode(f),new o.AssignmentPattern(l,c))}else this.match(":")?(this.expect(":"),a=this.parsePatternWithDefault(e,t)):(e.push(f),i=!0,a=l)}else r=this.match("["),u=this.parseObjectPropertyKey(),this.expect(":"),a=this.parsePatternWithDefault(e,t);return this.finalize(n,new o.Property("init",u,r,a,s,i))},e.prototype.parseRestProperty=function(e,t){var n=this.createNode();this.expect("...");var r=this.parsePattern(e);return this.match("=")&&this.throwError(s.Messages.DefaultRestProperty),this.match("}")||this.throwError(s.Messages.PropertyAfterRestProperty),this.finalize(n,new o.RestElement(r))},e.prototype.parseObjectPattern=function(e,t){var n=this.createNode(),r=[];this.expect("{");while(!this.match("}"))r.push(this.match("...")?this.parseRestProperty(e,t):this.parsePropertyPattern(e,t)),this.match("}")||this.expect(",");return this.expect("}"),this.finalize(n,new o.ObjectPattern(r))},e.prototype.parsePattern=function(e,t){var n;return this.match("[")?n=this.parseArrayPattern(e,t):this.match("{")?n=this.parseObjectPattern(e,t):(this.matchKeyword("let")&&(t==="const"||t==="let")&&this.tolerateUnexpectedToken(this.lookahead,s.Messages.LetInLexicalBinding),e.push(this.lookahead),n=this.parseVariableIdentifier(t)),n},e.prototype.parsePatternWithDefault=function(e,t){var n=this.lookahead,r=this.parsePattern(e,t);if(this.match("=")){this.nextToken();var i=this.context.allowYield;this.context.allowYield=!0;var s=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowYield=i,r=this.finalize(this.startNode(n),new o.AssignmentPattern(r,s))}return r},e.prototype.parseVariableIdentifier=function(e){var t=this.createNode(),n=this.nextToken();return n.type===4&&n.value==="yield"?this.context.strict?this.tolerateUnexpectedToken(n,s.Messages.StrictReservedWord):this.context.allowYield||this.throwUnexpectedToken(n):n.type!==3?this.context.strict&&n.type===4&&this.scanner.isStrictModeReservedWord(n.value)?this.tolerateUnexpectedToken(n,s.Messages.StrictReservedWord):(this.context.strict||n.value!=="let"||e!=="var")&&this.throwUnexpectedToken(n):(this.context.isModule||this.context.await)&&n.type===3&&n.value==="await"&&this.tolerateUnexpectedToken(n),this.finalize(t,new o.Identifier(n.value))},e.prototype.parseVariableDeclaration=function(e){var t=this.createNode(),n=[],r=this.parsePattern(n,"var");this.context.strict&&r.type===a.Syntax.Identifier&&this.scanner.isRestrictedWord(r.name)&&this.tolerateError(s.Messages.StrictVarName);var i=null;return this.match("=")?(this.nextToken(),i=this.isolateCoverGrammar(this.parseAssignmentExpression)):r.type!==a.Syntax.Identifier&&!e.inFor&&this.expect("="),this.finalize(t,new o.VariableDeclarator(r,i))},e.prototype.parseVariableDeclarationList=function(e){var t={inFor:e.inFor},n=[];n.push(this.parseVariableDeclaration(t));while(this.match(","))this.nextToken(),n.push(this.parseVariableDeclaration(t));return n},e.prototype.parseVariableStatement=function(){var e=this.createNode();this.expectKeyword("var");var t=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(e,new o.VariableDeclaration(t,"var"))},e.prototype.parseEmptyStatement=function(){var e=this.createNode();return this.expect(";"),this.finalize(e,new o.EmptyStatement)},e.prototype.parseExpressionStatement=function(){var e=this.createNode(),t=this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new o.ExpressionStatement(t))},e.prototype.parseIfClause=function(){return this.context.strict&&this.matchKeyword("function")&&this.tolerateError(s.Messages.StrictFunction),this.parseStatement()},e.prototype.parseIfStatement=function(){var e=this.createNode(),t,n=null;this.expectKeyword("if"),this.expect("(");var r=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),t=this.finalize(this.createNode(),new o.EmptyStatement)):(this.expect(")"),t=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),n=this.parseIfClause())),this.finalize(e,new o.IfStatement(r,t,n))},e.prototype.parseDoWhileStatement=function(){var e=this.createNode();this.expectKeyword("do");var t=this.context.inIteration;this.context.inIteration=!0;var n=this.parseStatement();this.context.inIteration=t,this.expectKeyword("while"),this.expect("(");var r=this.parseExpression();return!this.match(")")&&this.config.tolerant?this.tolerateUnexpectedToken(this.nextToken()):(this.expect(")"),this.match(";")&&this.nextToken()),this.finalize(e,new o.DoWhileStatement(n,r))},e.prototype.parseWhileStatement=function(){var e=this.createNode(),t;this.expectKeyword("while"),this.expect("(");var n=this.parseExpression();if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),t=this.finalize(this.createNode(),new o.EmptyStatement);else{this.expect(")");var r=this.context.inIteration;this.context.inIteration=!0,t=this.parseStatement(),this.context.inIteration=r}return this.finalize(e,new o.WhileStatement(n,t))},e.prototype.parseForStatement=function(){var e=null,t=null,n=null,r=!0,i,u,f=this.createNode();this.expectKeyword("for"),this.expect("(");if(this.match(";"))this.nextToken();else if(this.matchKeyword("var")){e=this.createNode(),this.nextToken();var l=this.context.allowIn;this.context.allowIn=!1;var c=this.parseVariableDeclarationList({inFor:!0});this.context.allowIn=l;if(c.length===1&&this.matchKeyword("in")){var h=c[0];h.init&&(h.id.type===a.Syntax.ArrayPattern||h.id.type===a.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(s.Messages.ForInOfLoopInitializer,"for-in"),e=this.finalize(e,new o.VariableDeclaration(c,"var")),this.nextToken(),i=e,u=this.parseExpression(),e=null}else c.length===1&&c[0].init===null&&this.matchContextualKeyword("of")?(e=this.finalize(e,new o.VariableDeclaration(c,"var")),this.nextToken(),i=e,u=this.parseAssignmentExpression(),e=null,r=!1):(e=this.finalize(e,new o.VariableDeclaration(c,"var")),this.expect(";"))}else if(this.matchKeyword("const")||this.matchKeyword("let")){e=this.createNode();var p=this.nextToken().value;if(!this.context.strict&&this.lookahead.value==="in")e=this.finalize(e,new o.Identifier(p)),this.nextToken(),i=e,u=this.parseExpression(),e=null;else{var l=this.context.allowIn;this.context.allowIn=!1;var c=this.parseBindingList(p,{inFor:!0});this.context.allowIn=l,c.length===1&&c[0].init===null&&this.matchKeyword("in")?(e=this.finalize(e,new o.VariableDeclaration(c,p)),this.nextToken(),i=e,u=this.parseExpression(),e=null):c.length===1&&c[0].init===null&&this.matchContextualKeyword("of")?(e=this.finalize(e,new o.VariableDeclaration(c,p)),this.nextToken(),i=e,u=this.parseAssignmentExpression(),e=null,r=!1):(this.consumeSemicolon(),e=this.finalize(e,new o.VariableDeclaration(c,p)))}}else{var d=this.lookahead,l=this.context.allowIn;this.context.allowIn=!1,e=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=l;if(this.matchKeyword("in"))(!this.context.isAssignmentTarget||e.type===a.Syntax.AssignmentExpression)&&this.tolerateError(s.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(e),i=e,u=this.parseExpression(),e=null;else if(this.matchContextualKeyword("of"))(!this.context.isAssignmentTarget||e.type===a.Syntax.AssignmentExpression)&&this.tolerateError(s.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(e),i=e,u=this.parseAssignmentExpression(),e=null,r=!1;else{if(this.match(",")){var v=[e];while(this.match(","))this.nextToken(),v.push(this.isolateCoverGrammar(this.parseAssignmentExpression));e=this.finalize(this.startNode(d),new o.SequenceExpression(v))}this.expect(";")}}typeof i=="undefined"&&(this.match(";")||(t=this.parseExpression()),this.expect(";"),this.match(")")||(n=this.parseExpression()));var m;if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),m=this.finalize(this.createNode(),new o.EmptyStatement);else{this.expect(")");var g=this.context.inIteration;this.context.inIteration=!0,m=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=g}return typeof i=="undefined"?this.finalize(f,new o.ForStatement(e,t,n,m)):r?this.finalize(f,new o.ForInStatement(i,u,m)):this.finalize(f,new o.ForOfStatement(i,u,m))},e.prototype.parseContinueStatement=function(){var e=this.createNode();this.expectKeyword("continue");var t=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var n=this.parseVariableIdentifier();t=n;var r="$"+n.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,r)||this.throwError(s.Messages.UnknownLabel,n.name)}return this.consumeSemicolon(),t===null&&!this.context.inIteration&&this.throwError(s.Messages.IllegalContinue),this.finalize(e,new o.ContinueStatement(t))},e.prototype.parseBreakStatement=function(){var e=this.createNode();this.expectKeyword("break");var t=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var n=this.parseVariableIdentifier(),r="$"+n.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,r)||this.throwError(s.Messages.UnknownLabel,n.name),t=n}return this.consumeSemicolon(),t===null&&!this.context.inIteration&&!this.context.inSwitch&&this.throwError(s.Messages.IllegalBreak),this.finalize(e,new o.BreakStatement(t))},e.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(s.Messages.IllegalReturn);var e=this.createNode();this.expectKeyword("return");var t=!this.match(";")&&!this.match("}")&&!this.hasLineTerminator&&this.lookahead.type!==2||this.lookahead.type===8||this.lookahead.type===10,n=t?this.parseExpression():null;return this.consumeSemicolon(),this.finalize(e,new o.ReturnStatement(n))},e.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(s.Messages.StrictModeWith);var e=this.createNode(),t;this.expectKeyword("with"),this.expect("(");var n=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),t=this.finalize(this.createNode(),new o.EmptyStatement)):(this.expect(")"),t=this.parseStatement()),this.finalize(e,new o.WithStatement(n,t))},e.prototype.parseSwitchCase=function(){var e=this.createNode(),t;this.matchKeyword("default")?(this.nextToken(),t=null):(this.expectKeyword("case"),t=this.parseExpression()),this.expect(":");var n=[];for(;;){if(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case"))break;n.push(this.parseStatementListItem())}return this.finalize(e,new o.SwitchCase(t,n))},e.prototype.parseSwitchStatement=function(){var e=this.createNode();this.expectKeyword("switch"),this.expect("(");var t=this.parseExpression();this.expect(")");var n=this.context.inSwitch;this.context.inSwitch=!0;var r=[],i=!1;this.expect("{");for(;;){if(this.match("}"))break;var u=this.parseSwitchCase();u.test===null&&(i&&this.throwError(s.Messages.MultipleDefaultsInSwitch),i=!0),r.push(u)}return this.expect("}"),this.context.inSwitch=n,this.finalize(e,new o.SwitchStatement(t,r))},e.prototype.parseLabelledStatement=function(){var e=this.createNode(),t=this.parseExpression(),n;if(t.type===a.Syntax.Identifier&&this.match(":")){this.nextToken();var r=t,i="$"+r.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,i)&&this.throwError(s.Messages.Redeclaration,"Label",r.name),this.context.labelSet[i]=!0;var u=void 0;if(this.matchKeyword("class"))this.tolerateUnexpectedToken(this.lookahead),u=this.parseClassDeclaration();else if(this.matchKeyword("function")){var f=this.lookahead,l=this.parseFunctionDeclaration();this.context.strict?this.tolerateUnexpectedToken(f,s.Messages.StrictFunction):l.generator&&this.tolerateUnexpectedToken(f,s.Messages.GeneratorInLegacyContext),u=l}else u=this.parseStatement();delete this.context.labelSet[i],n=new o.LabeledStatement(r,u)}else this.consumeSemicolon(),n=new o.ExpressionStatement(t);return this.finalize(e,n)},e.prototype.parseThrowStatement=function(){var e=this.createNode();this.expectKeyword("throw"),this.hasLineTerminator&&this.throwError(s.Messages.NewlineAfterThrow);var t=this.parseExpression();return this.consumeSemicolon(),this.finalize(e,new o.ThrowStatement(t))},e.prototype.parseCatchClause=function(){var e=this.createNode();this.expectKeyword("catch"),this.expect("("),this.match(")")&&this.throwUnexpectedToken(this.lookahead);var t=[],n=this.parsePattern(t),r={};for(var i=0;i<t.length;i++){var u="$"+t[i].value;Object.prototype.hasOwnProperty.call(r,u)&&this.tolerateError(s.Messages.DuplicateBinding,t[i].value),r[u]=!0}this.context.strict&&n.type===a.Syntax.Identifier&&this.scanner.isRestrictedWord(n.name)&&this.tolerateError(s.Messages.StrictCatchVariable),this.expect(")");var f=this.parseBlock();return this.finalize(e,new o.CatchClause(n,f))},e.prototype.parseFinallyClause=function(){return this.expectKeyword("finally"),this.parseBlock()},e.prototype.parseTryStatement=function(){var e=this.createNode();this.expectKeyword("try");var t=this.parseBlock(),n=this.matchKeyword("catch")?this.parseCatchClause():null,r=this.matchKeyword("finally")?this.parseFinallyClause():null;return!n&&!r&&this.throwError(s.Messages.NoCatchOrFinally),this.finalize(e,new o.TryStatement(t,n,r))},e.prototype.parseDebuggerStatement=function(){var e=this.createNode();return this.expectKeyword("debugger"),this.consumeSemicolon(),this.finalize(e,new o.DebuggerStatement)},e.prototype.parseStatement=function(){var e;switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:e=this.parseExpressionStatement();break;case 7:var t=this.lookahead.value;t==="{"?e=this.parseBlock():t==="("?e=this.parseExpressionStatement():t===";"?e=this.parseEmptyStatement():e=this.parseExpressionStatement();break;case 3:e=this.matchAsyncFunction()?this.parseFunctionDeclaration():this.parseLabelledStatement();break;case 4:switch(this.lookahead.value){case"break":e=this.parseBreakStatement();break;case"continue":e=this.parseContinueStatement();break;case"debugger":e=this.parseDebuggerStatement();break;case"do":e=this.parseDoWhileStatement();break;case"for":e=this.parseForStatement();break;case"function":e=this.parseFunctionDeclaration();break;case"if":e=this.parseIfStatement();break;case"return":e=this.parseReturnStatement();break;case"switch":e=this.parseSwitchStatement();break;case"throw":e=this.parseThrowStatement();break;case"try":e=this.parseTryStatement();break;case"var":e=this.parseVariableStatement();break;case"while":e=this.parseWhileStatement();break;case"with":e=this.parseWithStatement();break;default:e=this.parseExpressionStatement()}break;default:e=this.throwUnexpectedToken(this.lookahead)}return e},e.prototype.parseFunctionSourceElements=function(){var e=this.createNode();this.expect("{");var t=this.parseDirectivePrologues(),n=this.context.labelSet,r=this.context.inIteration,i=this.context.inSwitch,s=this.context.inFunctionBody;this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;while(this.lookahead.type!==2){if(this.match("}"))break;t.push(this.parseStatementListItem())}return this.expect("}"),this.context.labelSet=n,this.context.inIteration=r,this.context.inSwitch=i,this.context.inFunctionBody=s,this.finalize(e,new o.BlockStatement(t))},e.prototype.validateParam=function(e,t,n){var r="$"+n;this.context.strict?(this.scanner.isRestrictedWord(n)&&(e.stricted=t,e.message=s.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(e.paramSet,r)&&(e.stricted=t,e.message=s.Messages.StrictParamDupe)):e.firstRestricted||(this.scanner.isRestrictedWord(n)?(e.firstRestricted=t,e.message=s.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(n)?(e.firstRestricted=t,e.message=s.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(e.paramSet,r)&&(e.stricted=t,e.message=s.Messages.StrictParamDupe)),typeof Object.defineProperty=="function"?Object.defineProperty(e.paramSet,r,{value:!0,enumerable:!0,writable:!0,configurable:!0}):e.paramSet[r]=!0},e.prototype.parseRestElement=function(e){var t=this.createNode();this.expect("...");var n=this.parsePattern(e);return this.match("=")&&this.throwError(s.Messages.DefaultRestParameter),this.match(")")||this.throwError(s.Messages.ParameterAfterRestParameter),this.finalize(t,new o.RestElement(n))},e.prototype.parseFormalParameter=function(e){var t=[],n=this.match("...")?this.parseRestElement(t):this.parsePatternWithDefault(t);for(var r=0;r<t.length;r++)this.validateParam(e,t[r],t[r].value);e.simple=e.simple&&n instanceof o.Identifier,e.params.push(n)},e.prototype.parseFormalParameters=function(e){var t;t={simple:!0,params:[],firstRestricted:e},this.expect("(");if(!this.match(")")){t.paramSet={};while(this.lookahead.type!==2){this.parseFormalParameter(t);if(this.match(")"))break;this.expect(",");if(this.match(")"))break}}return this.expect(")"),{simple:t.simple,params:t.params,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}},e.prototype.matchAsyncFunction=function(){var e=this.matchContextualKeyword("async");if(e){var t=this.scanner.saveState();this.scanner.scanComments();var n=this.scanner.lex();this.scanner.restoreState(t),e=t.lineNumber===n.lineNumber&&n.type===4&&n.value==="function"}return e},e.prototype.parseFunctionDeclaration=function(e){var t=this.createNode(),n=this.matchContextualKeyword("async");n&&this.nextToken(),this.expectKeyword("function");var r=n?!1:this.match("*");r&&this.nextToken();var i,u=null,a=null;if(!e||!this.match("(")){var f=this.lookahead;u=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(f.value)&&this.tolerateUnexpectedToken(f,s.Messages.StrictFunctionName):this.scanner.isRestrictedWord(f.value)?(a=f,i=s.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(f.value)&&(a=f,i=s.Messages.StrictReservedWord)}var l=this.context.await,c=this.context.allowYield;this.context.await=n,this.context.allowYield=!r;var h=this.parseFormalParameters(a),p=h.params,d=h.stricted;a=h.firstRestricted,h.message&&(i=h.message);var v=this.context.strict,m=this.context.allowStrictDirective;this.context.allowStrictDirective=h.simple;var g=this.parseFunctionSourceElements();return this.context.strict&&a&&this.throwUnexpectedToken(a,i),this.context.strict&&d&&this.tolerateUnexpectedToken(d,i),this.context.strict=v,this.context.allowStrictDirective=m,this.context.await=l,this.context.allowYield=c,n?this.finalize(t,new o.AsyncFunctionDeclaration(u,p,g)):this.finalize(t,new o.FunctionDeclaration(u,p,g,r))},e.prototype.parseFunctionExpression=function(){var e=this.createNode(),t=this.matchContextualKeyword("async");t&&this.nextToken(),this.expectKeyword("function");var n=t?!1:this.match("*");n&&this.nextToken();var r,i=null,u,a=this.context.await,f=this.context.allowYield;this.context.await=t,this.context.allowYield=!n;if(!this.match("(")){var l=this.lookahead;i=!this.context.strict&&!n&&this.matchKeyword("yield")?this.parseIdentifierName():this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(l.value)&&this.tolerateUnexpectedToken(l,s.Messages.StrictFunctionName):this.scanner.isRestrictedWord(l.value)?(u=l,r=s.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(l.value)&&(u=l,r=s.Messages.StrictReservedWord)}var c=this.parseFormalParameters(u),h=c.params,p=c.stricted;u=c.firstRestricted,c.message&&(r=c.message);var d=this.context.strict,v=this.context.allowStrictDirective;this.context.allowStrictDirective=c.simple;var m=this.parseFunctionSourceElements();return this.context.strict&&u&&this.throwUnexpectedToken(u,r),this.context.strict&&p&&this.tolerateUnexpectedToken(p,r),this.context.strict=d,this.context.allowStrictDirective=v,this.context.await=a,this.context.allowYield=f,t?this.finalize(e,new o.AsyncFunctionExpression(i,h,m)):this.finalize(e,new o.FunctionExpression(i,h,m,n))},e.prototype.parseDirective=function(){var e=this.lookahead,t=this.createNode(),n=this.parseExpression(),r=n.type===a.Syntax.Literal?this.getTokenRaw(e).slice(1,-1):null;return this.consumeSemicolon(),this.finalize(t,r?new o.Directive(n,r):new o.ExpressionStatement(n))},e.prototype.parseDirectivePrologues=function(){var e=null,t=[];for(;;){var n=this.lookahead;if(n.type!==8)break;var r=this.parseDirective();t.push(r);var i=r.directive;if(typeof i!="string")break;i==="use strict"?(this.context.strict=!0,e&&this.tolerateUnexpectedToken(e,s.Messages.StrictOctalLiteral),this.context.allowStrictDirective||this.tolerateUnexpectedToken(n,s.Messages.IllegalLanguageModeDirective)):!e&&n.octal&&(e=n)}return t},e.prototype.qualifiedPropertyName=function(e){switch(e.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;case 7:return e.value==="[";default:}return!1},e.prototype.parseGetterMethod=function(){var e=this.createNode(),t=!1,n=this.context.allowYield;this.context.allowYield=!t;var r=this.parseFormalParameters();r.params.length>0&&this.tolerateError(s.Messages.BadGetterArity);var i=this.parsePropertyMethod(r);return this.context.allowYield=n,this.finalize(e,new o.FunctionExpression(null,r.params,i,t))},e.prototype.parseSetterMethod=function(){var e=this.createNode(),t=!1,n=this.context.allowYield;this.context.allowYield=!t;var r=this.parseFormalParameters();r.params.length!==1?this.tolerateError(s.Messages.BadSetterArity):r.params[0]instanceof o.RestElement&&this.tolerateError(s.Messages.BadSetterRestParameter);var i=this.parsePropertyMethod(r);return this.context.allowYield=n,this.finalize(e,new o.FunctionExpression(null,r.params,i,t))},e.prototype.parseGeneratorMethod=function(){var e=this.createNode(),t=!0,n=this.context.allowYield;this.context.allowYield=!0;var r=this.parseFormalParameters();this.context.allowYield=!1;var i=this.parsePropertyMethod(r);return this.context.allowYield=n,this.finalize(e,new o.FunctionExpression(null,r.params,i,t))},e.prototype.isStartOfExpression=function(){var e=!0,t=this.lookahead.value;switch(this.lookahead.type){case 7:e=t==="["||t==="("||t==="{"||t==="+"||t==="-"||t==="!"||t==="~"||t==="++"||t==="--"||t==="/"||t==="/=";break;case 4:e=t==="class"||t==="delete"||t==="function"||t==="let"||t==="new"||t==="super"||t==="this"||t==="typeof"||t==="void"||t==="yield";break;default:}return e},e.prototype.parseYieldExpression=function(){var e=this.createNode();this.expectKeyword("yield");var t=null,n=!1;if(!this.hasLineTerminator){var r=this.context.allowYield;this.context.allowYield=!1,n=this.match("*"),n?(this.nextToken(),t=this.parseAssignmentExpression()):this.isStartOfExpression()&&(t=this.parseAssignmentExpression()),this.context.allowYield=r}return this.finalize(e,new o.YieldExpression(t,n))},e.prototype.parseClassElement=function(e){var t=this.lookahead,n=this.createNode(),r="",i=null,u=null,a=!1,f=!1,l=!1,c=!1;if(this.match("*"))this.nextToken();else{a=this.match("["),i=this.parseObjectPropertyKey();var h=i;h.name==="static"&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))&&(t=this.lookahead,l=!0,a=this.match("["),this.match("*")?this.nextToken():i=this.parseObjectPropertyKey());if(t.type===3&&!this.hasLineTerminator&&t.value==="async"){var p=this.lookahead.value;p!==":"&&p!=="("&&p!=="*"&&(c=!0,t=this.lookahead,i=this.parseObjectPropertyKey(),t.type===3&&t.value==="constructor"&&this.tolerateUnexpectedToken(t,s.Messages.ConstructorIsAsync))}}var d=this.qualifiedPropertyName(this.lookahead);return t.type===3?t.value==="get"&&d?(r="get",a=this.match("["),i=this.parseObjectPropertyKey(),this.context.allowYield=!1,u=this.parseGetterMethod()):t.value==="set"&&d&&(r="set",a=this.match("["),i=this.parseObjectPropertyKey(),u=this.parseSetterMethod()):t.type===7&&t.value==="*"&&d&&(r="init",a=this.match("["),i=this.parseObjectPropertyKey(),u=this.parseGeneratorMethod(),f=!0),!r&&i&&this.match("(")&&(r="init",u=c?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),f=!0),r||this.throwUnexpectedToken(this.lookahead),r==="init"&&(r="method"),a||(l&&this.isPropertyKey(i,"prototype")&&this.throwUnexpectedToken(t,s.Messages.StaticPrototype),!l&&this.isPropertyKey(i,"constructor")&&((r!=="method"||!f||u&&u.generator)&&this.throwUnexpectedToken(t,s.Messages.ConstructorSpecialMethod),e.value?this.throwUnexpectedToken(t,s.Messages.DuplicateConstructor):e.value=!0,r="constructor")),this.finalize(n,new o.MethodDefinition(i,a,u,r,l))},e.prototype.parseClassElementList=function(){var e=[],t={value:!1};this.expect("{");while(!this.match("}"))this.match(";")?this.nextToken():e.push(this.parseClassElement(t));return this.expect("}"),e},e.prototype.parseClassBody=function(){var e=this.createNode(),t=this.parseClassElementList();return this.finalize(e,new o.ClassBody(t))},e.prototype.parseClassDeclaration=function(e){var t=this.createNode(),n=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var r=e&&this.lookahead.type!==3?null:this.parseVariableIdentifier(),i=null;this.matchKeyword("extends")&&(this.nextToken(),i=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var s=this.parseClassBody();return this.context.strict=n,this.finalize(t,new o.ClassDeclaration(r,i,s))},e.prototype.parseClassExpression=function(){var e=this.createNode(),t=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var n=this.lookahead.type===3?this.parseVariableIdentifier():null,r=null;this.matchKeyword("extends")&&(this.nextToken(),r=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var i=this.parseClassBody();return this.context.strict=t,this.finalize(e,new o.ClassExpression(n,r,i))},e.prototype.parseModule=function(){this.context.strict=!0,this.context.isModule=!0,this.scanner.isModule=!0;var e=this.createNode(),t=this.parseDirectivePrologues();while(this.lookahead.type!==2)t.push(this.parseStatementListItem());return this.finalize(e,new o.Module(t))},e.prototype.parseScript=function(){var e=this.createNode(),t=this.parseDirectivePrologues();while(this.lookahead.type!==2)t.push(this.parseStatementListItem());return this.finalize(e,new o.Script(t))},e.prototype.parseModuleSpecifier=function(){var e=this.createNode();this.lookahead.type!==8&&this.throwError(s.Messages.InvalidModuleSpecifier);var t=this.nextToken(),n=this.getTokenRaw(t);return this.finalize(e,new o.Literal(t.value,n))},e.prototype.parseImportSpecifier=function(){var e=this.createNode(),t,n;return this.lookahead.type===3?(t=this.parseVariableIdentifier(),n=t,this.matchContextualKeyword("as")&&(this.nextToken(),n=this.parseVariableIdentifier())):(t=this.parseIdentifierName(),n=t,this.matchContextualKeyword("as")?(this.nextToken(),n=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(e,new o.ImportSpecifier(n,t))},e.prototype.parseNamedImports=function(){this.expect("{");var e=[];while(!this.match("}"))e.push(this.parseImportSpecifier()),this.match("}")||this.expect(",");return this.expect("}"),e},e.prototype.parseImportDefaultSpecifier=function(){var e=this.createNode(),t=this.parseIdentifierName();return this.finalize(e,new o.ImportDefaultSpecifier(t))},e.prototype.parseImportNamespaceSpecifier=function(){var e=this.createNode();this.expect("*"),this.matchContextualKeyword("as")||this.throwError(s.Messages.NoAsAfterImportNamespace),this.nextToken();var t=this.parseIdentifierName();return this.finalize(e,new o.ImportNamespaceSpecifier(t))},e.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(s.Messages.IllegalImportDeclaration);var e=this.createNode();this.expectKeyword("import");var t,n=[];if(this.lookahead.type===8)t=this.parseModuleSpecifier();else{this.match("{")?n=n.concat(this.parseNamedImports()):this.match("*")?n.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")?(n.push(this.parseImportDefaultSpecifier()),this.match(",")&&(this.nextToken(),this.match("*")?n.push(this.parseImportNamespaceSpecifier()):this.match("{")?n=n.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken());if(!this.matchContextualKeyword("from")){var r=this.lookahead.value?s.Messages.UnexpectedToken:s.Messages.MissingFromClause;this.throwError(r,this.lookahead.value)}this.nextToken(),t=this.parseModuleSpecifier()}return this.consumeSemicolon(),this.finalize(e,new o.ImportDeclaration(n,t))},e.prototype.parseExportSpecifier=function(){var e=this.createNode(),t=this.parseIdentifierName(),n=t;return this.matchContextualKeyword("as")&&(this.nextToken(),n=this.parseIdentifierName()),this.finalize(e,new o.ExportSpecifier(t,n))},e.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(s.Messages.IllegalExportDeclaration);var e=this.createNode();this.expectKeyword("export");var t;if(this.matchKeyword("default")){this.nextToken();if(this.matchKeyword("function")){var n=this.parseFunctionDeclaration(!0);t=this.finalize(e,new o.ExportDefaultDeclaration(n))}else if(this.matchKeyword("class")){var n=this.parseClassDeclaration(!0);t=this.finalize(e,new o.ExportDefaultDeclaration(n))}else if(this.matchContextualKeyword("async")){var n=this.matchAsyncFunction()?this.parseFunctionDeclaration(!0):this.parseAssignmentExpression();t=this.finalize(e,new o.ExportDefaultDeclaration(n))}else{this.matchContextualKeyword("from")&&this.throwError(s.Messages.UnexpectedToken,this.lookahead.value);var n=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression();this.consumeSemicolon(),t=this.finalize(e,new o.ExportDefaultDeclaration(n))}}else if(this.match("*")){this.nextToken();if(!this.matchContextualKeyword("from")){var r=this.lookahead.value?s.Messages.UnexpectedToken:s.Messages.MissingFromClause;this.throwError(r,this.lookahead.value)}this.nextToken();var i=this.parseModuleSpecifier();this.consumeSemicolon(),t=this.finalize(e,new o.ExportAllDeclaration(i))}else if(this.lookahead.type===4){var n=void 0;switch(this.lookahead.value){case"let":case"const":n=this.parseLexicalDeclaration({inFor:!1});break;case"var":case"class":case"function":n=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}t=this.finalize(e,new o.ExportNamedDeclaration(n,[],null))}else if(this.matchAsyncFunction()){var n=this.parseFunctionDeclaration();t=this.finalize(e,new o.ExportNamedDeclaration(n,[],null))}else{var u=[],a=null,f=!1;this.expect("{");while(!this.match("}"))f=f||this.matchKeyword("default"),u.push(this.parseExportSpecifier()),this.match("}")||this.expect(",");this.expect("}");if(this.matchContextualKeyword("from"))this.nextToken(),a=this.parseModuleSpecifier(),this.consumeSemicolon();else if(f){var r=this.lookahead.value?s.Messages.UnexpectedToken:s.Messages.MissingFromClause;this.throwError(r,this.lookahead.value)}else this.consumeSemicolon();t=this.finalize(e,new o.ExportNamedDeclaration(null,u,a))}return t},e}();t.Parser=c},function(e,t){function n(e,t){if(!e)throw new Error("ASSERT: "+t)}Object.defineProperty(t,"__esModule",{value:!0}),t.assert=n},function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.errors=[],this.tolerant=!1}return e.prototype.recordError=function(e){this.errors.push(e)},e.prototype.tolerate=function(e){if(!this.tolerant)throw e;this.recordError(e)},e.prototype.constructError=function(e,t){var n=new Error(e);try{throw n}catch(r){Object.create&&Object.defineProperty&&(n=Object.create(r),Object.defineProperty(n,"column",{value:t}))}return n},e.prototype.createError=function(e,t,n,r){var i="Line "+t+": "+r,s=this.constructError(i,n);return s.index=e,s.lineNumber=t,s.description=r,s},e.prototype.throwError=function(e,t,n,r){throw this.createError(e,t,n,r)},e.prototype.tolerateError=function(e,t,n,r){var i=this.createError(e,t,n,r);if(!this.tolerant)throw i;this.recordError(i)},e}();t.ErrorHandler=n},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Messages={BadImportCallArity:"Unexpected token",BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DefaultRestProperty:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",PropertyAfterRestProperty:"Unexpected token",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}},function(e,t,n){function o(e){return"0123456789abcdef".indexOf(e.toLowerCase())}function u(e){return"01234567".indexOf(e)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),i=n(4),s=n(11),a=function(){function e(e,t){this.source=e,this.errorHandler=t,this.trackComment=!1,this.isModule=!1,this.length=e.length,this.index=0,this.lineNumber=e.length>0?1:0,this.lineStart=0,this.curlyStack=[]}return e.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart,curlyStack:this.curlyStack.slice()}},e.prototype.restoreState=function(e){this.index=e.index,this.lineNumber=e.lineNumber,this.lineStart=e.lineStart,this.curlyStack=e.curlyStack},e.prototype.eof=function(){return this.index>=this.length},e.prototype.throwUnexpectedToken=function(e){return e===void 0&&(e=s.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,e)},e.prototype.tolerateUnexpectedToken=function(e){e===void 0&&(e=s.Messages.UnexpectedTokenIllegal),this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,e)},e.prototype.skipSingleLineComment=function(e){var t=[],n,r;this.trackComment&&(t=[],n=this.index-e,r={start:{line:this.lineNumber,column:this.index-this.lineStart-e},end:{}});while(!this.eof()){var s=this.source.charCodeAt(this.index);++this.index;if(i.Character.isLineTerminator(s)){if(this.trackComment){r.end={line:this.lineNumber,column:this.index-this.lineStart-1};var o={multiLine:!1,slice:[n+e,this.index-1],range:[n,this.index-1],loc:r};t.push(o)}return s===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,t}}if(this.trackComment){r.end={line:this.lineNumber,column:this.index-this.lineStart};var o={multiLine:!1,slice:[n+e,this.index],range:[n,this.index],loc:r};t.push(o)}return t},e.prototype.skipMultiLineComment=function(){var e=[],t,n;this.trackComment&&(e=[],t=this.index-2,n={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});while(!this.eof()){var r=this.source.charCodeAt(this.index);if(i.Character.isLineTerminator(r))r===13&&this.source.charCodeAt(this.index+1)===10&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(r===42){if(this.source.charCodeAt(this.index+1)===47){this.index+=2;if(this.trackComment){n.end={line:this.lineNumber,column:this.index-this.lineStart};var s={multiLine:!0,slice:[t+2,this.index-2],range:[t,this.index],loc:n};e.push(s)}return e}++this.index}else++this.index}if(this.trackComment){n.end={line:this.lineNumber,column:this.index-this.lineStart};var s={multiLine:!0,slice:[t+2,this.index],range:[t,this.index],loc:n};e.push(s)}return this.tolerateUnexpectedToken(),e},e.prototype.scanComments=function(){var e;this.trackComment&&(e=[]);var t=this.index===0;while(!this.eof()){var n=this.source.charCodeAt(this.index);if(i.Character.isWhiteSpace(n))++this.index;else if(i.Character.isLineTerminator(n))++this.index,n===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,t=!0;else if(n===47){n=this.source.charCodeAt(this.index+1);if(n===47){this.index+=2;var r=this.skipSingleLineComment(2);this.trackComment&&(e=e.concat(r)),t=!0}else{if(n!==42)break;this.index+=2;var r=this.skipMultiLineComment();this.trackComment&&(e=e.concat(r))}}else if(t&&n===45){if(this.source.charCodeAt(this.index+1)!==45||this.source.charCodeAt(this.index+2)!==62)break;this.index+=3;var r=this.skipSingleLineComment(3);this.trackComment&&(e=e.concat(r))}else{if(n!==60||!!this.isModule)break;if(this.source.slice(this.index+1,this.index+4)!=="!--")break;this.index+=4;var r=this.skipSingleLineComment(4);this.trackComment&&(e=e.concat(r))}}return e},e.prototype.isFutureReservedWord=function(e){switch(e){case"enum":case"export":case"import":case"super":return!0;default:return!1}},e.prototype.isStrictModeReservedWord=function(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},e.prototype.isRestrictedWord=function(e){return e==="eval"||e==="arguments"},e.prototype.isKeyword=function(e){switch(e.length){case 2:return e==="if"||e==="in"||e==="do";case 3:return e==="var"||e==="for"||e==="new"||e==="try"||e==="let";case 4:return e==="this"||e==="else"||e==="case"||e==="void"||e==="with"||e==="enum";case 5:return e==="while"||e==="break"||e==="catch"||e==="throw"||e==="const"||e==="yield"||e==="class"||e==="super";case 6:return e==="return"||e==="typeof"||e==="delete"||e==="switch"||e==="export"||e==="import";case 7:return e==="default"||e==="finally"||e==="extends";case 8:return e==="function"||e==="continue"||e==="debugger";case 10:return e==="instanceof";default:return!1}},e.prototype.codePointAt=function(e){var t=this.source.charCodeAt(e);if(t>=55296&&t<=56319){var n=this.source.charCodeAt(e+1);if(n>=56320&&n<=57343){var r=t;t=(r-55296)*1024+n-56320+65536}}return t},e.prototype.scanHexEscape=function(e){var t=e==="u"?4:2,n=0;for(var r=0;r<t;++r){if(!!this.eof()||!i.Character.isHexDigit(this.source.charCodeAt(this.index)))return null;n=n*16+o(this.source[this.index++])}return String.fromCharCode(n)},e.prototype.scanUnicodeCodePointEscape=function(){var e=this.source[this.index],t=0;e==="}"&&this.throwUnexpectedToken();while(!this.eof()){e=this.source[this.index++];if(!i.Character.isHexDigit(e.charCodeAt(0)))break;t=t*16+o(e)}return(t>1114111||e!=="}")&&this.throwUnexpectedToken(),i.Character.fromCodePoint(t)},e.prototype.getIdentifier=function(){var e=this.index++;while(!this.eof()){var t=this.source.charCodeAt(this.index);if(t===92)return this.index=e,this.getComplexIdentifier();if(t>=55296&&t<57343)return this.index=e,this.getComplexIdentifier();if(!i.Character.isIdentifierPart(t))break;++this.index}return this.source.slice(e,this.index)},e.prototype.getComplexIdentifier=function(){var e=this.codePointAt(this.index),t=i.Character.fromCodePoint(e);this.index+=t.length;var n;e===92&&(this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,n=this.scanUnicodeCodePointEscape()):(n=this.scanHexEscape("u"),(n===null||n==="\\"||!i.Character.isIdentifierStart(n.charCodeAt(0)))&&this.throwUnexpectedToken()),t=n);while(!this.eof()){e=this.codePointAt(this.index);if(!i.Character.isIdentifierPart(e))break;n=i.Character.fromCodePoint(e),t+=n,this.index+=n.length,e===92&&(t=t.substr(0,t.length-1),this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,n=this.scanUnicodeCodePointEscape()):(n=this.scanHexEscape("u"),(n===null||n==="\\"||!i.Character.isIdentifierPart(n.charCodeAt(0)))&&this.throwUnexpectedToken()),t+=n)}return t},e.prototype.octalToDecimal=function(e){var t=e!=="0",n=u(e);return!this.eof()&&i.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(t=!0,n=n*8+u(this.source[this.index++]),"0123".indexOf(e)>=0&&!this.eof()&&i.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(n=n*8+u(this.source[this.index++]))),{code:n,octal:t}},e.prototype.scanIdentifier=function(){var e,t=this.index,n=this.source.charCodeAt(t)===92?this.getComplexIdentifier():this.getIdentifier();n.length===1?e=3:this.isKeyword(n)?e=4:n==="null"?e=5:n==="true"||n==="false"?e=1:e=3;if(e!==3&&t+n.length!==this.index){var r=this.index;this.index=t,this.tolerateUnexpectedToken(s.Messages.InvalidEscapedReservedWord),this.index=r}return{type:e,value:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}},e.prototype.scanPunctuator=function(){var e=this.index,t=this.source[this.index];switch(t){case"(":case"{":t==="{"&&this.curlyStack.push("{"),++this.index;break;case".":++this.index,this.source[this.index]==="."&&this.source[this.index+1]==="."&&(this.index+=2,t="...");break;case"}":++this.index,this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:t=this.source.substr(this.index,4),t===">>>="?this.index+=4:(t=t.substr(0,3),t==="==="||t==="!=="||t===">>>"||t==="<<="||t===">>="||t==="**="?this.index+=3:(t=t.substr(0,2),t==="&&"||t==="||"||t==="=="||t==="!="||t==="+="||t==="-="||t==="*="||t==="/="||t==="++"||t==="--"||t==="<<"||t===">>"||t==="&="||t==="|="||t==="^="||t==="%="||t==="<="||t===">="||t==="=>"||t==="**"?this.index+=2:(t=this.source[this.index],"<>=!+-*%&|^/".indexOf(t)>=0&&++this.index)))}return this.index===e&&this.throwUnexpectedToken(),{type:7,value:t,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanHexLiteral=function(e){var t="";while(!this.eof()){if(!i.Character.isHexDigit(this.source.charCodeAt(this.index)))break;t+=this.source[this.index++]}return t.length===0&&this.throwUnexpectedToken(),i.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseInt("0x"+t,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanBinaryLiteral=function(e){var t="",n;while(!this.eof()){n=this.source[this.index];if(n!=="0"&&n!=="1")break;t+=this.source[this.index++]}return t.length===0&&this.throwUnexpectedToken(),this.eof()||(n=this.source.charCodeAt(this.index),(i.Character.isIdentifierStart(n)||i.Character.isDecimalDigit(n))&&this.throwUnexpectedToken()),{type:6,value:parseInt(t,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanOctalLiteral=function(e,t){var n="",r=!1;i.Character.isOctalDigit(e.charCodeAt(0))?(r=!0,n="0"+this.source[this.index++]):++this.index;while(!this.eof()){if(!i.Character.isOctalDigit(this.source.charCodeAt(this.index)))break;n+=this.source[this.index++]}return!r&&n.length===0&&this.throwUnexpectedToken(),(i.Character.isIdentifierStart(this.source.charCodeAt(this.index))||i.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:parseInt(n,8),octal:r,lineNumber:this.lineNumber,lineStart:this.lineStart,start:t,end:this.index}},e.prototype.isImplicitOctalLiteral=function(){for(var e=this.index+1;e<this.length;++e){var t=this.source[e];if(t==="8"||t==="9")return!1;if(!i.Character.isOctalDigit(t.charCodeAt(0)))return!0}return!0},e.prototype.scanNumericLiteral=function(){var e=this.index,t=this.source[e];r.assert(i.Character.isDecimalDigit(t.charCodeAt(0))||t===".","Numeric literal must start with a decimal digit or a decimal point");var n="";if(t!=="."){n=this.source[this.index++],t=this.source[this.index];if(n==="0"){if(t==="x"||t==="X")return++this.index,this.scanHexLiteral(e);if(t==="b"||t==="B")return++this.index,this.scanBinaryLiteral(e);if(t==="o"||t==="O")return this.scanOctalLiteral(t,e);if(t&&i.Character.isOctalDigit(t.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(t,e)}while(i.Character.isDecimalDigit(this.source.charCodeAt(this.index)))n+=this.source[this.index++];t=this.source[this.index]}if(t==="."){n+=this.source[this.index++];while(i.Character.isDecimalDigit(this.source.charCodeAt(this.index)))n+=this.source[this.index++];t=this.source[this.index]}if(t==="e"||t==="E"){n+=this.source[this.index++],t=this.source[this.index];if(t==="+"||t==="-")n+=this.source[this.index++];if(i.Character.isDecimalDigit(this.source.charCodeAt(this.index)))while(i.Character.isDecimalDigit(this.source.charCodeAt(this.index)))n+=this.source[this.index++];else this.throwUnexpectedToken()}return i.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseFloat(n),lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanStringLiteral=function(){var e=this.index,t=this.source[e];r.assert(t==="'"||t==='"',"String literal must starts with a quote"),++this.index;var n=!1,o="";while(!this.eof()){var u=this.source[this.index++];if(u===t){t="";break}if(u==="\\"){u=this.source[this.index++];if(!u||!i.Character.isLineTerminator(u.charCodeAt(0)))switch(u){case"u":if(this.source[this.index]==="{")++this.index,o+=this.scanUnicodeCodePointEscape();else{var a=this.scanHexEscape(u);a===null&&this.throwUnexpectedToken(),o+=a}break;case"x":var f=this.scanHexEscape(u);f===null&&this.throwUnexpectedToken(s.Messages.InvalidHexEscapeSequence),o+=f;break;case"n":o+="\n";break;case"r":o+="\r";break;case"t":o+="	";break;case"b":o+="\b";break;case"f":o+="\f";break;case"v":o+="";break;case"8":case"9":o+=u,this.tolerateUnexpectedToken();break;default:if(u&&i.Character.isOctalDigit(u.charCodeAt(0))){var l=this.octalToDecimal(u);n=l.octal||n,o+=String.fromCharCode(l.code)}else o+=u}else++this.lineNumber,u==="\r"&&this.source[this.index]==="\n"&&++this.index,this.lineStart=this.index}else{if(i.Character.isLineTerminator(u.charCodeAt(0)))break;o+=u}}return t!==""&&(this.index=e,this.throwUnexpectedToken()),{type:8,value:o,octal:n,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.scanTemplate=function(){var e="",t=!1,n=this.index,r=this.source[n]==="`",o=!1,u=2;++this.index;while(!this.eof()){var a=this.source[this.index++];if(a==="`"){u=1,o=!0,t=!0;break}if(a==="$"){if(this.source[this.index]==="{"){this.curlyStack.push("${"),++this.index,t=!0;break}e+=a}else if(a==="\\"){a=this.source[this.index++];if(!i.Character.isLineTerminator(a.charCodeAt(0)))switch(a){case"n":e+="\n";break;case"r":e+="\r";break;case"t":e+="	";break;case"u":if(this.source[this.index]==="{")++this.index,e+=this.scanUnicodeCodePointEscape();else{var f=this.index,l=this.scanHexEscape(a);l!==null?e+=l:(this.index=f,e+=a)}break;case"x":var c=this.scanHexEscape(a);c===null&&this.throwUnexpectedToken(s.Messages.InvalidHexEscapeSequence),e+=c;break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="";break;default:a==="0"?(i.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(s.Messages.TemplateOctalLiteral),e+="\0"):i.Character.isOctalDigit(a.charCodeAt(0))?this.throwUnexpectedToken(s.Messages.TemplateOctalLiteral):e+=a}else++this.lineNumber,a==="\r"&&this.source[this.index]==="\n"&&++this.index,this.lineStart=this.index}else i.Character.isLineTerminator(a.charCodeAt(0))?(++this.lineNumber,a==="\r"&&this.source[this.index]==="\n"&&++this.index,this.lineStart=this.index,e+="\n"):e+=a}return t||this.throwUnexpectedToken(),r||this.curlyStack.pop(),{type:10,value:this.source.slice(n+1,this.index-u),cooked:e,head:r,tail:o,lineNumber:this.lineNumber,lineStart:this.lineStart,start:n,end:this.index}},e.prototype.testRegExp=function(e,t){var n="￿",r=e,i=this;t.indexOf("u")>=0&&(r=r.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(e,t,r){var o=parseInt(t||r,16);return o>1114111&&i.throwUnexpectedToken(s.Messages.InvalidRegExp),o<=65535?String.fromCharCode(o):n}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,n));try{RegExp(r)}catch(o){this.throwUnexpectedToken(s.Messages.InvalidRegExp)}try{return new RegExp(e,t)}catch(u){return null}},e.prototype.scanRegExpBody=function(){var e=this.source[this.index];r.assert(e==="/","Regular expression literal must start with a slash");var t=this.source[this.index++],n=!1,o=!1;while(!this.eof()){e=this.source[this.index++],t+=e;if(e==="\\")e=this.source[this.index++],i.Character.isLineTerminator(e.charCodeAt(0))&&this.throwUnexpectedToken(s.Messages.UnterminatedRegExp),t+=e;else if(i.Character.isLineTerminator(e.charCodeAt(0)))this.throwUnexpectedToken(s.Messages.UnterminatedRegExp);else if(n)e==="]"&&(n=!1);else{if(e==="/"){o=!0;break}e==="["&&(n=!0)}}return o||this.throwUnexpectedToken(s.Messages.UnterminatedRegExp),t.substr(1,t.length-2)},e.prototype.scanRegExpFlags=function(){var e="",t="";while(!this.eof()){var n=this.source[this.index];if(!i.Character.isIdentifierPart(n.charCodeAt(0)))break;++this.index;if(n==="\\"&&!this.eof()){n=this.source[this.index];if(n==="u"){++this.index;var r=this.index,s=this.scanHexEscape("u");if(s!==null){t+=s;for(e+="\\u";r<this.index;++r)e+=this.source[r]}else this.index=r,t+="u",e+="\\u";this.tolerateUnexpectedToken()}else e+="\\",this.tolerateUnexpectedToken()}else t+=n,e+=n}return t},e.prototype.scanRegExp=function(){var e=this.index,t=this.scanRegExpBody(),n=this.scanRegExpFlags(),r=this.testRegExp(t,n);return{type:9,value:"",pattern:t,flags:n,regex:r,lineNumber:this.lineNumber,lineStart:this.lineStart,start:e,end:this.index}},e.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var e=this.source.charCodeAt(this.index);return i.Character.isIdentifierStart(e)?this.scanIdentifier():e===40||e===41||e===59?this.scanPunctuator():e===39||e===34?this.scanStringLiteral():e===46?i.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():i.Character.isDecimalDigit(e)?this.scanNumericLiteral():e===96||e===125&&this.curlyStack[this.curlyStack.length-1]==="${"?this.scanTemplate():e>=55296&&e<57343&&i.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()},e}();t.Scanner=a},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TokenName={},t.TokenName[1]="Boolean",t.TokenName[2]="<end>",t.TokenName[3]="Identifier",t.TokenName[4]="Keyword",t.TokenName[5]="Null",t.TokenName[6]="Numeric",t.TokenName[7]="Punctuator",t.TokenName[8]="String",t.TokenName[9]="RegularExpression",t.TokenName[10]="Template"},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",frasl:"⁄",euro:"€",image:"ℑ",weierp:"℘",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪","int":"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦",lang:"⟨",rang:"⟩"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),i=n(12),s=n(13),o=function(){function e(){this.values=[],this.curly=this.paren=-1}return e.prototype.beforeFunctionExpression=function(e){return["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(e)>=0},e.prototype.isRegexStart=function(){var e=this.values[this.values.length-1],t=e!==null;switch(e){case"this":case"]":t=!1;break;case")":var n=this.values[this.paren-1];t=n==="if"||n==="while"||n==="for"||n==="with";break;case"}":t=!0;if(this.values[this.curly-3]==="function"){var r=this.values[this.curly-4];t=r?!this.beforeFunctionExpression(r):!1}else if(this.values[this.curly-4]==="function"){var r=this.values[this.curly-5];t=r?!this.beforeFunctionExpression(r):!0}break;default:}return t},e.prototype.push=function(e){e.type===7||e.type===4?(e.value==="{"?this.curly=this.values.length:e.value==="("&&(this.paren=this.values.length),this.values.push(e.value)):this.values.push(null)},e}(),u=function(){function e(e,t){this.errorHandler=new r.ErrorHandler,this.errorHandler.tolerant=t?typeof t.tolerant=="boolean"&&t.tolerant:!1,this.scanner=new i.Scanner(e,this.errorHandler),this.scanner.trackComment=t?typeof t.comment=="boolean"&&t.comment:!1,this.trackRange=t?typeof t.range=="boolean"&&t.range:!1,this.trackLoc=t?typeof t.loc=="boolean"&&t.loc:!1,this.buffer=[],this.reader=new o}return e.prototype.errors=function(){return this.errorHandler.errors},e.prototype.getNextToken=function(){if(this.buffer.length===0){var e=this.scanner.scanComments();if(this.scanner.trackComment)for(var t=0;t<e.length;++t){var n=e[t],r=this.scanner.source.slice(n.slice[0],n.slice[1]),i={type:n.multiLine?"BlockComment":"LineComment",value:r};this.trackRange&&(i.range=n.range),this.trackLoc&&(i.loc=n.loc),this.buffer.push(i)}if(!this.scanner.eof()){var o=void 0;this.trackLoc&&(o={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});var u=this.scanner.source[this.scanner.index]==="/"&&this.reader.isRegexStart(),a=void 0;if(u){var f=this.scanner.saveState();try{a=this.scanner.scanRegExp()}catch(n){this.scanner.restoreState(f),a=this.scanner.lex()}}else a=this.scanner.lex();this.reader.push(a);var l={type:s.TokenName[a.type],value:this.scanner.source.slice(a.start,a.end)};this.trackRange&&(l.range=[a.start,a.end]),this.trackLoc&&(o.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},l.loc=o);if(a.type===9){var c=a.pattern,h=a.flags;l.regex={pattern:c,flags:h}}this.buffer.push(l)}}return this.buffer.shift()},e}();t.Tokenizer=u}])})
/** END OF esprima **/
,define("samples",["require","exports","module"],function(e,t,n){t.samples=["AccessibleColumn.htm","AccessibleLine.htm","AccessiblePie.htm","AnnotationCALabel.htm","AnnotationFooter.htm","AnnotationLink.htm","AnnotationStyling.htm","AxisCalPatTicks.htm","AxisCatGroups.htm","AxisClickValue.htm","AxisFormatting.htm","AxisIntervals.htm","AxisLineCaps.htm","AxisLogFormatting.htm","AxisMarkerHolidays.htm","AxisMarkerHolidaysJP.htm","AxisMarkersInFront.htm","AxisNewTicks.htm","AxisOrientation.htm","AxisQuarterGroups.htm","AxisScales.htm","AxisSeriesGroups.htm","AxisShadowing.htm","AxisShadowingTime.htm","AxisStyling.htm","AxisTickGoal.htm","AxisTickIcons.htm","AxisTickLabelStyling.htm","AxisTickLineCaps.htm","BarHoverState.htm","BoxPositions.htm","CallbackFormatting.htm","CarsInUse.htm","ChartArea.htm","ChartAreaImage.htm","ChartBox.htm","CrosshairColumns.htm","CrosshairFinance.htm","CTTListMicro.htm","CTTPointIcons.htm","CTTPointMicro.htm","DataClickEvents.htm","DataPointClick.htm","DynamicSizing.htm","GetSelectedData.htm","InteractiveData.htm","LabelCallbacks.htm","LabelCallbackTokens.htm","LabelDataAttributes.htm","LabelFormatting.htm","LabelInlineFormatting.htm","LabelStyling.htm","LabelUnicode.htm","LegendAlone.htm","LegendAxisMarkers.htm","LegendCustomEntries.htm","LegendEntryGroups.htm","LegendEntryOrder.htm","LegendEvents.htm","LegendPointHighlight.htm","LegendStatisticEntries.htm","LegendStyling.htm","LegendTitleLayout.htm","LegendTokens.htm","MapBaseFilter.htm","MapCapitals.htm","MapClickPlot.htm","MapContext.htm","MapCustomFiles.htm","MapCustomNavUI.htm","MapDynamic.htm","MapFiltered.htm","MapFipsBinding.htm","MapLinePoints.htm","MapPointFeatures.htm","MapProvinceAttributes.htm","MapSeriesFilter.htm","MapThematicPopulation.htm","MapThematicSales.htm","MapUSElectionBasic.htm","MapUSElectionThematic.htm","MasterDetail.htm","MicroLeIcons.htm","MultiChart.htm","MultiYAxes.htm","MultiYStackMixing.htm","PieLayout.htm","PointLabels.htm","PointLegendEntries.htm","ResetZoomBtn.htm","ScaleBreaks.htm","ScaleBreaksAuto.htm","SeriesLegendEntry.htm","ShowHideData.htm","SmartPaletteBubble.htm","SmartPaletteColorBar.htm","SmartPalettePartial.htm","SmartPaletteRanges.htm","TimeSpanExpressions.htm","TimeSpanExpressions2.htm","TiresCompared.htm","TitleBox.htm","TokenQueries.htm","ToolbarStyling.htm","ToolbarStyling2.htm","Tooltips.htm","Tooltips2.htm","TooltipsIcons.htm","TooltipTokens.htm","WaterHeatingCurve.htm","WeatherIcons.htm","WorldPopulation.htm","ZoomingTime.htm","ZoomingX.htm","ZoomingXY.htm","ZoomSelection.htm","Area.htm","AreaH.htm","AreaHSt.htm","AreaMarkerN.htm","AreaNeg.htm","AreaSpline.htm","AreaSplineSt.htm","AreaSplineStF.htm","AreaSt.htm","AreaStep.htm","AreaStepSt.htm","AreaStF.htm","AreaTypes.htm","BarIconsCustom.htm","BarMarkerIconsInLegend.htm","Bars.htm","BarsH.htm","BarsHSt.htm","BarsHStF.htm","BarsHStNeg.htm","BarsMarkerIcons.htm","BarsMarkerImg.htm","BarsMarkerImgInLegend.htm","BarsShA.htm","BarsShR.htm","BarsSt.htm","BarsStF.htm","BarsStM.htm","BoxAndWhisker.htm","Bubble2.htm","CalendarCarSales.htm","CalendarCsvData.htm","CalendarCultures.htm","CalendarCustomTicks.htm","CalendarInjuries.htm","CalendarSteps.htm","CalendarWeekActivity.htm","CalendarWeekStart.htm","CarBrandsSales.htm","ChartGridSwitch.htm","CircularColumnMarkers.htm","CircularGrid.htm","CircularIcons.htm","CircularLineBreaks.htm","CircularShapeLabels.htm","CircularSleep.htm","CircularSweepGuides.htm","CircularTickPlacement.htm","CircularWind.htm","ColumnHatch.htm","ColumnHighlight.htm","ColumnPyramid.htm","ColumnStNeg.htm","ColumnXYRanges.htm","Cone.htm","ConeInverted.htm","CustomerSatisfactionChart.htm","Donut.htm","DonutArc.htm","DonutMulti.htm","EmissionsByIncome.htm","FinanceCandle.htm","FinanceCandleShA.htm","FinanceCandleShR.htm","FinanceLine.htm","FinanceOhlc.htm","FinanceSupportResistance.htm","Funnel.htm","FunnelInverted.htm","FunnelSquare.htm","FunnelSquareInverted.htm","Gantt.htm","GanttComplex.htm","GanttMarkers.htm","GanttMilestones.htm","Gauge.htm","GaugeArcs.htm","GaugeAxes.htm","GaugeAxisMarker.htm","GaugeClock.htm","GaugeStyling.htm","HeatMap.htm","HeatmapDense.htm","LinearColumn.htm","LinearGantt.htm","LinearGuides.htm","LinearLabels.htm","LineErrorOffset.htm","LineErrorStyling.htm","LineFromCsv.htm","Lines.htm","LinesH.htm","LinesMarkerL.htm","LinesMarkerM.htm","LinesMarkerN.htm","LinesStyled.htm","LineTension.htm","LineTypeCaps.htm","LineTypes.htm","MapAfrica.htm","MapAmericas.htm","MapRegionsSimple.htm","MapThematicRandom.htm","MapUSEastCoast.htm","MapUSElection.htm","MapUSRegions.htm","MapWeather.htm","MapWeatherAU.htm","Marimekko.htm","Marker.htm","MarkerIcons.htm","MarkerImg.htm","MarkerLarge.htm","MarkerTypes.htm","MarkerTypesDyn.htm","MarkerXYErrorBars.htm","MarkerXYWhiskers.htm","MicroTypeArea.htm","MicroTypeBar.htm","MicroTypeBarFull.htm","MicroTypeBullet.htm","MicroTypeColumn.htm","MicroTypeHeatmap.htm","MicroTypePie.htm","MicroTypeProgress.htm","MicroTypeScale.htm","MicroTypeSparkline.htm","MilestoneTrends.htm","MosaicPlot.htm","Organizational.htm","OrgIcons.htm","OrgImages.htm","OrgListTags.htm","OrgMultiParent.htm","OrgSimpleStyling.htm","OrgStyling3.htm","Pie.htm","PieAngled.htm","PieArc.htm","PieDonutZVal.htm","PieExploded.htm","PieHatched.htm","PieMarkerIcons.htm","PieMarkerImg.htm","PieMulti.htm","PieOutlined.htm","PieStyled.htm","PieZVal.htm","PieZValAllNeg.htm","PieZValNeg.htm","PieZValNegSegmented.htm","PieZValNegVariations.htm","PieZValVariations.htm","Pyramid.htm","PyramidInverted.htm","Pyramids.htm","Radar.htm","RadarArcs.htm","RadarArea.htm","RadarAreaStF.htm","RadarColComplete.htm","RadarColInverted.htm","RadarColSeamless.htm","RadarColumnSt.htm","RadarGridOnTop.htm","RadarLineInterp.htm","RadarRangeColumns.htm","Radars.htm","RangeColumns.htm","ScatterSpline.htm","SegmentedPie.htm","SinglePie.htm","SmartphonesBrandsProfit.htm","Splines.htm","SplinesH.htm","StackSums.htm","Stepline.htm","StepLineH.htm","TimeLineError.htm","TreemapCushion.htm","TreemapPopulation.htm","TreemapSmartPalette.htm","Variwide.htm","VariwideMulti.htm","VariwideMultiWithoutZ.htm","VariwideSt.htm","VariwideStWithoutZ.htm","VariwideWithoutZ.htm","WeatherWeek.htm"],t.all=["AccessibleColumn.htm","AccessibleLine.htm","AccessibleMap.htm","AccessiblePie.htm","AnimatedLabelIcons.htm","AnnotationCALabel.htm","AnnotationFooter.htm","AnnotationLink.htm","AnnotationStyling.htm","Australia.htm","AxisAnalysisTicks.htm","AxisArrayTicks.htm","AxisCalPatTicks.htm","AxisCatGroups.htm","AxisClickValue.htm","AxisFormatting.htm","AxisInteractiveExtremes.htm","AxisInteractiveMarkers.htm","AxisIntervals.htm","AxisLineCaps.htm","AxisLogFormatting.htm","AxisLogScale.htm","AxisMarkerGoal.htm","AxisMarkerHolidays.htm","AxisMarkerHolidaysJP.htm","AxisMarkerPatterns.htm","AxisMarkersInFront.htm","AxisMarkerWiz.htm","AxisNewTicks.htm","AxisOrientation.htm","AxisQuarterGroups.htm","AxisScales.htm","AxisSeriesGroups.htm","AxisSeriesRanges.htm","AxisShadowing.htm","AxisShadowingTime.htm","AxisStyling.htm","AxisTickAngles.htm","AxisTickGoal.htm","AxisTickIcons.htm","AxisTickLabelStyling.htm","AxisTickLineCaps.htm","BarColors.htm","BarHoverState.htm","BoxPositions.htm","ButtonKPI.htm","CalendarSeaTemps.htm","CallbackFormatting.htm","CarsInUse.htm","ChartArea.htm","ChartAreaImage.htm","ChartBox.htm","ChartsInTabs.htm","ChartTemplate.htm","ChatStatsDash.htm","Color.htm","Cooking.htm","CrosshairColumns.htm","CrosshairFinance.htm","CrosshairMultiAxis.htm","CTTListMicro.htm","CTTPointIcons.htm","CTTPointMicro.htm","DataClickEvents.htm","DataPointClick.htm","DataRangeSlider.htm","DepositCalculator.htm","DynamicData.htm","DynamicSizing.htm","Education.htm","ExportProg.htm","ExternalFontStyling.htm","Fitness.htm","FrontEndFrameworks.htm","GetSelectedData.htm","Green.htm","GridlessGridlines.htm","HouseSalesScatter.htm","HoverSideInfo.htm","HtmData.htm","HtmDataDates.htm","HtmDataHeaders.htm","HtmDataHeadersMulti.htm","HtmDataMulti.htm","IconChartTypes.htm","IconsBrowser.htm","InteractiveData.htm","LabelCallbacks.htm","LabelCallbackTokens.htm","LabelDataAttributes.htm","LabelFormatting.htm","LabelInlineFormatting.htm","LabelLists.htm","LabelStyling.htm","LabelTokens.htm","LabelUnicode.htm","LastPointTicks.htm","LegendAlone.htm","LegendAxisMarkers.htm","LegendCustomEntries.htm","LegendDataGrid.htm","LegendEntryEvents.htm","LegendEntryGroups.htm","LegendEntryOrder.htm","LegendEvents.htm","LegendPointHighlight.htm","LegendStatisticEntries.htm","LegendStyling.htm","LegendTitleLayout.htm","LegendTokens.htm","LiveData.htm","MapBaseFilter.htm","MapBubbleDynamic.htm","MapCapitals.htm","MapClickPlot.htm","MapContext.htm","MapCustomFiles.htm","MapCustomNavUI.htm","MapDynamic.htm","MapElectionYears.htm","MapEntryZoom.htm","MapFiltered.htm","MapFipsBinding.htm","MapLinePoints.htm","MapMomentaryZoom.htm","MapPaletteDesigner.htm","MapPointFeatures.htm","MapProvinceAttributes.htm","MapSeriesFilter.htm","MapThematicMarkers.htm","MapThematicPopulation.htm","MapThematicSales.htm","MapUSElectionBasic.htm","MapUSElectionThematic.htm","MapZoomTo.htm","MasterDetail.htm","MasterDetailSlider.htm","MicroLeIcons.htm","MultiChart.htm","MultiYAxes.htm","MultiYStackMixing.htm","NestDateGroup.htm","NestMicrochartData.htm","NestMultiSeries.htm","NestMultiTails.htm","NestPointRollup.htm","NestPointRollupRange.htm","NestPropertyMapping.htm","NestRatingsSummary.htm","OlympicGames.htm","PieLayout.htm","PieLegend.htm","PointLabels.htm","PointLegendEntries.htm","RangeTickLayout.htm","RangeTicksOnSeries.htm","ResetZoomBtn.htm","RestaurantRating.htm","ScaleBreaks.htm","ScaleBreaksAuto.htm","SeriesLegendEntry.htm","ShowHideData.htm","Sleep.htm","SmartCategoryGrouping.htm","SmartPaletteBubble.htm","SmartPaletteColorBar.htm","SmartPaletteGallery.htm","SmartPalettePartial.htm","SmartPaletteRanges.htm","SmartPaletteWeather.htm","SocialNetworksInfo.htm","TickPlacement.htm","TimeSpanExpressions.htm","TimeSpanExpressions2.htm","TiresCompared.htm","TitleBox.htm","TokenQueries.htm","ToolbarStyling.htm","ToolbarStyling2.htm","Tooltips.htm","Tooltips2.htm","TooltipsIcons.htm","TooltipTokens.htm","UnemploymentRateUS.htm","WaterHeatingCurve.htm","WeatherDashboard.htm","WeatherIcons.htm","WebFontLoading.htm","WorldPopulation.htm","ZoomingTime.htm","ZoomingX.htm","ZoomingXY.htm","ZoomSelection.htm","AreaDB.htm","AreaLegendPieDB.htm","AxisShadowingDB.htm","BarDB.htm","BarHorizontalDB.htm","BarHorizontalStackedDB.htm","BarStackedDB.htm","ChartAreaImageDB.htm","CustomAttributesDB.htm","DayDB.htm","DrilldownDB.htm","DynamicDataDB.htm","FinanceCandleDB.htm","FinanceLineDB.htm","GanttDB.htm","GanttMilestonesDB.htm","MasterDetailsDB.htm","MonthDB.htm","MonthsDB.htm","MultiChartDB.htm","MultiSeriesDB.htm","QuartersDB.htm","ScatterDB.htm","SplineDB.htm","StepLineDB.htm","StoredProcedureDB.htm","YearDB.htm","ZoomingXYDB.htm","Area.htm","AreaH.htm","AreaHSt.htm","AreaMarkerN.htm","AreaNeg.htm","AreaPointM.htm","AreaRange.htm","AreaSpline.htm","AreaSplineSt.htm","AreaSplineStF.htm","AreaSt.htm","AreaStep.htm","AreaStepSt.htm","AreaStF.htm","AreaTypes.htm","AverageRate.htm","BabyNamesTop.htm","BarcodeChart.htm","BarIconsCustom.htm","BarMarkerIconsInLegend.htm","Bars.htm","BarsH.htm","BarsHSt.htm","BarsHStF.htm","BarsHStNeg.htm","BarsMarkerIcons.htm","BarsMarkerImg.htm","BarsMarkerImgInLegend.htm","BarsShA.htm","BarsShR.htm","BarsSt.htm","BarsStF.htm","BarsStM.htm","BoxAndWhisker.htm","BrowserShareOverTime.htm","Bubble.htm","Bubble2.htm","BubbleGrid.htm","BubbleIcons.htm","BubbleInteractive.htm","BulletDashboard.htm","CalendarAvailability.htm","CalendarCarSales.htm","CalendarCsvData.htm","CalendarCultures.htm","CalendarCustomTicks.htm","CalendarDetails.htm","CalendarEvents.htm","CalendarExams.htm","CalendarHighlights.htm","CalendarHolidays.htm","CalendarInjuries.htm","CalendarLunarPhase.htm","CalendarOzone.htm","CalendarPlannerSelection.htm","CalendarPlannerTooltips.htm","CalendarRangePicker.htm","CalendarRangePickerData.htm","CalendarRangeSimple.htm","CalendarSteps.htm","CalendarTickCharts.htm","CalendarWeather.htm","CalendarWeekActivity.htm","CalendarWeekStart.htm","CancerDeathRate.htm","CarBrandsSales.htm","ChartGridSwitch.htm","CircularActivity.htm","CircularAxisLinePalette.htm","CircularColumnMarkers.htm","CircularCountdown.htm","CircularGantt.htm","CircularGanttNested.htm","CircularGrid.htm","CircularIcons.htm","CircularLineBreaks.htm","CircularLiveData.htm","CircularMarker.htm","CircularOverflow.htm","CircularShapeLabels.htm","CircularSleep.htm","CircularSweepGuides.htm","CircularTickPlacement.htm","CircularWind.htm","CleanWaterMap.htm","ColumnError.htm","ColumnHatch.htm","ColumnHighlight.htm","ColumnNeg.htm","ColumnPyramid.htm","ColumnStNeg.htm","ColumnXYRanges.htm","ComboBLMS.htm","ComboBM.htm","ComboBP.htm","ComboBS.htm","ComboPareto.htm","CompaniesRevenue.htm","Cone.htm","ConeInverted.htm","CustomerSatisfactionChart.htm","DataGridDeep.htm","Donut.htm","DonutArc.htm","DonutMulti.htm","EmissionsByIncome.htm","FinanceCandle.htm","FinanceCandleShA.htm","FinanceCandleShR.htm","FinanceLine.htm","FinanceOhlc.htm","FinancePatternBreaks.htm","FinanceSupportResistance.htm","Funnel.htm","FunnelInverted.htm","FunnelLabelMode.htm","FunnelSquare.htm","FunnelSquareInverted.htm","Gantt.htm","GanttAxisDetails.htm","GanttComplex.htm","GanttDependencies.htm","GanttMarkers.htm","GanttMilestones.htm","GanttSummary.htm","Gauge.htm","GaugeAngularPie.htm","GaugeArcs.htm","GaugeAxes.htm","GaugeAxisMarker.htm","GaugeClock.htm","GaugeStyling.htm","GridCsvLarge.htm","GridCustomColumns.htm","GridCustomIcons.htm","GridDynamic.htm","GridFromJson.htm","GridLive.htm","GridSalesBars.htm","GridSummaryRow.htm","HeatMap.htm","HeatmapDense.htm","HeatmapElections.htm","HeatmapGame.htm","HistoryOfEarth.htm","IPhonePrices.htm","LaborForceUs.htm","LaGuardiaTemps.htm","LinearAxisPalette.htm","LinearColumn.htm","LinearDays.htm","LinearGantt.htm","LinearGuides.htm","LinearLabels.htm","LinearSleep.htm","LineCompare.htm","LineErrorOffset.htm","LineErrorStyling.htm","LineFromCsv.htm","Lines.htm","LinesH.htm","LinesMarkerDyn.htm","LinesMarkerL.htm","LinesMarkerM.htm","LinesMarkerN.htm","LinesPointM.htm","LinesStyled.htm","LineTension.htm","LineTypeCaps.htm","LineTypes.htm","MapAfrica.htm","MapAmericas.htm","MapCountries.htm","MapDataBrowser.htm","MapLccProjection.htm","MapProjections.htm","MapRegions.htm","MapRegionsSimple.htm","MapRivers.htm","MapThematicRandom.htm","MapUSEastCoast.htm","MapUSElection.htm","MapUSRegions.htm","MapWeather.htm","MapWeatherAU.htm","MapWorld.htm","Marimekko.htm","Marker.htm","MarkerIcons.htm","MarkerImg.htm","MarkerLarge.htm","MarkerTypes.htm","MarkerTypesDyn.htm","MarkerXYErrorBars.htm","MarkerXYWhiskers.htm","MicroAudioVisualizer.htm","MicroProgress.htm","MicroTypeArea.htm","MicroTypeBar.htm","MicroTypeBarFull.htm","MicroTypeBullet.htm","MicroTypeColumn.htm","MicroTypeHeatmap.htm","MicroTypePie.htm","MicroTypeProgress.htm","MicroTypeScale.htm","MicroTypeSparkline.htm","MilestoneTrends.htm","MosaicPlot.htm","MostPopularCars.htm","OrgAlphabet.htm","Organizational.htm","OrgBreadcrumbs.htm","OrgExpansion.htm","OrgIcons.htm","OrgImages.htm","OrgListTags.htm","OrgMicroCharts.htm","OrgMultiParent.htm","OrgSimpleStyling.htm","OrgStyling1.htm","OrgStyling2.htm","OrgStyling3.htm","Pie.htm","PieAngled.htm","PieArc.htm","PieCsv.htm","PieDonutZVal.htm","PieExploded.htm","PieHatched.htm","PieLabelMode.htm","PieMarkerIcons.htm","PieMarkerImg.htm","PieMulti.htm","PieNested.htm","PieOutlined.htm","PieShapeSlider.htm","PieStyled.htm","PieZVal.htm","PieZValAllNeg.htm","PieZValNeg.htm","PieZValNegSegmented.htm","PieZValNegVariations.htm","PieZValVariations.htm","Pyramid.htm","PyramidInverted.htm","Pyramids.htm","Quadrant.htm","Radar.htm","RadarArcs.htm","RadarArea.htm","RadarAreaStF.htm","RadarColComplete.htm","RadarColInverted.htm","RadarColSeamless.htm","RadarColumnSt.htm","RadarGridOnTop.htm","RadarLineInterp.htm","RadarRangeColumns.htm","Radars.htm","RangeColumns.htm","Scatter.htm","ScatterAxisMarkers.htm","ScatterMulti.htm","ScatterSpline.htm","SegmentedPie.htm","SinglePie.htm","SmartphonesBrandsProfit.htm","Splines.htm","SplinesH.htm","StackedSalesBars.htm","StackSums.htm","Stepline.htm","StepLineH.htm","TempsCompare.htm","TimeLineError.htm","TopJsEditors.htm","TreemapCushion.htm","TreemapCushionDense.htm","TreemapFiles.htm","TreemapModes.htm","TreemapPopulation.htm","TreemapSmartPalette.htm","USIndustries.htm","Variwide.htm","VariwideMulti.htm","VariwideMultiWithoutZ.htm","VariwideSt.htm","VariwideStWithoutZ.htm","VariwideWithoutZ.htm","Waterfall.htm","WeatherWeek.htm","WebServiceCsvData.htm","WindRose.htm","WorldHolidays.htm"],t.php=[{name:"AreaDB.htm",path:"php/AreaDB.php"},{name:"AreaLegendPieDB.htm",path:"php/AreaLegendPieDB.php"},{name:"AxisShadowingDB.htm",path:"php/AxisShadowingDB.php"},{name:"BarDB.htm",path:"php/BarDB.php"},{name:"BarHorizontalDB.htm",path:"php/BarHorizontalDB.php"},{name:"BarHorizontalStackedDB.htm",path:"php/BarHorizontalStackedDB.php"},{name:"BarStackedDB.htm",path:"php/BarStackedDB.php"},{name:"ChartAreaImageDB.htm",path:"php/ChartAreaImageDB.php"},{name:"CustomAttributesDB.htm",path:"php/CustomAttributesDB.php"},{name:"DayDB.htm",path:"php/DayDB.php"},{name:"DrilldownDB.htm",path:"php/DrilldownDB.php"},{name:"DynamicDataDB.htm",path:"php/DynamicDataDB.php"},{name:"FinanceCandleDB.htm",path:"php/FinanceCandleDB.php"},{name:"FinanceLineDB.htm",path:"php/FinanceLineDB.php"},{name:"GanttDB.htm",path:"php/GanttDB.php"},{name:"GanttMilestonesDB.htm",path:"php/GanttMilestonesDB.php"},{name:"MasterDetailsDB.htm",path:"php/MasterDetailsDB.php"},{name:"MonthDB.htm",path:"php/MonthDB.php"},{name:"MonthsDB.htm",path:"php/MonthsDB.php"},{name:"MultiChartDB.htm",path:"php/MultiChartDB.php"},{name:"MultiSeriesDB.htm",path:"php/MultiSeriesDB.php"},{name:"QuartersDB.htm",path:"php/QuartersDB.php"},{name:"ScatterDB.htm",path:"php/ScatterDB.php"},{name:"SplineDB.htm",path:"php/SplineDB.php"},{name:"StepLineDB.htm",path:"php/StepLineDB.php"},{name:"StoredProcedureDB.htm",path:"php/StoredProcedureDB.php"},{name:"YearDB.htm",path:"php/YearDB.php"},{name:"ZoomingXYDB.htm",path:"php/ZoomingXYDB.php"}]}),define("php",["require","exports","module","ajax","./samples"],function(e,t,n){function o(){return s==="websiteMode"}function u(){return o()&&GLOBAL.isPHPSample&&!GLOBAL.isDBAvailable}function a(){return!o()&&GLOBAL.isPHPSample&&!GLOBAL.isDBAvailable}function f(e){var t=u()?"https://linux.jscharting.com/":"../";return t&&t.length>0&&t[t.length-1]==="/"&&(t=t.substr(0,t.length-1)),t+"/Samples/"+e}function l(e){typeof GLOBAL.isPHPSupported!="undefined"&&e(GLOBAL.isPHPSupported);var t="../Samples/php/includes/phpCheck.php";r.Ajax({type:"GET",url:t,onSuccess:function(t){GLOBAL.isPHPSupported=t==="Detected",e&&e(GLOBAL.isPHPSupported)},onError:function(){GLOBAL.isPHPSupported=!1,e&&e(GLOBAL.isPHPSupported)}})}function c(e){if(GLOBAL.isPHPSupported===!1){GLOBAL.isDBAvailable=!1,e(GLOBAL.isDBAvailable);return}var t="../Samples/php/includes/TestConnection.php";r.Ajax({type:"GET",url:t,onSuccess:function(t){GLOBAL.isDBAvailable=t.indexOf("Connected to DB:")>=0,e&&e(GLOBAL.isDBAvailable)},onError:function(){GLOBAL.isDBAvailable=!1,e&&e(GLOBAL.isDBAvailable)}})}function h(e){if(!e)return null;for(var t=0;t<i.php.length;t++){var n=i.php[t];if(n.name===e)return n}return null}function p(e){return i.php?!!h(e):e.indexOf("DB.htm")===e.length-6}function d(e){if(!i.php)return"php/"+e.replace("htm","php");var t=h(e);return t?t.path:e}var r=e("ajax"),i=e("./samples"),s="bundleMode";t.isPHPSupported=l,t.isDBAvailable=c,t.getPHPSampleFileUrl=f,t.isPHPSample=p,t.convertHtmlSampleToPHP=d,t.needToUseIframe=u,t.needToDisplayNoDbError=a}),define("jsonLib",["require","exports","module"],function(e,t,n){function i(e,t){return e.replace(/\{([^{}]*)\}/g,function(e,n){var r=t[n];return typeof r=="string"||typeof r=="number"?r:e})}function s(e,t,n){if(e&&t&&typeof n!="undefined"){var r=t.split("."),i=e,s=r.length-1,o,u;for(o=0;o<s;o++)u=r[o],i[u]===undefined&&(i[u]=isNaN(r[o+1])?{}:[]),i=i[u];return i[r[s]]=n}}function o(e,t){var n=e,r;if(t){r=t.split(".");for(var i=0;n!==undefined&&n!==null&&i<r.length;i++)n=n[r[i]]}return n}function u(e,t){if(t){var n=t.toUpperCase();for(var r in e){var i=r.toUpperCase();if(n===i)return e[r]}}}function a(e){var t=[],n=0;for(t[n++]in e);return t}function f(e){return e.replace(/\[([0-9]+)\]/g,".$1")}function l(e){return typeof e===r?!1:!0}function c(){var e=arguments,t,n,i=e.length;for(t=0;t<i;t++){n=e[t];if(typeof n!==r&&n!==null)return n}}function h(){function d(e){return m(e)==="object"?!0:!1}function v(e){if(e.pop)return!0}function m(e){var t=typeof e;if(t!==r){if(t==="boolean")return"boolean";if(t==="number")return"number";if(t==="function")return"function";if(e&&e.pop)return"array";if(t==="string")return"string";if(t==="object")return e&&e.getUTCMilliseconds?"date":"object"}return r}var e,t,n,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,c=!1,p;typeof u=="boolean"&&(c=u,u=arguments[1]||{},a=2),typeof u!="object"&&!jQuery.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((s=arguments[a])!=null)for(i in s){e=u[i],n=s[i],p=d(n);if(!l(e)&&!u.hasOwnProperty[i]&&p&&i!=="array"){u[i]=Object.create(n);continue}if(u===n)continue;c&&n&&(p||(t=v(n)))?(t?(t=!1,o=e&&v(e)?e:[]):o=e&&d(e)?e:{},i==="array"?u[i]=jQuery.extend(c,o,n):u[i]=h(c,o,n)):n!==undefined&&(u[i]=n)}return u}function p(e){return e?typeof e=="string"?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):e:e}function d(e){return e.replace(/^\s+|\s+$/g,"")}var r="undefined";t.evalPath=o,t.setPathVal=s,t.getPropNames=a,t.defined=l,t.jsToPath=f,t.findCaseInsensitiveProperty=u,t.fasterExtend=h,t.pick=c,t.trim=d,t.escapeHtml=p,t.supplant=i}),define("MIInterface",["require","exports","module","jsonLib"],function(e,t,n){(function(){function a(e,t,n){function N(e){for(var t=0,n=u.length;t<n;t++){var r=u[t];if(e.indexOf(r)===0)return!0}return!1}function C(t,n,r){function s(e,t,n){var o;t=t||"",i.push(t),r[t]=n||"object";for(var u in e){o=H(e[u]);if(o==="object"||o==="array")s(e[u],t+"."+u,o);else{var a=t+"."+u;i.push(a),r[a]=o}}}var i=[];return s(e,"chart"),i}n=n||"chart";var r=n+".",i={},s=t?["chart."+t.replace(r,"")]:C(e,"chart",i);t&&(i["chart."+t.replace(r,"")]=H(b(e,t.replace(r,""))));var o={agMismatch:{},typeLookup:i},u=[],a={},c={},h={},p=t,d,v,m,g;for(var y=0,E=s.length;y<E;y++){var t=s[y],S=t.replace("chart.",r),x=l(t,e,o,p);if(g=b(x,"invalid.message"))a[S]=g,x.type=i[t];(d=x.ui)?(v=d.element,m=d.type,v&&m?N(t)||f(S,x,e,c,a):h[S]=x):h[S]=x}for(var T in o.agMismatch)a["chart."+T]=k.describeAgMismatch(o.agMismatch[T]);return{data:{warnings:a,skeleton:c,otherPaths:h},getMiData:function(e){var t=this.data;return e=w(e),t.skeleton[e]},getWarnings:function(){return this.data.warnings}}}function f(e,t,n,r,i){function E(e,t){var n={description:e.description,members:{}},r=n.members,i,s={navigator:",column,line,area,marker,ohlc,candlestick,empty,",other:",column,line,area,marker,bubble,empty,"},o;t.sequence.indexOf("chartType,seriesType")===0&&e.members.bubble&&(t.chartType==="navigator"?o=s.navigator:o=s.other);for(var u in e.members){i=e.members[u];if(!o||o.indexOf(","+u+",")>-1)i.description?r[u]=i:r[u]={description:i}}return n}function S(e){var t={};for(var n in e)n!=="invalid"&&n!=="setting"&&n!=="sequence"&&(t[n]=e[n]);return t}var s={},o,u,a,f,l,c={},h,p=!1;u=s.value=b(n,e.replace("chart.",""));if(o=t.ui){s.template=(o.element||"")+"-"+(o.type||""),s.type=o.type||"";if(a=o.dropDownMembers){var d=s.dropDownInfo={eChain:o.eChain};if(!o.eChain.sequence)return;var v=o.eChain.sequence.split(",");d.name=v[0];for(var m=0,g=v.length;m<g;m++){var y=v[m],w=N(y);d[y]=E(w,o.eChain)}s.value=S(o.eChain)}}s.tokenSet=t.tokenSet,s.description=t.description,s.valDescription=t.valDescription,t.label&&(s.label=t.label);if(h=i[e])s.warning=h;r[e]=s}function l(e,t,n,r){function d(){l.cache={findMember:{},hasArrayGroups:{},evalPath:{},json:t}}var i,s,o,a={},f;r||!l.cache?d():l.cache.json!==t&&d(),f={json:t,fullPath:e,cache:l.cache,cycleCache:n};var c;e=w(e);var h=e.replace("chart.","");h==="chart"&&(h=h.replace("chart",""));if(m(t)){c=h.length?y(t,h,l.cache.evalPath):t,o=n.typeLookup[e],s=C(e,!1,c,f),o!=="object"&&o!=="array";if(s){a.description=s.description,a.valDescription=b(s,o+".description"),a.seeAlso=s.seealso,o==="string"&&(i=s.tokenSet||u.evalPath(s,"string.tokenSet"))&&(a.tokenSet=i),f.agMismatch&&(n||(n={agMismatch:{}}),n.agMismatch[f.agMismatch.path]=f.agMismatch,delete f.agMismatch),p(s,c,e,f,o),a.ui=f.ui,a.raw=s,s.name&&(a.label=s.name);if(s.docsPath||f.docsPath)a.docsPath=s.docsPath||f.docsPath}else f.invalid;f.invalid&&(a.invalid=f.invalid)}else a=O(e);return a}function c(e){function l(e){if(e.split(",").length===1&&e.indexOf("obj_")>-1)return"Types."+e.replace("obj_","")}var t=e.split("."),n="",r,i="";for(var s=0,o=t.length;s<o;s++){var a=t[s];s&&(i+="."),i+=a;if(o===1){JSCL.getApiObj(i)?n="Types."+i:JSCL.getApiEnum(i)&&(n="Enums."+i);if(n)return n}if(s===o-1&&o>1&&n.indexOf("Types.")===0)return n+="."+a,n;var f=N(i);(r=f.type)&&r.split(",").length===1&&(r.indexOf("obj_")>-1?(n="Types."+r.replace("obj_",""),i=r.replace("obj_","")):r==="array"?u.evalPath(f,"array.types").length===1&&(f=u.evalPath(f,"array.types.0"),n=l(f.type)):JSCL.getApiObj(i)?n="Types."+i:JSCL.getApiEnum(i)&&(n="Enums."+i))}return n}function h(e,t,n,r,s){r=r||{};var o,a,f,l;l=T(e.type);var c=[],h=[],p,m,g,y,w,E,x;x=s||H(t);if(l)if(e["obj_"+l])e=u.fasterExtend(!0,null,JSCL.getApiObj(l),e[e.type]);else if(!e.object||e.type.indexOf("obj_")>-1)e=_(e);if(e){y=e.type;if(y){var N=y.split(","),O=0,M=!1;for(var P=0,B=N.length;P<B;P++){var o=N[P];if(o==="number"){if(x==="number")return n&&(r.ui={element:e.ui||"TextBox",type:"number"}),!0;if(e.allowNull||e.number&&e.number.allowNull)if(t===null)return n&&(r.ui={element:e.ui||"TextBox",type:"number"}),!0;O++}else if(o==="date"){if(x==="date")return n&&(r.ui={element:e.ui||"TextBox",type:"date"}),!0;h.push("date"),O++}else if(o==="string"){if(x==="string"){if(!JSCL.jL||!(a=JSCL.jL.evalPath(e,"string.validator")))return r.ui={element:e.ui||"TextBox",type:"string"},!0;if(typeof a=="function"){var j=a(t,n,null,JSCL.getJSONapi());if(!j)return r.ui={element:e.ui||"TextBox",type:"string"},!0;p="Value "+t+" is not a valid string setting"}}h.push("string"),O++}else if(o==="bool"){if(x==="bool")return r.ui={element:e.ui||"CheckBox",type:"bool"},!0;h.push("bool"),O++}else if(o==="method"){if(x==="method")return r.ui={element:e.ui||"TextBox",type:"function"},!0;h.push("function"),O++}else if(o==="array"){if(x==="array"){var F=e[o],I,q;n?q=A(e,n,b(r,"cache.hasArrayGroups")):q=L(e),q&&(I=C.matchArrayGroup(e,t,r))&&(e=I);var R=e?e.ui:null;return r.ui={element:R,type:"array"},!0}O++}else if(o.indexOf("enum_")>-1){if(x==="string"){var U=D(o);m=S(t,U);if(typeof m.invalid===i)return d(m,r),!0;g=U,p='Value "'+t+'" setting is not defined by the ('+U+") enum options.",c.push(o)}else h.push(o);O++}}x!=="object"&&(p?(k(r.fullPath,p,r),f=!0):k(r.fullPath,"Property does not support a ("+x+") data type.",r));var z;r.ui={element:e.ui||z,type:x};if(r.invalid){c=c.concat(h),z=c.length>0?c[0]:"",r.ui.expectedType=z,z.length>0&&z.indexOf("enum_")===-1&&(z=v(e,z)),r.ui.element=e.ui||z;if(r.ui.element.indexOf("enum_")===0){var W={};W[g]="",d(W,r)}}return O!==N.length}if(e.pop)return!0}}function p(e,t,n,r,s){function Y(e){e.sort(function(e,t){function i(e){return e.indexOf("obj_")>-1?5:e.indexOf("iobj_")>-1?5:e.indexOf("object")>-1?4:e.indexOf("enum_")>-1?1:e.indexOf("flag_")>-1?3:2}var n=i(e),r=i(t);return n>r?1:n<r?-1:0})}r=r||{};var o,u,a,f;f=T(e.type);var l=[],c=[],h,m,g,y,w,E,x;x=s||H(t);if(e){y=e.type;if(y){var O=y.split(",");Y(O);var M=0,_=!1;for(var P in O){o=O[P];if(o==="number"){if(x==="number")return n&&(r.ui={element:e.ui||"TextBox",type:"number"}),!0;if(e.allowNull||e.number&&e.number.allowNull)if(t===null)return n&&(r.ui={element:e.ui||"TextBox",type:"number"}),!0;M++}else if(o==="date"){if(x==="date")return n&&(r.ui={element:e.ui||"TextBox",type:"date"}),!0;c.push("date"),M++}else if(o==="string"){if(x==="string"){if(!JSCL.jL||!(u=JSCL.jL.evalPath(e,"string.validator")))return r.ui={element:e.ui||"TextBox",type:"string"},!0;if(typeof u=="function"){var B=u(t,n,null,JSCL.getJSONapi());if(!B)return r.ui={element:e.ui||"TextBox",type:"string"},!0}}c.push("string"),M++}else if(o==="bool"){if(x==="bool")return r.ui={element:e.ui||"CheckBox",type:"bool"},!0;c.push("bool"),M++}else if(o==="method"){if(x==="method")return r.ui={element:e.ui||"TextBox",type:"function"},!0;c.push("function"),M++}else if(o==="array"){if(x==="array"){var j=e[o],F,I;n?I=A(e,n,b(r,"cache.hasArrayGroups")):I=L(e),I&&(F=C.matchArrayGroup(e,t,r))&&(e=F);var q=e?e.ui:null;return r.ui={element:q,type:"array"},!0}M++}else if(o.indexOf("enum_")>-1){if(x==="string"){var R=D(o);m=S(t,R);if(typeof m.invalid===i)return d(m,r),!0;g=R,h='Value "'+t+'" setting is not defined by the ('+R+") enum options.",l.push(o)}else c.push(o);M++}else if(o.indexOf("flag_")>-1){if(x==="string"){var R=D(o.replace("flag_","enum_")),U=JSCL.getApiEnum(o.replace("flag_","")),z=t.split(",");h="";for(var W=0,X=z.length;W<X;W++){var V=z[W];U.members[V]||(h='Value "'+t+'" setting is not defined by the ('+R+") enum options.")}r.ui={element:e.ui||"none",type:"string"};if(!h)return!0;l.push(o)}else c.push(o);M++}else if(o.indexOf("obj_")>-1){r.docsPath=o.replace("obj_","");var $;if($=p(N(o.replace("obj_","")),t,n,r,s))return!0;M++}}x!=="object"&&(h?(k(r.fullPath,h,r),a=!0):k(r.fullPath,"Property does not support a ("+x+") data type.",r));var J;r.ui={element:e.ui||J,type:x};if(r.invalid){l=l.concat(c),J=l.length>0?l[0]:"",r.ui.expectedType=J,J.length>0&&J.indexOf("enum_")===-1&&(J=v(e,J)),r.ui.element=e.ui||J;if(r.ui.element&&r.ui.element.indexOf("enum_")===0){var K={};K[g]="",d(K,r)}}return M!==O.length}if(e.pop){for(var P=0,Q=e.length;P<Q;P++){var G=e[P];if(p(G,t,n,r,s))return!0}return!0}}}function d(e,t){var n=E(e),r;for(var i=0,s=n.length;i<s;i++){r=n[i];if(r!=="setting"&&r!=="sequence"&&r!=="invalid")break}if(!e.sequence)return;r=e.sequence.split(",")[0];var o=JSCL.getApiEnum(r);t.ui||(t.ui={});var u=t.ui;u.element=o.ui||"DropDown",u.dropDownMembers=o.members,u.type="string",u.eChain=e}function v(e,t){switch(t){case"number":case"string":return"TextBox";case"bool":return"CheckBox";case"date":return"TextBox"}}function m(e){return typeof e===i&&e!==null?!1:!0}function g(){var e=arguments,t,n,r=e.length;for(t=0;t<r;t++){n=e[t];if(typeof n!==i&&n!==null)return n}}function y(e,t,n){n=n||{};var r,i;return r=n[t],r?r:(i=b(e,t),i&&(n[t]=i),i)}function b(e,t){var n=e,r;if(t){r=t.split(".");for(var i=0;n!==undefined&&i<r.length;i++)n=n[r[i]]}return n}function w(e){return e.replace(/\[([0-9]+)\]/g,".$1")}function S(e,t,n){function a(e,t){function a(e,t){var n=r(t),i=E(n.members),s,o,u,a,f={},l,c,h;e=x(e);for(u=0,a=i.length;u<a;u++){if(!(e.indexOf(i[u].toLowerCase())!==0||e.length!==i[u].length&&!n.members[i[u]].chain)){o=i[u];break}e.indexOf(i[u].toLowerCase())===0&&e.length!==i[u].length&&!n.members[i[u]].chain?h=i[u]:n.members[i[u]].isDefault&&(s=i[u])}return!o&&h&&(o=h),o||(o=s,c=!0),o?(e.indexOf(o.toLowerCase())===0?l=e.replace(o.toLowerCase(),""):l=e,{match:o,isDefault:c,chain:n.members[o].chain,value:l}):{invalid:e}}var r=JSCL.getApiEnum,s=!1,o={sequence:[]},u;o.setting=e,e=e.toLowerCase();while(!s){u=a(e,t);if(m(u[i]))u.value=u[i],s=!0;else{if(!u.isDefault||!n)o[t]=u.match,o.sequence.push(t);t=u.chain,e=u.value,!t&&e.length===0?s=!0:t?t=t.replace("enum_",""):t||(s=!0)}}return o.sequence=o.sequence.join(","),u.value.length>0&&(o.invalid=u.value),o}var r=t.split(","),i="invalid",s,o,u;for(o=0,u=r.length;o<u;o++){s=a(e,x(r[o]).replace("enum_",""));if(!s[i])break}return s}function x(e){return e.replace(/^\s+|\s+$/g,"")}function T(e){if(e&&e.indexOf("obj_")>-1){var t=e.split(",");for(var n in t){var r=t[n];if(r.indexOf("obj_")>-1)return r.substring(4)}}}function N(e,t,n,r){function a(e){return String.fromCharCode(e.charCodeAt(0)+32).concat(e.substr(1))}function f(e){var t,n=JSCL.getApiObj(e);if(typeof n!==i)return r.docsPath=e,n;n=JSCL.getApiEnum(e);if(typeof n!==i)return r.docsPath=e,n}function l(e,t,n,s){var o,f=!1,c,h=parseInt(t),p;if(typeof e===i)return;c=T(e.type);if(c)if(e["obj_"+c])e=u.fasterExtend(!0,null,JSCL.getApiObj(c),e[e.type]);else if(!e.object||!e.object[t])e=JSCL.getApiObj(c);if(e.type.indexOf("array")>-1)if(e.array.arrayType==="specific")c=T(e.array.types[0].type),c&&(o=JSCL.getApiObj(c).object);else if(e.array[0]&&h>=0){var d=[];for(p in e.array)d.push(e.array[p].types[h]);if(n)return;return d.length===1?d[0]:d}o||(o=typeof e.object!==i?e.object:null);if(o){var v=o[t],m;if(v)return r.docsPath+="."+t,v;for(p in o){if(p===t)return o[p];if(t.indexOf&&t.indexOf(p)===0){if(n)return t.substring(0,p.length);var g=a(t.substring(p.length));return l(o[p],g)}p==="*"&&(m=o[p]),f=!0}return m}}function c(e,t,n,r){var i,u;return n?(i=o[r],i?i:(u=l(e,t,n,r),u&&(o[r]=u),u)):(i=s[r],i?i:(u=l(e,t,n,r),u&&(s[r]=u),u))}function p(e,t){if(e.array&&e.array[0])for(var n in e.array){var r=e.array[n].types,i=!1;for(var s=0;s<r.length;s++)h(r[s],t[s],"",{light:!0})||(i=!0);if(!i)return e.array[n]}}N.findMember=l,N.matchArrayGroup=p,e=e.replace(/\.[0-9]+\./g,"."),e=e.replace(/\.[0-9]+/g,""),r=r||{};var d=e.split("."),v=f(d[0]),m,g,y,b,w;b=d[0],d.shift();for(var E=0,S=d.length;E<S;E++){g=d[E],b=b+"."+g,v=l(v,g,t,b);if(t&&v&&v.charAt)return v}if(t)return;if(typeof v==i)return;var x=T(v.type);if(typeof n!==i&&n.pop){if(x&&v.type.indexOf(",")===-1)return r.path=x,p(N(x),n);if(w=p(v,n))return w;if(x)if(w=p(N(x),n))return r.path=x,w}else if((x||v.type&&v.type.indexOf("enum_")>-1)&&v.type.indexOf(",")===-1){var C=x?x:v.type.substring(5),k={};k=f(C),v["obj_"+x]&&k.object&&(k.object=u.fasterExtend(!0,{},k.object,v["obj_"+x].object)),k.type=v.type||k.type,k.description=v.description||k.description,v=k}return v}function C(e,t,n,r){function z(e){return!isNaN(parseFloat(e))&&isFinite(e)}function W(e){var t=e.charCodeAt(0);return t>64&&t<91?String.fromCharCode(t+32).concat(e.substr(1)):e}function X(e){var t,n=JSCL.getApiObj(e);if(typeof n!==i)return r.docsPath=e,n;n=JSCL.getApiEnum(e);if(typeof n!==i)return r.docsPath=e,n}function V(e,t,n,s,o){o=o||{};var u,a,f=!1,l,c=parseInt(t),h,p=z(t);if(typeof e===i)return;e=_(e);if(e.arrayType){if(p)return e.types[t]}else if(e.type&&e.type.indexOf("array")>-1)if(m(e.types)){if(p)return e.types[t]}else if(e.array.arrayType){if(p)return o.cachePath=K(s),Object.create(e.array.types[0]);l=T(e.array.types[0].type);if(l){if(p)return a=JSCL.getApiObj(l),a;a=JSCL.getApiObj(l).object}}else{if(e.array.arrayType==="anyType")return e.array.types[0];if(e.array[0]&&c>=0){var d=[];for(h in e.array)(u=e.array[h].types[c])&&d.push(Object.create(u));if(n)return;return d.length===1?d[0]:d}}else if(l=T(e.type)){var v=function(e){var t={};return e?($.each(e,function(e,n){t[e]=$.extend({},n)}),t):{}},g={},y=!1;$.extend(!0,g,v(e["obj_"+l])),e=JSCL.getApiObj(l);while(!y)(l=T(e.type))?(a=e["obj_"+l],a?$.extend(!0,g,v(a)):y=!0,e=JSCL.getApiObj(l)):e.object?($.extend(!0,g,v({object:e.object})),y=!0):y=!0;a=g.object}a||(a=typeof e.object!==i?e.object:null);if(a){var b=a[t],w;if(b)return r.docsPath+="."+t,Object.create(b);for(h in a){if(h===t)return Object.create(a[h]);if(t.indexOf&&t.indexOf(h)===0){if(n)return t.substring(0,h.length);var E=W(t.substring(h.length));return V(a[h],E,!1,s)}h==="*"&&(w=a[h]),f=!0}w||(r.propertyMismatch={properties:a,search:t},k(s,"Property "+t+" is not defined.",r));if(w)return Object.create(w)}else p||k(s,"Property "+t+" is not defined.",r)}function J(e,t,n,i,s){var u,a,f=r.cache.findMember;return n?(u=o[i],u?u:(a=V(e,t,n,i),a&&(o[i]=a),a)):(u=f[i]||f[K(i)],u?(r.docsPath=u.docsPath,u):(a=V(e,t,n,i,s),a&&(a.docsPath=r.docsPath,s.cachePath?f[s.cachePath]=a:f[i]=a),a))}function K(e){return e.replace(/\.([0-9]+)$/,".[]")}function Q(e,t,n){n=n||{};var r=0,i={},s,o,u;n.cycleCache?o=n.cycleCache.typeLookup:o={},e=_(e);if(e.array&&e.array[0]){for(var a in e.array){var f=e.array[a].types,l=!1;u=!1;var c=-1;for(var p=0;p<f.length;p++)f[p].multi&&(u=!0,c=p);if(u&&f.length<t.length)while(f.length<t.length)f.splice(c,0,f[c]);if(f.length!==t.length)l=!0;else{s={index:a,path:n.fullPath,rawReference:e.array[a],length:f.length,matching:0,matchMap:[],types:[]},r++;for(var p=0;p<f.length;p++)s.types[p]=f[p].type,h(f[p],t[p],n.fullPath,n,o[n.fullPath+"."+p]||H(t[p]))?(s.matchMap[p]=!0,s.matching++):(l=!0,s.matchMap[p]=!1);if(!m(i.index)||i.matching<s.matching)i=s}if(!l)return delete n.invalid,e.array[a]}m(i.index)||(i={path:n.fullPath,rawReference:e}),n.invalid=i}}C.findMember=V,C.matchArrayGroup=Q,e=j(x(e)),r=r||{};var s=e.split("."),a=X(s[0]),f,l,c,p,d,v="",g,b,w={},E,S=r.cache.evalPath,L=r.cycleCache.typeLookup;p=s[0],s.shift();for(var O=0,D=s.length;O<D;O++){l=s[O],p=p+"."+l,v=p.replace("chart.",""),w={},a=J(a,l,t,p,w);var P=y(r.json,v,S),B=L[p];B==="array"&&a&&(g=A(a,w.cachePath||p,r.cache.hasArrayGroups))&&(E={fullPath:v,cycleCache:{typeLookup:L},cache:r.cache},b=Q(g,P,E),b&&O<D+1&&z(s[O+1])?a=b:E.invalid&&(r.agMismatch=E.invalid,O<D+1&&z(s[O+1])&&(a=E.invalid.rawReference)));if(t&&a&&a.charAt)return a}if(t)return;if(typeof a==i)return;var F=T(a.type);if(typeof n!==i&&n!==null&&n.pop){if(F&&a.type.indexOf(",")===-1){r.docsPath=F;var I=N(F,!1,P,r);return I?I:(I=M(F),I=_(I),Q(I,n))}if(d=Q(a,n,{cycleCache:{typeLookup:L}}))return d;if(F)if(d=Q(M(F),n))return r.path=F,d}else if((F||a.type&&a.type.indexOf("enum_")>-1)&&a.type.indexOf(",")===-1){var q=F?F:a.type.substring(5),R={};R=X(q),a["obj_"+F]&&R.object&&(R.object=u.fasterExtend(!0,{},R.object,a["obj_"+F].object)),R=Object.create(R),R.type=a.type||R.type,R.description=a.description||R.description;var U;U=a.name,a=R,m(U)&&(a.name=U)}return a}function k(e,t,n){function s(e){var t="";t+="The specified array does not match the length of any defined array groups.",t+="";if(e.matching>0){t="The specified array does not match the types of any defined array groups.",t+=" <br/>",t+="The closest match pattern for this arrayGroup is:<br/> ",t+=e.rawReference.description+"<br/>";var n=[];for(var r=0,i=e.matchMap.length;r<i;r++){var s=e.matchMap[r];s?n.push("("+e.types[r]+")"):n.push('<span class="invalid">('+e.types[r]+")</span>")}t+="Pattern: ["+n.join(", ")+"]"}return t}function o(e){function c(e,t){var n=0;for(var r=0,i=e.length;r<i;r++){var s=e[r],o=t[r];if(s!==o)break;n++}return n}var t="";t+="";var n=[],r,i;if(i=e.properties){for(var s in i){var o=c(e.search,s);o>1&&n.push([s,o])}n.length>0&&(n.sort(function(e,t){function i(e){return 50-e[1]}var n=i(e),r=i(t);return n>r?1:n<r?-1:0}),r=n[0][0],t+=" Did you mean ("+r+")?")}if(e.matching>0){t+="The closest match pattern for this arrayGroup is:<br/> ",t+=e.rawReference.description+"<br/>";var u=[];for(var a=0,f=e.matchMap.length;a<f;a++){var l=e.matchMap[a];l?u.push("("+e.types[a]+")"):u.push('<span class="invalid">('+e.types[a]+")</span>")}t+="Pattern: ["+u.join(", ")+"]"}return t}var r,i;k.describeAgMismatch=s;if(r=n.agMismatch)t+=s(r),delete n.agMismatch;else if(i=n.propertyMismatch)t+=o(i),delete n.propMismatch;n.invalid={path:e,message:t}}function L(e){if(e.type.indexOf("obj_")===-1&&e.type.indexOf("array")===-1)return;e=_(e);if(e.type&&e.type.indexOf("array")>-1){var t=e.array||e;if(t.arrayType!=="specific"&&t[0])return e}}function A(e,t,n){function o(e){return e.replace(/\.([0-9]+)$/,".[]")}n=n||{};var r,i,s={};return r=n[t]||n[t.replace(/\.([0-9]+)$/,".[]")],r?r:(i=L(e),i&&(n[t]=i),i)}function O(e,t){e=e.replace(/\.[0-9]+\./g,"."),e=e.replace(/\.[0-9]+/g,"");var n=s[e];if(n)return n;var r=N(e);return r&&(s[e]=r),r}function M(e,t){e=e.replace(/\.[0-9]+\./g,"."),e=e.replace(/\.[0-9]+/g,"");var n=s[e];if(n)return n;var r=N(e);return r&&(s[e]=r),r}function _(e){function s(e,t){for(var n=t.length-1;n>=0;n--)t[n]===e&&t.splice(n,1)}function o(e,t){var n={},r=0;for(var i in e)n[r]=e[i],r++;for(var s in t)n[r]=t[s],r++;return n}function a(e,t){l(e,t)||e.push(t)}function f(e,t){for(var n=0,r=t.length;n<r;n++)l(e,t[n])||e.push(t[n])}function l(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return!0}var t=T(e.type),n;if(t){e=Object.create(e);var r=e.type.split(",");if(e["obj_"+t])e=u.fasterExtend(!0,{},JSCL.getApiObj(t),e[e.type]);else if(e.object){var i=JSCL.getApiObj(t);s("obj_"+t,r),e.type=r.join(","),e.array&&i.array&&(e.array=o(e.array,i.array),a(r,"array")),e=u.fasterExtend(!0,{},i,e),f(r,i.type.split(",")),e.type=r.join(",");if(n=T(i.type))e=_(e)}else{var i=JSCL.getApiObj(t);s("obj_"+t,r),f(r,i.type.split(",")),e.type=r.join(","),e=u.fasterExtend(!0,{},i,e)}}return Object.create(e)}function D(e){if(e&&e.indexOf("enum_")>-1){var t=e.split(",");for(var n in t){var r=t[n];if(r.indexOf("enum_")>-1)return r.substring(5)}}}function P(e){var t=B(e);return t==="boolean"?"bool":t==="function"?"method":t}function H(e){var t=typeof e;if(t!==i){if(t==="boolean")return"bool";if(t==="number")return"number";if(t==="function")return"method";if(e&&e.pop)return"array";if(t==="string")return"string";if(t==="object")return e&&e.getUTCMilliseconds?"date":"object"}return i}function B(e){var t=typeof e;if(t!==i){if(t==="boolean")return"boolean";if(t==="number")return"number";if(t==="function")return"function";if(e&&e.pop)return"array";if(t==="string")return"string";if(t==="object")return e&&e.getUTCMilliseconds?"date":"object"}return i}function j(e){if(e)return e.replace(/([a-zA-Z]+)_/g,"$1.")}var n=" ",r="",i="undefined",s={},o={};typeof Object.create!="function"&&(Object.create=function(e){function t(){}return t.prototype=e,new t});var u=e("jsonLib");t.getMiData=l,t.processJson=a,t.evalPath=b,t.getMiValType=H,t.evalDocsPath=c;var E=function(e){var t=[],n=0;for(t[n++]in e);return t}})()}),define("miinterface",["require","exports","module","jsonLib"],function(e,t,n){(function(){function a(e,t,n){function N(e){for(var t=0,n=u.length;t<n;t++){var r=u[t];if(e.indexOf(r)===0)return!0}return!1}function C(t,n,r){function s(e,t,n){var o;t=t||"",i.push(t),r[t]=n||"object";for(var u in e){o=H(e[u]);if(o==="object"||o==="array")s(e[u],t+"."+u,o);else{var a=t+"."+u;i.push(a),r[a]=o}}}var i=[];return s(e,"chart"),i}n=n||"chart";var r=n+".",i={},s=t?["chart."+t.replace(r,"")]:C(e,"chart",i);t&&(i["chart."+t.replace(r,"")]=H(b(e,t.replace(r,""))));var o={agMismatch:{},typeLookup:i},u=[],a={},c={},h={},p=t,d,v,m,g;for(var y=0,E=s.length;y<E;y++){var t=s[y],S=t.replace("chart.",r),x=l(t,e,o,p);if(g=b(x,"invalid.message"))a[S]=g,x.type=i[t];(d=x.ui)?(v=d.element,m=d.type,v&&m?N(t)||f(S,x,e,c,a):h[S]=x):h[S]=x}for(var T in o.agMismatch)a["chart."+T]=k.describeAgMismatch(o.agMismatch[T]);return{data:{warnings:a,skeleton:c,otherPaths:h},getMiData:function(e){var t=this.data;return e=w(e),t.skeleton[e]},getWarnings:function(){return this.data.warnings}}}function f(e,t,n,r,i){function E(e,t){var n={description:e.description,members:{}},r=n.members,i,s={navigator:",column,line,area,marker,ohlc,candlestick,empty,",other:",column,line,area,marker,bubble,empty,"},o;t.sequence.indexOf("chartType,seriesType")===0&&e.members.bubble&&(t.chartType==="navigator"?o=s.navigator:o=s.other);for(var u in e.members){i=e.members[u];if(!o||o.indexOf(","+u+",")>-1)i.description?r[u]=i:r[u]={description:i}}return n}function S(e){var t={};for(var n in e)n!=="invalid"&&n!=="setting"&&n!=="sequence"&&(t[n]=e[n]);return t}var s={},o,u,a,f,l,c={},h,p=!1;u=s.value=b(n,e.replace("chart.",""));if(o=t.ui){s.template=(o.element||"")+"-"+(o.type||""),s.type=o.type||"";if(a=o.dropDownMembers){var d=s.dropDownInfo={eChain:o.eChain};if(!o.eChain.sequence)return;var v=o.eChain.sequence.split(",");d.name=v[0];for(var m=0,g=v.length;m<g;m++){var y=v[m],w=N(y);d[y]=E(w,o.eChain)}s.value=S(o.eChain)}}s.tokenSet=t.tokenSet,s.description=t.description,s.valDescription=t.valDescription,t.label&&(s.label=t.label);if(h=i[e])s.warning=h;r[e]=s}function l(e,t,n,r){function d(){l.cache={findMember:{},hasArrayGroups:{},evalPath:{},json:t}}var i,s,o,a={},f;r||!l.cache?d():l.cache.json!==t&&d(),f={json:t,fullPath:e,cache:l.cache,cycleCache:n};var c;e=w(e);var h=e.replace("chart.","");h==="chart"&&(h=h.replace("chart",""));if(m(t)){c=h.length?y(t,h,l.cache.evalPath):t,o=n.typeLookup[e],s=C(e,!1,c,f),o!=="object"&&o!=="array";if(s){a.description=s.description,a.valDescription=b(s,o+".description"),a.seeAlso=s.seealso,o==="string"&&(i=s.tokenSet||u.evalPath(s,"string.tokenSet"))&&(a.tokenSet=i),f.agMismatch&&(n||(n={agMismatch:{}}),n.agMismatch[f.agMismatch.path]=f.agMismatch,delete f.agMismatch),p(s,c,e,f,o),a.ui=f.ui,a.raw=s,s.name&&(a.label=s.name);if(s.docsPath||f.docsPath)a.docsPath=s.docsPath||f.docsPath}else f.invalid;f.invalid&&(a.invalid=f.invalid)}else a=O(e);return a}function c(e){function l(e){if(e.split(",").length===1&&e.indexOf("obj_")>-1)return"Types."+e.replace("obj_","")}var t=e.split("."),n="",r,i="";for(var s=0,o=t.length;s<o;s++){var a=t[s];s&&(i+="."),i+=a;if(o===1){JSCL.getApiObj(i)?n="Types."+i:JSCL.getApiEnum(i)&&(n="Enums."+i);if(n)return n}if(s===o-1&&o>1&&n.indexOf("Types.")===0)return n+="."+a,n;var f=N(i);(r=f.type)&&r.split(",").length===1&&(r.indexOf("obj_")>-1?(n="Types."+r.replace("obj_",""),i=r.replace("obj_","")):r==="array"?u.evalPath(f,"array.types").length===1&&(f=u.evalPath(f,"array.types.0"),n=l(f.type)):JSCL.getApiObj(i)?n="Types."+i:JSCL.getApiEnum(i)&&(n="Enums."+i))}return n}function h(e,t,n,r,s){r=r||{};var o,a,f,l;l=T(e.type);var c=[],h=[],p,m,g,y,w,E,x;x=s||H(t);if(l)if(e["obj_"+l])e=u.fasterExtend(!0,null,JSCL.getApiObj(l),e[e.type]);else if(!e.object||e.type.indexOf("obj_")>-1)e=_(e);if(e){y=e.type;if(y){var N=y.split(","),O=0,M=!1;for(var P=0,B=N.length;P<B;P++){var o=N[P];if(o==="number"){if(x==="number")return n&&(r.ui={element:e.ui||"TextBox",type:"number"}),!0;if(e.allowNull||e.number&&e.number.allowNull)if(t===null)return n&&(r.ui={element:e.ui||"TextBox",type:"number"}),!0;O++}else if(o==="date"){if(x==="date")return n&&(r.ui={element:e.ui||"TextBox",type:"date"}),!0;h.push("date"),O++}else if(o==="string"){if(x==="string"){if(!JSCL.jL||!(a=JSCL.jL.evalPath(e,"string.validator")))return r.ui={element:e.ui||"TextBox",type:"string"},!0;if(typeof a=="function"){var j=a(t,n,null,JSCL.getJSONapi());if(!j)return r.ui={element:e.ui||"TextBox",type:"string"},!0;p="Value "+t+" is not a valid string setting"}}h.push("string"),O++}else if(o==="bool"){if(x==="bool")return r.ui={element:e.ui||"CheckBox",type:"bool"},!0;h.push("bool"),O++}else if(o==="method"){if(x==="method")return r.ui={element:e.ui||"TextBox",type:"function"},!0;h.push("function"),O++}else if(o==="array"){if(x==="array"){var F=e[o],I,q;n?q=A(e,n,b(r,"cache.hasArrayGroups")):q=L(e),q&&(I=C.matchArrayGroup(e,t,r))&&(e=I);var R=e?e.ui:null;return r.ui={element:R,type:"array"},!0}O++}else if(o.indexOf("enum_")>-1){if(x==="string"){var U=D(o);m=S(t,U);if(typeof m.invalid===i)return d(m,r),!0;g=U,p='Value "'+t+'" setting is not defined by the ('+U+") enum options.",c.push(o)}else h.push(o);O++}}x!=="object"&&(p?(k(r.fullPath,p,r),f=!0):k(r.fullPath,"Property does not support a ("+x+") data type.",r));var z;r.ui={element:e.ui||z,type:x};if(r.invalid){c=c.concat(h),z=c.length>0?c[0]:"",r.ui.expectedType=z,z.length>0&&z.indexOf("enum_")===-1&&(z=v(e,z)),r.ui.element=e.ui||z;if(r.ui.element.indexOf("enum_")===0){var W={};W[g]="",d(W,r)}}return O!==N.length}if(e.pop)return!0}}function p(e,t,n,r,s){function Y(e){e.sort(function(e,t){function i(e){return e.indexOf("obj_")>-1?5:e.indexOf("iobj_")>-1?5:e.indexOf("object")>-1?4:e.indexOf("enum_")>-1?1:e.indexOf("flag_")>-1?3:2}var n=i(e),r=i(t);return n>r?1:n<r?-1:0})}r=r||{};var o,u,a,f;f=T(e.type);var l=[],c=[],h,m,g,y,w,E,x;x=s||H(t);if(e){y=e.type;if(y){var O=y.split(",");Y(O);var M=0,_=!1;for(var P in O){o=O[P];if(o==="number"){if(x==="number")return n&&(r.ui={element:e.ui||"TextBox",type:"number"}),!0;if(e.allowNull||e.number&&e.number.allowNull)if(t===null)return n&&(r.ui={element:e.ui||"TextBox",type:"number"}),!0;M++}else if(o==="date"){if(x==="date")return n&&(r.ui={element:e.ui||"TextBox",type:"date"}),!0;c.push("date"),M++}else if(o==="string"){if(x==="string"){if(!JSCL.jL||!(u=JSCL.jL.evalPath(e,"string.validator")))return r.ui={element:e.ui||"TextBox",type:"string"},!0;if(typeof u=="function"){var B=u(t,n,null,JSCL.getJSONapi());if(!B)return r.ui={element:e.ui||"TextBox",type:"string"},!0}}c.push("string"),M++}else if(o==="bool"){if(x==="bool")return r.ui={element:e.ui||"CheckBox",type:"bool"},!0;c.push("bool"),M++}else if(o==="method"){if(x==="method")return r.ui={element:e.ui||"TextBox",type:"function"},!0;c.push("function"),M++}else if(o==="array"){if(x==="array"){var j=e[o],F,I;n?I=A(e,n,b(r,"cache.hasArrayGroups")):I=L(e),I&&(F=C.matchArrayGroup(e,t,r))&&(e=F);var q=e?e.ui:null;return r.ui={element:q,type:"array"},!0}M++}else if(o.indexOf("enum_")>-1){if(x==="string"){var R=D(o);m=S(t,R);if(typeof m.invalid===i)return d(m,r),!0;g=R,h='Value "'+t+'" setting is not defined by the ('+R+") enum options.",l.push(o)}else c.push(o);M++}else if(o.indexOf("flag_")>-1){if(x==="string"){var R=D(o.replace("flag_","enum_")),U=JSCL.getApiEnum(o.replace("flag_","")),z=t.split(",");h="";for(var W=0,X=z.length;W<X;W++){var V=z[W];U.members[V]||(h='Value "'+t+'" setting is not defined by the ('+R+") enum options.")}r.ui={element:e.ui||"none",type:"string"};if(!h)return!0;l.push(o)}else c.push(o);M++}else if(o.indexOf("obj_")>-1){r.docsPath=o.replace("obj_","");var $;if($=p(N(o.replace("obj_","")),t,n,r,s))return!0;M++}}x!=="object"&&(h?(k(r.fullPath,h,r),a=!0):k(r.fullPath,"Property does not support a ("+x+") data type.",r));var J;r.ui={element:e.ui||J,type:x};if(r.invalid){l=l.concat(c),J=l.length>0?l[0]:"",r.ui.expectedType=J,J.length>0&&J.indexOf("enum_")===-1&&(J=v(e,J)),r.ui.element=e.ui||J;if(r.ui.element&&r.ui.element.indexOf("enum_")===0){var K={};K[g]="",d(K,r)}}return M!==O.length}if(e.pop){for(var P=0,Q=e.length;P<Q;P++){var G=e[P];if(p(G,t,n,r,s))return!0}return!0}}}function d(e,t){var n=E(e),r;for(var i=0,s=n.length;i<s;i++){r=n[i];if(r!=="setting"&&r!=="sequence"&&r!=="invalid")break}if(!e.sequence)return;r=e.sequence.split(",")[0];var o=JSCL.getApiEnum(r);t.ui||(t.ui={});var u=t.ui;u.element=o.ui||"DropDown",u.dropDownMembers=o.members,u.type="string",u.eChain=e}function v(e,t){switch(t){case"number":case"string":return"TextBox";case"bool":return"CheckBox";case"date":return"TextBox"}}function m(e){return typeof e===i&&e!==null?!1:!0}function g(){var e=arguments,t,n,r=e.length;for(t=0;t<r;t++){n=e[t];if(typeof n!==i&&n!==null)return n}}function y(e,t,n){n=n||{};var r,i;return r=n[t],r?r:(i=b(e,t),i&&(n[t]=i),i)}function b(e,t){var n=e,r;if(t){r=t.split(".");for(var i=0;n!==undefined&&i<r.length;i++)n=n[r[i]]}return n}function w(e){return e.replace(/\[([0-9]+)\]/g,".$1")}function S(e,t,n){function a(e,t){function a(e,t){var n=r(t),i=E(n.members),s,o,u,a,f={},l,c,h;e=x(e);for(u=0,a=i.length;u<a;u++){if(!(e.indexOf(i[u].toLowerCase())!==0||e.length!==i[u].length&&!n.members[i[u]].chain)){o=i[u];break}e.indexOf(i[u].toLowerCase())===0&&e.length!==i[u].length&&!n.members[i[u]].chain?h=i[u]:n.members[i[u]].isDefault&&(s=i[u])}return!o&&h&&(o=h),o||(o=s,c=!0),o?(e.indexOf(o.toLowerCase())===0?l=e.replace(o.toLowerCase(),""):l=e,{match:o,isDefault:c,chain:n.members[o].chain,value:l}):{invalid:e}}var r=JSCL.getApiEnum,s=!1,o={sequence:[]},u;o.setting=e,e=e.toLowerCase();while(!s){u=a(e,t);if(m(u[i]))u.value=u[i],s=!0;else{if(!u.isDefault||!n)o[t]=u.match,o.sequence.push(t);t=u.chain,e=u.value,!t&&e.length===0?s=!0:t?t=t.replace("enum_",""):t||(s=!0)}}return o.sequence=o.sequence.join(","),u.value.length>0&&(o.invalid=u.value),o}var r=t.split(","),i="invalid",s,o,u;for(o=0,u=r.length;o<u;o++){s=a(e,x(r[o]).replace("enum_",""));if(!s[i])break}return s}function x(e){return e.replace(/^\s+|\s+$/g,"")}function T(e){if(e&&e.indexOf("obj_")>-1){var t=e.split(",");for(var n in t){var r=t[n];if(r.indexOf("obj_")>-1)return r.substring(4)}}}function N(e,t,n,r){function a(e){return String.fromCharCode(e.charCodeAt(0)+32).concat(e.substr(1))}function f(e){var t,n=JSCL.getApiObj(e);if(typeof n!==i)return r.docsPath=e,n;n=JSCL.getApiEnum(e);if(typeof n!==i)return r.docsPath=e,n}function l(e,t,n,s){var o,f=!1,c,h=parseInt(t),p;if(typeof e===i)return;c=T(e.type);if(c)if(e["obj_"+c])e=u.fasterExtend(!0,null,JSCL.getApiObj(c),e[e.type]);else if(!e.object||!e.object[t])e=JSCL.getApiObj(c);if(e.type.indexOf("array")>-1)if(e.array.arrayType==="specific")c=T(e.array.types[0].type),c&&(o=JSCL.getApiObj(c).object);else if(e.array[0]&&h>=0){var d=[];for(p in e.array)d.push(e.array[p].types[h]);if(n)return;return d.length===1?d[0]:d}o||(o=typeof e.object!==i?e.object:null);if(o){var v=o[t],m;if(v)return r.docsPath+="."+t,v;for(p in o){if(p===t)return o[p];if(t.indexOf&&t.indexOf(p)===0){if(n)return t.substring(0,p.length);var g=a(t.substring(p.length));return l(o[p],g)}p==="*"&&(m=o[p]),f=!0}return m}}function c(e,t,n,r){var i,u;return n?(i=o[r],i?i:(u=l(e,t,n,r),u&&(o[r]=u),u)):(i=s[r],i?i:(u=l(e,t,n,r),u&&(s[r]=u),u))}function p(e,t){if(e.array&&e.array[0])for(var n in e.array){var r=e.array[n].types,i=!1;for(var s=0;s<r.length;s++)h(r[s],t[s],"",{light:!0})||(i=!0);if(!i)return e.array[n]}}N.findMember=l,N.matchArrayGroup=p,e=e.replace(/\.[0-9]+\./g,"."),e=e.replace(/\.[0-9]+/g,""),r=r||{};var d=e.split("."),v=f(d[0]),m,g,y,b,w;b=d[0],d.shift();for(var E=0,S=d.length;E<S;E++){g=d[E],b=b+"."+g,v=l(v,g,t,b);if(t&&v&&v.charAt)return v}if(t)return;if(typeof v==i)return;var x=T(v.type);if(typeof n!==i&&n.pop){if(x&&v.type.indexOf(",")===-1)return r.path=x,p(N(x),n);if(w=p(v,n))return w;if(x)if(w=p(N(x),n))return r.path=x,w}else if((x||v.type&&v.type.indexOf("enum_")>-1)&&v.type.indexOf(",")===-1){var C=x?x:v.type.substring(5),k={};k=f(C),v["obj_"+x]&&k.object&&(k.object=u.fasterExtend(!0,{},k.object,v["obj_"+x].object)),k.type=v.type||k.type,k.description=v.description||k.description,v=k}return v}function C(e,t,n,r){function z(e){return!isNaN(parseFloat(e))&&isFinite(e)}function W(e){var t=e.charCodeAt(0);return t>64&&t<91?String.fromCharCode(t+32).concat(e.substr(1)):e}function X(e){var t,n=JSCL.getApiObj(e);if(typeof n!==i)return r.docsPath=e,n;n=JSCL.getApiEnum(e);if(typeof n!==i)return r.docsPath=e,n}function V(e,t,n,s,o){o=o||{};var u,a,f=!1,l,c=parseInt(t),h,p=z(t);if(typeof e===i)return;e=_(e);if(e.arrayType){if(p)return e.types[t]}else if(e.type&&e.type.indexOf("array")>-1)if(m(e.types)){if(p)return e.types[t]}else if(e.array.arrayType){if(p)return o.cachePath=K(s),Object.create(e.array.types[0]);l=T(e.array.types[0].type);if(l){if(p)return a=JSCL.getApiObj(l),a;a=JSCL.getApiObj(l).object}}else{if(e.array.arrayType==="anyType")return e.array.types[0];if(e.array[0]&&c>=0){var d=[];for(h in e.array)(u=e.array[h].types[c])&&d.push(Object.create(u));if(n)return;return d.length===1?d[0]:d}}else if(l=T(e.type)){var v=function(e){var t={};return e?($.each(e,function(e,n){t[e]=$.extend({},n)}),t):{}},g={},y=!1;$.extend(!0,g,v(e["obj_"+l])),e=JSCL.getApiObj(l);while(!y)(l=T(e.type))?(a=e["obj_"+l],a?$.extend(!0,g,v(a)):y=!0,e=JSCL.getApiObj(l)):e.object?($.extend(!0,g,v({object:e.object})),y=!0):y=!0;a=g.object}a||(a=typeof e.object!==i?e.object:null);if(a){var b=a[t],w;if(b)return r.docsPath+="."+t,Object.create(b);for(h in a){if(h===t)return Object.create(a[h]);if(t.indexOf&&t.indexOf(h)===0){if(n)return t.substring(0,h.length);var E=W(t.substring(h.length));return V(a[h],E,!1,s)}h==="*"&&(w=a[h]),f=!0}w||(r.propertyMismatch={properties:a,search:t},k(s,"Property "+t+" is not defined.",r));if(w)return Object.create(w)}else p||k(s,"Property "+t+" is not defined.",r)}function J(e,t,n,i,s){var u,a,f=r.cache.findMember;return n?(u=o[i],u?u:(a=V(e,t,n,i),a&&(o[i]=a),a)):(u=f[i]||f[K(i)],u?(r.docsPath=u.docsPath,u):(a=V(e,t,n,i,s),a&&(a.docsPath=r.docsPath,s.cachePath?f[s.cachePath]=a:f[i]=a),a))}function K(e){return e.replace(/\.([0-9]+)$/,".[]")}function Q(e,t,n){n=n||{};var r=0,i={},s,o,u;n.cycleCache?o=n.cycleCache.typeLookup:o={},e=_(e);if(e.array&&e.array[0]){for(var a in e.array){var f=e.array[a].types,l=!1;u=!1;var c=-1;for(var p=0;p<f.length;p++)f[p].multi&&(u=!0,c=p);if(u&&f.length<t.length)while(f.length<t.length)f.splice(c,0,f[c]);if(f.length!==t.length)l=!0;else{s={index:a,path:n.fullPath,rawReference:e.array[a],length:f.length,matching:0,matchMap:[],types:[]},r++;for(var p=0;p<f.length;p++)s.types[p]=f[p].type,h(f[p],t[p],n.fullPath,n,o[n.fullPath+"."+p]||H(t[p]))?(s.matchMap[p]=!0,s.matching++):(l=!0,s.matchMap[p]=!1);if(!m(i.index)||i.matching<s.matching)i=s}if(!l)return delete n.invalid,e.array[a]}m(i.index)||(i={path:n.fullPath,rawReference:e}),n.invalid=i}}C.findMember=V,C.matchArrayGroup=Q,e=j(x(e)),r=r||{};var s=e.split("."),a=X(s[0]),f,l,c,p,d,v="",g,b,w={},E,S=r.cache.evalPath,L=r.cycleCache.typeLookup;p=s[0],s.shift();for(var O=0,D=s.length;O<D;O++){l=s[O],p=p+"."+l,v=p.replace("chart.",""),w={},a=J(a,l,t,p,w);var P=y(r.json,v,S),B=L[p];B==="array"&&a&&(g=A(a,w.cachePath||p,r.cache.hasArrayGroups))&&(E={fullPath:v,cycleCache:{typeLookup:L},cache:r.cache},b=Q(g,P,E),b&&O<D+1&&z(s[O+1])?a=b:E.invalid&&(r.agMismatch=E.invalid,O<D+1&&z(s[O+1])&&(a=E.invalid.rawReference)));if(t&&a&&a.charAt)return a}if(t)return;if(typeof a==i)return;var F=T(a.type);if(typeof n!==i&&n!==null&&n.pop){if(F&&a.type.indexOf(",")===-1){r.docsPath=F;var I=N(F,!1,P,r);return I?I:(I=M(F),I=_(I),Q(I,n))}if(d=Q(a,n,{cycleCache:{typeLookup:L}}))return d;if(F)if(d=Q(M(F),n))return r.path=F,d}else if((F||a.type&&a.type.indexOf("enum_")>-1)&&a.type.indexOf(",")===-1){var q=F?F:a.type.substring(5),R={};R=X(q),a["obj_"+F]&&R.object&&(R.object=u.fasterExtend(!0,{},R.object,a["obj_"+F].object)),R=Object.create(R),R.type=a.type||R.type,R.description=a.description||R.description;var U;U=a.name,a=R,m(U)&&(a.name=U)}return a}function k(e,t,n){function s(e){var t="";t+="The specified array does not match the length of any defined array groups.",t+="";if(e.matching>0){t="The specified array does not match the types of any defined array groups.",t+=" <br/>",t+="The closest match pattern for this arrayGroup is:<br/> ",t+=e.rawReference.description+"<br/>";var n=[];for(var r=0,i=e.matchMap.length;r<i;r++){var s=e.matchMap[r];s?n.push("("+e.types[r]+")"):n.push('<span class="invalid">('+e.types[r]+")</span>")}t+="Pattern: ["+n.join(", ")+"]"}return t}function o(e){function c(e,t){var n=0;for(var r=0,i=e.length;r<i;r++){var s=e[r],o=t[r];if(s!==o)break;n++}return n}var t="";t+="";var n=[],r,i;if(i=e.properties){for(var s in i){var o=c(e.search,s);o>1&&n.push([s,o])}n.length>0&&(n.sort(function(e,t){function i(e){return 50-e[1]}var n=i(e),r=i(t);return n>r?1:n<r?-1:0}),r=n[0][0],t+=" Did you mean ("+r+")?")}if(e.matching>0){t+="The closest match pattern for this arrayGroup is:<br/> ",t+=e.rawReference.description+"<br/>";var u=[];for(var a=0,f=e.matchMap.length;a<f;a++){var l=e.matchMap[a];l?u.push("("+e.types[a]+")"):u.push('<span class="invalid">('+e.types[a]+")</span>")}t+="Pattern: ["+u.join(", ")+"]"}return t}var r,i;k.describeAgMismatch=s;if(r=n.agMismatch)t+=s(r),delete n.agMismatch;else if(i=n.propertyMismatch)t+=o(i),delete n.propMismatch;n.invalid={path:e,message:t}}function L(e){if(e.type.indexOf("obj_")===-1&&e.type.indexOf("array")===-1)return;e=_(e);if(e.type&&e.type.indexOf("array")>-1){var t=e.array||e;if(t.arrayType!=="specific"&&t[0])return e}}function A(e,t,n){function o(e){return e.replace(/\.([0-9]+)$/,".[]")}n=n||{};var r,i,s={};return r=n[t]||n[t.replace(/\.([0-9]+)$/,".[]")],r?r:(i=L(e),i&&(n[t]=i),i)}function O(e,t){e=e.replace(/\.[0-9]+\./g,"."),e=e.replace(/\.[0-9]+/g,"");var n=s[e];if(n)return n;var r=N(e);return r&&(s[e]=r),r}function M(e,t){e=e.replace(/\.[0-9]+\./g,"."),e=e.replace(/\.[0-9]+/g,"");var n=s[e];if(n)return n;var r=N(e);return r&&(s[e]=r),r}function _(e){function s(e,t){for(var n=t.length-1;n>=0;n--)t[n]===e&&t.splice(n,1)}function o(e,t){var n={},r=0;for(var i in e)n[r]=e[i],r++;for(var s in t)n[r]=t[s],r++;return n}function a(e,t){l(e,t)||e.push(t)}function f(e,t){for(var n=0,r=t.length;n<r;n++)l(e,t[n])||e.push(t[n])}function l(e,t){for(var n=e.length-1;n>=0;n--)if(e[n]===t)return!0}var t=T(e.type),n;if(t){e=Object.create(e);var r=e.type.split(",");if(e["obj_"+t])e=u.fasterExtend(!0,{},JSCL.getApiObj(t),e[e.type]);else if(e.object){var i=JSCL.getApiObj(t);s("obj_"+t,r),e.type=r.join(","),e.array&&i.array&&(e.array=o(e.array,i.array),a(r,"array")),e=u.fasterExtend(!0,{},i,e),f(r,i.type.split(",")),e.type=r.join(",");if(n=T(i.type))e=_(e)}else{var i=JSCL.getApiObj(t);s("obj_"+t,r),f(r,i.type.split(",")),e.type=r.join(","),e=u.fasterExtend(!0,{},i,e)}}return Object.create(e)}function D(e){if(e&&e.indexOf("enum_")>-1){var t=e.split(",");for(var n in t){var r=t[n];if(r.indexOf("enum_")>-1)return r.substring(5)}}}function P(e){var t=B(e);return t==="boolean"?"bool":t==="function"?"method":t}function H(e){var t=typeof e;if(t!==i){if(t==="boolean")return"bool";if(t==="number")return"number";if(t==="function")return"method";if(e&&e.pop)return"array";if(t==="string")return"string";if(t==="object")return e&&e.getUTCMilliseconds?"date":"object"}return i}function B(e){var t=typeof e;if(t!==i){if(t==="boolean")return"boolean";if(t==="number")return"number";if(t==="function")return"function";if(e&&e.pop)return"array";if(t==="string")return"string";if(t==="object")return e&&e.getUTCMilliseconds?"date":"object"}return i}function j(e){if(e)return e.replace(/([a-zA-Z]+)_/g,"$1.")}var n=" ",r="",i="undefined",s={},o={};typeof Object.create!="function"&&(Object.create=function(e){function t(){}return t.prototype=e,new t});var u=e("jsonLib");t.getMiData=l,t.processJson=a,t.evalPath=b,t.getMiValType=H,t.evalDocsPath=c;var E=function(e){var t=[],n=0;for(t[n++]in e);return t}})()}),define("strings",["require","exports","module"],function(e,t,n){t.presets={debug:!1,defaultStrings:{defaultDocText:"Please click the UI or code editor for relevant documentation."},hover:{textboxCode:"This input for the {label} property represents code. Click to focus cursor into the code editor.",textboxString:"Click to edit this string value of the {label} property.",textboxNumber:"Click to edit the numeric value of the {label} property.",checkbox:"Click to toggle the value of the {label} property.",label:"Click to edit the value of {label} in code.",subfolder:"Click to toggle expansion of [{path}]",hoverUIDropdown:"Click to view {label} dropdown options.",hoverUIDropdownChain:"Click to view {subID} dropdown options of the {label} property.",tokenName:"Clicking this token will insert it into the string at the current cursor position.",toggleChildrenExpansion:"Expand/Collapse all child nodes.","login-reset-password":"Click to reset your password"},click:{textboxNumber:"Use the up and down arrows to increment/decrement value",textboxString:"Edit string value of the {label} property."},other:{textboxNumberInvalid:"The current value is not a valid number. Please correct it.",UIDisabled:"Loading UI...",UIDisabledError:"UI cannot render. Please see the Warnings tab for more information.",tokenInsertInvalid:"Token cannot be inserted here."},tooltips:{UIToggleButton:"Click to toggle UI visibility.",UIToggleDocs:"Click to toggle Documentation visibility.",SampleDropdown:"",JavascriptTab:"",AllCodeTab:"",DocumentationTab:"",WarningsTab:"",FullUITab:"",DocsSliderButton:"",UISliderButton:""},errors:{"JSC#17":"The specified series type is not supported in this mode. Please chose a different value.","JSC#13":"The chart does not have a valid or any data. Please ensure the value passed to new JSC.Chart() is valid.",chartInternal:"The chart has encountered an error.",NoChartContainer:"No chart container can be found.",chartInternalTitle:"Internal Chart Error",jsSyntaxTitle:"JavaScript Error",jsSyntaxDescription:"Please see the code editor to resolve this error and re-enable the UI code view",ServerErrorTitle:"Server Error",MySqlServerError:"MySQL Error",MySqlServerMessage:"The required MySql database is not started or installed. Please refer to samples/php/includes/mysql/readme.txt document for more information."},deferTiming:{warningHover:200,chartUpdate:550,lateUIRedraw:1500,fullUpdate:600,fullUpdateFast:100,statusBarClear:3e3,undoButtons:550,cursorDocUpdate:100,UiHover:400}}}),define("token_tooltip",["require","exports","module"],function(e,t,n){var r=ace.require("ace/lib/dom"),i=ace.require("ace/lib/event"),s=ace.require("ace/range").Range,o,u=function(e){e=GLOBAL.aceEditor;if(e.tokenTooltip)return;e.tokenTooltip=this,this.editor=e,e.tooltip=o||this.$init(),this.update=this.update.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseOut=this.onMouseOut.bind(this),i.addListener(e.renderer.scroller,"mousemove",this.onMouseMove),i.addListener(e.renderer.content,"mouseout",this.onMouseOut)};(function(){this.token={},this.range=new s,this.update=function(){this.$timer=null;var e=this.editor.renderer;this.lastT-(e.timeStamp||0)>1e3&&(e.rect=null,e.timeStamp=this.lastT,this.maxHeight=innerHeight,this.maxWidth=innerWidth);var t=e.rect||(e.rect=e.scroller.getBoundingClientRect()),n=(this.x+e.scrollLeft-t.left-e.$padding)/e.characterWidth,r=Math.floor((this.y+e.scrollTop-t.top)/e.lineHeight),i=Math.round(n),u={row:r,column:i,side:n-i>0?1:-1},a=this.editor.session,f=a.screenToDocumentPosition(u.row,u.column),l=a.getTokenAt(f.row,f.column);!l&&!a.getLine(f.row)&&(l={type:"",value:"",state:a.bgTokenizer.getState(0)});if(!l){a.removeMarker(this.marker),o.style.display="none",this.isOpen=!1;return}this.isOpen||(o.style.display="",this.isOpen=!0);var c=l.type;l.state&&(c+="|"+l.state),l.merge&&(c+="\n  merge"),l.stateTransitions&&(c+="\n  "+l.stateTransitions.join("\n  ")),this.tokenText!=c&&(o.textContent=c,this.tooltipWidth=o.offsetWidth,this.tooltipHeight=o.offsetHeight,this.tokenText=c),this.updateTooltipPosition(this.x,this.y),this.token=l,a.removeMarker(this.marker),this.range=new s(f.row,l.start,f.row,l.start+l.value.length),this.marker=a.addMarker(this.range,"ace_bracket","text")},this.onMouseMove=function(e){this.x=e.clientX,this.y=e.clientY,this.isOpen&&(this.lastT=e.timeStamp,this.updateTooltipPosition(this.x,this.y)),this.$timer||(this.$timer=setTimeout(this.update,100))},this.onMouseOut=function(e){var t=e&&e.relatedTarget,n=e&&e.currentTarget;while(t&&(t=t.parentNode))if(t==n)return;o.style.display="none",this.editor.session.removeMarker(this.marker),this.$timer=clearTimeout(this.$timer),this.isOpen=!1},this.updateTooltipPosition=function(e,t){var n=o.style;e+10+this.tooltipWidth>this.maxWidth&&(e=innerWidth-this.tooltipWidth-10);if(t>innerHeight*.75||t+20+this.tooltipHeight>this.maxHeight)t=t-this.tooltipHeight-30;n.left=e+10+"px",n.top=t+20+"px"},this.$init=function(){o=document.documentElement.appendChild(r.createElement("div"));var e=o.style;return e.position="fixed",e.display="none",e.background="lightyellow",e.borderRadius="",e.border="1px solid gray",e.padding="1px",e.zIndex=1e3,e.fontFamily="monospace",e.whiteSpace="pre-line",o},this.destroy=function(){this.onMouseOut(),i.removeListener(this.editor.renderer.scroller,"mousemove",this.onMouseMove),i.removeListener(this.editor.renderer.content,"mouseout",this.onMouseOut),delete this.editor.tokenTooltip}}).call(u.prototype),t.TokenTooltip=u}),define("idleDefer",["require","exports","module"],function(e,t,n){function i(e,t,n,i){clearTimeout(r[e]),r[e]=setTimeout(function(){n.call(i),delete r[e]},t)}function s(e){clearTimeout(r[e])}t.defer=i,t.clear=s;var r={}}),define("smoothScrolling",["require","exports","module","jsonLib"],function(e,t,n){function s(e,t){function b(e,t){var n,r,i,o,u=$(e),a;return t?(a=$(t).height(),n=$(t).scrollTop(),r=n+a,i=$(t).scrollTop()-($(t).offset().top-u.offset().top),o=i+u.height(),s&&(n+=s*a,r-=s*a)):(n=$(window).scrollTop(),r=n+$(window).height(),n+=80,r-=50,i=u.offset().top,o=i+u.height()),o<=r&&i>=n}t=t||{},i=i||{};if(!e)return;var n=r.pick(t.percentInfoView,i.percentInfoView,.2),s=r.pick(t.percentIntoViewCheck,i.percentIntoViewCheck,.2),o=r.pick(t.animationDuration,i.animationDuration,230),u=$(e),a=$(e).closest("[class*=scrollable]").find(".drop-list");a.length===0&&$(e).closest("[class*=scrollable]"),a.length===0&&(a=$(e).closest(".sidebar-holder")),a.length===0&&(a=$(e).closest(".block-in-holder"));var f=a.scrollTop()-(a.offset().top-u.offset().top),l=f+u.height(),c=a.scrollTop(),h=a.height(),p=c+h,d=Math.abs(f-c),v=Math.abs(f-(h+c));if(!b(e,a)){var m=r.evalPath(a[0],"jcf.vScrollBar"),g=h*n,y=0;d<v?y=f-g:y=l-h+g,y>f&&(y=f),u.height()>h&&(y=f),a.stop(),o?a.animate({scrollTop:y},o,function(){m&&m.scrollTo(y)}):a.scrollTop(y)}}t.focusElement=s;var r=e("jsonLib"),i={percentInfoView:.2,percentIntoViewCheck:.2,animationDuration:230}}),define("cache",["require","exports","module"],function(e,t,n){t.cache=function(){var e=0,t={};return{count:function(){return e},add:function(n){return e++,t[e]=n,n.cacheID=e,e},get:function(e){return t[e]?t[e]:null}}}()}),define("../server/logger",["require","exports","module"],function(e,t,n){t.logError=function(e){console.error(e.message)}}),define("../server/update_menu",["require","exports","module","./logger"],function(e,t){function r(){var e=firebase.auth().currentUser;if(!e)return;var t="users/"+e.uid+"/menu/";firebase.database().ref(t).once("value").then(function(e){i(e)}).catch(n.logError)}function i(e){GLOBAL.firebaseFileNames=[];var t=e.val();if(!t)return;s();var n=document.getElementById("sampleList"),r=0,i=document.createElement("li"),o=document.createElement("a");o.innerHTML="Saved Files --------",o.disabled=!0,i.setAttribute("firebase",!0),o.setAttribute("class","dropdownSamples"),i.appendChild(o),n.insertBefore(i,n.childNodes[r]);var u=0,a=0;for(var f in t)a++;for(var f in t){r++;var i=document.createElement("li"),o=document.createElement("a");o.innerHTML=f,o.setAttribute("title",f),o.setAttribute("class","dropdownSamples"),u++,i.setAttribute("firebase",u-a),GLOBAL.firebaseFileNames.unshift(f),i.appendChild(o),n.insertBefore(i,n.childNodes[r])}var i=document.createElement("li"),o=document.createElement("a");o.innerHTML="-----------------",o.disabled=!0,i.setAttribute("firebase",!0),o.setAttribute("class","dropdownSamples"),i.appendChild(o),r++,n.insertBefore(i,n.childNodes[r])}function s(){var e=document.getElementById("sampleList");for(var t=0;t<e.childNodes.length;t++)e.childNodes[t].getAttribute&&e.childNodes[t].getAttribute("firebase")&&(e.childNodes[t].parentNode.removeChild(e.childNodes[t]),t--)}var n=e("./logger");t.update=r,t.remove=s}),define("../server/update_ace",["require","exports","module"],function(require,exports,module){function getHistory(){var e=[],t="",n=GLOBAL.aceEditor.session.getUndoManager();for(var r=0;r<n.$undoStack.length;r++){sleep(5);if(n.$undoStack[r].timeStamp)e.push(n.$undoStack[r]);else{var i=new Date,s=i.getTime();n.$undoStack[r].timeStamp=s,e.push(n.$undoStack[r])}}for(var r=0;r<n.$redoStack.length;r++){sleep(5);if(n.$redoStack[r].timeStamp)t.length==0?t=n.$redoStack[r].timeStamp:t+=","+n.$redoStack[r].timeStamp,e.push(n.$redoStack[r]);else{var i=new Date,s=i.getTime();n.$redoStack[r].timeStamp=s,t.length==0?t=s:t+=","+s,e.push(n.$redoStack[r])}}return{undo:e,redo:t}}function sleep(e){var t=(new Date).getTime();for(var n=0;n<1e7;n++)if((new Date).getTime()-t>e)break}function ensureUniqueTimesamp(e){for(var t=1;t<e.length;t++)e[t].timeStamp&&e[t-1].timeStamp&&e[t-1].timeStamp===e[t].timeStamp&&e[t].timeStamp++}function setHistory(data){function isRedo(e,t){var n;e.redo=e.redo+"";var r=e.redo.split(",");for(n in r)if(t==r[n])return!0;return!1}setGutterComment();if(!data)return;if(!data.val)return;var unM=GLOBAL.aceEditor.session.getUndoManager();unM.$doc||(unM.$doc=GLOBAL.aceEditor.session);var d1=data.val();if(!d1)return;fireBaseData.undo=d1.undo,fireBaseData.redo=d1.redo;var s1,myProp,myProp1,myRedo=[],myUndo=[];for(myProp in d1.undo)d1.undo.hasOwnProperty(myProp)&&(s1=eval(d1.undo[myProp]),isRedo(d1,myProp)?(s1.timeStamp=+myProp,myRedo.push(s1)):(s1.timeStamp=+myProp,myUndo.push(s1)));unM.$undoStack=myUndo,unM.$redoStack=myRedo,unM.dirtyCounter=unM.$undoStack.length}function saveSession(){var e=GLOBAL.aceEditor.session;return state={},state.value=e.getValue(),state.selection=e.selection.toJSON(),state.options=e.getOptions(),state.mode=e.getMode().$id,state.folds=e.getAllFolds().map(function(e){return{start:e.start,end:e.end,placeholder:e.placeholder}}),state.scrollTop=e.getScrollTop(),state.scrollLeft=e.getScrollLeft(),JSON.stringify(state)}function setGutterComment(){if(!GLOBAL.comments)return;for(var e=0;e<GLOBAL.comments.length;e++)GLOBAL.aceEditor.getSession().setBreakpoint(+GLOBAL.comments[e][0])}function setSession(e){if(!e)return;var t=GLOBAL.aceEditor.session;t.setValue(e.value),t.selection.fromJSON(e.selection),t.setOptions(e.options),t.setMode(e.mode);try{e.folds.forEach(function(e){t.addFold(e.placeholder,Range.fromPoints(e.start,e.end))})}catch(n){}t.setScrollTop(e.scrollTop),t.setScrollTop(e.scrollLeft)}var fireBaseData={};exports.setHistory=setHistory,exports.getHistory=getHistory}),define("../server/message_box",["require","exports","module","events"],function(e,t,n){function u(e,t){e=e||{},e.msg=e.msg||"Please select OK or Cancel.";var n=e.noOptions?s:i,u=document.getElementById("login-content");if(!u)throw Error("Could not find login-content tag");e.cancelHide&&(n=o,n=n.replace("{{displayCancel}}","display:none;")),e.width&&(n=n.replace("{{widthBox}}","width:"+e.width+"px;")),u.innerHTML=n;var a=document.getElementById("message-box-msg");a.innerHTML=e.msg;var f=document.getElementById("message-box");r.addListener(f,"click",function(){var e=this;return function(e){e=r.fixEvent(e),e.preventDefault(),e.srcElement||(e.srcElement=e.target),e.srcElement.id==="message-box-ok"?(u.innerHTML="",t("ok")):e.srcElement.id==="message-box-cancel"?(u.innerHTML="",t("cancel")):(u.innerHTML="",t("none"))}}.call(this))}var r=e("events"),i='<div><div id="message-box" style="{{widthBox}}" title=""><div id="message-box-msg"></div><input type="button" id="message-box-load"  value="Load previous sample" /><input type="button" id="message-box-ok"  value="Overwrite previous sample" /><input type="button" id="message-box-cancel"  value="Cancel"  /></div></div>',s='<div><div id="message-box" style="{{widthBox}}" title=""><div id="message-box-msg"></div><input type="button" id="message-box-cancel"  value="Ok"  /></div></div>',o='<div><div id="message-box" style="{{widthBox}}" title=""><div id="message-box-msg"></div><input type="button" id="message-box-ok"  value="Ok" class="" /><input type="button" id="message-box-cancel" style="{{displayCancel}}" value="Cancel" class="" /></div></div>';t.show=u}),define("../server/load_sample",["require","exports","module","load_editor","./logger","../server/update_ace"],function(e,t){function s(){var e=firebase.auth().currentUser;if(!e)return;var t="users/"+e.uid+"/samples/"+GLOBAL.currentSampleName.replace(/[.]/g,"_");firebase.database().ref(t).once("value").then(function(e){n.loadSample(e.val().page),GLOBAL.comments=e.val().comments,i.setHistory(e)}).catch(r.logError)}var n=e("load_editor"),r=e("./logger"),i=e("../server/update_ace");t.load=s}),define("../server/save",["require","exports","module","events","samples","../server/update_menu","../server/update_ace","../server/message_box","../server/load_sample","./logger"],function(e,t,n){function p(){if(h)return;$(document).bind("loggedout",w),GLOBAL.aceEditor.on("change",function(e){GLOBAL.isSavedInServer=!1,o.disabled=!1,o.value="save"});var e=document.getElementById("currentSample");r.addListener(e,"click",function(t){var n=GLOBAL.firepadObj.auth();t=r.fixEvent(t),t.srcElement||(t.srcElement=t.target);if(!n){var i=document.getElementById("login");i.click();return}r.stopEvent(t);var s=t.target;if(s.value==="Cancel"){d();return}if(s.value==="OK"){e.innerHTML=e.childNodes[0].value,GLOBAL.currentSampleName=e.innerHTML,y(function(e){e&&e.message&&alert(e.message)});return}if(e.childNodes[0].tagName==="INPUT")return;var o=document.createElement("input");o.value=e.innerHTML,r.addListener(o,"keyup",function(t){t.keyCode==13?(e.innerHTML=o.value,GLOBAL.currentSampleName=e.innerHTML,y(function(e){e&&e.message&&alert(e.message)})):t.keyCode==27&&(e.innerHTML=GLOBAL.currentSampleName)});var u=document.createElement("input");u.type="button",u.setAttribute("class","ncOk"),u.value="OK";var a=document.createElement("input");a.type="button",a.value="Cancel",a.setAttribute("class","ncCancel"),e.innerHTML="",e.appendChild(o),e.appendChild(u),e.appendChild(a)}),m(),o=document.getElementById("saveButton"),r.addListener(o,"click",function(e){var t=GLOBAL.firepadObj.auth();if(!t){var n=document.getElementById("login");GLOBAL.loginHeader="Please <b>log in</b> if you would like to <b>save</b> this file.",n.click();return}y(function(e){e&&e.message&&alert(e.message)})}),h=!0}function d(){currentSample.innerHTML=GLOBAL.currentSampleName}function v(){var e=firebase.auth().currentUser;if(!e)return;u.update();var t=GLOBAL.currentSampleName.replace(/[.]/g,"_"),n=e.uid+"_"+t;db.collection("history").doc(n).get().then(function(e){a.setHistory({val:function(){return e.data()}})})}function m(){var e=firebase.auth().currentUser;if(!e)return;firebase.database().ref("users/"+e.uid).once("value").then(function(e){a.setHistory(e.val())}).catch(c.logError)}function g(){var e=document.getElementById("currentSample"),t=document.getElementById("menuFilename"),n=!1;for(var r=0;r<i.length;r++)if(GLOBAL.currentSampleName===i[r]){n=!0;break}var s="",o="";n?(s=GLOBAL.currentSampleName.split(".")[0]+"_Edited.htm",o=GLOBAL.currentSampleName.split(".")[0]+"_Edited_htm"):(s=GLOBAL.currentSampleName.split(".")[0],o=GLOBAL.currentSampleName.split(".")[0]);for(var u in GLOBAL.firebaseFileNames)if(GLOBAL.firebaseFileNames[u]===o)return n?{result:!0,name:s}:{result:!1,name:s};return t.innerHTML=e.innerHTML=s,{result:!1,name:s}}function y(e){var t=GLOBAL.firepadObj.auth().currentUser;if(!t){var n="Please <b>log in</b> if you would like to <b>save</b> this file.";f.show({msg:n,cancel:!1,noOptions:!0},function(e){});return}var n="An edited version of this sample has already been created, please load and modify {{sampleName}} to work on this.  If you wish to continue, the current page will be saved instead.",r=g();if(r.result){n=n.replace("{{sampleName}}",r.name);var i=f.show({msg:n},function(e){if(e=="ok")menuFilename.innerHTML=currentSample.innerHTML=GLOBAL.currentSampleName=r.name,b();else{if(e=="cancel")return;menuFilename.innerHTML=currentSample.innerHTML=GLOBAL.currentSampleName=r.name,l.load()}})}else menuFilename.innerHTML=currentSample.innerHTML=GLOBAL.currentSampleName=r.name,b();return}function b(){var e=firebase.auth().currentUser;if(!e){var t="Please log in to enable saving.";f.show({msg:t,cancel:!1},function(){});return}var n="/users/"+e.uid+"/samples/"+GLOBAL.currentSampleName.replace(/[.]/g,"_"),r=firebase.database(),i=a.getHistory();r.ref(n+"/undo").remove().then(function(){for(var e=0;e<i.undo.length;e++)r.ref(n+"/undo/"+i.undo[e].timeStamp).set(JSON.stringify(i.undo[e]))}).catch(c.logError),r.ref(n+"/comments").remove().then(function(){if(GLOBAL.comments)for(var e=0;e<GLOBAL.comments.length;e++)r.ref(n+"/comments/"+GLOBAL.comments[e][0]).set(JSON.stringify(GLOBAL.comments[e][1])).catch(c.logError)}).catch(c.logError),r.ref(n+"/redo/").set(i.redo).catch(c.logError),r.ref(n+"/page/").set(GLOBAL.aceEditor.session.getValue()).catch(c.logError);var s="users/"+e.uid+"/menu/";r.ref(s+GLOBAL.currentSampleName.replace(/[.]/g,"_")).set("").then(function(){u.update()}).catch(c.logError),GLOBAL.isSavedInServer=!0,o.disabled=!0,o.value="saved",o.setAttribute("class","save disabled"),o.setAttribute("title","Saved")}function w(){d()}var r=e("events"),i=e("samples").samples,s=[],o,u=e("../server/update_menu"),a=e("../server/update_ace"),f=e("../server/message_box"),l=e("../server/load_sample"),c=e("./logger"),h=!1;t.init=p,t.saveServer=b,t.loadUndoManager=v}),define("editor_work",["require","exports","module","events","build_ui","strings","cache","highlight","../server/save","eventHandlers","idleDefer","highlight","idleDefer","controller","ast_layer","docTab_update","eventHandlers","controller","eventHandlers","controller","eventHandlers"],function(e,t,n){function h(e){e?GLOBAL.aceEditor.redo():GLOBAL.aceEditor.undo(),x()}function m(e){var t=GLOBAL.aceEditor.getSession().$undoManager.$undoStack;if(e){p=!0,d=[];for(var n=0,r=t.length;n<r;n++)d.push(t[n])}else{p=!1;if(d.length<t.length){var i=t[d.length];GLOBAL.aceEditor.getSession().$undoManager.$undoStack=d,GLOBAL.aceEditor.getSession().$undoManager.$undoStack.push(i)}v=null}x()}function g(){if(!v){var e=GLOBAL.aceEditor.getSession().$undoManager.$undoStack,t=d[d.length-1];if(!t)v=e[0];else for(var n=0,r=e.length;n<r;n++){var i=e[n];if(e[n]===t&&n+1<r){v=e[n+1];return}}}}function y(t){b=!1,e("eventHandlers").editorOnChange(t,function(){b=!0,GLOBAL.updateFromTreeUI&&(GLOBAL.refreshChart(),b=!1)});if(p)g();else{var n="undoButtons";e("idleDefer").defer(n,a[n],function(){x()})}}function w(){b&&(b=!1,o.init())}function E(e,t){t(e),e=e.firstChild;while(e)E(e,t),e=e.nextSibling}function S(t,n){var r=t.getDocumentPosition().row;e("highlight").focusUIByLine(r)}function x(){var e="",t=document.getElementById("saveButton");i.setAttribute("title","Undo("+GLOBAL.aceEditor.getSession().$undoManager.$undoStack.length+")"),s.setAttribute("title","Redo("+GLOBAL.aceEditor.getSession().$undoManager.$redoStack.length+")");var n=!0;GLOBAL.aceEditor.getSession().$undoManager.hasUndo()?(i.setAttribute("class","back"),n=!0):(i.setAttribute("class","back disabled"),n=!1),GLOBAL.aceEditor.getSession().$undoManager.hasRedo()?(s.setAttribute("class","forward"),n=!0):(n||(n=!1),s.setAttribute("class","forward disabled")),n&&!GLOBAL.isSavedInServer?(t.disabled=!1,t.setAttribute("class","save"),t.setAttribute("title","Save"),t.value="save"):(t.disabled=!0,t.setAttribute("title","Saved"),t.setAttribute("class","save disabled"),t.value="saved"),c.init()}function T(){GLOBAL.aceEditor.getSession().$undoManager.reset(),x()}function N(e){function u(e,t){e={start:{column:e.start.column,line:r(e.start.line)},end:{column:e.end.column,line:r(e.end.line)}};if(e.start.line===t.row&&e.start.column<t.column&&e.end.column>=t.column)return!0}var t,n,r=GLOBAL.astToAceLine,i=[];if(GLOBAL.props){for(var s=0,o=GLOBAL.props.length;s<o;s++){var t=GLOBAL.props[s];u(t.loc,e)?i.push(t):t.key&&u(t.key.loc,e)&&i.push(t)}if(i)return i.length>1&&i[0].fullname.length<i[1].fullname.length?i[1]:i[0]}}function C(){var t=GLOBAL.aceEditor.getSession().setAnnotations,n=GLOBAL.aceEditor.getSession().clearAnnotations;GLOBAL.aceEditor.session.setAnnotations=function(e){l.aceSetAnnotations.call(GLOBAL.aceEditor.session,t,e)},GLOBAL.aceEditor.session.clearAnnotations=function(){l.aceClearAnnotations.call(GLOBAL.aceEditor.session,n)},GLOBAL.aceEditor.renderer.scrollToLine=function(e,t,n,r){var i=this.$cursorLayer.getPixelPosition({row:e,column:0}),s=i.top;t&&(s-=this.$size.scrollerHeight/2);var o=this.scrollTop;this.session.setScrollTop(s),n!==!1&&this.animateScrolling(o,r)},GLOBAL.aceEditor.selection.on("changeCursor",function(t,n){if(!GLOBAL.isEditSample)return;var r=n.getCursor(),i="cursorDocUpdate";e("idleDefer").defer(i,a[i],function(){var t=e("controller").getState();if(!t.dirtyAst&&!t.dirtyMI){var n,i,s;if(s=e("ast_layer").findAstFromPos2(r,!0))if(n=s.location)l.focusUIByCursor(n),e("docTab_update").showDocsForPath(n.fullname)}},this)}),GLOBAL.aceEditor.on("focus",function(t){e("eventHandlers").reportAction(GLOBAL.aceEditor.container,"click")}),r.addListener(i,"click",function(t){t=r.fixEvent(t),r.stopEvent(t);var n=e("controller").getCursorState().focus;e("eventHandlers").reportAction(t.target,"click"),h(),n==="codeText"&&GLOBAL.aceEditor.focus()}),r.addListener(s,"click",function(t){t=r.fixEvent(t),r.stopEvent(t);var n=e("controller").getCursorState().focus;e("eventHandlers").reportAction(t.target,"click"),h("redo"),n==="codeText"&&GLOBAL.aceEditor.focus()})}function k(e){GLOBAL.aceEditor.session.unfold(e.start,!0);return}var r=e("events"),i=document.getElementById("editorUndo"),s=document.getElementById("editorRedo"),o=e("build_ui"),u=e("strings").presets,a=u.deferTiming,f=e("cache").cache,l=e("highlight"),c=e("../server/save"),p,d,v,b=!1;t.gutterClicked=S,t.editor_changed=y,t.init=C,t.resetUndoStack=T,t.suspendHistory=m,t.unfoldRange=k}),
/** START OF dom **/
/* ***** BEGIN LICENSE BLOCK *****
 * Distributed under the BSD license:
 *
 * Copyright (c) 2010, Ajax.org B.V.
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *     * Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above copyright
 *       notice, this list of conditions and the following disclaimer in the
 *       documentation and/or other materials provided with the distribution.
 *     * Neither the name of Ajax.org B.V. nor the
 *       names of its contributors may be used to endorse or promote products
 *       derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * ***** END LICENSE BLOCK ***** */
define("dom",["require","exports","module"],function(e,t,n){if(typeof document=="undefined")return;var r="http://www.w3.org/1999/xhtml";t.getDocumentHead=function(e){return e||(e=document),e.head||e.getElementsByTagName("head")[0]||e.documentElement},t.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||r,e):document.createElement(e)},t.hasCssClass=function(e,t){var n=e.className.split(/\s+/g);return n.indexOf(t)!==-1},t.addCssClass=function(e,n){t.hasCssClass(e,n)||(e.className+=" "+n)},t.removeCssClass=function(e,t){var n=e.className.split(/\s+/g);for(;;){var r=n.indexOf(t);if(r==-1)break;n.splice(r,1)}e.className=n.join(" ")},t.toggleCssClass=function(e,t){var n=e.className.split(/\s+/g),r=!0;for(;;){var i=n.indexOf(t);if(i==-1)break;r=!1,n.splice(i,1)}return r&&n.push(t),e.className=n.join(" "),r},t.setCssClass=function(e,n,r){r?t.addCssClass(e,n):t.removeCssClass(e,n)},t.hasCssString=function(e,t){var n=0,r;t=t||document;if(t.createStyleSheet&&(r=t.styleSheets)){while(n<r.length)if(r[n++].owningElement.id===e)return!0}else if(r=t.getElementsByTagName("style"))while(n<r.length)if(r[n++].id===e)return!0;return!1},t.importCssString=function(n,i,s){s=s||document;if(i&&t.hasCssString(i,s))return null;var o;s.createStyleSheet?(o=s.createStyleSheet(),o.cssText=n,i&&(o.owningElement.id=i)):(o=s.createElementNS?s.createElementNS(r,"style"):s.createElement("style"),o.appendChild(s.createTextNode(n)),i&&(o.id=i),t.getDocumentHead(s).appendChild(o))},t.importCssStylsheet=function(e,n){if(n.createStyleSheet)n.createStyleSheet(e);else{var r=t.createElement("link");r.rel="stylesheet",r.href=e,t.getDocumentHead(n).appendChild(r)}},t.getInnerWidth=function(e){return parseInt(t.computedStyle(e,"paddingLeft"),10)+parseInt(t.computedStyle(e,"paddingRight"),10)+e.clientWidth},t.getInnerHeight=function(e){return parseInt(t.computedStyle(e,"paddingTop"),10)+parseInt(t.computedStyle(e,"paddingBottom"),10)+e.clientHeight},window.pageYOffset!==undefined?(t.getPageScrollTop=function(){return window.pageYOffset},t.getPageScrollLeft=function(){return window.pageXOffset}):(t.getPageScrollTop=function(){return document.body.scrollTop},t.getPageScrollLeft=function(){return document.body.scrollLeft}),window.getComputedStyle?t.computedStyle=function(e,t){return t?(window.getComputedStyle(e,"")||{})[t]||"":window.getComputedStyle(e,"")||{}}:t.computedStyle=function(e,t){return t?e.currentStyle[t]:e.currentStyle},t.scrollbarWidth=function(e){var n=t.createElement("ace_inner");n.style.width="100%",n.style.minWidth="0px",n.style.height="200px",n.style.display="block";var r=t.createElement("ace_outer"),i=r.style;i.position="absolute",i.left="-10000px",i.overflow="hidden",i.width="200px",i.minWidth="0px",i.height="150px",i.display="block",r.appendChild(n);var s=e.documentElement;s.appendChild(r);var o=n.offsetWidth;i.overflow="scroll";var u=n.offsetWidth;return o==u&&(u=r.clientWidth),s.removeChild(r),o-u},t.setInnerHtml=function(e,t){var n=e.cloneNode(!1);return n.innerHTML=t,e.parentNode.replaceChild(n,e),n},"textContent"in document.documentElement?(t.setInnerText=function(e,t){e.textContent=t},t.getInnerText=function(e){return e.textContent}):(t.setInnerText=function(e,t){e.innerText=t},t.getInnerText=function(e){return e.innerText}),t.getParentWindow=function(e){return e.defaultView||e.parentWindow},t.getByClassName=function(e,t){t=t||document;var n=t.getElementsByTagName("*"),r=[],i=0,s;while(s=n[i++])s.className==e?r[r.length]=s:null;return r},t.getByAttributeName=function(e,t){t=t||document;var n=t.getElementsByTagName("*"),r=[],i=0,s;while(s=n[i++])s.getAttribute(e)?r[r.length]=s:null;return r},t.callEventOn=function(e,t){if(t[e])t[e]();else if(document.createEvent){var n=document.createEvent("MouseEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}},t.callClickOn=function(e){if(e.click)e.click();else if(document.createEvent){var t=document.createEvent("MouseEvents");t.initEvent("click",!0,!0),e.dispatchEvent(t)}},t.removeToInsertLater=function(e){var t=e.parentNode,n=e.nextSibling;return t.removeChild(e),function(){n?t.insertBefore(e,n):t.appendChild(e)}}})
/** END OF dom **/
,define("statusBar",["require","exports","module","idleDefer","strings","jsonLib"],function(e,t,n){function v(){l=$("div.holder dl"),a=$("#statusTitle"),f=$("#statusMessage")}function m(e,t){t=t||{};if(c)return;if(h&&h!==t.claimID)return;var n=t.title,i=t.type||"info",u=t.time||o.statusBarClear,v=t.data,m;t.claimID&&(h=t.claimID),l.removeClass("statusWarning");switch(i){case"status":n=n||"STATUS";break;case"warning":l.addClass("statusWarning"),n=n||"WARNING";break;case"info":n=n||"";break;default:n=n||""}v&&(e=e.replace(/\{/g,'<span class="statusData">{').replace(/\}/g,"}</span>"),v.cacheID&&(m=GLOBAL.props[v.cacheID])&&(v.path=m.path,v.subID||(v.subID=m.shortname),v.label=m.shortname),e=s.supplant(e,v)),n?a.html(n+":"):a.html(""),f.html(e),p=t.id,r.clear("statusClear"),t.lock?c=!0:t.claimID?t.claimDuration&&(d=setTimeout(function(){y(t.claimID)},t.claimDuration)):r.defer("statusClear",u,function(){g()})}function g(e){if(c)return;if(e&&e!==p)return;if(h&&e!==h)return;l.removeClass("statusWarning"),r.clear("statusClear"),a.html(""),f.html("")}function y(e){h===e&&(clearTimeout(d),h=""),g()}function b(){c=!1,g()}t.show=m,t.clear=g,t.unclaim=y,t.unlock=b,t.init=v;var r=e("idleDefer"),i=e("strings").presets,s=e("jsonLib"),o=i.deferTiming,u=i.debug,a,f,l,c,h,p,d}),
/** START OF rsvp **/
/*!
 * @overview RSVP - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/tildeio/rsvp.js/master/LICENSE
 * @version   3.0.11
 */
function(){function e(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function t(e){var t=e._promiseCallbacks;return t||(t=e._promiseCallbacks={}),t}function i(e,t){if(e==="onerror"){r.on("error",t);return}if(arguments.length!==2)return r[e];r[e]=t}function s(e){return typeof e=="function"||typeof e=="object"&&e!==null}function o(e){return typeof e=="function"}function u(e){return typeof e=="object"&&e!==null}function d(){}function b(e){try{return e.then}catch(t){return y.error=t,y}}function w(e,t,n,r){try{e.call(t,n,r)}catch(i){return i}}function E(e,t,n){r.async(function(e){var r=!1,i=w(n,t,function(n){if(r)return;r=!0,t!==n?T(e,n):C(e,n)},function(t){if(r)return;r=!0,k(e,t)},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,k(e,i))},e)}function S(e,t){t._state===m?C(e,t._result):e._state===g?k(e,t._result):L(t,undefined,function(n){t!==n?T(e,n):C(e,n)},function(t){k(e,t)})}function x(e,t){if(t.constructor===e.constructor)S(e,t);else{var n=b(t);n===y?k(e,y.error):n===undefined?C(e,t):o(n)?E(e,t,n):C(e,t)}}function T(e,t){e===t?C(e,t):s(t)?x(e,t):C(e,t)}function N(e){e._onerror&&e._onerror(e._result),A(e)}function C(e,t){if(e._state!==v)return;e._result=t,e._state=m,e._subscribers.length===0?r.instrument&&p("fulfilled",e):r.async(A,e)}function k(e,t){if(e._state!==v)return;e._state=g,e._result=t,r.async(N,e)}function L(e,t,n,i){var s=e._subscribers,o=s.length;e._onerror=null,s[o]=t,s[o+m]=n,s[o+g]=i,o===0&&e._state&&r.async(A,e)}function A(e){var t=e._subscribers,n=e._state;r.instrument&&p(n===m?"fulfilled":"rejected",e);if(t.length===0)return;var i,s,o=e._result;for(var u=0;u<t.length;u+=3)i=t[u],s=t[u+n],i?D(n,i,s,o):s(o);e._subscribers.length=0}function O(){this.error=null}function _(e,t){try{return e(t)}catch(n){return M.error=n,M}}function D(e,t,n,r){var i=o(n),s,u,a,f;if(i){s=_(n,r),s===M?(f=!0,u=s.error,s=null):a=!0;if(t===s){k(t,new TypeError("A promises callback cannot return that same promise."));return}}else s=r,a=!0;t._state===v&&(i&&a?T(t,s):f?k(t,u):e===m?C(t,s):e===g&&k(t,s))}function P(e,t){try{t(function(n){T(e,n)},function(n){k(e,n)})}catch(n){k(e,n)}}function H(e,t,n){return e===m?{state:"fulfilled",value:n}:{state:"rejected",reason:n}}function B(e,t,n,r){this._instanceConstructor=e,this.promise=new e(d,r),this._abortOnReject=n,this._validateInput(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._init(),this.length===0?C(this.promise,this._result):(this.length=this.length||0,this._enumerate(),this._remaining===0&&C(this.promise,this._result))):k(this.promise,this._validationError())}function W(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function X(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function $(e,t){this._id=z++,this._label=t,this._state=undefined,this._result=undefined,this._subscribers=[],r.instrument&&p("created",this),d!==e&&(o(e)||W(),this instanceof $||X(),P(this,e))}function J(){this.value=undefined}function G(e){try{return e.then}catch(t){return K.value=t,K}}function Y(e,t,n){try{e.apply(t,n)}catch(r){return K.value=r,K}}function Z(e,t){var n={},r,i,s=e.length,o=new Array(s);for(var u=0;u<s;u++)o[u]=e[u];for(i=0;i<t.length;i++)r=t[i],n[r]=o[i+1];return n}function et(e){var t=e.length,n=new Array(t-1);for(var r=1;r<t;r++)n[r-1]=e[r];return n}function tt(e,t){return{then:function(n,r){return e.call(t,n,r)}}}function rt(e,t,n,r){var i=Y(n,r,t);return i===K&&k(e,i.value),e}function it(e,t,n,r){return V.all(t).then(function(t){var i=Y(n,r,t);return i===K&&k(e,i.value),e})}function st(e){return e&&typeof e=="object"?e.constructor===V?!0:G(e):!1}function ut(e,t,n){this._superConstructor(e,t,!1,n)}function lt(e,t,n){this._superConstructor(e,t,!0,n)}function pt(e,t,n){this._superConstructor(e,t,!1,n)}function Ct(){return function(){process.nextTick(Mt)}}function kt(){var e=0,t=new Tt(Mt),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function Lt(){var e=new MessageChannel;return e.port1.onmessage=Mt,function(){e.port2.postMessage(0)}}function At(){return function(){setTimeout(Mt,1)}}function Mt(){for(var e=0;e<Et;e+=2){var t=Ot[e],n=Ot[e+1];t(n),Ot[e]=undefined,Ot[e+1]=undefined}Et=0}function Pt(e,t){r.async(e,t)}function Ht(){r.on.apply(r,arguments)}function Bt(){r.off.apply(r,arguments)}var n={mixin:function(e){return e.on=this.on,e.off=this.off,e.trigger=this.trigger,e._promiseCallbacks=undefined,e},on:function(n,r){var i=t(this),s;s=i[n],s||(s=i[n]=[]),e(s,r)===-1&&s.push(r)},off:function(n,r){var i=t(this),s,o;if(!r){i[n]=[];return}s=i[n],o=e(s,r),o!==-1&&s.splice(o,1)},trigger:function(e,n){var r=t(this),i,s;if(i=r[e])for(var o=0;o<i.length;o++)s=i[o],s(n)}},r={instrument:!1};n.mixin(r);var a;Array.isArray?a=Array.isArray:a=function(e){return Object.prototype.toString.call(e)==="[object Array]"};var f=a,l=Date.now||function(){return(new Date).getTime()},c=Object.create||function(e){var t=function(){};return t.prototype=e,t},h=[],p=function(t,n,i){1===h.push({name:t,payload:{guid:n._guidKey+n._id,eventName:t,detail:n._result,childGuid:i&&n._guidKey+i._id,label:n._label,timeStamp:l(),stack:(new Error(n._label)).stack}})&&setTimeout(function(){var e;for(var t=0;t<h.length;t++)e=h[t],r.trigger(e.name,e.payload);h.length=0},50)},v=void 0,m=1,g=2,y=new O,M=new O;B.prototype._validateInput=function(e){return f(e)},B.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},B.prototype._init=function(){this._result=new Array(this.length)};var j=B;B.prototype._enumerate=function(){var e=this.length,t=this.promise,n=this._input;for(var r=0;t._state===v&&r<e;r++)this._eachEntry(n[r],r)},B.prototype._eachEntry=function(e,t){var n=this._instanceConstructor;u(e)?e.constructor===n&&e._state!==v?(e._onerror=null,this._settledAt(e._state,t,e._result)):this._willSettleAt(n.resolve(e),t):(this._remaining--,this._result[t]=this._makeResult(m,t,e))},B.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===v&&(this._remaining--,this._abortOnReject&&e===g?k(r,n):this._result[t]=this._makeResult(e,t,n)),this._remaining===0&&C(r,this._result)},B.prototype._makeResult=function(e,t,n){return n},B.prototype._willSettleAt=function(e,t){var n=this;L(e,undefined,function(e){n._settledAt(m,t,e)},function(e){n._settledAt(g,t,e)})};var F=function(t,n){return(new j(this,t,!0,n)).promise},I=function(t,n){function o(e){T(i,e)}function u(e){k(i,e)}var r=this,i=new r(d,n);if(!f(t))return k(i,new TypeError("You must pass an array to race.")),i;var s=t.length;for(var a=0;i._state===v&&a<s;a++)L(r.resolve(t[a]),undefined,o,u);return i},q=function(t,n){var r=this;if(t&&typeof t=="object"&&t.constructor===r)return t;var i=new r(d,n);return T(i,t),i},R=function(t,n){var r=this,i=new r(d,n);return k(i,t),i},U="rsvp_"+l()+"-",z=0,V=$;$.cast=q,$.all=F,$.race=I,$.resolve=q,$.reject=R,$.prototype={constructor:$,_guidKey:U,_onerror:function(e){r.trigger("error",e)},then:function(e,t,n){var i=this,s=i._state;if(s===m&&!e||s===g&&!t)return r.instrument&&p("chained",this,this),this;i._onerror=null;var o=new this.constructor(d,n),u=i._result;r.instrument&&p("chained",i,o);if(s){var a=arguments[s-1];r.async(function(){D(s,o,a,u)})}else L(i,o,e,t);return o},"catch":function(e,t){return this.then(null,e,t)},"finally":function(e,t){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})},t)}};var K=new J,Q=new J,nt=function(t,n){var r=function(){var e=this,r=arguments.length,i=new Array(r+1),s,o=!1;for(var u=0;u<r;++u){s=arguments[u];if(!o){o=st(s);if(o===Q){var a=new V(d);return k(a,Q.value),a}o&&o!==!0&&(s=tt(o,s))}i[u]=s}var l=new V(d);return i[r]=function(e,t){e?k(l,e):n===undefined?T(l,t):n===!0?T(l,et(arguments)):f(n)?T(l,Z(arguments,n)):T(l,t)},o?it(l,i,t,e):rt(l,i,t,e)};return r.__proto__=t,r},ot=function(t,n){return V.all(t,n)};ut.prototype=c(j.prototype),ut.prototype._superConstructor=j,ut.prototype._makeResult=H,ut.prototype._validationError=function(){return new Error("allSettled must be called with an array")};var at=function(t,n){return(new ut(V,t,n)).promise},ft=function(t,n){return V.race(t,n)},ct=lt;lt.prototype=c(j.prototype),lt.prototype._superConstructor=j,lt.prototype._init=function(){this._result={}},lt.prototype._validateInput=function(e){return e&&typeof e=="object"},lt.prototype._validationError=function(){return new Error("Promise.hash must be called with an object")},lt.prototype._enumerate=function(){var e=this.promise,t=this._input,n=[];for(var r in t)e._state===v&&t.hasOwnProperty(r)&&n.push({position:r,entry:t[r]});var i=n.length;this._remaining=i;var s;for(var o=0;e._state===v&&o<i;o++)s=n[o],this._eachEntry(s.entry,s.position)};var ht=function(t,n){return(new ct(V,t,n)).promise};pt.prototype=c(ct.prototype),pt.prototype._superConstructor=j,pt.prototype._makeResult=H,pt.prototype._validationError=function(){return new Error("hashSettled must be called with an object")};var dt=function(t,n){return(new pt(V,t,n)).promise},vt=function(t){throw setTimeout(function(){throw t}),t},mt=function(t){var n={};return n.promise=new V(function(e,t){n.resolve=e,n.reject=t},t),n},gt=function(t,n,r){return V.all(t,r).then(function(e){if(!o(n))throw new TypeError("You must pass a function as map's second argument.");var t=e.length,i=new Array(t);for(var s=0;s<t;s++)i[s]=n(e[s]);return V.all(i,r)})},yt=function(t,n){return V.resolve(t,n)},bt=function(t,n){return V.reject(t,n)},wt=function(t,n,r){return V.all(t,r).then(function(e){if(!o(n))throw new TypeError("You must pass a function as filter's second argument.");var t=e.length,i=new Array(t);for(var s=0;s<t;s++)i[s]=n(e[s]);return V.all(i,r).then(function(n){var r=new Array(t),i=0;for(var s=0;s<t;s++)n[s]&&(r[i]=e[s],i++);return r.length=i,r})})},Et=0,St=function(t,n){Ot[Et]=t,Ot[Et+1]=n,Et+=2,Et===2&&_t()},xt=typeof window!="undefined"?window:{},Tt=xt.MutationObserver||xt.WebKitMutationObserver,Nt=typeof Uint8ClampedArray!="undefined"&&typeof importScripts!="undefined"&&typeof MessageChannel!="undefined",Ot=new Array(1e3),_t;typeof process!="undefined"&&{}.toString.call(process)==="[object process]"?_t=Ct():Tt?_t=kt():Nt?_t=Lt():_t=At(),r.async=St;var Dt=yt;if(typeof window!="undefined"&&typeof window.__PROMISE_INSTRUMENTATION__=="object"){var jt=window.__PROMISE_INSTRUMENTATION__;i("instrument",!0);for(var Ft in jt)jt.hasOwnProperty(Ft)&&Ht(Ft,jt[Ft])}var It={race:ft,Promise:V,allSettled:at,hash:ht,hashSettled:dt,denodeify:nt,on:Ht,off:Bt,map:gt,filter:wt,resolve:yt,reject:bt,all:ot,rethrow:vt,defer:mt,EventTarget:n,configure:i,async:Pt};typeof define=="function"&&define.amd?define("rsvp",[],function(){return It}):typeof module!="undefined"&&module.exports?module.exports=It:typeof this!="undefined"&&(this.RSVP=It)}.call(this)
/** END OF rsvp **/
,define("codeUiInterface",["require","exports","module","get_metadata","ast_layer","jsonLib","rsvp","strings","get_metadata","get_metadata","controller","dom","ast_layer","ast_layer"],function(e,t,n){function l(e){}function c(e){if(e.indexOf("'")===0||e.indexOf('"')===0)e=e.substring(1,e.length-1);return e}function h(e,t,n,r){function l(e,t){return e.val(t),!0}function h(e,t){return t==="true"?(e.removeClass("off"),!0):t==="false"?(e.addClass("off"),!0):!1}var a=new u.Promise(function(u,a){GLOBAL.jsonIsDirty=!0,f&&console.log("setUIValue: "+t);if(!isNaN(e)&&parseInt(e)>-1){var p=GLOBAL.props[e],d,v,m;if(p){var g=s.getAstMeta(p);n=n||i.getMetaData(p.fullname,"dropdownchange");if(!r||r.length===0)(d=o.evalPath(n,"meta.template"))?d.indexOf("TextBox")===0?(r=$("input[cacheid="+e+"]"),v=l):d.indexOf("CheckBox")===0&&(r=$("div[cacheid="+e+"]"),v=h):(r=$("input[cacheid="+e+"]"),v=l);r&&r.length>0&&v&&(t=c(t),m=v(r,t))}}m?u():a()});return a}function p(e,t,n){}function d(t,n,i){f&&console.log("++setCodeValue "+n),GLOBAL.jsonIsDirty=!0;if(!isNaN(t)&&parseInt(t)>-1){var u=GLOBAL.props[t];if(u){var a=s.getAstMeta(u),l=n,c=s.astLocToAceRange(a.valueLoc);i=i||e("get_metadata").getMetaData(u.fullname);var h=o.evalPath(i,"meta.template");h==="ColorPicker-number"?l="'"+n+"'":a.valueType==="string"&&a.quoteChar&&(l=a.quoteChar+n+a.quoteChar),GLOBAL.aceEditor.getSession().replace(c,l);return!0;var p,c,d,v,m,g,y,h,b,w,E}}return!1}function v(t){function v(e){return $("input[cacheid="+e+"]")[0]}var n=e("controller").getCursorState();if(n.focus==="textbox"){var r,i;if(r=v(n.cacheID)){i=r.value;var s=r.selectionEnd-r.selectionStart;i=i.slice(0,r.selectionStart)+t+i.slice(r.selectionEnd);var o=r.selectionStart+t.length,u=r.scrollLeft;return r.value=i,e("dom").callEventOn("keyup",r),r.selectionEnd=r.selectionStart=o,r.focus(),!0}}else if(n.focus==="codeText"){var a,f,l={},c={},h=GLOBAL.aceEditor.selection.getRange(),p,l=e("ast_layer").findAstFromPos2(h.start),c=e("ast_layer").findAstFromPos2(h.end);l.value&&c.value&&l.value.path===c.value.path&&(p=!0);if(p){var d=GLOBAL.aceEditor.getSession().replace(h,t);return GLOBAL.aceEditor.focus(),!0}}}t.getUiValue=c,t.getCodeValue=l,t.setUiValue=h,t.setCodeValue=p,t.tokenClicked=v;var r=ace.require("ace/range"),i=e("get_metadata"),s=e("ast_layer"),o=e("jsonLib"),u=e("rsvp"),a=e("strings").presets,f=a.debug}),define("tree_node_handler2",["require","exports","module","events","cache","get_metadata","highlight","codeUiInterface","dom","eventHandlers","jsonLib","docTab_update","ast_layer","controller","eventHandlers"],function(e,t,n){function p(){}function d(e,t){var n=document.createElement("li"),r=document.createElement("a");r.innerHTML=e.text,r.title=l.evalPath(e.description,"description")||e.description,r.setAttribute("class","dropDownColorLink"),l.evalPath(e.description,"isDefault")&&(r.title="[Default] "+r.title,a.addCssClass(r,"isDefault")),n.appendChild(r);try{t.appendChild(n,null)}catch(i){t.appendChild(n)}}function m(){for(var e=0;e<v.length;e++)v[e].holder.style.display="none",v[e].dataUL.innerHTML="";v=[]}function g(e,t){for(var n in t[dropdownName].members)d({text:n,description:t[dropDown1[0]].members[n]},e)}function y(e,t,n,r){m(),$("div.treeContainer").css("padding-bottom","200px");var i=t.parentNode.nextSibling.childNodes[1].childNodes[0].childNodes[0].childNodes[0];if(!i)throw new Error("Exptected UL holder");var s=i.getAttribute("seq"),o=n.enumData;if(!o.eChain.sequence)throw new Error("eChain.sequence is null.");var u=o.eChain.sequence.split(",");t.parentNode.nextSibling.style.display="block",v.push({holder:t.parentNode.nextSibling,dataUL:i});var a=t.parentNode.nextSibling.cloneNode(!0);i.innerHTML="",i.setAttribute("cacheID",r),s=s||u[0];for(var f in o[s].members)d({text:f,description:o[s].members[f]},i)}function b(e,t){var n=e.parentNode.parentNode,r=n.getAttribute("cacheID"),i=n.getAttribute("seq");r=parseInt(r,10);var o=GLOBAL.props[r],u=t[o.fullname],a=u.enumData.eChain.sequence.split(",");i=n.getAttribute("seq")||a[0];var c=e.innerHTML,h=[],p="";for(var d=0,v=a.length;d<v;d++){var m=a[d],g;m===i?g=c:g=u.enumData.eChain[m];var y=u.enumData[m],b=l.findCaseInsensitiveProperty(y.members,g);b.isDefault||(p+=g,h.push(g));if(m===i){if(!b.chain)break;if(!(d+1<v&&b.chain.replace("enum_","")===a[d+1]))break}}h.length>1&&(p=E(h)),GLOBAL.forceUpdateFromTreeUI=!0;var w=n.parentNode.parentNode.parentNode.parentNode.previousSibling;w.childNodes[0].innerHTML=e.innerHTML,GLOBAL.fullnames[o.fullname]=p,t[o.fullname]=s.getMetaData(o.fullname,"dropdownchange"),GLOBAL.skipUIRedraw=!1,f.UIValueChanged(o.nodeIndex,p,a.length>1);return}function w(e){return e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/\b([A-Z]+)([A-Z])([a-z])/,"$1 $2$3").replace(/^./,function(e){return e.toUpperCase()})}function E(e){var t=e.length;if(t){e[0]=e[0].toLowerCase();for(var n=1;n<t;n++)e[n]=r(e[n]);return e.join("");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}return""}function S(t,n){var r=t.getAttribute("class");if(r){var i=!0;if(r==="switch-area off")t.className="switch-area",i=!0;else{if(r!=="switch-area")throw new Error("on_off_ui_handler wrong tag.");t.className="switch-area off",i=!1}e("controller").omitLateRedraw(n.fullname),f.UIValueChanged(n.nodeIndex,i)}}function x(e){var t=e.getAttribute("cacheid");t=parseInt(t,10);var n=GLOBAL.props[t];return}function T(e,t){return;var n,r,i}function N(t){t=r.fixEvent(t),r.stopEvent(t);var n=t.target,i=n.parentElement.parentElement.parentElement.getAttribute("cacheid");e("eventHandlers").reportAction(n,"click")}var r=e("events"),i=e("cache").cache,s=e("get_metadata"),o=e("highlight"),u=e("codeUiInterface"),a=e("dom"),f=e("eventHandlers"),l=e("jsonLib"),c=e("docTab_update"),h=e("ast_layer"),v=[];t.dropDown_update_handler=b,t.input_tag_update_handler=x,t.dropDown_ui_handler=y,t.init=p,t.on_off_ui_handler=S,t.input_tag_handler=T,t.colorPickerOpen_handler=N,GLOBAL.clearDropDown_UI_IfOpened=m}),define("picker_ui2",["require","exports","module","events","ast_layer","cache","editor_work","dom","controller","eventHandlers","controller","eventHandlers","tree_node_handler2","eventHandlers","get_metadata","jsonLib","jsonLib"],function(e,t,n){function u(t,n,i){var s=$("<div style='overflow:hidden;'></div>"),o=t;$(t).append(s),window.setTimeout(function(){var t=new Jsc.PalettePicker(s,{optionsPopupZIndex:100}),o=t.searchBox[0];o.setAttribute("cacheID",i),r.addListener(o,"click",function(t){this.parentNode.nextSibling.nextSibling.focus(),e("dom").callClickOn(this.parentNode.nextSibling.nextSibling)}),t.setPalette(n);var u=t.getPalette(),a;t.setOnChange(function(){a&&clearTimeout(a),a=window.setTimeout(function(){if(t.getPalette()==u)return;var n=t.searchBox[0],r=n.getAttribute("cacheID");r=parseInt(r,10);var i=GLOBAL.props[r];e("controller").omitLateRedraw(i.fullname);var s=n.value;e("eventHandlers").UIValueChanged(r,s)},50)})},0)}function a(t,n,r,i){var s=document.createElement("div"),u=document.createElement("div"),a=document.createElement("div"),f=document.createElement("div"),l=new Jsc.ColorPicker(f);l.fromString(n),l.jsColor.cacheID=i,l.jsColor.data=r,l.jsColor.onOpen=function(){o.suspendHistory(!0)},l.jsColor.onImmediateChange=function(){var t=this.cacheID;t=parseInt(t,10);var n=GLOBAL.props[t],r=this.toString();r.indexOf("'")===-1,e("controller").omitLateRedraw(n.fullname),e("eventHandlers").UIValueChanged(t,r)},l.jsColor.onClose=function(){o.suspendHistory(!1)},a.addEventListener("click",e("tree_node_handler2").colorPickerOpen_handler),a.setAttribute("cacheID",i),f.childNodes[0].style.width="10px",f.childNodes[1].style.margin="0px 0px 0px 10px ",f.childNodes[1].style.cssFloat="none",s.appendChild(u),u.appendChild(a),a.appendChild(f),t.appendChild(s)}function f(t,n,r,i){var s=document.createElement("div"),o=document.createElement("div"),u=document.createElement("div"),a=document.createElement("div");s.appendChild(o),o.appendChild(u),u.appendChild(a);var f=new Jsc.ColorPicker(a);f.fromString(n),f.jsColor.cacheID=i,f.jsColor.data=r,f.jsColor.onImmediateChange=function(){var t=this.cacheID;t=parseInt(t,10),node=GLOBAL.props[t];var n=this.toString();n.indexOf("'")===-1,e("eventHandlers").UIValueChanged(t,n)},a.childNodes[0].style.width="10px",a.childNodes[1].style.margin="0px 0px 0px 10px ",a.childNodes[1].style.cssFloat="none",t.appendChild(s)}function l(t,n,r,i,s,o){var u=e("get_metadata"),a,f=document.createElement("div"),l=document.createElement("div"),c=document.createElement("div");f.setAttribute("class","drop-holder"),l.setAttribute("class","scrollable-area-wrapper"),c.setAttribute("class","drop-list");var h=document.createElement("div");h.setAttribute("class","select-options options-overflow");var p=document.createElement("div");p.setAttribute("class","select-top");var d=document.createElement("div");d.setAttribute("class","select-right"),p.appendChild(d),h.appendChild(p),c.appendChild(n),l.appendChild(c),f.appendChild(l),h.appendChild(f);var v=document.createElement("div");v.setAttribute("class","select-bottom");var m=document.createElement("div");m.setAttribute("class","select-right"),v.appendChild(m),h.appendChild(v);var g=document.createElement("div");g.setAttribute("class","row");if(i){n.setAttribute("seq",i);var y=document.createElement("label");t.fullname.split(".").length>2&&y.setAttribute("class","width");var b=document.createElement("span");b.innerHTML=i;if(a=u.formatTooltip(e("jsonLib").evalPath(o,"enumData."+i+".description")))b.title=a;b.setAttribute("class","lightTreeLabel"),y.appendChild(b),g.appendChild(y)}var w=document.createElement("div");w.setAttribute("class","select-holder"),a?w.title=a:w.title=o.inputTooltip;var E=document.createElement("div");E.setAttribute("class","select-area select-focus");var S=document.createElement("span"),x=document.createElement("span");S.setAttribute("cacheID",s),S.innerHTML=r,e("jsonLib").evalPath(o,"enumData."+i+".members."+r+".isDefault")?S.setAttribute("class","center isDefault"):S.setAttribute("class","center"),x.setAttribute("class","left");var T=document.createElement("a");return T.setAttribute("class","select-opener"),E.appendChild(S),E.appendChild(x),E.appendChild(T),w.appendChild(E),w.appendChild(h),g.appendChild(w),g}var r=e("events"),i=e("ast_layer"),s=e("cache").cache,o=e("editor_work");t.makeDropDown=l,t.addColorPicker=a,t.addPalettePicker=u}),define("tree2",["require","exports","module","events","tree_data_source2","dom","statusBar","strings","jsonLib","editor_work","eventHandlers","docTab_update","jsonLib","tree_node_handler2","ast_layer","picker_ui2","get_metadata"],function(e,t,n){function tt(e){var t,n=e.getAttribute("cacheid"),r;for(;;){t=e.getAttribute("class");if(t&&t.indexOf("collapsable")>=0)return s.removeCssClass(e,"collapsable"),!0;r=e.getAttribute("cacheid");if(n!=r)return!1;e=e.parentNode;if(!e)return!1}return!1}function nt(){var e,t,n,r,i;for(var i in O){r=document.getElementById(O[i]);if(!r){a&&console.log("div for "+O[i]+" is empty");continue}if(r.getAttribute("done"))continue;n=r.getAttribute("nodeUI"),t=r.getAttribute("cacheID"),t=parseInt(t,10),e=GLOBAL.props[t];var o=v.getValueFromAST({},e),u=s.removeToInsertLater(r);n==="color"?(m.addColorPicker(r,o,"",t),r.setAttribute("done","yes"),u()):n==="palette"?(m.addPalettePicker(r,o,t),r.setAttribute("done","yes"),u()):n==="dropdown"&&(u(),st(r,e,r.parentNode,t),r.setAttribute("done","yes"))}r=document.getElementById(F);if(r){r.style.backgroundColor="yellow";var f=document.createElement("input");f.style.width="1px",f.style.backgroundColor="yellow",r.appendChild(f),f.focus(),r.focus(),setTimeout(function(){var e=document.getElementById(F);e&&(e.style.backgroundColor=""),f&&f.parentNode.removeChild(f)},2e3)}F="",r=document.getElementById(I),r&&r.focus(),I="",O={},c.init()}function rt(){}function it(){return}function st(e,t,n,r){var i=document.createElement("ul"),s=D[t.fullname],o=s.enumData,u=o.eChain.sequence.split(",");i.setAttribute("cacheID",r);if(u.length==1){e.appendChild(m.makeDropDown(t,i,v.getValueFromAST(t,t),null,r,s));return}var a=e;for(var f=0;f<u.length;f++){var i=document.createElement("ul"),l=m.makeDropDown(t,i,s.enumData.eChain[u[f]],u[f],r,s);a.parentNode.insertBefore(l,a.nextSibling),a=l}}function ot(e,t,n,r,i,s){var o=p.evalPath(i,"meta.template"),u=v.getValueTypeOfAst(s);if(o==="TextBox-number"||p.evalPath(i,"meta.type")==="number"||u==="number"){var a=v.getAstMeta(s);r.inputPattern=' pattern="-?[0-9]?.?[0-9]+" ',r.type=' type="text" ',r.inputStyle=' class="inputNum" ',a.valueType==="code"||r.value==="noValue"||!p.defined(r.value)&&r.value!==null?(s.valType="code",r.value=a.valueText,r.inputPattern="",r.inputStyle="",r.type=' class="inputLink" '):r.value===null?(s.valType="code",r.value="null",r.inputPattern="",r.inputStyle=""):s.valType="number"}else{var f=p.evalPath(s,"value.type")||s.type;f==="CallExpression"||f==="Identifier"||f==="NewExpression"||f==="FunctionExpression"?r.type=' class="inputLink" ':o==="CheckBox-bool"?(s.valType="bool",r.type=" "):(r.type=' class="inputStr" ',s.valType="string"),r.inputPattern=""}t===M.chartNode?e.push(p.supplant(W,r)):t===M.leafLiteral?(o==="CheckBox-bool"?r.value?e.push(p.supplant(et,r)):e.push(p.supplant(Z,r)):r.nodeUI.length>0?e.push(p.supplant(Q,r)):e.push(p.supplant(K,r)),n===_.lastNode):t===M.leafProperty?(o==="CheckBox-bool"?r.value==="true"?e.push(p.supplant(et,r)):e.push(p.supplant(Z,r)):r.nodeUI.length>0?e.push(p.supplant(G,r)):e.push(p.supplant(Y,r)),n===_.lastNode):t===M.node&&e.push(p.supplant(W,r))}function ut(e,t,n){function A(e){if(!e)return!1;for(var t=0;t<GLOBAL.props.length;t++)if(GLOBAL.props[t].nodeIndex===e&&GLOBAL.props[t].childrenNo===1)return!0;return!1}function _(){var e=(new Date).getTime();d=null,d=g.getMetaData(GLOBAL.props[S].path);var t=(new Date).getTime();GLOBAL.timeData.MetaTime=GLOBAL.timeData.MetaTime+(t-e),GLOBAL.timeData.MetaCalls=GLOBAL.timeData.MetaCalls+1}function P(){function e(e){return GLOBAL.props[S].fullname.indexOf(e.fullname)>=0?!0:!1}for(;;){if(!!e(L[L.length-1]))return;L.pop(),r.push(X)}}function H(){function e(e){return GLOBAL.props[S].fullname.indexOf(e.fullname)>=0?!0:!1}function e(e){return GLOBAL.props[S].fullname.indexOf(e.fullname)>=0?!0:!1}m&&(r.push(J),m=!1);for(;;){if(!!e(L[L.length-1]))return;L.pop(),r.push(X)}return;var t,n,i,s,o,u,f}function B(e,t){return t.loc.start.line>e.loc.end.line?!1:t.loc.start.line===e.loc.end.line&&t.loc.start.column>e.loc.end.column?!1:t.loc.start.line>=e.loc.start.line&&t.loc.end.line<e.loc.end.line?!0:t.loc.end.line===e.loc.end.line&&t.loc.end.column>e.loc.end.column?!1:t.loc.start.line==e.loc.start.line&&t.loc.end.line==e.loc.end.line&&t.loc.start.column>e.loc.start.column&&t.loc.end.column<e.loc.end.column?!0:!1}function j(e){return e.value&&e.value.value?e.value.value:e.value&&e.value.raw?e.value:""}function F(e,t){if(x.hasOwnProperty(e))return x[e];var n=t.path.split(".").length;return e[e.length-1]==="]"&&t.childrenNo>3?!0:t.parent&&t.parent.shortname==="series"&&t.parent.childrenNo===1?!1:n>2?!0:!1}var r=[];L=[];var i="",s="",o="",u="",a=M.leafProperty,f=0,l={},c=0,h=GLOBAL.props.length;GLOBAL.timeData.MetaTime=0,GLOBAL.timeData.MetaCalls=0;var d=null,m=!1,y=!1,b,w;for(var S=c;S<h;S++){b=GLOBAL.props[S],w=v.getAstMeta(b);if(b.isInFunctionDeclaration)continue;if(b.fullname[0]===".")continue;_();var T=p.defined(p.evalPath(d,"warning"));T,p.defined(b.textboxValue)?l.value=b.textboxValue:l.value=ft(v.getValueFromAST({ast_node_dec:b},b,"getRaw"))+"",l.label=at(b)+":",l.last="",l.cacheid=S,l.toolTip=b.fullname,l.toolTip2=b.fullname,l.inputStyle="",l.nodeUI="",l.nodeUI_id="",l.hitarea="",l.lastNode="",l.toggleChidren="",l.label=p.evalPath(d,"label")||l.label;var N;if(N=p.evalPath(d,"meta.template"))N.indexOf("TextBox")===0&&(b.textboxValue=l.value+"");else{if(!l.value&&!b.childrenNo&&!b.divID)continue;w.valueType==="code"}d&&d.meta&&d.meta.dropDownInfo?(l.toolTip=p.evalPath(d,"labelTooltip")||l.toolTip,l.toolTip2=p.evalPath(d,"inputTooltip")||l.toolTip):(l.toolTip=p.evalPath(d,"labelTooltip")||l.toolTip,l.toolTip2=p.evalPath(d,"inputTooltip")||l.toolTip),N&&(N&&N==="DropDown-string"?(l.nodeUI='nodeUI="dropdown"',l.nodeUI_id=b.fullname,O[S]=l.nodeUI_id,D[b.fullname]=d):N&&N.indexOf("PalettePicker")>=0?(D[b.fullname]=d,l.nodeUI_id=b.fullname,O[S]=l.nodeUI_id,l.nodeUI='nodeUI="palette"'):N&&N.indexOf("ColorPicker")>=0&&(l.nodeUI='nodeUI="color"',l.nodeUI_id=b.fullname,O[S]=l.nodeUI_id,D[b.fullname]=d));if(b.divID){l.hitarea="hitarea",a=M.chartNode,l.label=l.value=b.name,l.ccsNodeType="nodeType1",l.last="",l.collapsable="collapsable";if(y||S>1){m&&r.push(J),m=!1;for(var C=0;C<L.length;C++)r.push(X);L=[]}y=!0,L.push(b)}else if(b.childrenNo)b.lastNode?l.hitarea="hitarea":l.hitarea="hitarea",a=M.node,l.value=b.shortname+"",l.ccsNodeType="nodeType2",F(b.fullname,b)?l.collapsable=" ":l.collapsable="collapsable",b.isLast&&(l.last="last"),b.type==="Property"?(b.properties||(l.last="last"),!b.nextSibling&&b.lastNode&&(l.lastNode="lastNode"),!b.nextSibling||!b.prevSibling?!b.nextSibling&&!!b.prevSibling&&b.fullname.split(".").length>2&&b.lastNode&&(l.hitarea=""):b.fullname.split(".").length>2&&(l.hitarea="")):b.type==="ArrayExpression"?(!!b.nextSibling&&!!b.prevSibling&&b.fullname.split(".").length>2&&(l.hitarea=""),b.properties||(l.last="last"),L[L.length-1].parentIndex===b.parentIndex&&(l.last=""),b.nextSibling&&!b.prevSibling&&l.last==="last"&&(l.last=""),!b.nextSibling&&!!b.prevSibling&&(l.last="last")):b.type==="ObjectExpression"&&!!b.nextSibling&&!!b.prevSibling&&b.fullname.split(".").length>2&&(l.hitarea=""),L.length>1?H():m&&(r.push(J),m=!1),L.push(b);else if(b.type==="Property")a=M.leafProperty,p.defined(b.textboxValue)||(b.textboxValue=l.value),m||r.push(V),m=!0,P();else if(b.type==="UnaryExpression")m||r.push(V),a=M.leafLiteral,l.value=b.operator+""+b.argument.value,N&&N.indexOf("TextBox")===0&&(b.textboxValue=l.value+""),m=!0;else if(b.type==="Literal")m||r.push(V),a=M.leafLiteral,m=!0,P();else if(b.type==="BinaryExpression"||b.type==="ExpressionStatement")m||r.push(V),a=M.leafLiteral,m=!0,P();else if(b.type==="NewExpression")m||r.push(V),a=M.leafLiteral,m=!0;else{if(b.type==="ObjectExpression")continue;b.type==="ArrayExpression"&&(a=M.node,l.ccsNodeType="nodeType2",l.collapsable="collapsable",b.childrenNo===1&&(l.last="last"),H())}if(b.type==="Property"&&b.value.type==="ArrayExpression"){var k=b.value.elements[0].type;(k==="ObjectExpression"||k==="ArrayExpression")&&b.childrenNo>1&&(l.toggleChidren=!0,E[b.fullname]=b)}l.toggleChidren?l.toggleChidren=z:l.toggleChidren=" ",b.isLast?(l.last="last",l.hitarea="hitarea"):(l.last=" ",b.childrenNo&&(l.hitarea="hitarea")),w.valueType!=="string"&&(l.value=w.valueText),ot(r,a,f,l,d,b)}for(var S=0;S<L.length;S++)r.push(X);return L=[],r.join("")}function at(e){return e.shortName?e.shortName:e.key&&e.key.name?e.key.name:""}function ft(e){return e?typeof e=="string"?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):e:e}function lt(e,t,n){(x[e.fullname]=t)?s.removeCssClass(n,"collapsable"):s.addCssClass(n,"collapsable"),vt()}function ct(e,t){var n=GLOBAL.props[e];t||lt(n,!1,pt(e));var r=p.evalPath(n,"value.elements");for(var i=0,s=r.length;i<s;i++){var o=r[i];lt(o,t,pt(o.nodeIndex))}}function ht(e){var t=GLOBAL.props[e],n=S[t.fullname],r;n?S[t.fullname]=!1:S[t.fullname]=!0;var i=p.evalPath(t,"value.elements");for(var s=0,o=i.length;s<o;s++){var u=i[s];lt(u,!S[t.fullname],pt(u.nodeIndex))}}function pt(e){var t=$("strong[cacheid="+e+"]").closest("div.root");return t[0]}function dt(e){if(e!=="noError"){if(dt.lastState==="error")return}else if(dt.lastState!=="error")return;y=y||$("#uiDisabler"),b=b||$("#uiDisablerOverlay"),y.show(),e==="soft"?b.addClass("soft"):b.removeClass("soft"),e=e||dt.lastState,e==="error"?$("span.uiDisabledMessage").html(u.other.UIDisabledError):$("span.uiDisabledMessage").html(u.other.UIDisabled),dt.lastState=e,o.show(u.other.UIDisabled,{claimID:"uiDisabled",claimDuration:3e3});var t=document.getElementById("share"),n=GLOBAL.isPHPSample||!GLOBAL.isEditSample||e==="error";t.disabled=n,n?t.setAttribute("class","share disabled"):t.setAttribute("class","share")}function vt(){y=y||$("#uiDisabler"),w=w||$("#UIEditor");var e=w.height();y.height(e)}function mt(){dt.lastState=undefined,y=y||$("#uiDisabler"),y.hide(),o.unclaim("uiDisabled")}function gt(){return y=y||$("#uiDisabler"),!y.is(":visible")}function yt(){$("div.select-options").hide(),$("div.treeContainer").css("padding-bottom","")}function bt(e){var t=$("#docsUiContainer");e?($("#sidebar").hide(),t.hide()):($("#sidebar").show(),t.show())}var r=e("events"),i=e("tree_data_source2"),s=e("dom"),o=e("statusBar"),u=e("strings").presets,a=u.debug,f=e("jsonLib"),l=e("editor_work"),c=e("eventHandlers"),h=e("docTab_update"),p=e("jsonLib"),d=e("tree_node_handler2"),v=e("ast_layer"),m=e("picker_ui2"),g=e("get_metadata"),y,b,w,E={},S={},x={},T="",N=[],C=0,k,L=[],A={},O={},M={leafLiteral:1,leafProperty:2,chartNode:4,node:8},_={firstNode:1,lastNode:2,singleNode:3},D={},P=navigator.userAgent.match(/iPad/i)!=null,H=jQuery(".sidebar-holder"),B,j=ace.require("ace/renderloop").RenderLoop,F="",I="",q,R=!0,U=function(){this.nodeGUID=0,this.metaCache={},this.masterXml={},this.container,this.mainContainer},z='<span class="chldColGrp"><span class="expandChildren" title="Toggle All Expansion"></span></span>',W='<div class="root {ccsNodeType}  {collapsable} {last} {lastNode} " ><a  class="{ccsNodeType}" title="{toolTip}" style="cursor: pointer;"><em class="{hitarea}"></em><span><strong cacheid="{cacheid}">{label}</strong></span></a><div class="nodes"  cacheid="{cacheid}">{toggleChidren}',X="</div></div>",V='<div class="root leaf">',J="</div>",K='<div   class="row"><label title="{toolTip}" cacheid="{cacheid}"  >{label}</label><div {nodeUI} class="input-text" cacheid="{cacheid}"><div class="input-text-holder" cacheid="{cacheid}" title="{toolTip2}"><input {type}{inputPattern} {inputStyle} cacheid="{cacheid}"   value="{value}"></div></div></div>',Q='<div  {nodeUI} id={nodeUI_id} cacheid="{cacheid}" class="row"><label title="{toolTip}" cacheid="{cacheid}  "  ><span cacheid="{cacheid}" >{label}</span></label></div>',G='<div cacheid="{cacheid}"  {nodeUI} id={nodeUI_id} class="row"><label title="{toolTip}" cacheid="{cacheid}" ><span   cacheid="{cacheid}">{label}</span></label></div>',Y='<div class="row"><label cacheid="{cacheid}"><span cacheid="{cacheid}" title="{toolTip}">{label}</span></label><div {nodeUI} class="input-text" cacheid="{cacheid}"><div class="input-text-holder" cacheid="{cacheid}" title="{toolTip2}"><input {type}{inputPattern} {inputStyle} {nodeUI} cacheid="{cacheid}" title="{toolTip2}" value="{value}"></div></div></div>',Z='<div class="row"><label title="{toolTip}" ><span >{label}</span></label><div title="{toolTip2}" cacheid="{cacheid}" class="switch-area off" ><input  class="switch hidden"></div></div>',et='<div class="row"><label title="{toolTip}" ><span >{label}</span></label><div title="{toolTip2}" cacheid="{cacheid}" class="switch-area" ><input  class="switch hidden"></div></div>';(function(){var e=this;this.init=function(t,n){var i,o=0;GLOBAL.currentSampleName!==T?(x={},E={},S={},T=GLOBAL.currentSampleName):(i=$("div.sidebar-holder"),o=i[0].scrollTop);var u=(new Date).getTime();N=[],this.mainContainer=document.getElementById("UIEditor"),this.container=document.createElement("div"),this.container.setAttribute("class","treeContainer");var f=ut(),l=s.removeToInsertLater(this.mainContainer);this.mainContainer.innerHTML="",this.mainContainer.appendChild(this.container),r.addListener(this.container,"click",function(t){e.clickNode(t)}),r.addListener(this.container,"mouseover",function(t){e.mouse_over(t)}),r.addListener(this.container,"mouseout",function(t){e.mouse_out(t)}),r.addListener(this.container,"mousedown",function(t){e.mouse_down(t)}),q=this.container;var c=this;this.container.innerHTML=f,l(),nt(),vt(),o&&(i[0].scrollTop=o),it(),t&&t.call();var h=(new Date).getTime();a&&console.log("UI time: "+(h-u)),GLOBAL.timeData.treeUI=h-u,this.init.notFirstTime=!0},this.mouse_over=function(e){e=r.fixEvent(e),r.stopEvent(e);return;var t,n,i,s},this.mouse_down=function(e){e=r.fixEvent(e);var t=e.target;if(t.tagName==="INPUT"){var n=$(t);n.unbind("select"),n.bind("select",c.inputSelect)}},this.mouse_out=function(e){e=r.fixEvent(e),r.stopEvent(e);return;var t},this.clickNode=function(e,t){e=r.fixEvent(e),r.stopEvent(e);var n=e.target,i=n.getAttribute("cacheid")||"",s=c.reportAction(n,"click");if(s.type==="nothing"||s.type==="toggleChildrenExpansion")return;if(n.getAttribute&&n.getAttribute("class")==="row")return;i===""&&n.getAttribute("class")==="select-opener"&&(i=n.previousSibling.previousSibling.getAttribute("cacheid")||""),i||(i=n.parentNode.parentNode.getAttribute("cacheid")||""),i||(i=n.parentNode.nextSibling.getAttribute("cacheid")||"");if(!i)return;i=+i;var o=GLOBAL.props[i],u=g.getMetaData(GLOBAL.props[i].path),a=p.evalPath(u,"meta.template")||"";if(s.type==="label")return;if(n.tagName==="A"&&n.parentNode&&n.parentNode.tagName==="LI"){d.dropDown_update_handler(n,D);return}if(n.tagName==="INPUT"){if(t){d.input_tag_update_handler(n);return}var f=n.getAttribute("class");f==="search-box";return}if(n.getAttribute("class")&&n.getAttribute("class").indexOf("switch-area")>=0){d.on_off_ui_handler(n,o);return}if(a.indexOf("DropDown")>=0||n.getAttribute("class")==="select-opener"){var l=i;d.dropDown_ui_handler(o,n,u,l);return}n.parentNode.parentNode.parentNode.getAttribute("class").indexOf("collapsable")>=0?lt(o,!0,n.parentNode.parentNode.parentNode):lt(o,!1,n.parentNode.parentNode.parentNode);return}}).call(U.prototype),t.escapeHtml=ft,t.Tree=U,t.setCollapseState=lt,t.adjustUiDisabler=vt,t.enableUI=mt,t.disableUI=dt,t.isUIEnabled=gt,t.setCollapseStateOfChildrenOf=ct,t.toggleCollapseStateOfChildrenOf=ht,t.closeAllDropdowns=yt,t.hideUI=bt}),define("highlight",["require","exports","module","jsonLib","token_tooltip","idleDefer","ast_layer","strings","smoothScrolling","smoothScrolling","editor_work","get_metadata","docTab_update","editor_work","tree2","docTab_update"],function(e,t,n){function v(){}function m(){p.miAnnotations=[],A(GLOBAL.aceEditor.getSession())}function g(){p.miAnnotations=[],f&&console.log("-=-=clearningWarnings");var e=GLOBAL.aceEditor.getSession().getMarkers();for(var t in e)e[t].clazz==="editorWarningHighlight"&&GLOBAL.aceEditor.getSession().removeMarker(t);c=[]}function y(){p.miAnnotations=[];var e=GLOBAL.aceEditor.getSession().getMarkers(!1);for(var t in e)GLOBAL.aceEditor.getSession().removeMarker(t)}function b(e){function f(e){var s=[];for(var o in e){var a=e[o];if(a.clazz==="ace_selection"||a.clazz.indexOf("ace_")===0)continue;GLOBAL.aceEditor.getSession().removeMarker(o);var f=i.evalPath(a,"range.range")||i.evalPath(a,"range"),l=u.aceToAst(f);l=i.fasterExtend({},l),u.offsetRange(l,t,n,r),a.range=u.getAceRange(l),GLOBAL.aceEditor.getSession().addMarker(a.range,a.clazz,a.type,a.inFront),s.push(a)}return s}function l(e){for(var t=0,n=e.length;t<n;t++){var i=e[t],s=a.row;s<=i.row&&(i.row+=r)}}var t=e.point,n=e.offsetX,r=e.offsetY,s,o;T.stop&&T.stop(),s=GLOBAL.aceEditor.getSession().getMarkers(),f(s);var a=u.astToAce(t);l(p.miAnnotations),l(p.aceAnnotations),l(p.jsAnnotations),F()}function w(t){function i(){clearTimeout(w.sid1),w.fadeIdFinal&&w.fadeIdFinal()}if(w.lastCacheId===t&&w.fadeIdFinal)return;E.stop&&E.stop(),w.stop=i,i();var n,r;if((n=j(t))>-1){(r=$("[cacheid="+n+"][class*=row]")).length===0&&(r=$("[cacheid="+n+"]").parent(".row")).length===0&&(r=$("strong[cacheid="+n+"]")).length===0;if(r.is("strong")||(r=r.children("label").children("span")).length>0)N(r),r.css("background-color","rgb(255,255,0)"),e("smoothScrolling").focusElement(r),w.fadeIdFinal=function(){clearInterval(w.fadeId),r.css("background-color",""),delete w.fadeIdFinal},w.lastCacheId=t,w.sid1=setTimeout(function(){var e=0,t=255,n=255;w.fadeId=setInterval(function(){r.css("background-color","rgb("+t+","+n+","+e+")"),t--,n--,e+=15,e>240&&w.fadeIdFinal()},100)},800)}return}function E(t){function s(){clearTimeout(E.sid1),E.fadeIdFinal&&E.fadeIdFinal()}if(E.postpone)return;if(E.lastCacheId===t.nodeIndex)return;if(w.fadeIdFinal)return;E.stop=s,s();var n=t.nodeIndex,r;(r=$("[cacheid="+n+"][class*=row]")).length===0&&(r=$("[cacheid="+n+"]").parent(".row")).length===0&&(r=$("strong[cacheid="+n+"]")).length===0;var i;r.is("strong")||((i=r.children("label").children("span")).length>0?r=i:(i=r.children("label")).length>0&&(r=i)),r.length>0&&(N(r),r.css("background-color","rgb(240,240,0)"),e("smoothScrolling").focusElement(r,{animationDuration:800}),E.fadeIdFinal=function(){clearInterval(E.fadeId),r.stop(),r.css("background-color",""),r.css("font-weight",""),r.css("margin-left",""),delete E.fadeIdFinal},E.lastCacheId=t.nodeIndex,E.sid1=setTimeout(function(){var e=0,t=255,n=255;E.fadeId=setInterval(function(){r.css("background-color","rgb(240,240,"+e+")"),t--,n--,e+=15,e>240&&E.fadeIdFinal()},100)},200));return}function S(e,t,n){C(150),T(e,undefined,t);var r=e;e.value&&e.value.loc&&(r=e.value),x(r,n)}function x(t,n){function o(){i.focus(),i.moveCursorTo(s,t.loc.start.column+n),i.clearSelection()}var r=!1;n=n||0;var i=GLOBAL.aceEditor,s=GLOBAL.astToAceLine(t.loc.start.line);e("editor_work").unfoldRange({start:{row:s,column:t.loc.start.column},end:{row:s,column:t.loc.end.column}}),i.scrollToLine(s,!0,r,o),r||o()}function T(t,n,i){function h(){clearTimeout(T.sid1),T.fadeIdFinal&&T.fadeIdFinal(),A(GLOBAL.aceEditor.getSession())}function p(){o=GLOBAL.astToAceLine(t.loc.start.line);var e;f?e=new r.Range(o,f.start.column,o,f.end.column):e=new r.Range(o,0,o,Infinity);var n=GLOBAL.aceEditor.getSession().addMarker(e,"markValueInCode");l.push(n),T.fadeIdFinal=function(){clearInterval(T.fadeId),GLOBAL.aceEditor.getSession().removeMarker(n),delete T.fadeIdFinal},T.lastCacheId=t.nodeIndex,T.sid1=setTimeout(function(){var e=0;T.fadeId=setInterval(function(){$(".markValueInCode").css("background-color","rgb(255,255,"+e+")"),e+=20,e>255&&T.fadeIdFinal()},150)},1500)}T.stop=h,T.lastCacheId===t.nodeIndex&&T.fadeIdFinal,clearTimeout(T.sid1),T.fadeIdFinal&&T.fadeIdFinal(),A(GLOBAL.aceEditor.getSession()),t.fullname&&(n=e("get_metadata").getMetaData(t.fullname))&&e("docTab_update").showDocsForPath(t.fullname,i);if(t){var s=GLOBAL.aceEditor.getSession(),o=GLOBAL.astToAceLine(t.loc.start.line);e("editor_work").unfoldRange({start:{row:o,column:t.loc.start.column},end:{row:o,column:t.loc.end.column}});var a=t,f;i.type==="label"?f=t.loc:f=u.getValueLocFromAst(t);var c=GLOBAL.aceEditor.selection.getCursor().row;c>o-10&&c<o+10?(p(),GLOBAL.aceEditor.scrollToLine(o,!0,!1)):(GLOBAL.aceEditor.scrollToLine(o,!0,!0),p())}return}function N(t){var n=t,r;while(!(t=t.parent().closest(".nodeType2")).length==0&&n[0]!==t[0])r=t.next().attr("cacheid")||t.find("[cacheid]").attr("cacheid"),e("tree2").setCollapseState(GLOBAL.props[r],!1,t[0]),n=t}function C(e){E.stop&&E.stop(),E.postpone=!0,C.sid=setTimeout(function(){E.postpone=!1},e||10)}function k(e,t){var n=new r.Range(e,0,t,Infinity);A(GLOBAL.aceEditor.getSession()),GLOBAL.aceEditor.resize(!0);if(t){var i=GLOBAL.aceEditor.getSession().highlightLines(e,t);l.push(i)}else{var n=new r.Range(e,0,e,Infinity),s=GLOBAL.aceEditor.getSession().addMarker(n,"markValueInCode","screenLine");l.push(s),GLOBAL.aceEditor.scrollToLine(e)}GLOBAL.aceEditor.clearSelection(),setTimeout(function(){A(GLOBAL.aceEditor.getSession())},4e3)}function L(e,t){return}function A(e){for(var t in l)e.removeMarker(l[t]);for(var t in h)e.removeMarker(h[t])}function O(t,n){var i=GLOBAL.aceEditor.getSession(),t=GLOBAL.astToAceLine(t),s=new r.Range(t,0,t,Infinity),o=i.addMarker(s,"editorErrorHighlight");l.push(o),GLOBAL.aceEditor.scrollToLine(t,!0,!0),p.miAnnotations.push({row:t,column:0,text:n,type:"error"}),D(),e("docTab_update").setErrorWarning(t,n)}function M(e,t,n){var i=B(e,t);if(i){var s=GLOBAL.aceEditor.getSession(),o=GLOBAL.astToAceLine(i.loc.start.line),u=new r.Range(o,i.loc.start.column,o,i.loc.end.column),a=s.addMarker(u,"editorWarningHighlight");c.push(a),p.miAnnotations.push({row:o,column:i.loc.start.column,text:n,type:"warning"}),D()}}function _(e,t,n){var r=B(e,t),i=ace.require("ace/range");if(r){var s=GLOBAL.aceEditor.getSession(),o=GLOBAL.astToAceLine(r.loc.start.line),u=GLOBAL.aceEditor.getSession().highlightLines(o,o,"editorWarningHighlight");h.push(u.id),GLOBAL.aceEditor.scrollToLine(o,!0,!0)}}function D(){F()}function P(e){var t=0,n=0,r=getLineInPage2(e);return r}function H(e){var t=0,n=0,r,i;if(GLOBAL.aceRangeLocation)for(var s=0,o=GLOBAL.aceRangeLocation.length;s<o;s++){var u=GLOBAL.aceRangeLocation[s];t+=(r=u.end.row)-(i=u.start.row);if(e-t<0)return i+(e-n)-1;n+=r-i+1}return e}function B(e,t){for(var n=0,r=GLOBAL.props.length;n<r;n++){var s=GLOBAL.props[n];if(i.jsToPath(s.fullname)===t)return s}}function j(e){var t=e-GLOBAL.offsetLineJSPage+1;if(t<0)return-1;var n=-1,r=GLOBAL.props.length;for(var i=0;i<r;i++)if(GLOBAL.props[i].loc.start.line==t){n=i;break}return n}function F(){GLOBAL.aceEditor.getSession().setAnnotations(p)}function I(e,t){if(t.pop)p.aceAnnotations=t,F();else{var n=[];n.push.apply(n,t.miAnnotations),n.push.apply(n,t.aceAnnotations),e.call(this,n)}}function q(e){p.aceAnnotations=[],p.miAnnotations=[],F()}var r=ace.require("ace/range"),i=e("jsonLib"),s=e("token_tooltip"),o=e("idleDefer"),u=e("ast_layer"),a=e("strings").presets,f=a.debug,l=[],c=[],h=[],p={miAnnotations:[],aceAnnotations:[],jsAnnotations:[]},d=[];GLOBAL.annotations=p,t.setAnnotation=D,t.clear=m,t.clearAll=y,t.clearWarning=g,t.line=k,t.lineError=O,t.line1=M,t.lineRealtime=_,t.aceSetAnnotations=I,t.aceClearAnnotations=q,t.focusUIByLine=w,t.focusUIByCursor=E,t.focusCursorToCode=x,t.focusCodeLineByAst=T,t.postponeUIHighlight=C,t.offsetAll=b,t.focusCursorIntoCode=S}),define("controller",["require","exports","module","build_ui","highlight","ast_layer","jsonLib","idleDefer","rsvp","tree2","docTab_update","strings","eventHandlers","tree_data_source2","docTab_update","get_metadata","get_metadata","docTab_update","docTab_update"],function(e,t,n){function E(){v=!0,GLOBAL.props=[],d.setEditorChangeSuspendState(!0)}function S(){v=!1,m={},d.setEditorChangeSuspendState(!1),g={dirtyAst:!0,dirtyUI:!0,dirtyCode:!0,immediate:!0},GLOBAL.disableDelay=!0,H({entry:"esprima",options:{ui:"now"}}),g.immediate=!1,GLOBAL.disableDelay=!1}function x(){return h&&console.log("@@esprimaParse"),e("tree_data_source2").resetFullnames(),i.clearAll(),r.updatedJsonParseStep()}function T(){}function N(){return r.refreshChart()}function C(){return g}function k(){return w}function L(){function e(){r.redrawUI(),f.adjustUiDisabler(),g.dirtyUI=!1}function t(){var n="lateUIRedraw";u.defer(n,p[n],function(){w.focus!=="textbox"?e():t()})}g.dirtyUI?e():y[g.lastPath]||t()}function A(t){function s(){u.defer("UiRedraw",1,function(){try{r.redrawUI(),f.enableUI(),f.adjustUiDisabler(),g.dirtyUI=!1}catch(t){b="invalid",u.clear("lateUIRedraw"),f.disableUI("error"),e("docTab_update").setErrorJSC(c.errors.NoChartContainer,"Chart Error")}})}function o(){u.clear("lateUIRedraw")}function a(){var e="lateUIRedraw";u.defer(e,p[e],function(){w.focus!=="textbox"?s():a()})}var n,i={redraw:s,defer:a,stop:o};(n=i[t])&&n();return}function O(e){y[e]=!0}function M(e,t){v||(g=$.extend(g,e),setStates(g,t))}function _(e,t){var n=p[fullUpdate];if(!v){g=e||{dirtyAst:!0,dirtyUI:!0,dirtyCode:!0};var r;(r=GLOBAL.props[t])?g.lastPath=r.path:g.lastPath="",g.dirtyUI&&f.disableUI("soft"),A("stop"),g.dirtyAstPositions&&!g.dirtyAst&&!g.dirtyUI&&(GLOBAL.esprimaDuration>50?n=GLOBAL.esprimaDuration*2:n=GLOBAL.esprimaDuration),g.dirtyAst&&(GLOBAL.jsonIsDirty=!0),u.defer("fullUpdate",n,function(){D(t)})}}function D(e){H(e)}function P(e,t){var n=p.fullUpdate;t=t||{};if(v)return;var r={entry:e,options:t},i=P.queuedState;i&&(i.entry==="esprima"&&(r.entry="esprima"),r.options.ui==="skip"&&i.options.ui!=="skip"&&(r.options.ui=i.options.ui)),b==="invalid"?(r.entry="esprima",r.options.expedite="mi",r.options.delayType==="fast"):GLOBAL.jsonIsDirty&&(r.options.expedite="mi"),!f.isUIEnabled()&&r.options.ui==="skip"&&f.enableUI(),r.options.ui==="now"&&f.disableUI("soft"),r.options.delayType==="fast"&&(n=p.fullUpdateFast),A("stop"),P.queuedState=r,u.defer("fullUpdate",n,function(){D(r)})}function H(t){function a(){h&&console.log("@@update Chart"),delete t.entry,b==="invalid"&&(GLOBAL.jsonIsDirty=!0),b="valid";if(t.options.expedite==="mi"){var n;(n=GLOBAL.props[GLOBAL.currentCacheIndex])?e("get_metadata").getMetaData(n.fullname,undefined,{updateWarnings:!0}):h&&console.log("@@Cant find last AST"),l.refreshDocsInfo(),delete t.options.expedite}GLOBAL.isEditSample&&(f.disableUI("noError"),g.dirtyAst=!1,s.updateRefByPath()),N().then(p,d)}function p(){var e=t.options.ui;GLOBAL.isEditSample&&(e==="late"?A("defer"):e==="now"&&A("redraw")),delete t.options.ui}function d(t){h&&console.log("@@chatFAIL");var n=y(t);n?(f.enableUI(),e("get_metadata").getMetaData(g.lastPath)):(u.clear("lateUIRedraw"),f.disableUI("error"),b="invalid"),typeof n=="string"?e("docTab_update").setErrorJSC(n,"Chart Error"):w(t)}function v(e){h&&console.log("@@esprimaFAIL"),b="invalid",u.clear("lateUIRedraw"),m(e),f.disableUI("error")}function m(e){i.clear(),i.lineError(e.lineNumber,e.description)}function y(e){var t=/.+JSCharting\.js/g,n;if(typeof e=="string"&&e.indexOf("JSCharting Error:")===0){if(e.indexOf("#17")>-1)return c.errors["JSC#17"];if(e.indexOf("#13")>-1)return c.errors["JSC#13"]}if((n=t.exec(e.stack))!=null)return!0}function w(t){var n=/\<anonymous>:([0-9]+:[0-9]+)\)/g,r=/.+JSCharting\.js/g,s,o;(s=r.exec(t.stack))!=null?e("docTab_update").setErrorJSC(c.errors.chartInternal,"Chart Error"):(s=n.exec(t.stack))!=null&&(s.length>1&&(o=parseInt(s[1].split(":")[0])),o&&(i.clear(),i.lineError(o,t.message)))}t=t||{},t.entry==="esprima"?x().then(a,v):t.entry==="chart"&&a();return;var n,r,o}function B(e){w.focus="?";if(e&&e.action==="click"){if(e.data.type.indexOf("textbox")===0){w.focus="textbox",w.cacheID=e.data.cacheID;return}e.data.type==="codeText"&&(w.focus="codeText")}}function j(e){delete m[e]}function F(e){m[e]=!0}function I(){var e;for(var t in m)if(GLOBAL.props[t].textboxValueInvalid)return!1;return!0}var r=e("build_ui"),i=e("highlight"),s=e("ast_layer"),o=e("jsonLib"),u=e("idleDefer"),a=e("rsvp"),f=e("tree2"),l=e("docTab_update"),c=e("strings").presets,h=c.debug,p=c.deferTiming,d=e("eventHandlers"),v=!1,m={},g={dirtyAst:!0,dirtyAstPositions:!0,dirtyUI:!0,dirtyCode:!0,immediate:!0},y={},b="valid",w={action:"none",focus:"?",section:"",data:"",cacheID:"",element:""};a.on("error",function(e){console.assert(!1,e),console.log(e.stack)}),t.suspend=E,t.resume=S,t.getState=C,t.getCursorState=k,t.reportCursorState=B,t.reportInputInvalid=F,t.reportInputValid=j,t.omitLateRedraw=O,t.update=P}),define("docTab_update",["require","exports","module","events","get_metadata","controller","jsonLib","strings","ast_layer","idleDefer","highlight","eventHandlers","ast_layer","get_metadata"],function(e,t,n){function k(e){var t=$("div.documentation");e?t.hide():t.show()}function L(){w=document.getElementById(d),E=document.getElementById(v),m=$("#warningTab"),g=m.closest("li");var t=document.getElementById("docWarningTab");y=$(t).find('li:contains("Documentation")'),b=$("#codeError"),i.addListener(t,"click",function(t){var n=e("eventHandlers").reportAction(t.target,"click");n.type!=="nothing"&&j(t,n.element)}),I()}function A(e,t){S[e]=t,q()}function O(e){C.offsetAll(e)}function M(e,t,n){n=n||"JavaScript Error",e++,R(1,!0),P("warning");var r='<div class="errorWarnTabHead" >'+n+"</div>";r+="Line: "+e+"<br/>",r+='<div class="docsDesc">'+t+"</div>",r+='<div class="docsDesc">'+h.jsSyntaxDescription+"</div>",b.html(r)}function _(e,t){var n='<div class="errorWarnTabHead" >'+e+"</div>";n+='<div class="docsDesc">'+t+"</div>",$("#chartContentTab").html(n)}function D(e,t,n){var r=t||h.chartInternalTitle;R(1,!0),P("warning");var i='<div class="errorWarnTabHead" >'+r+"</div>";i+='<div class="docsDesc">'+e+"</div>";var s='<div class="errorWarnTabHead" >'+r+"</div>";n&&(s+='<div class="docsDesc">'+n+"</div>"),$("#chartContentTab").html(s),b.html(i)}function P(e){e==="warning"?(E.style.display="block",w.style.display="none",g.addClass("active"),y.removeClass("active")):(E.style.display="none",w.style.display="block",y.addClass("active"),g.removeClass("active"))}function H(e,t){function i(e){return e&&(e=e.replace(/href *= *"Enums\./g,'href="../Documentation/index.htm#node=Enums.').replace(/href *= *"Types\./g,'href="../Documentation/index.htm#node=Types.').replace(/href *= *"Tutorials\./g,'href="../Documentation/index.htm#node=Tutorials.').replace(/href *= *"iObject\./g,'href="../Documentation/index.htm#node=iObject.')),e}var n,r;t=t||{};if(e===H.curPath)return;T===0&&P("docs");var r=s.getDocsHtm(e,t);w.innerHTML=i(r)||f,H.curPath=e}function B(){var t=o.getCursorState();if(t.focus=="codeText"){var n=GLOBAL.aceEditor.selection,r=n.getCursor(),i;(i=e("ast_layer").findAstFromPos2(r))&&(i=i.anyProperty||i.any)&&H(i.fullname)}}function j(e,t){e=i.fixEvent(e),i.stopEvent(e),t=t||e.target,t.nodeType==3&&(t=t.parentNode),t.innerHTML==="Documentation"?P("docs"):(t.innerHTML.indexOf("Warnings")>=0||t.innerHTML.indexOf("Error")>=0)&&P("warning")}function F(e,t){t[e]=t,q()}function I(){S={},C.clearAll()}function q(){function m(e,t){var n=$('<div class="warningEntry"><h3 class="warningPath">'+e.replace("chart.","")+"</h3><em>"+t+"</em><div>");return n.mouseenter(function(){var e=$(this),t="warningHover";c.defer(t,p[t],function(){C.clear();var t=e.parent().parent().children(".warningCID").html(),n="chart."+e.children(".warningPath").html();C.lineRealtime(t,n,e)})}),n.mouseleave(function(){var e=$(this);c.clear("warningHover"),C.clear()}),n}function g(e,t,n){C.line1(e,t,n)}C.clearWarning(),b.html("");if(!GLOBAL.isEditSample)return;var t=0;for(var n in S){var i=$("<div></div>"),s=$('<div class="warningCID" >'+n+"</div>"),o=$('<div class="warningCIDCont"></div>');s.appendTo(i),o.appendTo(i);var a=0,f=l.sortPathsByAstPos(u.getPropNames(S[n]));for(var h=0,d=f.length;h<d;h++){var v=f[h];m(v,S[n][v]).appendTo(o),g(n,v,e("get_metadata").formatTooltip(S[n][v])),t++,a++}a>0&&i.appendTo(b)}C.setAnnotation(),R(t),t===0&&b.html(r)}function R(e,t){var n="Warnings";e&&(t?n='<b class="errorWarnTabCount">Warnings</b>':n+=" (<b>"+e+"</b>)"),T=e,m.html(n)}function U(){w=document.getElementById(d),E=document.getElementById(v),w.innerHTML=f,E.innerHTML=r}var r="No Warnings",i=e("events"),s=e("get_metadata"),o=e("controller"),u=e("jsonLib"),a=e("strings").presets,f=a.defaultStrings.defaultDocText,l=e("ast_layer"),c=e("idleDefer"),h=a.errors,p=a.deferTiming,d="API_Doc_Content",v="codeError",m,g,y,b,w,E,S={},x={},T=0,N="",C=e("highlight");t.clear=U,t.updateWarnings=A,t.showDocsForPath=H,t.updateErrors=F,t.setMainContentError=_,t.setErrorWarning=M,t.setErrorJSC=D,t.resetWarnings=I,t.refreshDocsInfo=B,t.offsetWarnings=O,t.hideDocTab=k,t.init=L}),define("get_metadata",["require","exports","module","strings","MIInterface","docTab_update","jsonLib"],function(e,t,n){function a(){}function d(e,t,n){function q(e,t){if(u.getPropNames(e.data.skeleton).join(",").indexOf(t+".")>-1)return!0}function R(e,t){function o(e){var t=e.split("."),n=[],r="";for(var i=0,s=t.length;i<s;i++){var o=t[i];r+=(r.length?".":"")+o,n.push(r)}return n}var n=o(t);n.reverse();for(var r=0,i=n.length;r<i;r++){var s=n[r];if(e.data.skeleton[s]&&t.indexOf(s+".")>-1&&e.data.skeleton[s].template)return s}}function U(e,t){for(var n in e.data.warnings)if(t.indexOf(n+".")>-1)return n;for(var n in e.data.skeleton)if(t.indexOf(n+".")>-1&&e.data.skeleton[n].warning)return n}function z(e){var t=e.split(".");return t[t.length-1]}function W(e,t){function r(e,t){n+="<br/><br/>["+e+"]<br/>"+t}var n="----------<br/>";return r("labelTooltip",e.labelTooltip),r("inputTooltip",e.inputTooltip),e.docsPath&&r("docsPath",e.docsPath),e.label&&r("label",e.label),e.warning&&r("warning",e.warning),r("docsWindowText",X(e,t)),n}function X(e,t){function m(e,t){n+="<br/><br/>["+e+"]<br/>"+t}function g(e){return'<div class="docsCID">('+e+") </div>"}function b(e){return'<div class="docsPath"> '+e.replace(y,"")+"</div>"}function w(e){return e.indexOf("obj_")===0?'<div class="docsType">(<a href="'+e.replace("obj_","Types.")+'">'+e.replace("obj_","")+"</a>)</div>":'<div class="docsType">('+e+")</div>"}function E(e){return'<div class="docsDesc">'+e+"</div>"}function S(e){return'<div class="docsDescError">'+e+"</div>"}function x(e){return'<div class="docsLinkBlock">Documentation: <a href="'+e+'"> '+e+"</a><div/>"}function T(e){function o(e,t){return'<li><span class="tokenName" title="Click to insert.">'+e+'</span><span class="tokenDesc">'+t+"</span></li>"}var t=[],n=JSCL.getTokens(e);if(n){t.push('<div class="docsTokenHeader" >Token Set: '+e+" </div>"),t.push(E("Click the token names to add or replace current selection.")),t.push('<ul class="tokenSetList">');for(var r=0,i=n.length;r<i;r++){var s=n[r];t.push(o(s[0],s[1]))}t.push("</ul>")}return t.join("")}var n="",r,i;n+=g(v),n+=b(t);var o=!1;e.description&&(n+=E(e.description),o=!0);if(e.valDescription){var a=e.type||u.evalPath(e,"raw.type")||u.evalPath(e,"ui.type");n+=w(a),n+=E(e.valDescription),o=!0}if(e.dropDownInfo){var f=e.dropDownInfo.eChain.sequence.split(",");for(var c=0,h=f.length;c<h;c++){r="";var p=f[c],d=e.dropDownInfo[p];r+=g(v),r+=b(t),r+=E(d.description),d.docsWindowText=r}o=!0}return e.tokenSet&&(n+=T(e.tokenSet)),e.docsPath&&(i=s.evalDocsPath(e.docsPath))&&(n+=x(i)),e.invalid?(n+=S(e.invalid.message),o=!0):e.warning?(n+=S(e.warning),o=!0):l.data.warnings[t]&&(n+=S(l.data.warnings[t]),o=!0),o||(n+=S("No information is available for this property.")),n}function V(e){return'<div class="invalidProperty">'+e+"</div>"}function $(e){var t=e.data.warnings,n,r=[];for(var s in t)r.push(s+" - "+t[s]),n=!0;if(!n)i&&console.log("--No Warnings--");else{i&&console.log("-- Warnings--");for(var o=0,u=r.length;o<u;o++){var a=r[o];i&&console.log("**"+a)}}}function J(e,t,n,r){function l(e){var t=s.getMiValType(e);if(t==="date")e=JSC.formatString(e,"d");else if(t==="string")return e.length>20&&(e=e.substring(0,18)+"..."),": "+u.escapeHtml(e)+"";return""}var i;if(r.docsPath&&r.docsPath.split(".").length===1){var o,a;i=r.docsPath;var f=z(n)+" ("+i+")";i==="point"&&(o=s.evalPath(t,n),(a=o.name||o.x)?f+=l(a):o.pop&&(f+=l(o[0])));if(i==="annotation"){o=s.evalPath(t,n);if(a=o.labelText||s.evalPath(o,"label.text"))f+=l(a)}if(i==="label"){o=s.evalPath(t,n);if(a=o.text)f+=l(a)}i==="labelStyle";if(i==="series"){o=s.evalPath(t,n);if(a=o.name)f+=l(a)}if(i==="axis"){o=s.evalPath(t,n);if(a=o.labelText||s.evalPath(o,"label.text"))f+=l(a)}if(i==="axisMarker"){o=s.evalPath(t,n);if(a=o.labelText||s.evalPath(o,"label.text"))f+=l(a)}if(i==="axisTick"){o=s.evalPath(t,n);if(a=o.labelText||s.evalPath(o,"label.text"))f+=l(a)}return e.label=f}}function K(e){var t={},n,r;for(var i in e){var s=z(i);n=i.substring(0,i.length-s.length-1),(r=e[n])?r!==e[i]&&(t[i]=e[i]):t[i]=e[i]}return t}function Q(e){return typeof e=="undefined"&&e!==null?!1:!0}n=n||{};if(!e)return;d.getDocsWindowText=X;var r={},a=!1,f=(new Date).getTime(),v=e.split(".")[0],y=v+".",b=u.jsToPath(e.split(".").slice(1).join(".")),w=y+b,E=w.length;w[E-1]==="."&&(w=w.substring(0,E-1));var S;if(t&&t.toLowerCase()==="dropdownchange"){l=c[v],S=h[v],u.setPathVal(S,b,GLOBAL.fullnames[e]);var x=s.processJson(S,w,v);l.data.skeleton[w]=x.data.skeleton[w],delete p[v][w]}else{var T=!0;if((GLOBAL.jsonIsDirty||!c[v])&&T){var N=(new Date).getTime();S=m(v);var C=(new Date).getTime();GLOBAL.chartJson=GLOBAL.chartJson||{},i&&console.log("buildJson() Running For "+v+" Time:"+(C-N)+"ms"),GLOBAL.jsonIsDirty=!1,h[v]=S,p[v]={};var k=(new Date).getTime();l=c[v]=s.processJson(S);if(v!=="chart"){var L={},A=l.data.otherPaths;for(var O in A)L[O.replace("chart.",y)]=A[O];l.data.otherPaths=L,A=l.data.skeleton,L={};for(var O in A)L[O.replace("chart.",y)]=A[O];l.data.skeleton=L,A=l.data.warnings,L={};for(var O in A)L[O.replace("chart.",y)]=A[O];l.data.warnings=L}var M=(new Date).getTime();i&&console.log("processJSON() Running For "+v+" Time:"+(M-k)+"ms"),o.updateWarnings(v,K(l.data.warnings)),GLOBAL.DoReport}else l=c[v],S=h[v],n.updateWarnings&&o.updateWarnings(v,K(l.data.warnings))}var _=p[v];if(r=_[w])return r;r={};var D=l.data.skeleton[w],P=l.data.warnings,H,B,j=z(w);if(D){r.meta=D,r.enumData=D.dropDownInfo,r.warning=D.warning,r.labelTooltip=D.labelTooltip=g(D.description),r.inputTooltip=D.inputTooltip=g(D.valDescription||D.description),r.label=D.label||j,r.tokenSet=D.tokenSet;if(P[w])r.labelTooltip+="\nWarnings: "+g(P[w]),r.label=V(r.label);else if(j&&!isNaN(j)){B=w.substring(0,w.length-j.length-1);var F;if(F=l.data.otherPaths[B]&&P[B]){var I=u.evalPath(F,"invalid.matchMap."+j);Q(I)&&!I&&(r.labelTooltip+="\nWarnings: This item of the array is not valid.",r.label=V(r.label))}}}else{i&&(q(l,w)||a&&((H=R(l,w))?console.log("The metadata is null for:"+w+" because the parent "+H+" has UI for it."):(H=U(l,w))?console.log("The metadata is null for:"+w+" because the parent "+H+":"+l.data.warnings[H]):(H=l.data.warnings[w])?console.log("The metadata is null for:"+w+" because: "+H):console.log("***The metadata is null for:"+w+"***")));if(D=l.data.otherPaths[w])r.meta=D,D.description?P[w]?(r.labelTooltip=g(D.description+"\nWarning: "+P[w]),r.label=V(J(r,S,b,D)||j)):(r.labelTooltip=g(D.description),r.label=J(r,S,b,D)||j):D.invalid&&P[w]?(r.inputTooltip=r.labelTooltip=g(D.invalid.message||"Warning: "+P[w]),r.label=V(j),r.warning=D.invalid.message):(r.label=j,(H=U(l,w))?(r.label=V(r.label),r.inputTooltip=r.labelTooltip=g("Warning: This value is invalid because "+l.data.warnings[H])):r.inputTooltip=g(D.description||u.evalPath(D,"raw.array.0.description")||b))}return _[w]=r,r}function v(e,t){var n=e.split(".")[0],r=n+".",i=u.jsToPath(r+e.split(".").slice(1).join(".")),s=i.replace(r,"");i[i.length-1]==="."&&(i=i.substring(0,i.length-1));var o=c[n],a=o.getMiData(i),f=o.getWarnings(),l;if(a)l=d.getDocsWindowText(a,i),t.subID&&a.dropDownInfo&&a.dropDownInfo[t.subID]&&(l=a.dropDownInfo[t.subID].docsWindowText);else if(a=o.data.otherPaths[i])return a.description?d.getDocsWindowText(a,i):a.invalid&&f[i]?d.getDocsWindowText(a,i):d.getDocsWindowText(a,i);return l}function m(e){var t=GLOBAL.fullnames,n,r={},i;for(var s in GLOBAL.fullnames)s.indexOf(e+".")===0&&(n=s.replace(e+".",""),i=t[s],u.defined(i)&&i!=="[]"&&i!=="{}"&&u.setPathVal(r,u.jsToPath(n),i));return r}function g(e){if(e){e=e.replace(/<br>/g,"\n").replace(/<br\/>/g,"\n").replace(/<br \/>/g,"\n"),e=e.replace(/"/g,"'");var t=/(<([^>]+)>)/ig;return e=e.replace(t,""),e}}var r=e("strings").presets,i=r.debug,s=e("MIInterface"),o=e("docTab_update"),u=e("jsonLib"),f="",l,c={},h={},p={};t.init=a,t.getMetaData=d,t.formatTooltip=g,t.getDocsHtm=v}),
/** START OF estraverse **/
/**  @preserve Copyright (C) 2012-2013 Yusuke Suzuki (twitter: @Constellation) and other contributors.

Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.

Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
function(e){if(typeof exports=="object"&&typeof module!="undefined")module.exports=e();else if(typeof define=="function"&&define.amd)define("estraverse",[],e);else{var t;typeof window!="undefined"?t=window:typeof global!="undefined"?t=global:typeof self!="undefined"?t=self:t=this,t.estraverse=e()}}(function(){var e,t,n;return function(){function e(t,n,i){function s(u,a){if(!n[u]){if(!t[u]){var f="function"==typeof require&&require;if(!a&&f)return f(u,!0);if(o)return o(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[u]={exports:{}};t[u][0].call(c.exports,function(e){var n=t[u][1][e];return s(n||e)},c,c.exports,e,t,n,i)}return n[u].exports}for(var o="function"==typeof require&&require,u=0;u<i.length;u++)s(i[u]);return s}return e}()({1:[function(e,t,n){(function r(t){function f(e){var t={},n,r;for(n in e)e.hasOwnProperty(n)&&(r=e[n],typeof r=="object"&&r!==null?t[n]=f(r):t[n]=r);return t}function l(e,t){var n,r,i,s;r=e.length,i=0;while(r)n=r>>>1,s=i+n,t(e[s])?r=n:(i=s+1,r-=n+1);return i}function c(e,t){this.parent=e,this.key=t}function h(e,t,n,r){this.node=e,this.path=t,this.wrap=n,this.ref=r}function p(){}function d(e){return e==null?!1:typeof e=="object"&&typeof e.type=="string"}function v(e,t){return(e===n.ObjectExpression||e===n.ObjectPattern)&&"properties"===t}function m(e,t){var n=new p;return n.traverse(e,t)}function g(e,t){var n=new p;return n.replace(e,t)}function y(e,t){var n;return n=l(t,function(n){return n.range[0]>e.range[0]}),e.extendedRange=[e.range[0],e.range[1]],n!==t.length&&(e.extendedRange[1]=t[n].range[0]),n-=1,n>=0&&(e.extendedRange[0]=t[n].range[1]),e}function b(e,t,n){var r=[],s,o,u,a;if(!e.range)throw new Error("attachComments needs range information");if(!n.length){if(t.length){for(u=0,o=t.length;u<o;u+=1)s=f(t[u]),s.extendedRange=[0,e.range[0]],r.push(s);e.leadingComments=r}return e}for(u=0,o=t.length;u<o;u+=1)r.push(y(f(t[u]),n));return a=0,m(e,{enter:function(e){var t;while(a<r.length){t=r[a];if(t.extendedRange[1]>e.range[0])break;t.extendedRange[1]===e.range[0]?(e.leadingComments||(e.leadingComments=[]),e.leadingComments.push(t),r.splice(a,1)):a+=1}if(a===r.length)return i.Break;if(r[a].extendedRange[0]>e.range[1])return i.Skip}}),a=0,m(e,{leave:function(e){var t;while(a<r.length){t=r[a];if(e.range[1]<t.extendedRange[0])break;e.range[1]===t.extendedRange[0]?(e.trailingComments||(e.trailingComments=[]),e.trailingComments.push(t),r.splice(a,1)):a+=1}if(a===r.length)return i.Break;if(r[a].extendedRange[0]>e.range[1])return i.Skip}}),e}var n,i,s,o,u,a;return n={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportExpression:"ImportExpression",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},s={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportExpression:["source"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},o={},u={},a={},i={Break:o,Skip:u,Remove:a},c.prototype.replace=function(t){this.parent[this.key]=t},c.prototype.remove=function(){return Array.isArray(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)},p.prototype.path=function(){function u(e,t){if(Array.isArray(t))for(r=0,i=t.length;r<i;++r)e.push(t[r]);else e.push(t)}var t,n,r,i,s,o;if(!this.__current.path)return null;s=[];for(t=2,n=this.__leavelist.length;t<n;++t)o=this.__leavelist[t],u(s,o.path);return u(s,this.__current.path),s},p.prototype.type=function(){var e=this.current();return e.type||this.__current.wrap},p.prototype.parents=function(){var t,n,r;r=[];for(t=1,n=this.__leavelist.length;t<n;++t)r.push(this.__leavelist[t].node);return r},p.prototype.current=function(){return this.__current.node},p.prototype.__execute=function(t,n){var r,i;return i=undefined,r=this.__current,this.__current=n,this.__state=null,t&&(i=t.call(this,n.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=r,i},p.prototype.notify=function(t){this.__state=t},p.prototype.skip=function(){this.notify(u)},p.prototype["break"]=function(){this.notify(o)},p.prototype.remove=function(){this.notify(a)},p.prototype.__initialize=function(e,t){this.visitor=t,this.root=e,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=null,t.fallback==="iteration"?this.__fallback=Object.keys:typeof t.fallback=="function"&&(this.__fallback=t.fallback),this.__keys=s,t.keys&&(this.__keys=Object.assign(Object.create(this.__keys),t.keys))},p.prototype.traverse=function(t,n){var r,i,s,a,f,l,c,p,m,g,y,b;this.__initialize(t,n),b={},r=this.__worklist,i=this.__leavelist,r.push(new h(t,null,null,null)),i.push(new h(null,null,null,null));while(r.length){s=r.pop();if(s===b){s=i.pop(),l=this.__execute(n.leave,s);if(this.__state===o||l===o)return;continue}if(s.node){l=this.__execute(n.enter,s);if(this.__state===o||l===o)return;r.push(b),i.push(s);if(this.__state===u||l===u)continue;a=s.node,f=a.type||s.wrap,g=this.__keys[f];if(!g){if(!this.__fallback)throw new Error("Unknown node type "+f+".");g=this.__fallback(a)}p=g.length;while((p-=1)>=0){c=g[p],y=a[c];if(!y)continue;if(Array.isArray(y)){m=y.length;while((m-=1)>=0){if(!y[m])continue;if(v(f,g[p]))s=new h(y[m],[c,m],"Property",null);else{if(!d(y[m]))continue;s=new h(y[m],[c,m],null,null)}r.push(s)}}else d(y)&&r.push(new h(y,c,null,null))}}}},p.prototype.replace=function(t,n){function x(e){var t,n,i,s;if(e.ref.remove()){n=e.ref.key,s=e.ref.parent,t=r.length;while(t--){i=r[t];if(i.ref&&i.ref.parent===s){if(i.ref.key<n)break;--i.ref.key}}}}var r,i,s,f,l,p,m,g,y,b,w,E,S;this.__initialize(t,n),w={},r=this.__worklist,i=this.__leavelist,E={root:t},p=new h(t,null,null,new c(E,"root")),r.push(p),i.push(p);while(r.length){p=r.pop();if(p===w){p=i.pop(),l=this.__execute(n.leave,p),l!==undefined&&l!==o&&l!==u&&l!==a&&p.ref.replace(l),(this.__state===a||l===a)&&x(p);if(this.__state===o||l===o)return E.root;continue}l=this.__execute(n.enter,p),l!==undefined&&l!==o&&l!==u&&l!==a&&(p.ref.replace(l),p.node=l);if(this.__state===a||l===a)x(p),p.node=null;if(this.__state===o||l===o)return E.root;s=p.node;if(!s)continue;r.push(w),i.push(p);if(this.__state===u||l===u)continue;f=s.type||p.wrap,y=this.__keys[f];if(!y){if(!this.__fallback)throw new Error("Unknown node type "+f+".");y=this.__fallback(s)}m=y.length;while((m-=1)>=0){S=y[m],b=s[S];if(!b)continue;if(Array.isArray(b)){g=b.length;while((g-=1)>=0){if(!b[g])continue;if(v(f,y[m]))p=new h(b[g],[S,g],"Property",new c(b,g));else{if(!d(b[g]))continue;p=new h(b[g],[S,g],null,new c(b,g))}r.push(p)}}else d(b)&&r.push(new h(b,S,null,new c(s,S)))}}return E.root},t.version=e("./package.json").version,t.Syntax=n,t.traverse=m,t.replace=g,t.attachComments=b,t.VisitorKeys=s,t.VisitorOption=i,t.Controller=p,t.cloneEnvironment=function(){return r({})},t})(n)},{"./package.json":2}],2:[function(e,t,n){t.exports={name:"estraverse",description:"ECMAScript JS AST traversal functions",homepage:"https://github.com/estools/estraverse",main:"estraverse.js",version:"4.3.0",engines:{node:">=4.0"},maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository:{type:"git",url:"http://github.com/estools/estraverse.git"},devDependencies:{"babel-preset-env":"^1.6.1","babel-register":"^6.3.13",chai:"^2.1.1",espree:"^1.11.0",gulp:"^3.8.10","gulp-bump":"^0.2.2","gulp-filter":"^2.0.0","gulp-git":"^1.0.1","gulp-tag-version":"^1.3.0",jshint:"^2.5.6",mocha:"^2.1.0"},license:"BSD-2-Clause",scripts:{test:"npm run-script lint && npm run-script unit-test",lint:"jshint estraverse.js","unit-test":"mocha --compilers js:babel-register",build:"gulp"}}},{}]},{},[1])(1)})
/** END OF estraverse **/
,define("findCharts",["require","exports","module","estraverse","jsonLib"],function(e,t,n){function u(e,t,n,r){var i,s;for(var a=0,f=o.length;a<f;a++){var l=o[a];if(l.name===e){i=!0;break}}i?u(e+"x",t,n,r):(r.indexOf("#")==0&&(s=r.replace("#","")),o.push({name:e,options:t,node:n,selector:r,divId:s}))}function a(){function I(e){if(e==="$"||e==="jQuery")return!0}$("#output").val("");var e=GLOBAL.scopes,t,n;for(var r=0,o=e.length;r<o;r++){var a=e[r];for(var c=0,d=a.references.length;c<d;c++){var v=a.references[c];if(v.writeExpr&&v.writeExpr.type==="NewExpression"){n=l(v.writeExpr,function(e){if(e.type==="MemberExpression"||e.type==="Identifier")return!0},function(e){return e.callee});if(n&&(t=p(a,n,function(e){if(e.type==="MemberExpression")return!0}))&&f(a,t)){var m=v.writeExpr.arguments[0],b=v.writeExpr.arguments[0];if(b.type=="Literal"&&m.raw.indexOf("'")>-1)b=v.writeExpr.arguments[1],b.type=="Identifier"&&(b=g(a,b).declaration.node.init),u(v.identifier.name,b,v.writeExpr,"#"+m.value);else{var w=h(v.writeExpr.arguments[0],"targetElement");if(!w){var E=g(a,v.writeExpr.arguments[0]);b=E.declaration.node.init,w=h(b,"targetElement")}if(!w)continue;u(v.identifier.name,b,v.writeExpr,"#"+w.value.value)}}}else if(v.writeExpr&&v.writeExpr.type===s.CallExpression&&i.evalPath(v.writeExpr,"callee.object.name")==="JSC"&&i.evalPath(v.writeExpr,"callee.property.name")==="chart"){var m=v.writeExpr.arguments[0],b=v.writeExpr.arguments[0];if(b.type=="Literal")b=v.writeExpr.arguments[1],b.type=="Identifier"&&(b=g(a,b).declaration.node.init),u(v.identifier.name,b,v.writeExpr,"#"+m.value);else{var w=h(v.writeExpr.arguments[0],"targetElement");if(!w){var E=g(a,v.writeExpr.arguments[0]);b=E.declaration.node.init,w=h(b,"targetElement")}u(v.identifier.name,b,v.writeExpr,"#"+w.value.value)}}else v.identifier.name!=="$"&&v.identifier.name!=="jQuery"&&v.writeExpr&&v.writeExpr.type===s.CallExpression}var S="",x,T,N=[],C=[{path:"type",value:s.CallExpression},{path:"callee.type",value:s.MemberExpression},{resolveRef:"callee.property",identifier:"JSC",save:{path:"arguments",name:"chartArguments"}},{resolveRef:"callee.object",criteria:{path:"callee.name",value:["jQuery","$"],save:{path:"arguments",name:"jQueryArguments"}}}];for(var r=0,o=e.length;r<o;r++){var a=e[r];try{var k=y(a,C)}catch(L){console.info(L)}var A=[];for(var O=0,M=k.length;O<M;O++){var _=k[O];if(_.info.chartArguments.length>0){for(var D=0,P=_.info.chartArguments.length;D<P;D++){var H=_.info.chartArguments[D],B=p(a,H,function(e){if(e.type===s.ObjectExpression)return!0});B&&(_.info.chartArguments[D]=B)}for(var D=0,P=_.info.jQueryArguments.length;D<P;D++){var H=_.info.jQueryArguments[D],B=p(a,H,function(e){if(e.type===s.Literal)return!0});B&&(_.info.jQueryArguments[D]=B)}A.push(_)}}N.push.apply(N,A)}for(var j=0,F=N.length;j<F;j++){var _=N[j],T=_.info.jQueryArguments[0].value;u(T,_.info.chartArguments[0],_.node,T)}}}function f(e,t){var n;if(t.type==="MemberExpression")if(t.object.type==="Identifier"){if(d(e,t.object,"JSC")){if(n=d(e,t.property,"Chart"))return!0;if(n=d(e,t.property,"chart"))return!0}}else if(t.object.type==="CallExpression")if(n=d(e,t.object,"JSC"))return!0}function l(e,t,n){var r,i=0;for(;;){if(t(e))return e;if(!(e=n(e)))return;if(i++>10)return}}function c(e,t,n){var r,i=0;for(;;){if(n(t))return t;if(!t.callee)return;t=t.callee;if(i++>10)return}if(identifier.name===y)return identifier}function h(e,t){if(e.type===s.ObjectExpression)for(var n=0,r=e.properties.length;n<r;n++){var i=e.properties[n];if(i.key.name===t)return i}}function p(e,t,n){var r,s=0;for(;;){if(n(t))return t;if(!(r=g(e,t)))return;i.evalPath(r,"declaration.node.init")&&(t=g(e,t).declaration.node.init);if(s++>10)return}if(t.name===y)return t}function d(e,t,n){var r,s=0;for(;;){t.type==="MemberExpression"&&(t=m(e,t));if(!t)return;if(t.name===n||t.value===n)return t;if(!(r=g(e,t)))return;i.evalPath(r,"declaration.node.init")&&(t=g(e,t).declaration.node.init);if(s++>10)return}if(t.name===n)return t}function v(e,t){var n={value:undefined,raw:undefined};switch(t.type){case s.Literal:n.value=t.value,n.raw=t.raw;break;case s.MemberExpression:n=v(e,m(e,t));break;case s.Identifier:n=v(e,g(e,t).declaration.node.init);break;case s.FunctionExpression:break;case s.ObjectExpression:n.raw=t;break;case s.NewExpression:}return n}function m(e,t){if(t.type==="MemberExpression"){var n=g(e,t.object),r=n.declaration.node.init;if(!r)return null;if(r.properties)for(var i=0,s=r.properties.length;i<s;i++){var o=r.properties[i];if(o.key.name===t.property.name)return o.value}}}function g(e,t){function o(e){var t,n,r,i;if(e.resolved)return e.resolved.defs[e.resolved.defs.length-1];n=e.from;do{for(r=0;r<n.variables.length;++r){i=n.variables[r];if(i.name===e.identifier.name&&i.defs.length)return i.defs[i.defs.length-1]}n=n.upper}while(n);return null}var n,r,i,s;for(n=0;n<e.references.length;++n){i=e.references[n];if(i.identifier.name===t.name)return s=o(i),{identifier:t,declaration:s}}for(n=0;n<e.variableScope.variables.length;++n){i=e.variableScope.variables[n];for(r=0;r<i.identifiers.length;++r)if(i.identifiers[r]===t)return{identifier:t,declaration:t}}}function y(e,t,n){function l(n,r,s){function x(e){var t;if(t=e.save)a[t.name]=i.evalPath(n,t.path)}var o=s||{},u=r?[r]:t,a=o.savedResults=o.savedResults||{},f,c=!0,h=!1;for(var v=0,m=u.length;v<m;v++){var g=u[v],y=g.save;if(g.resolveRef){if(f=i.evalPath(n,g.resolveRef))g.identifier?(f=d(e,f,g.identifier))?(h=!0,x(g)):c=!1:g.criteria&&((f=p(e,f,function(e){var t=g.criteria.save;if(l(e,g.criteria,o))return!0}))?(h=!0,x(g)):c=!1)}else if(g.path)if(f=i.evalPath(n,g.path))if(g.value.pop&&g.value.length){var b=!1;for(var w=0,E=g.value.length;w<E;w++){var S=g.value[w];f===S&&(b=!0)}b?(h=!0,x(g)):c=!1}else f!==g.value?c=!1:(h=!0,x(g))}return c&&h?a:!1}var s=[],o=i.evalPath(e.block,"body.body.body.body")||i.evalPath(e.block,"body.body.body")||i.evalPath(e.block,"body.body")||i.evalPath(e.block,"body");for(var u=0,a=o.length;u<a;u++){var f=o[u];r.traverse(f,{enter:function(e,t){var n;(n=l(e))&&s.push({node:e,info:n})}})}return s}var r=e("estraverse"),i=e("jsonLib"),s=r.Syntax,o=[];t.findCharts=function(){return o=[],a(),o},t.getProperties=function(e){e=e||function(e){return e};var t=GLOBAL.scopes,n=[],r=[{path:"type",value:s.Property},{path:"kind",value:"init"}],i=[];for(var o=0,u=t.length;o<u;o++){var a=t[o],f=y(a,r);i.push.apply(i,f)}for(var l=0,c=i.length;l<c;l++){var h=i[l];n[l]=e(h)}return n},t.getVarDeclarators=function(e){e=e||function(e){return e};var t=GLOBAL.scopes,n=[],r=[{path:"type",value:s.VariableDeclarator}],i=[];for(var o=0,u=t.length;o<u;o++){var a=t[o],f=y(a,r);i.push.apply(i,f)}for(var l=0,c=i.length;l<c;l++){var h=i[l];n[l]=e(h)}return n},t.test=function(){}}),define("tree_data_source2",["require","exports","module","jsonLib","get_metadata","strings","ast_layer","findCharts"],function(require,exports,module){function init(){GLOBAL.astComments=[];var e=(new Date).getTime();GLOBAL.fullnameProps={},GLOBAL.props=[],GLOBAL.chartNames=chartNames=getChartNames(),refreshAstComments(),sortProp("properties"),makeFlatProperties(GLOBAL.properties),indexPropertiesByFn(GLOBAL.props),sortProp(undefined,"UseCompare2"),markLastNodes(GLOBAL.props);var t=(new Date).getTime();debug&&console.log("Sort/properties time: "+(t-e))}function refreshAstComments(){GLOBAL.astComments=GLOBAL.syntax.comments}function sortProp(e,t){function i(e,t){if(e.loc.start.line===t.loc.start.line){if(e.loc.start.column<t.loc.start.column)return-1;if(e.loc.start.column>t.loc.start.column)return 1}if(e.loc.start.line<t.loc.start.line)return-1;if(e.loc.start.line>t.loc.end.line)return 1;if(e.loc.start.line>t.loc.start.line&&e.loc.end.line<t.loc.end.line)return 1;if(e.loc.start.line==t.loc.start.line&&e.loc.end.line==t.loc.end.line){if(e.loc.start.column>t.loc.end.column)return 1;if(e.loc.start.column>t.loc.start.column&&e.loc.end.column<t.loc.end.column)return 1}return e.loc.start.line==t.loc.start.line&&e.loc.start.column<t.loc.start.column?-1:e.loc.start.line>t.loc.start.line?1:0}function s(e,t){var n=e.path,r=t.path,o=e.parentPath||(e.parentPath=n.substring(0,n.length-e.shortname.length-1)),u=t.parentPath||(t.parentPath=r.substring(0,r.length-t.shortname.length-1));if(o===u){var a,f;if(e.value&&t.value){if(e.value.type==="ObjectExpression"||e.value.type==="ArrayExpression")a=!0;if(t.value.type==="ObjectExpression"||t.value.type==="ArrayExpression")f=!0;if(a!==f)return a?1:-1}}else{var l=n.split("."),c=r.split("."),h=Math.min(l.length,c.length),p="",d="",v="";for(var m=0;m<h;m++){var g=c[m];if(l[m]!==c[m]){d=p+"."+l[m],v=p+"."+c[m];break}p+=m===0?"":".",p+=l[m]}if(d&&v&&GLOBAL.fullnameProps[d]&&GLOBAL.fullnameProps[v])return s(GLOBAL.fullnameProps[d],GLOBAL.fullnameProps[v])}return i(e,t)}var n=t?s:i;e&&GLOBAL.properties.sort(n);var r=GLOBAL.props.sort(n)}function lastPartInPath(e){var t=e.split(".");return t[t.length-1]}function getChartNames(){GLOBAL.chartSyntaxRoots={};var e=[],t=require("findCharts").findCharts();for(var n=0,r=t.length;n<r;n++){var i=t[n];e.push({name:i.name,isChart:!0,type:"ObjectExpression",loc:i.options.loc,divID:i.divId,selector:i.selector}),GLOBAL.properties.push(e[e.length-1]),GLOBAL.chartSyntaxRoots[i.name]=i.node}return e}function isInFunctionDeclaration(e){var t=GLOBAL.syntax.body;for(var n=0;n<t.length;n++)if(t[n].type==="FunctionDeclaration"&&e.loc.start.line>=t[n].loc.start.line&&e.loc.end.line<=t[n].loc.end.line)return!0;return!1}function makeFlatProperties(props,parentFullName,parentPath,isArray,parentIndex,parentObj){parentFullName=parentFullName||"",parentPath=parentPath||"";var closestProp=props[0],msg="";for(var i=0;i<props.length;i++){if(props[i]===null){var closestProp=props[i+1]||props[i-1];if(isArray)var msg="Unspecified array item.";var error=new Error("Line "+closestProp.loc.start.line+": "+msg);throw error.lineNumber=closestProp.loc.start.line,error.description=msg,error}props[i].isChart&&(parentFullName=props[i].name,parentPath=props[i].name);if(!props[i].isDone)if(isArray)props[i].fullname=parentFullName+"["+i+"]",props[i].path=parentPath+"."+i,props[i].parentPath=parentPath,props[i].shortname=i;else if(props[i].key){var keyName=props[i].key.name||props[i].key.value;props[i].fullname=parentFullName+"."+keyName,props[i].path=parentPath+"."+keyName,props[i].parentPath=parentPath,props[i].shortname=keyName}else props[i].isChart?(props[i].fullname=parentFullName,props[i].path=parentPath,props[i].parentPath="",props[i].shortname=props[i].name):(props[i].fullname=parentFullName+"."+i,props[i].path=parentPath+"."+i,props[i].parentPath=parentPath,props[i].shortname=i);props[i].type==="NewExpression";if(props[i].isDone)continue;parentObj&&(props[i].parent=parentObj),parentIndex&&(props[i].parentIndex=parentIndex),props[i].isChart||(i>0&&(props[i].prevSibling=props[i-1]),i+1<props.length&&(props[i].nextSibling=props[i+1])),props[i].isDone||GLOBAL.props.push(props[i]),props[i].isDone=!0,props[i].nodeIndex=GLOBAL.props.length-1;if(isInFunctionDeclaration(props[i])){props[i].isInFunctionDeclaration=!0;continue}var fnVal;if(props[i].type==="Property")if(props[i].value.type==="Identifier")setFullname(props[i].fullname,ast_layer.getValueFromAST(null,props[i]));else if(props[i].value.type==="CallExpression"){var loc=props[i].value.loc,range={start:{row:loc.start.line+GLOBAL.offsetLineJSPage-1,column:loc.start.column},end:{row:loc.end.line+GLOBAL.offsetLineJSPage-1,column:loc.end.column}};try{fnVal=eval("("+GLOBAL.aceEditor.getSession().getTextRange(range)+")")}catch(e){fnVal=unresolved}setFullname(props[i].fullname,fnVal)}else if(props[i].value.type==="FunctionExpression"){var loc=props[i].value.loc,range={start:{row:loc.start.line+GLOBAL.offsetLineJSPage-1,column:loc.start.column},end:{row:loc.end.line+GLOBAL.offsetLineJSPage-1,column:loc.end.column}};try{fnVal=eval("("+GLOBAL.aceEditor.getSession().getTextRange(range)+")")}catch(e){fnVal=unresolved}setFullname(props[i].fullname,fnVal)}else if(props[i].value.type==="BinaryExpression"){var loc=props[i].value.loc,range=ast_layer.getAceRange(loc);try{fnVal=eval("("+GLOBAL.aceEditor.getSession().getTextRange(range)+")")}catch(e){fnVal=unresolved}setFullname(props[i].fullname,fnVal)}else if(props[i].value.type==="ExpressionStatement"){var loc=props[i].value.expression.loc,range=ast_layer.getAceRange(loc);try{fnVal=eval("("+GLOBAL.aceEditor.getSession().getTextRange(range)+")")}catch(e){fnVal=unresolved}setFullname(props[i].fullname,fnVal)}else props[i].value.type==="UnaryExpression"&&props[i].value.argument?fnVal=+(props[i].value.operator+props[i].value.argument.raw):fnVal=props[i].value.value,setFullname(props[i].fullname,fnVal);else if(props[i].type==="Identifier")setFullname(props[i].fullname,ast_layer.getValueFromAST(null,props[i]));else if(props[i].type==="UnaryExpression"&&props[i].argument)fnVal=+(props[i].operator+props[i].argument.raw),setFullname(props[i].fullname,fnVal);else if(props[i].type==="BinaryExpression"){var loc=props[i].loc,range=ast_layer.getAceRange(loc);try{fnVal=eval("("+GLOBAL.aceEditor.getSession().getTextRange(range)+")")}catch(e){fnVal=unresolved}setFullname(props[i].fullname,fnVal)}else if(props[i].type==="ExpressionStatement"&&!props[i].isChart){var loc=props[i].expression.loc,range=ast_layer.getAceRange(loc);try{fnVal=eval("("+GLOBAL.aceEditor.getSession().getTextRange(range)+")")}catch(e){fnVal=unresolved}setFullname(props[i].fullname,fnVal)}else if(props[i].type==="Literal")fnVal=props[i].value,setFullname(props[i].fullname,fnVal);else if(props[i].type==="NewExpression"){var loc=props[i].loc,range={start:{row:loc.start.line+GLOBAL.offsetLineJSPage-1,column:loc.start.column},end:{row:loc.end.line+GLOBAL.offsetLineJSPage-1,column:loc.end.column}};try{fnVal=eval("("+GLOBAL.aceEditor.getSession().getTextRange(range)+")")}catch(e){fnVal=unresolved}setFullname(props[i].fullname,fnVal)}else if(props[i].type==="MemberExpression")setFullname(props[i].fullname,ast_layer.getValueFromAST(null,props[i].object)),props[i].property.type==="SequenceExpression"&&throwAstError(props[i],"Unexpected sequence expression.");else if(props[i].type==="LogicalExpression"||props[i].type==="AssignmentExpression"||props[i].type==="UpdateExpression"||props[i].type==="ConditionalExpression"){var astMeta=ast_layer.getAstMeta(props[i]);setFullname(props[i].fullname,astMeta.value)}if(props[i].type==="ObjectExpression"&&!props[i].isChart){props[i].childrenNo=props[i].properties.length,makeFlatProperties(props[i].properties,props[i].fullname,props[i].path,null,GLOBAL.props.length-1,props[i]);continue}if(props[i].type==="ArrayExpression"){props[i].childrenNo=props[i].elements.length,makeFlatProperties(props[i].elements,props[i].fullname,props[i].path,"isArray",GLOBAL.props.length-1,props[i]);continue}if(!props[i].value)continue;if(props[i].value.type==="Literal")continue;if(props[i].value.type==="ArrayExpression"){props[i].childrenNo=props[i].value.elements.length,makeFlatProperties(props[i].value.elements,props[i].fullname,props[i].path,"isArray",GLOBAL.props.length-1,props[i]);continue}props[i].value.type==="ObjectExpression"&&(props[i].childrenNo=props[i].value.properties.length,makeFlatProperties(props[i].value.properties,props[i].fullname,props[i].path,null,GLOBAL.props.length-1,props[i]))}}function throwAstError(e,t){var n=new Error("Line "+e.loc.start.line+": "+t);throw n.lineNumber=e.loc.start.line,n.description=t,n}function setFullname(e,t){t!==undefined?GLOBAL.fullnames[e]!==t&&(GLOBAL.fullnames[e]=t,GLOBAL.jsonIsDirty=!0,GLOBAL.chartIsDirty=!0):GLOBAL.fullnames[e]&&(delete GLOBAL.fullnames[e],GLOBAL.jsonIsDirty=!0,GLOBAL.chartIsDirty=!0)}function resetFullnames(){GLOBAL.fullnames={}}function markLastNodes(e){var t={},n;if(!e.length)return;e[0].nodeIndex=0;for(var r=1;r<e.length;r++){e[r].nodeIndex=r,e[r].textboxValue=jL.escapeHtml(ast_layer.getValueFromAST({ast_node_dec:e[r]},e[r],"getRaw"))+"";var i=jL.jsToPath(e[r].fullname);n=e[r].parentPath||i.substring(0,i.length-lastPartInPath(i).length-1),n&&(t[n]=e[r])}for(var s in t)t[s].isLast=!0}function indexPropertiesByFn(e){function n(e){var t=e.path;GLOBAL.fullnameProps[t]=e}for(var t=0;t<e.length;t++)n(e[t])}var jL=require("jsonLib"),metaData=require("get_metadata"),strings=require("strings").presets,debug=strings.debug,ast_layer=require("ast_layer"),unresolved=undefined,chartNames;exports.init=init,exports.setFullname=setFullname,exports.resetFullnames=resetFullnames}),define("ast_layer",["require","exports","module","jsonLib","esprima","MIInterface","miinterface","miinterface","tree_data_source2","build_ui","tree2"],function(require,exports,module){function getAstMeta(e){function r(e){var t,n;if(t=e.parent)if(n=jL.evalPath(t,"value.type")||t.type)if(n==="ArrayExpression")return!0}if(e.meta)return e.meta;var t={detailedType:"",type:"",keyLoc:undefined,astLoc:undefined,propertyLoc:undefined,value:"",valueType:"",valueText:"",valueLoc:undefined},n=getValueInfoFromAST(e,!0);return jL.fasterExtend(t,n),t.astLoc=e.loc,e.type==="Property"?(t.type="property",t.keyLoc=jL.evalPath(e,"key.loc"),t.propertyLoc=e.loc,jL.evalPath(t,"offsetStack.length")&&(t.offsetStack.push(t.keyLoc),t.offsetStack.push(t.propertyLoc))):e.type==="Literal"?(r(e)&&(t.detailedType="arrayItem"),t.type="value"):e.type==="ObjectExpression"?(r(e)&&(t.detailedType="arrayItem"),t.type="object"):e.type==="ArrayExpression"?t.type="array":(r(e)&&(t.detailedType="arrayItem"),t.valueType==="date"&&(t.type="code")),e.meta=t,t}function getValueInfoFromAST(ast,getRaw){function getFromAstLevel(astL,astLProp){function doExpression(){var loc=astL.loc,range=astToAce(loc);resultB.valueType="code",resultB.valueText=GLOBAL.aceEditor.getSession().getTextRange(range);try{resultB.value=eval("("+resultB.valueText+")")}catch(e){resultB.value=undefined}}var resultB={valueType:"",valueText:"",valueLoc:"",otherLoc:"",value:"",quoteChar:"",offsetStack:[],referenceMeta:""};if(astL.type==="ArrayExpression")resultB.valueType="array",resultB.otherLoc=astL.loc,astL.childrenNo=astL.elements.length;else if(astL.type==="ObjectExpression")astL.childrenNo=astL.properties.length,resultB.valueType="object",resultB.otherLoc=astL.loc;else if(astL.type==="Identifier"){var refAst=getAstFromIdentifier(astL)||getAstFromIdentifier(astLProp);refAst?(resultB.value=refAst.value,resultB.valueType="reference",resultB.valueLoc=refAst.loc,resultB.referencedMeta=getAstMeta(refAst),resultB.valueText=resultB.referencedMeta.valueText):(resultB.valueType="referenceUnresolved",resultB.valueLoc=astL.loc,resultB.valueText=astL.name)}else if(astL.type==="FunctionExpression"){var loc=astL.loc,range=astToAce(loc);resultB.valueType="function",resultB.valueText=GLOBAL.aceEditor.getSession().getTextRange(range),resultB.valueLoc=loc}else if(astL.type==="BinaryExpression"){var loc=astL.loc,range=astToAce(loc);resultB.valueType="code",resultB.valueText=GLOBAL.aceEditor.getSession().getTextRange(range),astL.left.loc&&astL.right.loc?(resultB.offsetStack.push(astL.left.loc),resultB.offsetStack.push(astL.right.loc),resultB.valueLoc={start:astL.left.loc.start,end:astL.right.loc.end}):resultB.valueLoc=astL.loc,resultB.offsetStack.push(astL.loc);try{resultB.value=eval("("+resultB.valueText+")")}catch(e){}}else if(astL.type==="ExpressionStatement"&&!astL.isChart){var loc=astL.expression.loc,range=astToAce(loc);resultB.valueType="code",resultB.valueText=GLOBAL.aceEditor.getSession().getTextRange(range),resultB.valueLoc=loc;try{resultB.value=eval("("+resultB.valueText+")")}catch(e){}}else if(astL.type==="UnaryExpression"&&astL.argument){var loc=astL.loc,range=astToAce(loc);resultB.valueText=GLOBAL.aceEditor.getSession().getTextRange(range),resultB.valueType="number";try{resultB.value=eval("("+resultB.valueText+")"),resultB.valueType=require("MIInterface").getMiValType(resultB.value)}catch(e){resultB.value=parseFloat(resultB.valueText)}/[a-zA-Z]+/.test(astL.operator)&&(resultB.valueType="code"),resultB.valueLoc=astL.loc}else if(astL.type==="Literal")resultB.valueType=require("miinterface").getMiValType(astL.value),getRaw&&astL.raw&&typeof astL.value=="number"?resultB.value=+astL.raw:astL.raw?(resultB.valueType==="string"&&(resultB.quoteChar=astL.raw[0]),resultB.value=astL.value):resultB.value=astL.value,resultB.valueText=GLOBAL.aceEditor.getSession().getTextRange(astToAce(astL.loc)),resultB.valueLoc=astL.loc;else if(astL.type==="NewExpression"&&astL.callee&&astL.callee.name==="Date"){var loc=astL.loc,range=astToAce(loc);resultB.valueType="date",resultB.valueText=GLOBAL.aceEditor.getSession().getTextRange(range),resultB.valueLoc=loc;try{resultB.value=eval("("+resultB.valueText+")")}catch(e){}}else if(astL.type==="NewExpression"||astL.type==="CallExpression"){var loc=astL.loc,range=astToAce(loc);resultB.valueText=GLOBAL.aceEditor.getSession().getTextRange(range),resultB.valueType="function",resultB.valueLoc=loc}else astL.type==="LogicalExpression"?doExpression():astL.type==="AssignmentExpression"?doExpression():astL.type==="UpdateExpression"?doExpression():astL.type==="ConditionalExpression"?doExpression():(value=jL.evalPath(astL,"value.value"),resultB.valueText=value+"",resultB.valueType=require("miinterface").getMiValType(value),resultB.value=value,resultB.valueLoc=jL.evalPath(astL,"value.loc"));return resultB}var result={valueType:"",valueText:"",valueLoc:"",value:"",otherLoc:"",quoteChar:""},value;return ast.type==="ArrayExpression"?(result.valueType="array",result.otherLoc=ast.loc):ast.type==="ObjectExpression"?(result.valueType="object",result.otherLoc=ast.loc):ast.type==="Property"?jL.defined(ast.value)&&(result=getFromAstLevel(ast.value,ast)):result=getFromAstLevel(ast,ast.parent),result}function isChangeInert(e,t,n){function h(e){return/^[\s]*$/.test(e)}var r=e.action,i=e.lines,s;n=n||{point:aceToAst(e.start),offsetX:0,offsetY:0};var o=new aceRange.Range(e.start.row,e.start.column,e.end.row,e.end.column);if(r==="insert"||r==="remove"){var u=!0;for(var a=0,f=i.length;a<f;a++){var l=i[a];if(!h(l)){u=!1;break}}}var c=!0;return r==="insert"?(n.offsetY=i.length,n.offsetX=0,n.point=aceToAst(e.start)):r==="remove"&&(n.offsetY=-i.length,n.offsetX=0,n.point=aceToAst(e.end)),u||(c=!1),isWithinComments(o)&&(c=!0),c}function isWithinChartDeclaration(e){e=astToAce(e);if(GLOBAL.chartSyntaxRoots)for(var t in GLOBAL.chartSyntaxRoots){var n=GLOBAL.chartSyntaxRoots[t].loc,r=astLocToAceRange(n);if(r.inside(e))return!0}}function isWithinComments(e){var e=astToAce(e);for(var t=0,n=GLOBAL.astComments.length;t<n;t++){var r=GLOBAL.astComments[t],i=GLOBAL.astComments[t].loc,s=astLocToAceRange(i);if(r.type==="Block"){if(s.containsRange(e))if(s.start.row===e.start.row){if(s.start.column+2<=e.start.column)return!0}else{if(s.end.row!==e.end.row)return!0;if(s.end.column-2>=e.end.column)return!0}}else if(r.type==="Line"&&s.start.row===e.start.row&&s.start.column+2<=e.start.column)return!0}}function astToAce(e){function r(e){function t(e){if(jL.defined(e.line))return!0}return t(e)?{column:e.column,row:n(e.line)}:e}var t=getLocType(e),n=GLOBAL.astToAceLine;if(t==="range")return{start:r(e.start),end:r(e.end)};if(t==="loc")return r(e);throw"Unrecognizable loc or range in astToAce()"}function aceToAst(e){function n(e){function t(e){if(jL.defined(e.row))return!0}return t(e)?{column:e.column,line:r(e.row)}:e}function r(e){return e-GLOBAL.offsetLineJSPage+1}var t=getLocType(e);if(t==="range")return{start:n(e.start),end:n(e.end)};if(t==="loc")return n(e);throw"Unrecognizable loc or range in astToAce()"}function getLocType(e){var t="";return"start"in e?t="range":"column"in e&&(t="loc"),t}function updateAstValue(e,t,n){function y(e,t){if(e.start.line===t&&e.end.line===t)return!0}console.log(" New Value: "+t);var r,i={valueCodeText:"",dataTypeChanged:!1},s,o,u,a,f=e.fullname;t+="",e.textboxValue=t;var l=e.meta;if(e.meta.valueType==="string"&&e.meta.quoteChar)t=e.meta.quoteChar+t+e.meta.quoteChar;else if(e.meta.valueType==="number"&&isNaN(t)){if(t===".")return!1;i.dataTypeChanged=!0,t="'"+t+"'"}o=t.length,u=e.meta.valueText.length,a=o-u;var c=e.meta.valueLoc.start.column+u/2;n&&(n.point={column:c,line:e.meta.valueLoc.start.line},n.offsetX=a,n.offsetY=0),i.valueCodeText=t;try{var h=esprima.parse("("+t+")")}catch(p){return!1}if(r=jL.evalPath(h,"body.0.expression"))if(r.type)if(e.type===r.type)e=jL.fasterExtend(e,r),s=!0;else if(jL.evalPath(e,"value.type")===r.type)e.value=jL.fasterExtend(e.value,r),s=!0;else if(e.type==="Property"){var d=jL.getPropNames(e.value);for(var v=0,m=d.length;v<m;v++){var g=d[v];g!=="loc"&&delete e.value[g]}e.value=jL.fasterExtend(e.value,r),s=!0}else e.type==="Literal"?(e=jL.fasterExtend(e,r),s=!0):(e=jL.fasterExtend(e,r),s=!1);return delete e.meta,s?i:s}function updateFullnamesValue(e){var t=getAstMeta(e);console.log(t.value),require("tree_data_source2").setFullname(e.fullname,t.value);return}function offsetAllAstLocFromInertData(e,t){var n=e.point,r=e.offsetX,i=e.offsetY,s,o,u,a,f="astLoc,keyLoc,valueLoc,otherLoc".split(","),l="astLoc".split(","),c="astLoc".split(","),h="astLoc,keyLoc,valueLoc".split(","),p="astLoc,keyLoc,valueLoc".split(",");if(GLOBAL.props)for(var d=0,v=GLOBAL.props.length;d<v;d++)if(s=GLOBAL.props[d]){o=getAstMeta(s);if(jL.evalPath(o,"offsetStack.length"))for(var m=0,g=o.offsetStack.length;m<g;m++)u=o.offsetStack[m],offsetIfApplicable(u,n,r,i,t);else{o.type==="array"?a=l:o.type==="value"?a=c:o.type==="object"?a=h:o.type==="property"?a=p:o.type==="code"?a=c:a=f;for(var y=0,b=a.length;y<b;y++){var w=a[y];(u=o[w])&&offsetIfApplicable(u,n,r,i,t)}}}if(GLOBAL.astComments.length)for(var d=0,v=GLOBAL.astComments.length;d<v;d++){var E=GLOBAL.astComments[d],S=GLOBAL.astComments[d].loc;offsetIfApplicable(S,n,r,i,t)}require("build_ui").refreshJsRanges()}function offsetIfApplicable(e,t,n,r,i){var s=new aceRange.Range(e.start.line,e.start.column,e.end.line,e.end.column),o;if(r===0){if(s.inside(t.line,t.column))s.isMultiLine()?e.end.line===t.line&&t.column<=e.end.column&&(e.end.column+=n,o=!0):(e.end.column+=n,o=!0);else if(e.start.line===t.line)if(e.start.column>=t.column){e.end.column+=n;if(!i||e.start.column!==t.column)e.start.column+=n;o=!0}else e.end.column===t.column&&i&&(e.end.column+=n)}else r!==0&&(e.start.line>=t.line?e.start.line===t.line?s.inside(t.line,t.column)?(e.end.column+=n,e.end.line+=r,o=!0):e.start.column>=t.column&&(e.end.column+=n,e.end.line+=r,e.start.column+=n,e.start.line+=r,o=!0):(e.end.line+=r,e.start.line+=r,o=!0):e.end.line>=t.line&&(e.end.line===t.line?e.end.column>=t.column&&(e.end.column+=n,e.end.line+=r,o=!0):(e.end.line+=r,o=!0)));return o}function hitTest(e,t){var n={type:""},r=astToAce(e),i=astToAce(t),s=new aceRange.Range(r),o,u=getLocType(i);return u==="range"?(o=new aceRange.Range(i),s.containsRange(o)?n.type="BinA":s.intersects(o)&&(n.type="intersect")):u==="loc"&&s.contains(i.row,i.column),n}function offsetAstByxAt(e,t,n){function f(e,t){function r(e,t){e.start.column+=t,e.end.column+=t}var n;(n=e.loc)&&r(n,t),(n=jL.evalPath(e,"value.loc"))&&r(n,t),(n=jL.evalPath(e,"argument.loc"))&&r(n,t)}var r,i=t.line;if(r=findAstOnLine(i))for(var s=0,o=r.length;s<o;s++){var u=r[s],a=getValueLocFromAst(u);a.start.column>t.column&&f(u,n)}}function getValueTypeOfAst(e){return getAstMeta(e).valueType}function getValueLocFromAst(e){var t;if(e){if(e.type==="UnaryExpression")return e.loc;if(!jL.defined(e.value))return e.loc;t=e.value.loc||e.loc}return t}function findAstFromPos2(e,t){var n={key:undefined,value:undefined,property:undefined,other:undefined,anyProperty:undefined,any:undefined,location:undefined},r=t?"contains":"inside",i,s=[],o,u,a,f=!1;if(GLOBAL.props){for(var l=0,c=GLOBAL.props.length;l<c;l++)o=GLOBAL.props[l],u=getAstMeta(o),f=!0,u.astLoc&&(a=astLocToAceRange(u.astLoc),a[r](e.row,e.column)||(f=!1)),f&&(u.propertyLoc&&(a=astLocToAceRange(u.propertyLoc),a[r](e.row,e.column)&&(n.property=o,i=!0)),u.keyLoc&&(a=astLocToAceRange(u.keyLoc),a[r](e.row,e.column)&&(n.key=o,i=!0)),u.valueLoc&&(a=astLocToAceRange(u.valueLoc),a[r](e.row,e.column)&&(n.value=o,i=!0)),u.otherLoc&&(a=astLocToAceRange(u.otherLoc),a[r](e.row,e.column)&&(n.other=o,i=!0)));n.anyProperty=n.value||n.key||n.property,n.any=n.value||n.key||n.property||n.other;if(!(n.location=n.value||n.key))if(!n.property)n.location=n.other;else if(n.other){var h=astLocToAceRange(n.property.loc),p=astLocToAceRange(n.other.loc);h.containsRange(p)?n.location=n.other:n.location=n.property}}return i?n:undefined}function astLocToAceRange(e){var t=astToAce(e);return new aceRange.Range(t.start.row,t.start.column,t.end.row,t.end.column)}function sortPathsByAstPos(e){function t(e,t){var n=GLOBAL.fullnameProps,r=n[e].loc.start.line,i=n[t].loc.start.line;return r<i?-1:r>i?1:(r=n[e].loc.start.column,i=n[t].loc.start.column,r<r?-1:r>i?1:0)}return e.sort(t),e}function findAstFromPos(e,t){function f(e,t){e={start:{column:e.start.column,line:i(e.start.line)},end:{column:e.end.column,line:i(e.end.line)}};if(e.start.line===t.row){if(e.start.column<t.column){if(e.end.line>t.row)return!0;if(e.end.column>=t.column)return!0}}else if(e.end.line===t.row){if(e.end.column>=t.column){if(e.start.line<t.row)return!0;if(e.start.column<t.column)return!0}}else if(e.start.line<=t.row&&e.end.line>=t.row)return!0}function l(e,t){if(e.key&&f(e.key.loc,t))return"key";var n=getValueTypeOfAst(e.value);return n==="array"?"other":n==="object"?"other":e.value&&e.value.loc&&f(e.value.loc,t)?"value":e.type?e.type==="Literal"?"value":e.type:"other"}var n,r,i=GLOBAL.astToAceLine,s=[];if(GLOBAL.props){for(var o=0,u=GLOBAL.props.length;o<u;o++){var n=GLOBAL.props[o];f(n.loc,e)?s.push(n):n.key&&f(n.key.loc,e)&&s.push(n)}if(s.length){var a=s[s.length-1];return t&&(t.type=l(a,e)),s[s.length-1]}}}function findAstOnLine(e){var t=[];if(GLOBAL.props)for(var n=0,r=GLOBAL.props.length;n<r;n++){var i=GLOBAL.props[n],s=getValueLocFromAst(i);s.start.line===e&&t.push(i)}return t}function findValueFromIdentifier(e){var t;if(t=getAstFromIdentifier(e))return t.value;var n}function getAstFromIdentifier(e){var t,n;if(e)if(n=jL.evalPath(GLOBAL,"syntax.body"))for(var r=0;r<n.length;r++)if(n[r].kind==="var"&&n[r].type==="VariableDeclaration"){var i=n[r].declarations;for(var s=0;s<i.length;s++)if(i[s].id&&i[s].id.name&&i[s].id.name===(jL.evalPath(e,"value.name")||e.name)){t=i[s].init;break}}return t}function getValueFromAST(e,t,n){var r,i=getAstMeta(t);r=i.value;if(i.type==="array"||i.type==="object")r="noValue";return r}function updateEditor(e,t){var n=e,r;n.type==="Literal"?r=new aceRange.Range(GLOBAL.astToAceLine(n.loc.start.line),n.loc.start.column,GLOBAL.astToAceLine(n.loc.end.line),n.loc.end.column):r=new aceRange.Range(GLOBAL.astToAceLine(n.value.loc.start.line),n.value.loc.start.column,GLOBAL.astToAceLine(n.value.loc.end.line),n.value.loc.end.column);var i=t+"";n.value.raw?n.value.raw==="''"?i="'"+t+"'":n.value.raw==='""'?i='"'+t+'"':i=n.value.raw.replace(n.value.value,i):n.raw&&(i=n.raw.replace(n.value,i)),GLOBAL.updateFromTreeUI=!0,GLOBAL.forceUpdateFromTreeUI&&(GLOBAL.updateFromTreeUI=!1,GLOBAL.forceUpdateFromTreeUI=!1);var s=GLOBAL.aceEditor.getSession().replace(r,i);GLOBAL.updateFromTreeUI=!1,n.type==="Literal"?n.loc.end.column=s.column:n.value.loc&&n.value.loc.end&&(n.value.loc.end.column=s.column)}var aceRange=ace.require("ace/range"),jL=require("jsonLib"),esprima=require("esprima");exports.findAstFromPos=findAstFromPos,exports.findAstFromPos2=findAstFromPos2,exports.getValueLocFromAst=getValueLocFromAst,exports.offsetAstByxAt=offsetAstByxAt,exports.getValueTypeOfAst=getValueTypeOfAst,exports.getValueInfoFromAST=getValueInfoFromAST,exports.getAstMeta=getAstMeta,exports.isChangeInert=isChangeInert,exports.isWithinChartDeclaration=isWithinChartDeclaration,exports.isWithinComments=isWithinComments,exports.updateAstValue=updateAstValue,exports.astLocToAceRange=astLocToAceRange,exports.updateFullnamesValue=updateFullnamesValue,exports.getAceRange=astLocToAceRange,exports.sortPathsByAstPos=sortPathsByAstPos,exports.offsetAllAstLoc=offsetAllAstLocFromInertData,exports.offsetAllAstLocFromInertData=offsetAllAstLocFromInertData,exports.offsetRange=offsetIfApplicable,exports.astToAce=astToAce,exports.aceToAst=aceToAst,exports.getValueFromAST=getValueFromAST,exports.setValueInAST=function(e,t){var n=e;if(n.type==="Property"){if(n.value.type==="Literal")updateEditor(e,t);else if(n.value.type==="Identifier"){var r=getAstFromIdentifier(n);r&&this.setValueInAST({ast_node_dec:r},t)}}else if(n.type!=="UnaryExpression"||!n.argument)n.type==="Literal"?updateEditor(e,t):n.type==="NewExpression"&&n.callee&&n.callee.name==="Date"},exports.updateGlobalPropTextVals=function(){var e;for(var t=0,n=GLOBAL.props.length;t<n;t++){var e=GLOBAL.props[t];if(e.isInFunctionDeclaration)continue;if(e.type==="UnaryExpression")e.textboxValue=e.operator+""+e.argument.value;else if(e.type==="Property"||e.type==="Literal")e.textboxValue=require("tree2").escapeHtml(getValueFromAST({ast_node_dec:e}))+""}},exports.updateRefByPath=function(){GLOBAL.pathProps={};for(var e=0,t=GLOBAL.props.length;e<t;e++){var n=GLOBAL.props[e];GLOBAL.pathProps[n.fullname]=n}}}),define("eventHandlers",["require","exports","module","ast_layer","get_metadata","jsonLib","tree_data_source2","codeUiInterface","controller","strings","docTab_update","tree2","highlight","statusBar"],function(e,t,n){function m(){m.initialized||($("div.area").click(function(e){x(e.target,"click")}),$("div.holder").click(function(e){x(e.target,"click")}),$("div.aside-holder").click(function(e){x(e.target,"click")}),$("div#chartContentTab").click(function(e){x(e.target,"click")}),m.initialized=!0)}function g(e,t,n){h=!0,GLOBAL.currentCacheIndex=e;var i=GLOBAL.props[e],s=r.getAstMeta(i),o=r.astLocToAceRange(s.valueLoc),u,f={},c;if(c=r.updateAstValue(i,t,f)){u=c.valueCodeText,GLOBAL.aceEditor.getSession().replace(o,u),r.offsetAllAstLocFromInertData(f),delete i.meta,s=r.getAstMeta(i),l.offsetWarnings(f),r.updateFullnamesValue(i);var p="skip";s.valueType==="string"&&(p="late");var d={ui:p};c.dataTypeChanged&&(d.expedite="mi",d.delayType==="fast"),GLOBAL.chartIsDirty=!0,a.update("chart",d)}else a.update("esprima",{ui:"skip"});h=!1;return}function y(e){function p(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes.length===0?"":t.childNodes[0].nodeValue}function m(e){var t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}var t,n,r;if(e.which===13)return;var i=this.value,o=this.getAttribute("cacheid");if(t=GLOBAL.props[o])n=p(t.textboxValue);if(this.pattern&&!t.textboxValueInvalid&&!isNaN(i)){var u=m(i);if(e.which===38){i=parseFloat(i)+1,u&&(i=i.toFixed(u)),i+="",this.value=i,g(o,i);return}if(e.which===40){i=parseFloat(i)-1,u&&(i=i.toFixed(u)),i+="",this.value=i,g(o,i);return}}if(i===n)return;var l;if(this.pattern){if(this.value!==s.trim(this.value)&&e.which===32){this.value=s.trim(this.value);return}r=!0;if(this.value.length){var c,h;(c=this.value.match(v.exponential))&&c.length>0&&c[1]===this.value||((c=this.value.match(v.numeric))&&c.length>0?(h=c[1],h!==this.value&&(typeof n!="undefined"?(c=this.value.match(v.incomplete))&&c.length>1?l=!0:l=!0:typeof h!="undefined"?l=!0:l=!0)):l=!0)}else l=!0}l?(t.textboxValueInvalid=!0,t.textboxValue=this.value,console.log(t.textboxValue),a.reportInputInvalid(o),$(this).bind("blur",function(e){if((c=this.value.match(/(-?[0-9]*)\.$/))&&c.length>1&&c[0]===this.value)this.value=this.value.replace(".",""),g(o,this.value);else{var t=parseFloat(this.value);isNaN(t)?this.value="0":this.value=t,g(o,this.value)}a.reportInputValid(o),$(this).unbind("blur"),$(this).removeClass("inputValueInvalid"),$(this).addClass("inputNum"),d.unclaim(o)}),$(this).addClass("inputValueInvalid"),$(this).removeClass("inputNum"),d.show(f.other.textboxNumberInvalid,{data:{cacheID:o},claimID:o,type:"warning"})):(delete t.textboxValueInvalid,t.textboxValue=this.value,a.reportInputValid(o),$(this).unbind("blur"),$(this).bind("blur",function(e){d.unclaim(o)}),r&&(a.omitLateRedraw(t.path),d.unlock(),d.show(f.click.textboxNumber,{data:{cacheID:o},claimID:o})),g(o,i),$(this).removeClass("inputValueInvalid"),$(this).addClass("inputNum"));return}function b(e){x(e.target,"click")}function w(e,t){if(h)return;var n=e.action,i,s,f,c,p={},d,v,m={};GLOBAL.skipUIRedraw=!1;var g={dirtyAst:!1,dirtyUI:!1,dirtyCode:!1},y=r.isChangeInert(e,undefined,m);if(y){r.offsetAllAstLocFromInertData(m),l.offsetWarnings(m);return}if(!(p=r.findAstFromPos2(e.start,!0))){if(r.isWithinChartDeclaration(e.start))GLOBAL.chartIsDirty=!0;else try{if(r.isWithinComments(new Range(e.start.row,e.start.column,e.end.row,e.end.column)))return}catch(T){console.error(T),a.update("esprima",{ui:"now",delayType:"fast"});return}a.update("esprima",{ui:"now",delayType:"fast"});return}p.any&&(i=p.any.nodeIndex,GLOBAL.currentCacheIndex=i);if(c=p.value){i=c.nodeIndex;var b=r.getAstMeta(c),w=b.valueText;if(b.valueType==="string")var w=b.value;var E=b.propertyLoc,S=b.valueLoc;if(n==="insert")v=e.start.column-S.start.column,b.valueType==="string"&&v--,d=w.substring(0,v)+e.lines[0]+w.substring(v,w.length);else if(n==="remove"){v=e.start.column-S.start.column,b.valueType==="string"&&v--;var x=e.end.column-e.start.column;d=w.substring(0,v)+w.substring(v+x,w.length);if(b.valueType==="string"){if(x>0&&d===w){a.update("esprima",{ui:"now",delayType:"fast"});return}}else if(d.length===0){a.update("esprima",{ui:"now",delayType:"fast"});return}}if(b.valueType==="number")if(!d||isNaN(d)){GLOBAL.chartIsDirty=!0,a.update("esprima",{ui:"now",delayType:"fast"});return}l.offsetWarnings(m),r.offsetAllAstLocFromInertData(m,!y),r.updateAstValue(c,d,m)?(r.updateFullnamesValue(c),u.setUiValue(i,d,f,s).then(function(){b.valueType==="number"?a.update("chart",{ui:"skip"}):b.valueType==="string"?a.update("chart",{ui:"late"}):b.valueType==="referenceUnresolved"?a.update("esprima",{ui:"now",delayType:"fast"}):a.update("chart",{ui:"now"});return},function(){a.update("chart",{ui:"now"});return})):a.update("esprima",{ui:"now",delayType:"fast"});return}if(!(c=p.key)){GLOBAL.chartIsDirty=!0,a.update("esprima",{ui:"now",delayType:"fast"});return}if(!y){o.resetFullnames(),a.update("esprima",{ui:"now",delayType:"fast",expedite:"mi"});return}}function E(e){var t={type:"",cacheID:"",subID:"",itemID:""};if(!e)return t;var n,i;t.cacheID=e.getAttribute("cacheid");var o=$(e);if(!s.defined(t.cacheID)||t.cacheID===null)t.cacheID=o.closest("[cacheid]").attr("cacheid");if(o.hasClass("collapseChildren"))return t.cacheID||(t.cacheID=o.closest("a").find("[cacheid]").attr("cacheid")),t.type="toggleChildrenExpansion",t;if(o.hasClass("expandChildren"))return t.cacheID||(t.cacheID=o.closest("a").find("[cacheid]").attr("cacheid")),t.type="toggleChildrenExpansion",t;if(o.closest("div.sidebar-holder").length===0)return;if(e.tagName==="DIV"&&o.is("[nodeui=dropdown]"))t.type="dropdownEmptyHead";else if(e.tagName==="SPAN"&&o.hasClass("lightTreeLabel"))t.type="dropdownSublabel",t.cacheID=o.closest(".row").find("[cacheid]").attr("cacheid"),t.subID=e.innerText;else if(o.is("label")||o.parent().is("label"))t.type="label",t.cacheID=o.closest(".row").find("[cacheid]").attr("cacheid");else if(o.is("strong"))t.type="subfolder";else if(e.tagName==="A"&&o.hasClass("select-opener")){if(o.parent().find(".center").attr("id")==="menuFilename")return;t.type="dropdownArrow",i=o.closest(".row"),t.cacheID=i.find("[cacheid]").attr("cacheid"),t.subID=i.find("label").text()}else if(e.tagName==="SPAN"&&o.hasClass("center")){if(o.attr("id")==="menuFilename")return;t.type="dropdownBody",t.subID=o.closest(".row").find("label").text()}else if(e.tagName==="A"&&o.hasClass("dropDownColorLink"))t.type="dropdownItem",i=o.closest(".row"),t.itemID=e.innerText,t.cacheID=i.find("[cacheid]").attr("cacheid"),t.subID=i.find("label").text();else if(e.tagName==="INPUT"){t.type="textbox";if(n=GLOBAL.props[parseInt(t.cacheID)]){var u=s.evalPath(n,"value.type")||n.type;if(n.valType==="code"||u==="CallExpression"||u==="Identifier"||u==="NewExpression"||u==="FunctionExpression")t.type="textboxCode";else{u=r.getAstMeta(n).valueType;switch(u){case"string":t.type="textboxString";break;case"number":t.type="textboxNumber";break;case"function":t.type="textboxCode";break;default:t.type="textbox"}}}}else o.is("div.switch-area")?t.type="checkbox":t.type="nothing";return t}function S(e){var t={type:"nothing",section:"",cacheID:"",subID:"",itemID:"",element:undefined};if(!e)return t;var n=e.parentElement,r=$(n),i=$(e),s,o,u=r.attr("id"),a=i.attr("id");if(i.closest("div#codeEditor").length>0)return t.section="code",t.type="codeText",t;if(i.closest("div#header").length>0){t.section="header";if(e.tagName==="SPAN"&&i.hasClass("center")){if(i.attr("id")==="menuFilename")return t.type="dropdownCenter",t.section="header",t}else e.tagName==="A"&&i.hasClass("select-opener")&&(t.type="dropdownArrow",t.section="header")}if(e.tagName==="SPAN"&&i.hasClass("tokenName"))return t.type="tokenName",t.section="docs",t.itemID=i.text(),t;if(a==="API_DocContent")return t.section="docs",t.type="docTabContent",t;if(e.tagName==="A"&&a==="editorRedo")return t.section="code",t;if(e.tagName==="A"&&a==="editorUndo")return t.section="code",t;if(i.is("ul.tabset")||e.tagName==="B")e=n,n=e.parentElement,r=$(n),i=$(e),s,o,u=r.attr("id"),a=i.attr("id"),t.element=e;return e.tagName==="DIV"&&i.hasClass("area")?(t.type="nothing",u==="content"?t.section="chart":r.hasClass("aside-area")?t.section="docs":r.hasClass("block-in")&&(t.section="code"),t):e.tagName==="DIV"&&i.hasClass("block-in")?(t.type="nothing",t.section="code",t):e.tagName==="DIV"&&i.hasClass("aside-area")?(t.type="nothing",t.section="docs",t):e.tagName==="A"&&a==="sideDocButton"?(t.type="sliderToggle",t.section="code",t):e.tagName==="A"&&a==="sideUIButton"?(t.type="sliderToggle",t.section="UI",t):(e.tagName==="A"&&i.hasClass("tab")&&(r=i,n=e,u=a,t.element=i.find("span")[0]),n&&n.tagName==="A"&&r.hasClass("tab")&&(s=r.closest("ul.tabset"),o=s.attr("id"),o==="chartTabs"?(t.type="tab",t.section="chart"):o==="docWarningTab"?(t.type="tab",t.section="docs",a==="warningTab"?(t.itemID="warning",t.type="tabWarnings"):i.text()==="Documentation"&&(t.itemID="warning",t.type="tabDocumentation")):o==="codeTabs"?(t.type="tab",t.section="code",a==="JavaScriptTab"?t.type="tabJavaScript":t.type="tabAllCode"):(t.type="tab",t.section="UI")),a=i.attr("id"),a&&(a.indexOf("login")>-1||a.indexOf("change-")>-1||a.indexOf("dialog")>-1||a.indexOf("signup-")>-1)&&(t.type="login",t.eleID=a,t.section="header"),t)}function x(e,t){var n,i,s,o,l,h,v,m,g,b=a.getCursorState().focus;if((n=E(e))&&n.type!=="nothing"){f.debug&&console.log("Element id: "+n.type),h=GLOBAL.props[parseInt(n.cacheID)],i={action:t,element:e,data:n,section:"UI"};if(t==="click"){if(f.click[n.type]){if(n.type==="textboxNumber"||n.type==="textboxString"){v=$(e),d.show(f.click[n.type],{data:n,claimID:n.cacheID}),v.bind("blur",function(){d.unclaim(n.cacheID)});var w;(w=jQuery._data(e,"events"))?w.keyup||v.keyup(y):v.keyup(y)}else d.show(f.click[n.type],{data:n});m=!0}if(n.type==="dropdownBody"||n.type==="dropdownArrow"){var x;if((x=$(e).closest("div.select-holder").find(".select-options")).length>0){var T=x.css("display")!=="none";s=function(){T&&(n.type="nothing")}}p.focusCodeLineByAst(h,o,n)}else if(n.type==="textboxCode")p.focusCursorIntoCode(h,n,e.selectionStart);else if(n.type==="textboxNumber"||n.type==="textboxString"){v=$(e);var w;(w=jQuery._data(e,"events"))?w.keyup||v.keyup(y):v.keyup(y),p.focusCodeLineByAst(h,undefined,n)}else if(n.type==="label"){var N=0;(h.valType||r.getValueTypeOfAst(h))==="string"&&(N=1),p.focusCursorIntoCode(h,n,N)}else n.type==="toggleChildrenExpansion"?c.toggleCollapseStateOfChildrenOf(n.cacheID):n.type==="expandChildren"?c.toggleCollapseStateOfChildrenOf(n.cacheID):p.focusCodeLineByAst(h,undefined,n)}else t==="hover"&&(f.hover[n.type]?(d.show(f.hover[n.type],{data:n}),m=!0):n.type==="dropdownBody"||n.type==="dropdownArrow"?(d.show(n.subID?f.hover.hoverUIDropdownChain:f.hover.hoverUIDropdown,{data:n}),m=!0):f.debug&&(d.show("hovering "+n.type),m=!0))}else if((n=S(e))&&n.type!=="nothing"){if(t==="click"){if(n.type==="tokenName"){if(u.tokenClicked(n.itemID))return;d.show(f.other.tokenInsertInvalid,{data:n,type:"warning",claimID:"tokenClickIssue",claimDuration:3e3}),m=!0}}else t==="hover"&&(f.hover[n.type]||f.hover[n.eleID]?(d.show(f.hover[n.type]||f.hover[n.eleID],{data:n}),m=!0):f.debug&&(d.show("hovering "+n.type),m=!0));i={action:t,element:n.element||e,data:n,section:n.section}}else n;return t==="click"&&(c.closeAllDropdowns(),s&&s(),a.reportCursorState(i)),m||d.clear(),n}function T(e){h=e}var r=e("ast_layer"),i=e("get_metadata"),s=e("jsonLib"),o=e("tree_data_source2"),u=e("codeUiInterface"),a=e("controller"),f=e("strings").presets,l=e("docTab_update"),c=e("tree2"),h,p=e("highlight"),d=e("statusBar"),v={exponential:/(-?[0-9]*\.?[0-9]+e[-\+][0-9]+)/,numeric:/(-?[0-9]*\.?[0-9]+)/,incomplete:/(-?[0-9]*)\./};t.init=m,t.inputKeyUp=y,t.inputSelect=b,t.editorOnChange=w,t.UIValueChanged=g,t.reportAction=x,t.setEditorChangeSuspendState=T,GLOBAL.reportAction=x}),define("tabs",["require","exports","module","events","php","eventHandlers"],function(e,t,n){function u(){var e=document.getElementById("chartContentTab");return e.setAttribute("class","visual-holder"),e.innerHTML="",e.style.height="",e}function a(e){return e.length!==1||GLOBAL.isPHPSample?!0:!1}function f(){function n(n,i,s,o){var u=document.createElement("a");u.setAttribute("divID",s),u.setAttribute("class","tab"),r.addListener(u,"click",function(t){e("eventHandlers").reportAction(t.target,"click"),m(this,n)});var a=document.createElement("span");a.innerHTML=i,u.appendChild(a);var f=document.createElement("li");(o||GLOBAL.currentChartObjectName===n)&&f.setAttribute("class","active"),f.appendChild(u),t.appendChild(f)}function f(){var e=u();p();if(i.needToUseIframe())v(e);else{var t=c();d(e,t)}h()}function c(){var e=GLOBAL.allPageData,t=/<body>(.|\r|\n)*?<\/body>/gim,n=t.exec(e)[0].replace("<body>","").replace("</body>",""),r=/<script(.|\r|\n)*?<\/\s*script>/gim,i=r.exec(n);while(i){var s=i[0];n=n.replace(s,""),i=r.exec(n)}return n}function h(){var e=GLOBAL.allPageData,t=/<style(.|\r|\n)*?<\/\s*style>/gim,n=t.exec(e);while(n){var r=$(n[0]),i=r[0];o.push(i),document.head.appendChild(i),n=t.exec(e)}}function p(){for(var e=0;e<o.length;e++){var t=o[e];document.head.removeChild(t)}o=[]}function d(e,t){var n=document.createElement("div");return e.appendChild(n),n.id="all",n.innerHTML=t,n.style.height="100%",e.setAttribute("class",""),e}function v(e){var t=document.createElement("div");t.setAttribute("class","chart-iframe-overlay"),e.appendChild(t);var n=document.createElement("iframe");return n.setAttribute("class","chart-iframe"),n.src=GLOBAL.sampleFileName,e.appendChild(n),e.style.height="100%",e.setAttribute("class",""),e}function m(e,t){var n=e.parentElement.parentElement;for(var r=0;r<n.childNodes.length;r++)n.childNodes[r].setAttribute("class","");e.parentElement.setAttribute("class","active"),GLOBAL.currentChartObjectName=t,l()}s=GLOBAL.chartNames,f();var t=document.getElementById("chartTabs");t.innerHTML="",a(s)?n("All","Charts","all","selected"):n(s[0].name,s[0].name,s[0].divID,"selected")}function l(){var e=document.getElementById("chartContentTab");for(var t=0;t<e.children.length;t++)GLOBAL.currentChartObjectName==="All"?e.children[t].style.display="block":e.children[t].style.display="none";if(GLOBAL.currentChartObjectName==="All")return;for(var t=0;t<s.length;t++){if(GLOBAL.currentChartObjectName!=s[t].name)continue;var n=document.getElementById(s[t].divID);n.style.display="block";return}}function c(){f()}function h(){var e=document.getElementById("codeTabs"),t=e.children;for(var n=0;n<t.length;n++){var r=t[n];if(r.id.indexOf("file_")!=0)continue;e.removeChild(r)}}function p(e){var t=document.getElementById("codeTabs");e.forEach(function(e,n){if(!e.content)return;var r=document.createElement("li");e.elementId="file_"+e.type+"_"+n,r.id=e.elementId;var i=document.createElement("a");i.setAttribute("class","tab"),r.appendChild(i);var s=document.createElement("span");s.innerText=e.name,s.setAttribute("class","file-tab-text "+e.elementId),i.appendChild(s),t.appendChild(r)})}function d(e){var t=document.getElementById("codeTabs"),n=t.children;for(var r=0;r<n.length;r++)n[r].setAttribute("class","");document.getElementById(e).setAttribute("class","active")}var r=e("events"),i=e("php"),s=[],o=[];t.init=c,t.clearChartContentTab=u,t.updateVisibleChartTab=l,t.clearFileTabs=h,t.createFileTabs=p,t.activateTab=d}),
/** START OF escope **/
/**  @preserve Copyright (C) 2012-2013 Yusuke Suzuki (twitter: @Constellation) and other contributors.

Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.

Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
function(e){if(typeof exports=="object"&&typeof module!="undefined")module.exports=e();else if(typeof define=="function"&&define.amd)define("escope",[],e);else{var t;typeof window!="undefined"?t=window:typeof global!="undefined"?t=global:typeof self!="undefined"?t=self:t=this,t.escope=e()}}(function(){var e,t,n;return function(){function e(t,n,i){function s(u,a){if(!n[u]){if(!t[u]){var f="function"==typeof require&&require;if(!a&&f)return f(u,!0);if(o)return o(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[u]={exports:{}};t[u][0].call(c.exports,function(e){var n=t[u][1][e];return s(n||e)},c,c.exports,e,t,n,i)}return n[u].exports}for(var o="function"==typeof require&&require,u=0;u<i.length;u++)s(i[u]);return s}return e}()({1:[function(e,t,n){(function(n){function i(e,t){if(e===t)return 0;var n=e.length,r=t.length;for(var i=0,s=Math.min(n,r);i<s;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function s(e){return n.Buffer&&typeof n.Buffer.isBuffer=="function"?n.Buffer.isBuffer(e):e!=null&&!!e._isBuffer}function l(e){return Object.prototype.toString.call(e)}function c(e){return s(e)?!1:typeof n.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e?e instanceof DataView?!0:e.buffer&&e.buffer instanceof ArrayBuffer?!0:!1:!1}function d(e){if(!o.isFunction(e))return;if(f)return e.name;var t=e.toString(),n=t.match(p);return n&&n[1]}function v(e,t){return typeof e=="string"?e.length<t?e:e.slice(0,t):e}function m(e){if(f||!o.isFunction(e))return o.inspect(e);var t=d(e),n=t?": "+t:"";return"[Function"+n+"]"}function g(e){return v(m(e.actual),128)+" "+e.operator+" "+v(m(e.expected),128)}function y(e,t,n,r,i){throw new h.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function b(e,t){e||y(e,!0,t,"==",h.ok)}function w(e,t,n,r){if(e===t)return!0;if(s(e)&&s(t))return i(e,t)===0;if(o.isDate(e)&&o.isDate(t))return e.getTime()===t.getTime();if(o.isRegExp(e)&&o.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(e!==null&&typeof e=="object"||t!==null&&typeof t=="object"){if(!c(e)||!c(t)||l(e)!==l(t)||e instanceof Float32Array||e instanceof Float64Array){if(s(e)!==s(t))return!1;r=r||{actual:[],expected:[]};var u=r.actual.indexOf(e);return u!==-1&&u===r.expected.indexOf(t)?!0:(r.actual.push(e),r.expected.push(t),S(e,t,n,r))}return i(new Uint8Array(e.buffer),new Uint8Array(t.buffer))===0}return n?e===t:e==t}function E(e){return Object.prototype.toString.call(e)=="[object Arguments]"}function S(e,t,n,r){if(e===null||e===undefined||t===null||t===undefined)return!1;if(o.isPrimitive(e)||o.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=E(e),s=E(t);if(i&&!s||!i&&s)return!1;if(i)return e=a.call(e),t=a.call(t),w(e,t,n);var u=L(e),f=L(t),l,c;if(u.length!==f.length)return!1;u.sort(),f.sort();for(c=u.length-1;c>=0;c--)if(u[c]!==f[c])return!1;for(c=u.length-1;c>=0;c--){l=u[c];if(!w(e[l],t[l],n,r))return!1}return!0}function x(e,t,n){w(e,t,!0)&&y(e,t,n,"notDeepStrictEqual",x)}function T(e,t){if(!e||!t)return!1;if(Object.prototype.toString.call(t)=="[object RegExp]")return t.test(e);try{if(e instanceof t)return!0}catch(n){}return Error.isPrototypeOf(t)?!1:t.call({},e)===!0}function N(e){var t;try{e()}catch(n){t=n}return t}function C(e,t,n,r){var i;if(typeof t!="function")throw new TypeError('"block" argument must be a function');typeof n=="string"&&(r=n,n=null),i=N(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&y(i,n,"Missing expected exception"+r);var s=typeof r=="string",u=!e&&o.isError(i),a=!e&&i&&!n;(u&&s&&T(i,n)||a)&&y(i,n,"Got unwanted exception"+r);if(e&&i&&n&&!T(i,n)||!e&&i)throw i}function k(e,t){e||y(e,!0,t,"==",k)}var r=e("object-assign"),o=e("util/"),u=Object.prototype.hasOwnProperty,a=Array.prototype.slice,f=function(){return function(){}.name==="foo"}(),h=t.exports=b,p=/\s*function\s+([^\(\s]*)\s*/;h.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=g(this),this.generatedMessage=!0);var n=t.stackStartFunction||y;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var r=new Error;if(r.stack){var i=r.stack,s=d(n),o=i.indexOf("\n"+s);if(o>=0){var u=i.indexOf("\n",o+1);i=i.substring(u+1)}this.stack=i}}},o.inherits(h.AssertionError,Error),h.fail=y,h.ok=b,h.equal=function(t,n,r){t!=n&&y(t,n,r,"==",h.equal)},h.notEqual=function(t,n,r){t==n&&y(t,n,r,"!=",h.notEqual)},h.deepEqual=function(t,n,r){w(t,n,!1)||y(t,n,r,"deepEqual",h.deepEqual)},h.deepStrictEqual=function(t,n,r){w(t,n,!0)||y(t,n,r,"deepStrictEqual",h.deepStrictEqual)},h.notDeepEqual=function(t,n,r){w(t,n,!1)&&y(t,n,r,"notDeepEqual",h.notDeepEqual)},h.notDeepStrictEqual=x,h.strictEqual=function(t,n,r){t!==n&&y(t,n,r,"===",h.strictEqual)},h.notStrictEqual=function(t,n,r){t===n&&y(t,n,r,"!==",h.notStrictEqual)},h.throws=function(e,t,n){C(!0,e,t,n)},h.doesNotThrow=function(e,t,n){C(!1,e,t,n)},h.ifError=function(e){if(e)throw e},h.strict=r(k,h,{equal:h.strictEqual,deepEqual:h.deepStrictEqual,notEqual:h.notStrictEqual,notDeepEqual:h.notDeepStrictEqual}),h.strict.strict=h.strict;var L=Object.keys||function(e){var t=[];for(var n in e)u.call(e,n)&&t.push(n);return t}}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"object-assign":5,"util/":4}],2:[function(e,t,n){typeof Object.create=="function"?t.exports=function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}},{}],3:[function(e,t,n){t.exports=function(t){return t&&typeof t=="object"&&typeof t.copy=="function"&&typeof t.fill=="function"&&typeof t.readUInt8=="function"}},{}],4:[function(e,t,n){(function(t,r){function u(e,t){var r={seen:[],stylize:f};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),y(t)?r.showHidden=t:t&&n._extend(r,t),T(r.showHidden)&&(r.showHidden=!1),T(r.depth)&&(r.depth=2),T(r.colors)&&(r.colors=!1),T(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=a),c(r,e,r.depth)}function a(e,t){var n=u.styles[t];return n?"["+u.colors[n][0]+"m"+e+"["+u.colors[n][1]+"m":e}function f(e,t){return e}function l(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function c(e,t,r){if(e.customInspect&&t&&A(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,e);return S(i)||(i=c(e,i,r)),i}var s=h(e,t);if(s)return s;var o=Object.keys(t),u=l(o);e.showHidden&&(o=Object.getOwnPropertyNames(t));if(L(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return p(t);if(o.length===0){if(A(t)){var a=t.name?": "+t.name:"";return e.stylize("[Function"+a+"]","special")}if(N(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(k(t))return e.stylize(Date.prototype.toString.call(t),"date");if(L(t))return p(t)}var f="",y=!1,b=["{","}"];g(t)&&(y=!0,b=["[","]"]);if(A(t)){var w=t.name?": "+t.name:"";f=" [Function"+w+"]"}N(t)&&(f=" "+RegExp.prototype.toString.call(t)),k(t)&&(f=" "+Date.prototype.toUTCString.call(t)),L(t)&&(f=" "+p(t));if(o.length!==0||!!y&&t.length!=0){if(r<0)return N(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var E;return y?E=d(e,t,r,u,o):E=o.map(function(n){return v(e,t,r,u,n,y)}),e.seen.pop(),m(E,f,b)}return b[0]+f+b[1]}function h(e,t){if(T(t))return e.stylize("undefined","undefined");if(S(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(E(t))return e.stylize(""+t,"number");if(y(t))return e.stylize(""+t,"boolean");if(b(t))return e.stylize("null","null")}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,i){var s=[];for(var o=0,u=t.length;o<u;++o)H(t,String(o))?s.push(v(e,t,n,r,String(o),!0)):s.push("");return i.forEach(function(i){i.match(/^\d+$/)||s.push(v(e,t,n,r,i,!0))}),s}function v(e,t,n,r,i,s){var o,u,a;a=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},a.get?a.set?u=e.stylize("[Getter/Setter]","special"):u=e.stylize("[Getter]","special"):a.set&&(u=e.stylize("[Setter]","special")),H(r,i)||(o="["+i+"]"),u||(e.seen.indexOf(a.value)<0?(b(n)?u=c(e,a.value,null):u=c(e,a.value,n-1),u.indexOf("\n")>-1&&(s?u=u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):u="\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special"));if(T(o)){if(s&&i.match(/^\d+$/))return u;o=JSON.stringify(""+i),o.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+u}function m(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(t===""?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function g(e){return Array.isArray(e)}function y(e){return typeof e=="boolean"}function b(e){return e===null}function w(e){return e==null}function E(e){return typeof e=="number"}function S(e){return typeof e=="string"}function x(e){return typeof e=="symbol"}function T(e){return e===void 0}function N(e){return C(e)&&M(e)==="[object RegExp]"}function C(e){return typeof e=="object"&&e!==null}function k(e){return C(e)&&M(e)==="[object Date]"}function L(e){return C(e)&&(M(e)==="[object Error]"||e instanceof Error)}function A(e){return typeof e=="function"}function O(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e=="undefined"}function M(e){return Object.prototype.toString.call(e)}function _(e){return e<10?"0"+e.toString(10):e.toString(10)}function P(){var e=new Date,t=[_(e.getHours()),_(e.getMinutes()),_(e.getSeconds())].join(":");return[e.getDate(),D[e.getMonth()],t].join(" ")}function H(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var i=/%[sdj%]/g;n.format=function(e){if(!S(e)){var t=[];for(var n=0;n<arguments.length;n++)t.push(u(arguments[n]));return t.join(" ")}var n=1,r=arguments,s=r.length,o=String(e).replace(i,function(e){if(e==="%%")return"%";if(n>=s)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"};default:return e}});for(var a=r[n];n<s;a=r[++n])b(a)||!C(a)?o+=" "+a:o+=" "+u(a);return o},n.deprecate=function(e,i){function o(){if(!s){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),s=!0}return e.apply(this,arguments)}if(T(r.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var s=!1;return o};var s={},o;n.debuglog=function(e){T(o)&&(o=t.env.NODE_DEBUG||""),e=e.toUpperCase();if(!s[e])if((new RegExp("\\b"+e+"\\b","i")).test(o)){var r=t.pid;s[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else s[e]=function(){};return s[e]},n.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow","boolean":"yellow","undefined":"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=g,n.isBoolean=y,n.isNull=b,n.isNullOrUndefined=w,n.isNumber=E,n.isString=S,n.isSymbol=x,n.isUndefined=T,n.isRegExp=N,n.isObject=C,n.isDate=k,n.isError=L,n.isFunction=A,n.isPrimitive=O,n.isBuffer=e("./support/isBuffer");var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",P(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!C(t))return e;var n=Object.keys(t),r=n.length;while(r--)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./support/isBuffer":3,_process:6,inherits:2}],5:[function(e,t,n){function o(e){if(e===null||e===undefined)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function u(){try{if(!Object.assign)return!1;var e=new String("abc");e[5]="de";if(Object.getOwnPropertyNames(e)[0]==="5")return!1;var t={};for(var n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),Object.keys(Object.assign({},i)).join("")!=="abcdefghijklmnopqrst"?!1:!0}catch(s){return!1}}var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;t.exports=u()?Object.assign:function(e,t){var n,u=o(e),a;for(var f=1;f<arguments.length;f++){n=Object(arguments[f]);for(var l in n)i.call(n,l)&&(u[l]=n[l]);if(r){a=r(n);for(var c=0;c<a.length;c++)s.call(n,a[c])&&(u[a[c]]=n[a[c]])}}return u}},{}],6:[function(e,t,n){function o(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function a(e){if(i===setTimeout)return setTimeout(e,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}function f(e){if(s===clearTimeout)return clearTimeout(e);if((s===u||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{return s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}function d(){if(!c||!h)return;c=!1,h.length?l=h.concat(l):p=-1,l.length&&v()}function v(){if(c)return;var e=a(d);c=!0;var t=l.length;while(t){h=l,l=[];while(++p<t)h&&h[p].run();p=-1,t=l.length}h=null,c=!1,f(e)}function m(e,t){this.fun=e,this.array=t}function g(){}var r=t.exports={},i,s;(function(){try{typeof setTimeout=="function"?i=setTimeout:i=o}catch(e){i=o}try{typeof clearTimeout=="function"?s=clearTimeout:s=u}catch(e){s=u}})();var l=[],c=!1,h,p=-1;r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new m(e,t)),l.length===1&&!c&&a(v)},m.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},{}],7:[function(e,t,n){function s(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function u(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.Definition=n.ParameterDefinition=undefined;var r=e("./variable"),i=s(r),f=function c(e,t,n,r,i,s){a(this,c),this.type=e,this.name=t,this.node=n,this.parent=r,this.index=i,this.kind=s};n.default=f;var l=function(e){function t(e,n,r,s){a(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i.default.Parameter,e,n,null,r,null));return u.rest=s,u}return u(t,e),t}(f);n.ParameterDefinition=l,n.Definition=f},{"./variable":14}],8:[function(e,t,n){function g(e){return e&&e.__esModule?e:{"default":e}}function y(){return{optimistic:!1,directive:!1,nodejsScope:!1,impliedStrict:!1,sourceType:"script",ecmaVersion:5,childVisitorKeys:null,fallback:"iteration"}}function b(e,t){function s(e){return(typeof e=="undefined"?"undefined":r(e))==="object"&&e instanceof Object&&!(e instanceof Array)&&!(e instanceof RegExp)}var n,i;for(n in t)t.hasOwnProperty(n)&&(i=t[n],s(i)?s(e[n])?b(e[n],i):e[n]=b({},i):e[n]=i);return e}function w(e,t){var n,r,i;return i=b(y(),t),n=new u.default(i),r=new f.default(i,n),r.visit(e),(0,s.default)(n.__currentScope===null,"currentScope should be null."),n}Object.defineProperty(n,"__esModule",{value:!0}),n.ScopeManager=n.Scope=n.Variable=n.Reference=n.version=undefined;var r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.analyze=w;var i=e("assert"),s=g(i),o=e("./scope-manager"),u=g(o),a=e("./referencer"),f=g(a),l=e("./reference"),c=g(l),h=e("./variable"),p=g(h),d=e("./scope"),v=g(d),m=e("../package.json");n.version=m.version,n.Reference=c.default,n.Variable=p.default,n.Scope=v.default,n.ScopeManager=u.default},{"../package.json":20,"./reference":10,"./referencer":11,"./scope":13,"./scope-manager":12,"./variable":14,assert:1}],9:[function(e,t,n){function u(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function l(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e){return e[e.length-1]||null}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("estraverse"),s=e("esrecurse"),o=u(s),h=function(e){function t(e,n,r){a(this,t);var i=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,null,e));return i.rootPattern=n,i.callback=r,i.assignments=[],i.rightHandNodes=[],i.restElements=[],i}return l(t,e),r(t,null,[{key:"isPattern",value:function(t){var n=t.type;return n===i.Syntax.Identifier||n===i.Syntax.ObjectPattern||n===i.Syntax.ArrayPattern||n===i.Syntax.SpreadElement||n===i.Syntax.RestElement||n===i.Syntax.AssignmentPattern}}]),r(t,[{key:"Identifier",value:function(t){var n=c(this.restElements);this.callback(t,{topLevel:t===this.rootPattern,rest:n!=null&&n.argument===t,assignments:this.assignments})}},{key:"Property",value:function(t){t.computed&&this.rightHandNodes.push(t.key),this.visit(t.value)}},{key:"ArrayPattern",value:function(t){var n,r,i;for(n=0,r=t.elements.length;n<r;++n)i=t.elements[n],this.visit(i)}},{key:"AssignmentPattern",value:function(t){this.assignments.push(t),this.visit(t.left),this.rightHandNodes.push(t.right),this.assignments.pop()}},{key:"RestElement",value:function(t){this.restElements.push(t),this.visit(t.argument),this.restElements.pop()}},{key:"MemberExpression",value:function(t){t.computed&&this.rightHandNodes.push(t.property),this.rightHandNodes.push(t.object)}},{key:"SpreadElement",value:function(t){this.visit(t.argument)}},{key:"ArrayExpression",value:function(t){t.elements.forEach(this.visit,this)}},{key:"AssignmentExpression",value:function(t){this.assignments.push(t),this.visit(t.left),this.rightHandNodes.push(t.right),this.assignments.pop()}},{key:"CallExpression",value:function(t){var n=this;t.arguments.forEach(function(e){n.rightHandNodes.push(e)}),this.visit(t.callee)}}]),t}(o.default.Visitor);n.default=h},{esrecurse:15,estraverse:17}],10:[function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=1,o=2,u=s|o,a=function(){function e(t,n,r,s,o,u,a){i(this,e),this.identifier=t,this.from=n,this.tainted=!1,this.resolved=null,this.flag=r,this.isWrite()&&(this.writeExpr=s,this.partial=u,this.init=a),this.__maybeImplicitGlobal=o}return r(e,[{key:"isStatic",value:function(){return!this.tainted&&this.resolved&&this.resolved.scope.isStatic()}},{key:"isWrite",value:function(){return!!(this.flag&e.WRITE)}},{key:"isRead",value:function(){return!!(this.flag&e.READ)}},{key:"isReadOnly",value:function(){return this.flag===e.READ}},{key:"isWriteOnly",value:function(){return this.flag===e.WRITE}},{key:"isReadWrite",value:function(){return this.flag===e.RW}}]),e}();n.default=a,a.READ=s,a.WRITE=o,a.RW=u},{}],11:[function(e,t,n){function m(e){return e&&e.__esModule?e:{"default":e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function b(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function w(e,t,n,r){var i=new h.default(e,t,r);i.visit(t),n!=null&&i.rightHandNodes.forEach(n.visit,n)}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("estraverse"),s=e("esrecurse"),o=m(s),u=e("./reference"),a=m(u),f=e("./variable"),l=m(f),c=e("./pattern-visitor"),h=m(c),p=e("./definition"),d=e("assert"),v=m(d),E=function(e){function t(e,n){g(this,t);var r=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,null,n.options));return r.declaration=e,r.referencer=n,r}return b(t,e),r(t,[{key:"visitImport",value:function(t,n){var r=this;this.referencer.visitPattern(t,function(e){r.referencer.currentScope().__define(e,new p.Definition(l.default.ImportBinding,e,n,r.declaration,null,null))})}},{key:"ImportNamespaceSpecifier",value:function(t){var n=t.local||t.id;n&&this.visitImport(n,t)}},{key:"ImportDefaultSpecifier",value:function(t){var n=t.local||t.id;this.visitImport(n,t)}},{key:"ImportSpecifier",value:function(t){var n=t.local||t.id;t.name?this.visitImport(t.name,t):this.visitImport(n,t)}}]),t}(o.default.Visitor),S=function(e){function t(e,n){g(this,t);var r=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,null,e));return r.options=e,r.scopeManager=n,r.parent=null,r.isInnerMethodDefinition=!1,r}return b(t,e),r(t,[{key:"currentScope",value:function(){return this.scopeManager.__currentScope}},{key:"close",value:function(t){while(this.currentScope()&&t===this.currentScope().block)this.scopeManager.__currentScope=this.currentScope().__close(this.scopeManager)}},{key:"pushInnerMethodDefinition",value:function(t){var n=this.isInnerMethodDefinition;return this.isInnerMethodDefinition=t,n}},{key:"popInnerMethodDefinition",value:function(t){this.isInnerMethodDefinition=t}},{key:"materializeTDZScope",value:function(t,n){this.scopeManager.__nestTDZScope(t,n),this.visitVariableDeclaration(this.currentScope(),l.default.TDZ,n.left,0,!0)}},{key:"materializeIterationScope",value:function(t){var n=this,r;this.scopeManager.__nestForScope(t),r=t.left,this.visitVariableDeclaration(this.currentScope(),l.default.Variable,r,0),this.visitPattern(r.declarations[0].id,function(e){n.currentScope().__referencing(e,a.default.WRITE,t.right,null,!0,!0)})}},{key:"referencingDefaultValue",value:function(t,n,r,i){var s=this.currentScope();n.forEach(function(e){s.__referencing(t,a.default.WRITE,e.right,r,t!==e.left,i)})}},{key:"visitPattern",value:function(t,n,r){typeof n=="function"&&(r=n,n={processRightHandNodes:!1}),w(this.options,t,n.processRightHandNodes?this:null,r)}},{key:"visitFunction",value:function(t){var n=this,r,s;t.type===i.Syntax.FunctionDeclaration&&this.currentScope().__define(t.id,new p.Definition(l.default.FunctionName,t.id,t,null,null,null)),t.type===i.Syntax.FunctionExpression&&t.id&&this.scopeManager.__nestFunctionExpressionNameScope(t),this.scopeManager.__nestFunctionScope(t,this.isInnerMethodDefinition);for(r=0,s=t.params.length;r<s;++r)this.visitPattern(t.params[r],{processRightHandNodes:!0},function(e,i){n.currentScope().__define(e,new p.ParameterDefinition(e,t,r,i.rest)),n.referencingDefaultValue(e,i.assignments,null,!0)});t.rest&&this.visitPattern({type:"RestElement",argument:t.rest},function(e){n.currentScope().__define(e,new p.ParameterDefinition(e,t,t.params.length,!0))}),t.body.type===i.Syntax.BlockStatement?this.visitChildren(t.body):this.visit(t.body),this.close(t)}},{key:"visitClass",value:function(t){t.type===i.Syntax.ClassDeclaration&&this.currentScope().__define(t.id,new p.Definition(l.default.ClassName,t.id,t,null,null,null)),this.visit(t.superClass),this.scopeManager.__nestClassScope(t),t.id&&this.currentScope().__define(t.id,new p.Definition(l.default.ClassName,t.id,t)),this.visit(t.body),this.close(t)}},{key:"visitProperty",value:function(t){var n,r;t.computed&&this.visit(t.key),r=t.type===i.Syntax.MethodDefinition,r&&(n=this.pushInnerMethodDefinition(!0)),this.visit(t.value),r&&this.popInnerMethodDefinition(n)}},{key:"visitForIn",value:function(t){var n=this;t.left.type===i.Syntax.VariableDeclaration&&t.left.kind!=="var"?(this.materializeTDZScope(t.right,t),this.visit(t.right),this.close(t.right),this.materializeIterationScope(t),this.visit(t.body),this.close(t)):(t.left.type===i.Syntax.VariableDeclaration?(this.visit(t.left),this.visitPattern(t.left.declarations[0].id,function(e){n.currentScope().__referencing(e,a.default.WRITE,t.right,null,!0,!0)})):this.visitPattern(t.left,{processRightHandNodes:!0},function(e,r){var i=null;n.currentScope().isStrict||(i={pattern:e,node:t}),n.referencingDefaultValue(e,r.assignments,i,!1),n.currentScope().__referencing(e,a.default.WRITE,t.right,i,!0,!1)}),this.visit(t.right),this.visit(t.body))}},{key:"visitVariableDeclaration",value:function(t,n,r,i,s){var o=this,u,f;u=r.declarations[i],f=u.init,this.visitPattern(u.id,{processRightHandNodes:!s},function(e,l){t.__define(e,new p.Definition(n,e,u,r,i,r.kind)),s||o.referencingDefaultValue(e,l.assignments,null,!0),f&&o.currentScope().__referencing(e,a.default.WRITE,f,null,!l.topLevel,!0)})}},{key:"AssignmentExpression",value:function(t){var n=this;h.default.isPattern(t.left)?t.operator==="="?this.visitPattern(t.left,{processRightHandNodes:!0},function(e,r){var i=null;n.currentScope().isStrict||(i={pattern:e,node:t}),n.referencingDefaultValue(e,r.assignments,i,!1),n.currentScope().__referencing(e,a.default.WRITE,t.right,i,!r.topLevel,!1)}):this.currentScope().__referencing(t.left,a.default.RW,t.right):this.visit(t.left),this.visit(t.right)}},{key:"CatchClause",value:function(t){var n=this;this.scopeManager.__nestCatchScope(t),this.visitPattern(t.param,{processRightHandNodes:!0},function(e,r){n.currentScope().__define(e,new p.Definition(l.default.CatchClause,t.param,t,null,null,null)),n.referencingDefaultValue(e,r.assignments,null,!0)}),this.visit(t.body),this.close(t)}},{key:"Program",value:function(t){this.scopeManager.__nestGlobalScope(t),this.scopeManager.__isNodejsScope()&&(this.currentScope().isStrict=!1,this.scopeManager.__nestFunctionScope(t,!1)),this.scopeManager.__isES6()&&this.scopeManager.isModule()&&this.scopeManager.__nestModuleScope(t),this.scopeManager.isStrictModeSupported()&&this.scopeManager.isImpliedStrict()&&(this.currentScope().isStrict=!0),this.visitChildren(t),this.close(t)}},{key:"Identifier",value:function(t){this.currentScope().__referencing(t)}},{key:"UpdateExpression",value:function(t){h.default.isPattern(t.argument)?this.currentScope().__referencing(t.argument,a.default.RW,null):this.visitChildren(t)}},{key:"MemberExpression",value:function(t){this.visit(t.object),t.computed&&this.visit(t.property)}},{key:"Property",value:function(t){this.visitProperty(t)}},{key:"MethodDefinition",value:function(t){this.visitProperty(t)}},{key:"BreakStatement",value:function(){}},{key:"ContinueStatement",value:function(){}},{key:"LabeledStatement",value:function(t){this.visit(t.body)}},{key:"ForStatement",value:function(t){t.init&&t.init.type===i.Syntax.VariableDeclaration&&t.init.kind!=="var"&&this.scopeManager.__nestForScope(t),this.visitChildren(t),this.close(t)}},{key:"ClassExpression",value:function(t){this.visitClass(t)}},{key:"ClassDeclaration",value:function(t){this.visitClass(t)}},{key:"CallExpression",value:function(t){!this.scopeManager.__ignoreEval()&&t.callee.type===i.Syntax.Identifier&&t.callee.name==="eval"&&this.currentScope().variableScope.__detectEval(),this.visitChildren(t)}},{key:"BlockStatement",value:function(t){this.scopeManager.__isES6()&&this.scopeManager.__nestBlockScope(t),this.visitChildren(t),this.close(t)}},{key:"ThisExpression",value:function(){this.currentScope().variableScope.__detectThis()}},{key:"WithStatement",value:function(t){this.visit(t.object),this.scopeManager.__nestWithScope(t),this.visit(t.body),this.close(t)}},{key:"VariableDeclaration",value:function(t){var n,r,i,s;n=t.kind==="var"?this.currentScope().variableScope:this.currentScope();for(r=0,i=t.declarations.length;r<i;++r)s=t.declarations[r],this.visitVariableDeclaration(n,l.default.Variable,t,r),s.init&&this.visit(s.init)}},{key:"SwitchStatement",value:function(t){var n,r;this.visit(t.discriminant),this.scopeManager.__isES6()&&this.scopeManager.__nestSwitchScope(t);for(n=0,r=t.cases.length;n<r;++n)this.visit(t.cases[n]);this.close(t)}},{key:"FunctionDeclaration",value:function(t){this.visitFunction(t)}},{key:"FunctionExpression",value:function(t){this.visitFunction(t)}},{key:"ForOfStatement",value:function(t){this.visitForIn(t)}},{key:"ForInStatement",value:function(t){this.visitForIn(t)}},{key:"ArrowFunctionExpression",value:function(t){this.visitFunction(t)}},{key:"ImportDeclaration",value:function(t){var n;(0,v.default)(this.scopeManager.__isES6()&&this.scopeManager.isModule(),"ImportDeclaration should appear when the mode is ES6 and in the module context."),n=new E(t,this),n.visit(t)}},{key:"visitExportDeclaration",value:function(t){if(t.source)return;if(t.declaration){this.visit(t.declaration);return}this.visitChildren(t)}},{key:"ExportDeclaration",value:function(t){this.visitExportDeclaration(t)}},{key:"ExportNamedDeclaration",value:function(t){this.visitExportDeclaration(t)}},{key:"ExportSpecifier",value:function(t){var n=t.id||t.local;this.visit(n)}},{key:"MetaProperty",value:function(){}}]),t}(o.default.Visitor);n.default=S},{"./definition":7,"./pattern-visitor":9,"./reference":10,"./variable":14,assert:1,esrecurse:15,estraverse:17}],12:[function(e,t,n){function a(e){return e&&e.__esModule?e:{"default":e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=e("./scope"),s=a(i),o=e("assert"),u=a(o),l=function(){function e(t){f(this,e),this.scopes=[],this.globalScope=null,this.__nodeToScope=new WeakMap,this.__currentScope=null,this.__options=t,this.__declaredVariables=new WeakMap}return r(e,[{key:"__useDirective",value:function(){return this.__options.directive}},{key:"__isOptimistic",value:function(){return this.__options.optimistic}},{key:"__ignoreEval",value:function(){return this.__options.ignoreEval}},{key:"__isNodejsScope",value:function(){return this.__options.nodejsScope}},{key:"isModule",value:function(){return this.__options.sourceType==="module"}},{key:"isImpliedStrict",value:function(){return this.__options.impliedStrict}},{key:"isStrictModeSupported",value:function(){return this.__options.ecmaVersion>=5}},{key:"__get",value:function(t){return this.__nodeToScope.get(t)}},{key:"getDeclaredVariables",value:function(t){return this.__declaredVariables.get(t)||[]}},{key:"acquire",value:function(t,n){function u(e){return e.type==="function"&&e.functionExpressionScope?!1:e.type==="TDZ"?!1:!0}var r,i,s,o;r=this.__get(t);if(!r||r.length===0)return null;if(r.length===1)return r[0];if(n)for(s=r.length-1;s>=0;--s){i=r[s];if(u(i))return i}else for(s=0,o=r.length;s<o;++s){i=r[s];if(u(i))return i}return null}},{key:"acquireAll",value:function(t){return this.__get(t)}},{key:"release",value:function(t,n){var r,i;return r=this.__get(t),r&&r.length?(i=r[0].upper,i?this.acquire(i.block,n):null):null}},{key:"attach",value:function(){}},{key:"detach",value:function(){}},{key:"__nestScope",value:function(t){return t instanceof i.GlobalScope&&((0,u.default)(this.__currentScope===null),this.globalScope=t),this.__currentScope=t,t}},{key:"__nestGlobalScope",value:function(t){return this.__nestScope(new i.GlobalScope(this,t))}},{key:"__nestBlockScope",value:function(t,n){return this.__nestScope(new i.BlockScope(this,this.__currentScope,t))}},{key:"__nestFunctionScope",value:function(t,n){return this.__nestScope(new i.FunctionScope(this,this.__currentScope,t,n))}},{key:"__nestForScope",value:function(t){return this.__nestScope(new i.ForScope(this,this.__currentScope,t))}},{key:"__nestCatchScope",value:function(t){return this.__nestScope(new i.CatchScope(this,this.__currentScope,t))}},{key:"__nestWithScope",value:function(t){return this.__nestScope(new i.WithScope(this,this.__currentScope,t))}},{key:"__nestClassScope",value:function(t){return this.__nestScope(new i.ClassScope(this,this.__currentScope,t))}},{key:"__nestSwitchScope",value:function(t){return this.__nestScope(new i.SwitchScope(this,this.__currentScope,t))}},{key:"__nestModuleScope",value:function(t){return this.__nestScope(new i.ModuleScope(this,this.__currentScope,t))}},{key:"__nestTDZScope",value:function(t){return this.__nestScope(new i.TDZScope(this,this.__currentScope,t))}},{key:"__nestFunctionExpressionNameScope",value:function(t){return this.__nestScope(new i.FunctionExpressionNameScope(this,this.__currentScope,t))}},{key:"__isES6",value:function(){return this.__options.ecmaVersion>=6}}]),e}();n.default=l},{"./scope":13,assert:1}],13:[function(e,t,n){function d(e){return e&&e.__esModule?e:{"default":e}}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t}function m(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t,n,r){var i,o,u,a,f;if(e.upper&&e.upper.isStrict)return!0;if(t.type===s.Syntax.ArrowFunctionExpression)return!0;if(n)return!0;if(e.type==="class"||e.type==="module")return!0;if(e.type==="block"||e.type==="switch")return!1;if(e.type==="function")t.type===s.Syntax.Program?i=t:i=t.body;else{if(e.type!=="global")return!1;i=t}if(r)for(o=0,u=i.body.length;o<u;++o){a=i.body[o];if(a.type!==s.Syntax.DirectiveStatement)break;if(a.raw==='"use strict"'||a.raw==="'use strict'")return!0}else for(o=0,u=i.body.length;o<u;++o){a=i.body[o];if(a.type!==s.Syntax.ExpressionStatement)break;f=a.expression;if(f.type!==s.Syntax.Literal||typeof f.value!="string")break;if(f.raw!=null){if(f.raw==='"use strict"'||f.raw==="'use strict'")return!0}else if(f.value==="use strict")return!0}return!1}function b(e,t){var n;e.scopes.push(t),n=e.__nodeToScope.get(t.block),n?n.push(t):e.__nodeToScope.set(t.block,[t])}function w(e){return e.type===f.default.ClassName||e.type===f.default.Variable&&e.parent.kind!=="var"}Object.defineProperty(n,"__esModule",{value:!0}),n.ClassScope=n.ForScope=n.FunctionScope=n.SwitchScope=n.BlockScope=n.TDZScope=n.WithScope=n.CatchScope=n.FunctionExpressionNameScope=n.ModuleScope=n.GlobalScope=undefined;var r=function D(e,t,n){e===null&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===undefined){var i=Object.getPrototypeOf(e);return i===null?undefined:D(i,t,n)}if("value"in r)return r.value;var s=r.get;return s===undefined?undefined:s.call(n)},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("estraverse"),o=e("./reference"),u=d(o),a=e("./variable"),f=d(a),l=e("./definition"),c=d(l),h=e("assert"),p=d(h),E=function(){function e(t,n,r,i,s){g(this,e),this.type=n,this.set=new Map,this.taints=new Map,this.dynamic=this.type==="global"||this.type==="with",this.block=i,this.through=[],this.variables=[],this.references=[],this.variableScope=this.type==="global"||this.type==="function"||this.type==="module"?this:r.variableScope,this.functionExpressionScope=!1,this.directCallToEvalScope=!1,this.thisFound=!1,this.__left=[],this.upper=r,this.isStrict=y(this,i,s,t.__useDirective()),this.childScopes=[],this.upper&&this.upper.childScopes.push(this),this.__declaredVariables=t.__declaredVariables,b(t,this)}return i(e,[{key:"__shouldStaticallyClose",value:function(t){return!this.dynamic||t.__isOptimistic()}},{key:"__shouldStaticallyCloseForGlobal",value:function(t){var n=t.identifier.name;if(!this.set.has(n))return!1;var r=this.set.get(n),i=r.defs;return i.length>0&&i.every(w)}},{key:"__staticCloseRef",value:function(t){this.__resolve(t)||this.__delegateToUpperScope(t)}},{key:"__dynamicCloseRef",value:function(t){var n=this;do n.through.push(t),n=n.upper;while(n)}},{key:"__globalCloseRef",value:function(t){this.__shouldStaticallyCloseForGlobal(t)?this.__staticCloseRef(t):this.__dynamicCloseRef(t)}},{key:"__close",value:function(t){var n;this.__shouldStaticallyClose(t)?n=this.__staticCloseRef:this.type!=="global"?n=this.__dynamicCloseRef:n=this.__globalCloseRef;for(var r=0,i=this.__left.length;r<i;++r){var s=this.__left[r];n.call(this,s)}return this.__left=null,this.upper}},{key:"__resolve",value:function(t){var n,r;return r=t.identifier.name,this.set.has(r)?(n=this.set.get(r),n.references.push(t),n.stack=n.stack&&t.from.variableScope===this.variableScope,t.tainted&&(n.tainted=!0,this.taints.set(n.name,!0)),t.resolved=n,!0):!1}},{key:"__delegateToUpperScope",value:function(t){this.upper&&this.upper.__left.push(t),this.through.push(t)}},{key:"__addDeclaredVariablesOfNode",value:function(t,n){if(n==null)return;var r=this.__declaredVariables.get(n);r==null&&(r=[],this.__declaredVariables.set(n,r)),r.indexOf(t)===-1&&r.push(t)}},{key:"__defineGeneric",value:function(t,n,r,i,s){var o;o=n.get(t),o||(o=new f.default(t,this),n.set(t,o),r.push(o)),s&&(o.defs.push(s),s.type!==f.default.TDZ&&(this.__addDeclaredVariablesOfNode(o,s.node),this.__addDeclaredVariablesOfNode(o,s.parent))),i&&o.identifiers.push(i)}},{key:"__define",value:function(t,n){t&&t.type===s.Syntax.Identifier&&this.__defineGeneric(t.name,this.set,this.variables,t,n)}},{key:"__referencing",value:function(t,n,r,i,o,a){if(!t||t.type!==s.Syntax.Identifier)return;if(t.name==="super")return;var f=new u.default(t,this,n||u.default.READ,r,i,!!o,!!a);this.references.push(f),this.__left.push(f)}},{key:"__detectEval",value:function(){var t;t=this,this.directCallToEvalScope=!0;do t.dynamic=!0,t=t.upper;while(t)}},{key:"__detectThis",value:function(){this.thisFound=!0}},{key:"__isClosed",value:function(){return this.__left===null}},{key:"resolve",value:function(t){var n,r,i;(0,p.default)(this.__isClosed(),"Scope should be closed."),(0,p.default)(t.type===s.Syntax.Identifier,"Target should be identifier.");for(r=0,i=this.references.length;r<i;++r){n=this.references[r];if(n.identifier===t)return n}return null}},{key:"isStatic",value:function(){return!this.dynamic}},{key:"isArgumentsMaterialized",value:function(){return!0}},{key:"isThisMaterialized",value:function(){return!0}},{key:"isUsedName",value:function(t){if(this.set.has(t))return!0;for(var n=0,r=this.through.length;n<r;++n)if(this.through[n].identifier.name===t)return!0;return!1}}]),e}();n.default=E;var S=n.GlobalScope=function(e){function t(e,n){g(this,t);var r=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"global",null,n,!1));return r.implicit={set:new Map,variables:[],left:[]},r}return m(t,e),i(t,[{key:"__close",value:function(n){var i=[];for(var s=0,o=this.__left.length;s<o;++s){var u=this.__left[s];u.__maybeImplicitGlobal&&!this.set.has(u.identifier.name)&&i.push(u.__maybeImplicitGlobal)}for(var a=0,l=i.length;a<l;++a){var h=i[a];this.__defineImplicit(h.pattern,new c.default(f.default.ImplicitGlobalVariable,h.pattern,h.node,null,null,null))}return this.implicit.left=this.__left,r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"__close",this).call(this,n)}},{key:"__defineImplicit",value:function(t,n){t&&t.type===s.Syntax.Identifier&&this.__defineGeneric(t.name,this.implicit.set,this.implicit.variables,t,n)}}]),t}(E),x=n.ModuleScope=function(e){function t(e,n,r){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"module",n,r,!1))}return m(t,e),t}(E),T=n.FunctionExpressionNameScope=function(e){function t(e,n,r){g(this,t);var i=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"function-expression-name",n,r,!1));return i.__define(r.id,new c.default(f.default.FunctionName,r.id,r,null,null,null)),i.functionExpressionScope=!0,i}return m(t,e),t}(E),N=n.CatchScope=function(e){function t(e,n,r){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"catch",n,r,!1))}return m(t,e),t}(E),C=n.WithScope=function(e){function t(e,n,r){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"with",n,r,!1))}return m(t,e),i(t,[{key:"__close",value:function(n){if(this.__shouldStaticallyClose(n))return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"__close",this).call(this,n);for(var i=0,s=this.__left.length;i<s;++i){var o=this.__left[i];o.tainted=!0,this.__delegateToUpperScope(o)}return this.__left=null,this.upper}}]),t}(E),k=n.TDZScope=function(e){function t(e,n,r){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"TDZ",n,r,!1))}return m(t,e),t}(E),L=n.BlockScope=function(e){function t(e,n,r){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"block",n,r,!1))}return m(t,e),t}(E),A=n.SwitchScope=function(e){function t(e,n,r){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"switch",n,r,!1))}return m(t,e),t}(E),O=n.FunctionScope=function(e){function t(e,n,r,i){g(this,t);var o=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"function",n,r,i));return o.block.type!==s.Syntax.ArrowFunctionExpression&&o.__defineArguments(),o}return m(t,e),i(t,[{key:"isArgumentsMaterialized",value:function(){if(this.block.type===s.Syntax.ArrowFunctionExpression)return!1;if(!this.isStatic())return!0;var t=this.set.get("arguments");return(0,p.default)(t,"Always have arguments variable."),t.tainted||t.references.length!==0}},{key:"isThisMaterialized",value:function(){return this.isStatic()?this.thisFound:!0}},{key:"__defineArguments",value:function(){this.__defineGeneric("arguments",this.set,this.variables,null,null),this.taints.set("arguments",!0)}}]),t}(E),M=n.ForScope=function(e){function t(e,n,r){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"for",n,r,!1))}return m(t,e),t}(E),_=n.ClassScope=function(e){function t(e,n,r){return g(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"class",n,r,!1))}return m(t,e),t}(E)},{"./definition":7,"./reference":10,"./variable":14,assert:1,estraverse:17}],14:[function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function s(e,t){r(this,s),this.name=e,this.identifiers=[],this.references=[],this.defs=[],this.tainted=!1,this.stack=!0,this.scope=t};n.default=i,i.CatchClause="CatchClause",i.Parameter="Parameter",i.FunctionName="FunctionName",i.ClassName="ClassName",i.Variable="Variable",i.ImportBinding="ImportBinding",i.TDZ="TDZ",i.ImplicitGlobalVariable="ImplicitGlobalVariable"},{}],15:[function(e,t,n){(function(){function o(e){return e==null?!1:typeof e=="object"&&typeof e.type=="string"}function u(e,t){return(e===r.Syntax.ObjectExpression||e===r.Syntax.ObjectPattern)&&t==="properties"}function a(e,n){n=n||{},this.__visitor=e||this,this.__childVisitorKeys=n.childVisitorKeys?t({},r.VisitorKeys,n.childVisitorKeys):r.VisitorKeys,n.fallback==="iteration"?this.__fallback=s:typeof n.fallback=="function"&&(this.__fallback=n.fallback)}var t,r,i,s;t=e("object-assign"),r=e("estraverse"),i=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"},s=Object.keys||function(e){var t=[],n;for(n in e)t.push(n);return t},a.prototype.visitChildren=function(e){var t,n,s,a,f,l,c;if(e==null)return;t=e.type||r.Syntax.Property,n=this.__childVisitorKeys[t];if(!n){if(!this.__fallback)throw new Error("Unknown node type "+t+".");n=this.__fallback(e)}for(s=0,a=n.length;s<a;++s){c=e[n[s]];if(c)if(i(c))for(f=0,l=c.length;f<l;++f)c[f]&&(o(c[f])||u(t,n[s]))&&this.visit(c[f]);else o(c)&&this.visit(c)}},a.prototype.visit=function(e){var t;if(e==null)return;t=e.type||r.Syntax.Property;if(this.__visitor[t]){this.__visitor[t].call(this,e);return}this.visitChildren(e)},n.version=e("./package.json").version,n.Visitor=a,n.visit=function(e,t,n){var r=new a(t,n);r.visit(e)}})()},{"./package.json":16,estraverse:17,"object-assign":19}],16:[function(e,t,n){t.exports={_from:"esrecurse@4.1.0",_id:"esrecurse@4.1.0",_inBundle:!1,_integrity:"sha1-RxO2U2rffyrE8yfVWed1a/9kgiA=",_location:"/esrecurse",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"esrecurse@4.1.0",name:"esrecurse",escapedName:"esrecurse",rawSpec:"4.1.0",saveSpec:null,fetchSpec:"4.1.0"},_requiredBy:["/","/escope","/eslint-scope"],_resolved:"https://registry.npmjs.org/esrecurse/-/esrecurse-4.1.0.tgz",_shasum:"4713b6536adf7f2ac4f327d559e7756bff648220",_spec:"esrecurse@4.1.0",_where:"D:\\_dev\\escope",bugs:{url:"https://github.com/estools/esrecurse/issues"},bundleDependencies:!1,dependencies:{estraverse:"~4.1.0","object-assign":"^4.0.1"},deprecated:!1,description:"ECMAScript AST recursive visitor",devDependencies:{chai:"^3.3.0","coffee-script":"^1.9.1",esprima:"^2.1.0",gulp:"^3.9.0","gulp-bump":"^1.0.0","gulp-eslint":"^1.0.0","gulp-filter":"^3.0.1","gulp-git":"^1.1.0","gulp-mocha":"^2.1.3","gulp-tag-version":"^1.2.1",jsdoc:"^3.3.0-alpha10",minimist:"^1.1.0"},engines:{node:">=0.10.0"},homepage:"https://github.com/estools/esrecurse",license:"BSD-2-Clause",main:"esrecurse.js",maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",url:"https://github.com/Constellation"}],name:"esrecurse",repository:{type:"git",url:"git+https://github.com/estools/esrecurse.git"},scripts:{lint:"gulp lint",test:"gulp travis","unit-test":"gulp test"},version:"4.1.0"}},{}],17:[function(e,t,n){(function r(t){function h(){}function p(e){var t={},n,r;for(n in e)e.hasOwnProperty(n)&&(r=e[n],typeof r=="object"&&r!==null?t[n]=p(r):t[n]=r);return t}function d(e){var t={},n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function v(e,t){var n,r,i,s;r=e.length,i=0;while(r)n=r>>>1,s=i+n,t(e[s])?r=n:(i=s+1,r-=n+1);return i}function m(e,t){var n,r,i,s;r=e.length,i=0;while(r)n=r>>>1,s=i+n,t(e[s])?(i=s+1,r-=n+1):r=n;return i}function g(e,t){var n=a(t),r,i,s;for(i=0,s=n.length;i<s;i+=1)r=n[i],e[r]=t[r];return e}function y(e,t){this.parent=e,this.key=t}function b(e,t,n,r){this.node=e,this.path=t,this.wrap=n,this.ref=r}function w(){}function E(e){return e==null?!1:typeof e=="object"&&typeof e.type=="string"}function S(e,t){return(e===n.ObjectExpression||e===n.ObjectPattern)&&"properties"===t}function x(e,t){var n=new w;return n.traverse(e,t)}function T(e,t){var n=new w;return n.replace(e,t)}function N(e,t){var n;return n=v(t,function(n){return n.range[0]>e.range[0]}),e.extendedRange=[e.range[0],e.range[1]],n!==t.length&&(e.extendedRange[1]=t[n].range[0]),n-=1,n>=0&&(e.extendedRange[0]=t[n].range[1]),e}function C(e,t,n){var r=[],i,o,u,a;if(!e.range)throw new Error("attachComments needs range information");if(!n.length){if(t.length){for(u=0,o=t.length;u<o;u+=1)i=p(t[u]),i.extendedRange=[0,e.range[0]],r.push(i);e.leadingComments=r}return e}for(u=0,o=t.length;u<o;u+=1)r.push(N(p(t[u]),n));return a=0,x(e,{enter:function(e){var t;while(a<r.length){t=r[a];if(t.extendedRange[1]>e.range[0])break;t.extendedRange[1]===e.range[0]?(e.leadingComments||(e.leadingComments=[]),e.leadingComments.push(t),r.splice(a,1)):a+=1}if(a===r.length)return s.Break;if(r[a].extendedRange[0]>e.range[1])return s.Skip}}),a=0,x(e,{leave:function(e){var t;while(a<r.length){t=r[a];if(e.range[1]<t.extendedRange[0])break;e.range[1]===t.extendedRange[0]?(e.trailingComments||(e.trailingComments=[]),e.trailingComments.push(t),r.splice(a,1)):a+=1}if(a===r.length)return s.Break;if(r[a].extendedRange[0]>e.range[1])return s.Skip}}),e}var n,i,s,o,u,a,f,l,c;return i=Array.isArray,i||(i=function(t){return Object.prototype.toString.call(t)==="[object Array]"}),h(d),h(m),u=Object.create||function(){function e(){}return function(t){return e.prototype=t,new e}}(),a=Object.keys||function(e){var t=[],n;for(n in e)t.push(n);return t},n={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},o={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]},f={},l={},c={},s={Break:f,Skip:l,Remove:c},y.prototype.replace=function(t){this.parent[this.key]=t},y.prototype.remove=function(){return i(this.parent)?(this.parent.splice(this.key,1),!0):(this.replace(null),!1)},w.prototype.path=function(){function a(e,t){if(i(t))for(r=0,s=t.length;r<s;++r)e.push(t[r]);else e.push(t)}var t,n,r,s,o,u;if(!this.__current.path)return null;o=[];for(t=2,n=this.__leavelist.length;t<n;++t)u=this.__leavelist[t],a(o,u.path);return a(o,this.__current.path),o},w.prototype.type=function(){var e=this.current();return e.type||this.__current.wrap},w.prototype.parents=function(){var t,n,r;r=[];for(t=1,n=this.__leavelist.length;t<n;++t)r.push(this.__leavelist[t].node);return r},w.prototype.current=function(){return this.__current.node},w.prototype.__execute=function(t,n){var r,i;return i=undefined,r=this.__current,this.__current=n,this.__state=null,t&&(i=t.call(this,n.node,this.__leavelist[this.__leavelist.length-1].node)),this.__current=r,i},w.prototype.notify=function(t){this.__state=t},w.prototype.skip=function(){this.notify(l)},w.prototype["break"]=function(){this.notify(f)},w.prototype.remove=function(){this.notify(c)},w.prototype.__initialize=function(e,t){this.visitor=t,this.root=e,this.__worklist=[],this.__leavelist=[],this.__current=null,this.__state=null,this.__fallback=t.fallback==="iteration",this.__keys=o,t.keys&&(this.__keys=g(u(this.__keys),t.keys))},w.prototype.traverse=function(t,n){var r,s,o,u,c,h,p,d,v,m,g,y;this.__initialize(t,n),y={},r=this.__worklist,s=this.__leavelist,r.push(new b(t,null,null,null)),s.push(new b(null,null,null,null));while(r.length){o=r.pop();if(o===y){o=s.pop(),h=this.__execute(n.leave,o);if(this.__state===f||h===f)return;continue}if(o.node){h=this.__execute(n.enter,o);if(this.__state===f||h===f)return;r.push(y),s.push(o);if(this.__state===l||h===l)continue;u=o.node,c=u.type||o.wrap,m=this.__keys[c];if(!m){if(!this.__fallback)throw new Error("Unknown node type "+c+".");m=a(u)}d=m.length;while((d-=1)>=0){p=m[d],g=u[p];if(!g)continue;if(i(g)){v=g.length;while((v-=1)>=0){if(!g[v])continue;if(S(c,m[d]))o=new b(g[v],[p,v],"Property",null);else{if(!E(g[v]))continue;o=new b(g[v],[p,v],null,null)}r.push(o)}}else E(g)&&r.push(new b(g,p,null,null))}}}},w.prototype.replace=function(t,n){function r(e){var t,n,r,i;if(e.ref.remove()){n=e.ref.key,i=e.ref.parent,t=s.length;while(t--){r=s[t];if(r.ref&&r.ref.parent===i){if(r.ref.key<n)break;--r.ref.key}}}}var s,o,u,h,p,d,v,m,g,w,x,T,N;this.__initialize(t,n),x={},s=this.__worklist,o=this.__leavelist,T={root:t},d=new b(t,null,null,new y(T,"root")),s.push(d),o.push(d);while(s.length){d=s.pop();if(d===x){d=o.pop(),p=this.__execute(n.leave,d),p!==undefined&&p!==f&&p!==l&&p!==c&&d.ref.replace(p),(this.__state===c||p===c)&&r(d);if(this.__state===f||p===f)return T.root;continue}p=this.__execute(n.enter,d),p!==undefined&&p!==f&&p!==l&&p!==c&&(d.ref.replace(p),d.node=p);if(this.__state===c||p===c)r(d),d.node=null;if(this.__state===f||p===f)return T.root;u=d.node;if(!u)continue;s.push(x),o.push(d);if(this.__state===l||p===l)continue;h=u.type||d.wrap,g=this.__keys[h];if(!g){if(!this.__fallback)throw new Error("Unknown node type "+h+".");g=a(u)}v=g.length;while((v-=1)>=0){N=g[v],w=u[N];if(!w)continue;if(i(w)){m=w.length;while((m-=1)>=0){if(!w[m])continue;if(S(h,g[v]))d=new b(w[m],[N,m],"Property",new y(w,m));else{if(!E(w[m]))continue;d=new b(w[m],[N,m],null,new y(w,m))}s.push(d)}}else E(w)&&s.push(new b(w,N,null,new y(u,N)))}}return T.root},t.version=e("./package.json").version,t.Syntax=n,t.traverse=x,t.replace=T,t.attachComments=C,t.VisitorKeys=o,t.VisitorOption=s,t.Controller=w,t.cloneEnvironment=function(){return r({})},t})(n)},{"./package.json":18}],18:[function(e,t,n){t.exports={_from:"estraverse@4.1.1",_id:"estraverse@4.1.1",_inBundle:!1,_integrity:"sha1-9srKcokzqFDvkGYdDheYK6RxEaI=",_location:"/estraverse",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"estraverse@4.1.1",name:"estraverse",escapedName:"estraverse",rawSpec:"4.1.1",saveSpec:null,fetchSpec:"4.1.1"},_requiredBy:["/","/call-matcher","/escope","/eslint-scope","/espower","/espower-source","/esquery","/esrecurse","/gulp-espower","/merge-estraverse-visitors"],_resolved:"https://registry.npmjs.org/estraverse/-/estraverse-4.1.1.tgz",_shasum:"f6caca728933a850ef90661d0e17982ba47111a2",_spec:"estraverse@4.1.1",_where:"D:\\_dev\\escope",bugs:{url:"https://github.com/estools/estraverse/issues"},bundleDependencies:!1,deprecated:!1,description:"ECMAScript JS AST traversal functions",devDependencies:{chai:"^2.1.1","coffee-script":"^1.8.0",espree:"^1.11.0",gulp:"^3.8.10","gulp-bump":"^0.2.2","gulp-filter":"^2.0.0","gulp-git":"^1.0.1","gulp-tag-version":"^1.2.1",jshint:"^2.5.6",mocha:"^2.1.0"},engines:{node:">=0.10.0"},homepage:"https://github.com/estools/estraverse",license:"BSD-2-Clause",main:"estraverse.js",maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",url:"http://github.com/Constellation"}],name:"estraverse",repository:{type:"git",url:"git+ssh://git@github.com/estools/estraverse.git"},scripts:{lint:"jshint estraverse.js",test:"npm run-script lint && npm run-script unit-test","unit-test":"mocha --compilers coffee:coffee-script/register"},version:"4.1.1"}},{}],19:[function(e,t,n){arguments[4][5][0].apply(n,arguments)},{dup:5}],20:[function(e,t,n){t.exports={name:"escope",description:"ECMAScript scope analyzer",homepage:"http://github.com/estools/escope",main:"lib/index.js",files:["lib"],version:"3.6.0",engines:{node:">=4.0"},maintainers:[{name:"Yusuke Suzuki",email:"utatane.tea@gmail.com",web:"http://github.com/Constellation"}],repository:{type:"git",url:"https://github.com/estools/escope.git"},dependencies:{esrecurse:"4.1.0",estraverse:"4.1.1"},devDependencies:{babel:"6.3.26","babel-preset-es2015":"6.3.13","babel-register":"6.3.13",browserify:"^14.4.0",chai:"^4.0.2",espree:"^3.1.1",esprima:"^3.0.0",gulp:"^3.9.0","gulp-babel":"^6.1.1","gulp-bump":"^2.7.0","gulp-eslint":"^4.0.0","gulp-espower":"^1.0.2","gulp-filter":"^5.0.0","gulp-git":"^2.4.1","gulp-mocha":"^3.0.0","gulp-plumber":"^1.0.1","gulp-sourcemaps":"^2.6.5","gulp-tag-version":"^1.3.0",jsdoc:"^3.4.0",lazypipe:"^1.0.1","vinyl-source-stream":"^1.1.0"},license:"BSD-2-Clause",scripts:{test:"gulp travis","unit-test":"gulp test",lint:"gulp lint",jsdoc:"jsdoc src/*.js README.md",build:"gulp build"}}},{}]},{},[8])(8)})
/** END OF escope **/
,define("global_charts",["require","exports","module"],function(require,exports,module){function clearWindowCharts(){eval('window["__charts__"] = [];')}function extendCodeTextByChartNames(e){if(!e||!GLOBAL.chartNames)return e;e+='; window["__charts__"] = [';for(var t=0;t<GLOBAL.chartNames.length;t++){var n=GLOBAL.chartNames[t];e+=n.name,t!=GLOBAL.chartNames.length-1&&(e+=",")}return e+="];",e}function destroyWindowCharts(){if(!window.__charts__)return;for(var e=0;e<window.__charts__.length;e++){var t=window.__charts__[e];if(t.destroy){t.destroy();continue}t.dispose&&t.dispose()}}exports.clearWindowCharts=clearWindowCharts,exports.extendCodeTextByChartNames=extendCodeTextByChartNames,exports.destroyWindowCharts=destroyWindowCharts}),define("build_ui",["require","exports","module","esprima","tabs","idleDefer","tree2","strings","tree_data_source2","highlight","escope","rsvp","global_charts","php","findCharts","findCharts","tabs","tabs","jsonLib"],function(require,exports,module){function init(){parseDocument(),highlight.clearAll(),GLOBAL.currentChartObjectName="",highlightFromURL();var d1=(new Date).getTime();GLOBAL.varDeclarations=[],GLOBAL.properties=[],parseEsprima();var d2=(new Date).getTime();debug&&console.log("Esprima time: "+(d2-d1)),GLOBAL.timeData=[],GLOBAL.timeData.parser=d2-d1,highlight.clear(),tree_data_source.init();if(!GLOBAL.is_UI_hidden){var myTreeObj=new Tree2;myTreeObj.init(null,"newSample")}try{var d5=(new Date).getTime(),deferID="chartUpdate";idleDefer.defer(deferID,deferTiming[deferID],function(){tab.init(),eval(codeText),JSCTools.g.splitter.fixContentHeight()})}catch(e){debug&&console.log("Chart Eval exception: "+e.message)}var d6=(new Date).getTime();debug&&console.log("Chart time: "+(d6-d5))}function parseDocument(){GLOBAL.codeText=codeText=GLOBAL.aceEditor.getSession().getValue(),parseJSPart()}function getCodeText(){return GLOBAL.codeText=codeText=GLOBAL.aceEditor.getSession().getValue(),parseJSPart(),codeText}function parseEsprima(){var e=new rsvp.Promise(function(e,t){delete GLOBAL.syntax,GLOBAL.syntax=esprima.parse(codeText,{loc:!0,range:!1,raw:!0,tokens:!1,comment:!0,tolerant:!0}),GLOBAL.scopes=escope.analyze(GLOBAL.syntax).scopes,GLOBAL.properties=require("findCharts").getProperties(function(e){return e.node}),GLOBAL.varDeclarations=require("findCharts").getVarDeclarators(function(e){return e.node}),e()});return e}function refreshChart(){var promise=new rsvp.Promise(function(resolve,reject){function execute(){if(GLOBAL.chartIsDirty)try{require("tabs").init(),globalCharts.destroyWindowCharts(),globalCharts.clearWindowCharts();if(!php.needToUseIframe()){var codeTextToEval=globalCharts.extendCodeTextByChartNames(getCodeText());eval(codeTextToEval)}GLOBAL.currentChartObjectName="All",GLOBAL.isEditSample&&require("tabs").updateVisibleChartTab(),GLOBAL.chartIsDirty=!1}catch(e){throw reject(e),e}resolve()}var deferID="chartUpdate";GLOBAL.disableDelay?execute():idleDefer.defer(deferID,deferTiming[deferID],function(){execute()})});return promise}function refreshTree(){}function highlightFromURL(){if(GLOBAL.lineFromURL){var e=GLOBAL.lineFromURL.split("-");e.length==1?highlight.line(parseInt(e[0],10)):e.length==2&&highlight.line(parseInt(e[0],10),parseInt(e[1],10)),GLOBAL.lineFromURL=""}}function parseJSPart(){var e=new RegExp("<script[^>]*>","mg"),t=0,n=0,r=[];codeData=[],GLOBAL.aceRangeLocation=[];var i=0;for(;;){var s=e.exec(codeText);if(!s)break;t=codeText.indexOf("</script>",s.index);if(t>0&&t-(s.index+s[0].length)>2){n==0&&(n=s.index),codeData.push({start:s.index+s[0].length,end:t,data:codeText.substring(s.index+s[0].length,t)}),r.push(codeText.substring(s.index+s[0].length,t));var o=GLOBAL.aceEditor.getSession().doc.indexToPosition(s.index+s[0].length),u=GLOBAL.aceEditor.getSession().doc.indexToPosition(t);i=t;var a=new aceRange(o.row,0,u.row,0);GLOBAL.aceRangeLocation.push(a)}}r.length>0&&(GLOBAL.offsetLineJSPage=codeText.substr(0,n).split("\n").length-1,codeText=r.join("\n"))}function getLineInPage(e){var t=0,n=0,r,i;if(GLOBAL.aceRangeLocation)for(var s=0,o=GLOBAL.aceRangeLocation.length;s<o;s++){var u=GLOBAL.aceRangeLocation[s];t+=(r=u.end.row)-(i=u.start.row);if(e-t<0)return i+(e-n)-1;n+=r-i+1}return e}function updatedJsonParseStep(){var e=new rsvp.Promise(function(e,t){var n=(new Date).getTime();parseDocument(),GLOBAL.currentChartObjectName="",GLOBAL.varDeclarations=[],GLOBAL.properties=[],parseEsprima().then(function(){tree_data_source.init();var t=(new Date).getTime();require("jsonLib").setPathVal(GLOBAL,"esprimaDuration",t-n),e()}).catch(function(e){t(e)})});return e}function redrawUI(){GLOBAL.timeData={};if(!GLOBAL.is_UI_hidden&&GLOBAL.isEditSample){var e=new Tree2;e.init(null,"newSample")}}var esprima=require("esprima"),tab=require("tabs"),idleDefer=require("idleDefer"),myTree2=require("tree2"),strings=require("strings").presets,deferTiming=strings.deferTiming,Tree2=myTree2.Tree,codeText="",debug=strings.debug,codeData=[],aceRange=ace.require("ace/range").Range,tree_data_source=require("tree_data_source2"),highlight=require("highlight"),escope=require("escope"),rsvp=require("rsvp"),globalCharts=require("global_charts"),php=require("php");GLOBAL.refreshChart=refreshChart,GLOBAL.refreshTree=refreshTree,GLOBAL.astToAceLine=getLineInPage,exports.init=init,exports.updatedJsonParseStep=updatedJsonParseStep,exports.refreshChart=refreshChart,exports.refreshJsRanges=parseDocument,exports.redrawUI=redrawUI,exports.hideUI=myTree2.hideUI}),define("samples_helper",["require","exports","module","samples","php"],function(e,t,n){function c(e){return l?!0:g(e)}function h(){if(u)return u;u=[];for(var e=0;e<s.length;e++){sampleName=s[e];if(!a&&i.isPHPSample(sampleName))continue;if(f&&g(sampleName))continue;u.push(sampleName)}return u}function p(){return s}function d(){return o}function v(e,t){var n=i.convertHtmlSampleToPHP(e);return t?i.getPHPSampleFileUrl(n):"../Samples/"+n}function m(e){i.isPHPSupported(function(t){a=t,i.isDBAvailable(function(){e&&e()})})}function g(e){return s.indexOf(e)>=0&&o.indexOf(e)>=0?!0:!1}function y(e){return i.isPHPSample(e)}var r=e("samples"),i=e("php"),s=r.all,o=r.samples,u=null,a=!1,f=n.config().showOnlyNotEditableSamples,l=n.config().notEditableSamplesAsEditable;t.canEditSample=c,t.getSamplesForWork=h,t.getAllSamples=p,t.getEditableSamples=d,t.getSampleFileUrl=v,t.init=m,t.isEditableSample=g,t.isPHPSample=y}),define("load_editor",["require","exports","module","ajax","build_ui","editor_work","tree2","tabs","samples_helper","events","strings","docTab_update","global_charts","dom","php","tree_data_source2","controller","controller","eventHandlers"],function(e,t,n){function g(e){var t=m.exec(e),n=[],r=null;while(t){var i=t[0].replace(/('|")/gim,"");r=i.split("/"),n.push({path:i,name:r[r.length-1],type:"csv"}),t=m.exec(e)}return m.lastIndex=0,n}function y(e,t){e.length||t(e);var n=0;e.forEach(function(i){r.Ajax({type:"GET",url:i.path,onSuccess:function(r){i.content=r,n++,n===e.length&&t(e)},onError:function(){i.content=null,n++,n===e.length&&t(e)}})})}function b(e,t){var n=g(e);y(n,function(e){t(e)})}function w(t,n){t=t.replace(/url\(images\//gi,"url(../samples/images/"),t=t.replace(/'images\//gi,"'../samples/images/"),t=t.replace(/"images\//gi,'"../samples/images/'),h.init(),h.clear(),n||typeof n=="undefined"?(h.hideDocTab(!1),i.hideUI(!1),GLOBAL.aceEditor.setOption("useWorker",!0)):(h.hideDocTab(!0),i.hideUI(!0),GLOBAL.aceEditor.setOption("useWorker",!1)),e("tree_data_source2").resetFullnames(),e("controller").suspend(),o.disableUI(),GLOBAL.aceEditor.setSession(GLOBAL.codeSession),GLOBAL.aceEditor.getSession().setValue(t),GLOBAL.aceEditor.resize(),s.resetUndoStack(),e("controller").resume();var r=document.getElementById("JavaScriptTab");d.callClickOn(r),GLOBAL.allPageData=t,GLOBAL.aceEditor.clearSelection(),GLOBAL.loadedFileFirstTime=!1,GLOBAL.aceEditor.renderer.scrollToLine(0,!1,!1),setTimeout(function(){GLOBAL.aceEditor.resize()},500),setTimeout(function(){GLOBAL.aceEditor.session.setFoldStyle("markbeginend"),GLOBAL.aceEditor.session.setFoldStyle("markbegin")},3e3)}function E(){var e=0,t;for(var n in GLOBAL.aceRangeLocation){var r=new c(e,0,GLOBAL.aceRangeLocation[n].start.row+1,0);GLOBAL.aceEditor.session.addFold("",r),t=e=GLOBAL.aceRangeLocation[n].end.row}GLOBAL.aceEditor.getSession().getValue()&&(r=new c(t||0,0,1e4,0),GLOBAL.aceEditor.session.addFold("",r)),GLOBAL.aceEditor.focus(),GLOBAL.aceEditor.resize()}function S(){GLOBAL.aceEditor=ace.edit("codeEditor"),GLOBAL.aceEditor.getSession().setMode("ace/mode/html"),GLOBAL.aceEditor.setTheme("ace/theme/textmate"),GLOBAL.aceEditor.setAnimatedScroll(!0),GLOBAL.codeSession=GLOBAL.aceEditor.getSession(),GLOBAL.phpSession=ace.createEditSession("","ace/mode/php"),GLOBAL.textSession=ace.createEditSession("","ace/mode/text"),s.init();var t=document.getElementById("codeTabs");t&&f.addListener(t,"click",function(t){t=f.fixEvent(t),f.stopEvent(t),f.preventDefault,e("eventHandlers").reportAction(t.target,"click");if(t.target.innerText=="All Code")u.activateTab("codeTabCode"),GLOBAL.aceEditor.setSession(GLOBAL.codeSession),GLOBAL.selectedCodeTab=!1,GLOBAL.aceEditor.session.unfold(),aceRangeLocation=[],v.needToUseIframe()?GLOBAL.aceEditor.setReadOnly(!0):GLOBAL.aceEditor.setReadOnly(!1);else if(t.target.innerText=="JavaScript")u.activateTab("codeTabFull"),GLOBAL.aceEditor.setSession(GLOBAL.codeSession),E(),GLOBAL.selectedCodeTab=!0,v.needToUseIframe()?GLOBAL.aceEditor.setReadOnly(!0):GLOBAL.aceEditor.setReadOnly(!1);else if(t.target.innerText==="PHP Source")u.activateTab("phpTab"),GLOBAL.aceEditor.setSession(GLOBAL.phpSession),GLOBAL.selectedCodeTab=!1,GLOBAL.aceEditor.setReadOnly(!0);else{var n=t.target.getAttribute("class");if(n.indexOf("file-tab-text")>=0){var r=n.split(" ")[1],i=r.split("_")[1];if(i==="csv"){var s=null;for(var o=0;o<GLOBAL.csvFiles.length;o++){var a=GLOBAL.csvFiles[o];if(a.elementId===r){s=a;break}}GLOBAL.textSession.setValue(s.content||""),GLOBAL.aceEditor.setSession(GLOBAL.textSession),GLOBAL.selectedCodeTab=!1,GLOBAL.aceEditor.setReadOnly(!0)}u.activateTab(r)}}return GLOBAL.aceEditor.focus(),!1}),GLOBAL.aceEditor.addEventListener("gutterclick",function(e,t){return e.stopPropagation=!0,e.preventDefault(),s.gutterClicked(e,t),!1}),GLOBAL.aceEditor.addEventListener("afterRender",function(e,t){}),GLOBAL.aceEditor.getSession().on("change1",function(e){}),GLOBAL.aceEditor.getSession().on("change",function(e){GLOBAL.currentCursorInEditor=GLOBAL.aceEditor.getCursorPosition(),s.editor_changed(e),GLOBAL.loadedFileFirstTime&&(GLOBAL.aceEditor.resize(),GLOBAL.g.aceEditor.focus(),GLOBAL.g.aceEditor.moveCursorTo({row:0,col:0})),GLOBAL.aceEditor.resize()}),GLOBAL.aceEditor.setPrintMarginColumn(!1)}function x(e){var t=document.getElementById("phpTab");t.style.display="none";if(!GLOBAL.isPHPSample||GLOBAL.isEditSample)return;var n=e.replace("/php/","/php/src/").replace(".php",".txt")+"?d1="+new Date;r.Ajax({type:"GET",url:n,onSuccess:function(e){t.style.display="list-item",GLOBAL.phpSession.setValue(e),GLOBAL.isPHPSample&&!GLOBAL.isDBAvailable&&d.callClickOn(t)},onError:function(e){alert(e)}})}function T(e){p.destroyWindowCharts(),u.clearChartContentTab(),u.clearFileTabs();if(e===undefined)throw new Error("Index needed for loadSample");GLOBAL.aceEditor||S();if(GLOBAL.sharedSampleFirebase){GLOBAL.isEditSample=!0,GLOBAL.isSharedSample=!0;return}var t=a.getSamplesForWork()[e],n=a.canEditSample(t);GLOBAL.isPHPSample=a.isPHPSample(t);var s=new Date,o=a.getSampleFileUrl(t,GLOBAL.isPHPSample);GLOBAL.sampleFileName=o,GLOBAL.isEditSample=n,GLOBAL.chartIsDirty=!0,GLOBAL.isSharedSample=!1,v.needToDisplayNoDbError()?(h.init(),h.setMainContentError(l.errors.MySqlServerError,l.errors.MySqlServerMessage),h.hideDocTab(!0),i.hideUI(!0)):r.Ajax({type:"GET",url:o+"?d1="+s,onSuccess:function(e){var e=N(e);b(e,function(t){GLOBAL.csvFiles=t,u.createFileTabs(t),w(e,n)})},onError:function(e){alert(e)}}),x(a.getSampleFileUrl(t,!1))}function N(e){if(!GLOBAL.isPHPSample||v.needToUseIframe())return e;var t=/('|")+.*\.php\??/gim,n=t.exec(e),r=[];while(n){var i=n[0].replace(/('|")/gim,"").replace(/\?/gim,"");r.push(i),n=t.exec(e)}var i=null;for(var s=0;s<r.length;s++)i=r[s],e=e.replace(i,"../Samples/php/"+i);return e}var r=e("ajax"),i=e("build_ui"),s=e("editor_work"),o=e("tree2"),u=e("tabs"),a=e("samples_helper"),f=e("events"),l=e("strings").presets,c=ace.require("ace/range").Range,h=e("docTab_update"),p=e("global_charts"),d=e("dom"),v=e("php"),m=/('|")(\.)?\/?.*\.csv("|')/gim;t.init=T,t.loadSample=w}),define("menu",["require","exports","module","events","load_editor","samples_helper","../server/load_sample","eventHandlers","smoothScrolling"],function(e,t,n){function p(){var t=GLOBAL.currentSampleName.split(".")[0].toLowerCase(),n=s.getSamplesForWork();for(var a=0;a<n.length;a++){var f=n[a];t===f.split(".")[0].toLowerCase()&&(h=a),u||(u=document.getElementById("sampleList"));if(u.tagName==="UL"){var p=document.createElement("li"),g=document.createElement("a");g.innerHTML=f,g.setAttribute("title",f),g.setAttribute("class","dropdownSamples"),g.setAttribute("sampleNo",a),p.appendChild(g),u.appendChild(p)}else{var p=document.createElement("option");p.text=f,p.value=f,u.appendChild(p)}}m(h),i.init(h),r.addListener(u,"click",function(){return function(e){e=r.fixEvent(e),e.preventDefault(),h=e.target.getAttribute("sampleNo");if(!h){var t=e.target.getAttribute("firebase");if(!t){t=e.target.parentNode.getAttribute("firebase");if(t==="true")return;if(t){h=+t,m(null,e.target.innerHTML),o.load();return}}alert("Could not load the sample")}m(+h),$(".select-options").css("display","none"),i.init(h)}}.call(this)),r.addListener(l,"click",function(){return d}.call(this)),r.addListener(c,"click",function(){return v}.call(this)),$(".select-area").unbind("click"),$(".select-area").bind("click",function(t){t.stopPropagation();var n=$(this).parent().parent().find(".select-options"),r=n.css("display");e("eventHandlers").reportAction(t.target,"click");if(r!="block"){n.css("display","block");var i=n.closest(".select-holder").find("span#menuFilename").text(),s=n.closest(".select-holder").find("a:contains('"+i+"')");s.length>0&&e("smoothScrolling").focusElement(s[0],{animationDuration:0,percentInfoView:.43,percentIntoViewCheck:1})}})}function d(e){var t=s.getSamplesForWork(),n=t.length;--h;if(h<0){if(GLOBAL.firepadObj.getAuth()&&GLOBAL.firebaseFileNames[-h]){m(null,GLOBAL.firebaseFileNames[-h]),o.load();return}h=n-1}m(h),i.init(h)}function v(e){++h;var t=s.getSamplesForWork();if(h>=t.length||h<=0){if(GLOBAL.firepadObj.getAuth()&&GLOBAL.firebaseFileNames&&GLOBAL.firebaseFileNames.length>0){var n=0;h<0&&(n=-h,n>GLOBAL.firebaseFileNames.length-1&&(n=GLOBAL.firebaseFileNames.length-1,h=-n)),m(null,GLOBAL.firebaseFileNames[n]),o.load();return}h=0}m(h),i.init(h)}function m(e,t){var n=s.getSamplesForWork();t?a.innerHTML=t:a.innerHTML=n[e],GLOBAL.currentSampleName=f.innerHTML=a.innerHTML,GLOBAL.sharedSampleFirebase||(window.location.hash="name="+GLOBAL.currentSampleName)}function g(e){s.init(function(){p(),e&&e()})}var r=e("events"),i=e("load_editor"),s=e("samples_helper"),o=e("../server/load_sample"),u=document.getElementById("sampleList"),a=document.getElementById("currentSample"),f=document.getElementById("menuFilename"),l=document.getElementById("buttonLeft"),c=document.getElementById("buttonRight"),h=0;t.init=g,t.nextSampleClick=v,t.setFileName=m}),define("../server/firebaseConfig",["require","exports","module"],function(e,t,n){var r={apiKey:"AIzaSyAdOKOuYuWFlAxkBAuGDK0TH1zN0D7qBoM",authDomain:"jscharting.firebaseapp.com",databaseURL:"https://jscharting.firebaseio.com",projectId:"firebase-jscharting",storageBucket:"firebase-jscharting.appspot.com",messagingSenderId:"1066471405348",appId:"1:1066471405348:web:47a74380988c94b693a5b1"};t.config=r}),define("../server/login",["require","exports","module","events","idleDefer","statusBar","./firebaseConfig","./logger","../server/update_menu","../server/message_box"],function(e,t,n){function w(){firebase.initializeApp(u.config),setTimeout(function(){E()},1e3)}function E(){b=document.getElementById("login-content");if(!b)throw Error("Could not find login-content tag");g=document.getElementById("login");if(!g)throw Error("Could not find login tag");var e=GLOBAL.firepadObj.auth().currentUser;e&&H(e.email),y=document.getElementById("signup"),i.addListener(g,"click",function(){return function(e){function u(e){var t=e.keyCode||e.which;t==13&&c()}function c(){if(!s.value){L();return}L(!0);if(!o.value){A();return}A(!0),M("Logging in..."),x(firebase,s.value,o.value,function(e){if(e.result){if(!e.authData){M(e.msg);return}H(s.value)}else M(r.msg)})}if(g.innerHTML.indexOf("@")>=0){B(),l.remove(),firebase.auth().signOut().catch(a.logError);return}e=i.fixEvent(e),e.preventDefault();var t=h;GLOBAL.loginHeader?t=t.replace("{{LoginHeader}}",GLOBAL.loginHeader):t=t.replace("{{LoginHeader}}","Log in"),GLOBAL.loginHeader="",GLOBAL.isFromSaveButton=!1,b.innerHTML=t,f=b;var n=document.getElementById("dialog-login"),s=document.getElementById("login-email"),o=document.getElementById("login-password");i.addListener(n,"click",function(e){e=i.fixEvent(e),e.preventDefault(),e.srcElement||(e.srcElement=e.target);var t=document.getElementById("login-re-password"),n=document.getElementById("login-new-password");if(e.srcElement.id==="login-cancel")P();else if(e.srcElement.id==="login-ok")c();else if(e.srcElement.id==="login-register")D();else if(e.srcElement.id==="login-change-password"){var r=s.value,u=o.value;j(r,u)}else if(e.srcElement.id==="login-reset-password"){if(!s.value){L(!1);return}L(!0),C(firebase,s.value)}else if(e.srcElement.id==="login-delete"){if(!s.value){alert("please enter email.");return}if(!o.value){alert("please passsword.");return}k(firebase,s.value,o.value)}}),$(s).bind("keydown",u),$(o).bind("keydown",u)}}.call(this)),y&&i.addListener(y,"click",function(){var e=this;return function(e){if(g.innerHTML.indexOf("Logout")>=0){g.innerHTML="Login";return}e=i.fixEvent(e),e.preventDefault(),e.srcElement||(e.srcElement=e1.target),b.innerHTML=p,f=b;var t=document.getElementById("dialog-signup");i.addListener(t,"click",function(e){e=i.fixEvent(e),e.preventDefault(),e.srcElement||(e.srcElement=e.target);var t=document.getElementById("login-email"),n=document.getElementById("login-password"),r=document.getElementById("signup-re-password"),s=document.getElementById("signup-new-password");if(e.srcElement.id==="signup-cancel")P();else if(e.srcElement.id==="signup-register"){if(!t.value){L(!1);return}L(!0);if(!n.value){A();return}A(!0);if(!r.value){O(!1,"Please re-type the password.");return}A(!0);if(r.value!==n.value){O(!1,"The passwords do not match.");return}O(!0),S(firebase,t.value,n.value,function(e){e.result?(_(e.msg),x(firebase,t.value,n.value,function(e){e.result&&H(t.value)})):M(e.msg)})}else if(e.srcElement.id==="login-change-password"){if(!t.value){alert("please enter email.");return}if(!n.value){alert("please passsword.");return}if(!r.value){alert("please renter passsword.");return}if(n.value!==r.value){alert("Password does not match!");return}N(ref,t.value,t.value,t.value)}else if(e.srcElement.id==="login-reset-password"){if(!t.value){alert("please enter email.");return}C(firebase,t.value)}else if(e.srcElement.id==="login-delete"){if(!t.value){alert("please enter email.");return}if(!n.value){alert("please passsword.");return}k(firebase,t.value,n.value)}})}}.call(this)),GLOBAL.resetPassRequest&&(j(),GLOBAL.resetPassRequest=null,GLOBAL.resetPassTemp=null)}function S(e,t,n,r){e.auth().createUserWithEmailAndPassword(t,n).then(function(){r({result:!0,msg:"User created successfully"})}).catch(function(e){r({result:!1,msg:e.message})})}function x(e,t,n,r){e.auth().signInWithEmailAndPassword(t,n).then(function(e){r({result:!0,authData:e})}).catch(function(e){r({result:!0,msg:e.message})})}function T(){firebase.auth().signOut().then(function(){B(),l.remove(),$(document).trigger("loggedout")}).catch(function(e){alert("Can't logout due an error: "+e.message+".")})}function N(e,t,n,r,i){var s=e.auth().currentUser;s.updatePassword(r).then(function(){i()}).catch(function(e){i(e)})}function C(e,t){var n=e.auth();n.sendPasswordResetEmail(t).then(function(){_("Password reset email sent successfully")}).catch(function(e){alert("Error sending password reset email:",e.message)})}function k(e,t,n){e.removeUser({email:t,password:n},function(e){e===null?alert("User removed successfully"):alert("Error removing user:",e.message)})}function L(e,t){var n=$("#login-email");n.addClass("required"),e?n.removeClass("required"):(n.addClass("required"),M(t||"Please enter a valid email address."))}function A(e,t){var n=$("#login-password");e?n.removeClass("required"):n.addClass("required");var n=$("#change-password");n.addClass("required"),e?n.removeClass("required"):(n.addClass("required"),M(t||"Please enter a password."))}function O(e,t){var n=$("#change-new-password");e?(n.removeClass("required"),M("")):(n.addClass("required"),M(t||"Please enter a new password."))}function M(e){var t=$("#loginMsg");t.text(e),o.show(e)}function _(e){M(e),o.show(e,{title:"Login"}),$(f).fadeOut(3e3,function(){P(),$(f).show()})}function D(){b.innerHTML=p,f=b;var e=document.getElementById("dialog-signup");i.addListener(e,"click",function(e){e=i.fixEvent(e),e.preventDefault(),e.srcElement||(e.srcElement=e.target);var t=document.getElementById("login-email"),n=document.getElementById("login-password"),r=document.getElementById("signup-re-password"),s=document.getElementById("signup-new-password");if(e.srcElement.id==="signup-cancel")P();else if(e.srcElement.id==="signup-register"){if(!t.value){L(!1);return}L(!0);if(!n.value){A();return}A(!0);if(!r.value){O(!1,"Please re-type the password.");return}A(!0);if(r.value!==n.value){O(!1,"The passwords do not match.");return}O(!0),S(firebase,t.value,n.value,function(e){e.result?(_(e.msg),x(firebase,t.value,n.value,function(e){e.result&&H(t.value)})):M(e.msg)})}else if(e.srcElement.id==="login-change-password"){if(!t.value){L(!1);return}if(!n.value){A();return}if(!r.value){O(!1,"Please re-type the password.");return}if(n.value!==r.value){O(!1,"Password does not match!.");return}N(firebase,t.value,t.value,t.value,function(e){if(!e){var t="Password change successful.";_(t)}else M(e.message)})}else if(e.srcElement.id==="login-reset-password"){if(!t.value){alert("please enter email.");return}C(firebase,t.value)}else if(e.srcElement.id==="login-delete"){if(!t.value){alert("please enter email.");return}if(!n.value){alert("please passsword.");return}k(firebase,t.value,n.value)}})}function P(){f&&(f.innerHTML="")}function H(e){function t(){function e(t){return j(),t.preventDefault(),$("#login-change-password").unbind("click",e),$(b).unbind("mouseenter",r),$(b).unbind("mouseleave",i),!1}function t(e){return u(),T(),!1}b.innerHTML=v,f=b,s.clear("closeLogoutMenu"),$("#login-change-password").bind("click",e),$("#login-logout").bind("click",t),$(b).bind("mouseenter",r),$(b).bind("mouseleave",i)}function n(){o()}function r(){s.clear("closeLogoutMenu")}function i(){o()}function o(){s.defer("closeLogoutMenu",200,function(){b.innerHTML=""})}function u(){$(b).unbind("mouseenter",r),$(b).unbind("mouseleave",i),$(g).unbind("mouseenter",t),$(g).unbind("mouseleave",n),b.innerHTML=""}m=e,g.innerHTML=""+e+"",g.setAttribute("class","logout"),P(),$(g).bind("mouseenter",t).bind("mouseleave",n),H.unbind=u,l.update()}function B(){g.innerHTML="",g.setAttribute("class","login"),H.unbind&&H.unbind()}function j(e,t){b.innerHTML=d,f=b;var n=document.getElementById("dialog-changePass");GLOBAL.resetPassRequest&&(m=e=GLOBAL.resetPassRequest),GLOBAL.resetPassTemp&&(document.getElementById("change-password").value=GLOBAL.resetPassTemp),i.addListener(n,"click",function(e){e=i.fixEvent(e),e.preventDefault(),e.srcElement||(e.srcElement=e.target);if(e.srcElement.id==="change-cancel")P();else if(e.srcElement.id==="change-send"){var t=document.getElementById("change-email"),n=document.getElementById("change-password"),r=document.getElementById("change-new-password"),s=document.getElementById("change-re-password"),o=m,u=n.value,a=r.value,f=s.value;if(!o){L(!1);return}L(!0);if(!u){A(!1);return}A(!0);if(!a){O(!1);return}O(!0);if(a!==f){O(!1,"New passwords dont match");return}O(!0),N(firebase,o,u,a,function(e){if(e===null){var t="Password changed successfully.";_(t)}else A(!1,e.message)})}})}function F(e,t,n,r){dataRef.authWithCustomToken(e,function(e,t){e?console.log("Login Failed!",e):console.log("Authenticated successfully with payload:",t)})}function I(e){var t=new Firebase("https://jscharting.firebaseio.com/samples"),n=t.push();n.set({user_id:"fred",sample:"new sample!"})}function q(){var e=new Firebase("https://samplechat.firebaseio-demo.com/users/fred/name");e.update({first:"Fred",last:"Flintstone"});var t=function(e){e?console.log("Synchronization failed"):console.log("Synchronization succeeded")};e.update({first:"Wilma",last:"Flintstone"},t);var n=new Firebase("https://samplechat.firebaseio-demo.com/users/fred");n.update({name:{first:"Fred",last:"Flintstone"}}),n.child("name").set({first:"Fred",last:"Flintstone"})}var i=e("events"),s=e("idleDefer"),o=e("statusBar"),u=e("./firebaseConfig"),a=e("./logger"),f,l=e("../server/update_menu"),c=e("../server/message_box"),h='<div><div id="dialog-login" ><label id="dialog-header">{{LoginHeader}}</label><label for="name"  id="login-email-label">Email:</label><input type="text" name="email" id="login-email" class="" /><label for="password" id="login-password-label">Password:</label><input type="password" name="password" id="login-password" value="" class="" /><div id="loginMsg"></div><div id="login-cancel" value="Cancel" class="" >X</div><input type="button" id="login-ok" value="Login" class="" /><a href="" id="login-register" title="Signup for a new account.">Register</a><a href="" id="login-reset-password" title="A new password will be generated and emailed.">Reset Password</a></div></div>',p='<div><div id="dialog-signup" ><label id="dialog-header">Register</label><label for="name"  id="login-email-label">Email:</label><input type="text" name="email" id="login-email" class="" /><label for="password" id="login-password-label">Password:</label><input type="password" name="password" id="login-password" value="" class="" /><label for="re-password" id="signup-re-password-label">Confirm Password:</label><input type="password" name="re-password" id="signup-re-password" value="" class="" /><div id="loginMsg" class="register"></div><div id="signup-cancel" value="Cancel" class="" >X</div><input type="button" id="signup-register" value="Register" class="" /></div></div>',d='<div><div id="dialog-changePass" title="Change password"><label id="dialog-header">Update Login</label><label for="password" id="change-password-label">Password:</label><input type="password" name="password" id="change-password" value="" class="" /><label for="new-password" id="change-new-password-label">New-Password:</label><input type="password" name="new-password" id="change-new-password" value="" class="" /><label for="re-password" id="signup-re-password-label">Confirm Password:</label><input type="password" name="re-password" id="change-re-password" value="" class="" /><div id="change-cancel" value="Cancel" class="" >X</div><div id="loginMsg" class="register"></div><input type="button" id="change-send" value="Save" class="" /></div></div>',v='<div><div id="dialog-cpOption" ><a href="" id="login-change-password" title="Change your password." >Change Password </a><a href="" id="login-logout" title="Change your password." >Logout</a></div></div>',m,g,y,b;GLOBAL.firepadObj=firebase,t.createUser=S,t.login=x,t.init=w,t.closeDialog=P}),define("../server/share",["require","exports","module","events","menu","load_editor","./logger"],function(e,t){function f(){l(),u=document.getElementById("share"),n.addListener(u,"click",function(){return function(e){e=n.fixEvent(e),e.preventDefault();var t=document.getElementById("login-content");t.innerHTML=o;var r=document.getElementById("share-url"),i=document.getElementById("dialog-share");c(function(e){e?r.value=e.message:(r.value="https://jscharting.com/editor/#c="+a.key,r.setSelectionRange(0,r.value.length))}),n.addListener(i,"click",function(e){e=n.fixEvent(e),e.preventDefault(),e.srcElement||(e.srcElement=e.target),e.srcElement.id==="share-close"?t.innerHTML="":e.srcElement.id==="share-Load"})}}.call(this))}function l(){GLOBAL.sharedSampleFirebase&&firebase.database().ref("shared/"+GLOBAL.sharedSampleFirebase).once("value").then(function(e){var t=e.val();r.setFileName(-1,t.baseSampleName),i.loadSample(t.page,!0),GLOBAL.sharedSampleFirebase=null}).catch(s.logError)}function c(e){a=firebase.database().ref("shared/").push(),a.set({baseSampleName:GLOBAL.currentSampleName,page:GLOBAL.aceEditor.getSession().getValue()}).then(e).catch(e)}var n=e("events"),r=e("menu"),i=e("load_editor"),s=e("./logger"),o='<div id="dialog-share" title="Share the sample."><label  id="dialog-header">Share Link</label><input type="input" id="share-url" value="" class="" /><div id="share-close" value="Cancel" class="" >X</div></div>',u,a;t.init=f}),define("main",["require","exports","module","es5_shim","global","events","menu","build_ui","strings","../server/login","../server/share","statusBar","statusBar","idleDefer","eventHandlers"],function(e,t,n){function m(){return typeof window.orientation!="undefined"?!0:!1}function g(){return navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1}function y(){var e;if($("html").is(".ie6, .ie7, .ie8"))return!0}function b(){var e=u.tooltips;e.UIToggleButton&&$("#switchUI").attr("title",e.UIToggleButton),e.UIToggleDocs&&$("#switchDocs").attr("title",e.UIToggleDocs),e.SampleDropdown&&$("#menuFilename").attr("title",e.SampleDropdown),e.JavascriptTab&&$("#JavaScriptTab").attr("title",e.JavascriptTab),e.AllCodeTab&&$("li#codeTabCode").find("span").attr("title",e.AllCodeTab),e.DocumentationTab&&$("ul#docWarningTab").find('span:contains("Documentation")').attr("title",e.DocumentationTab),e.WarningsTab&&$("#warningTab").attr("title",e.WarningsTab),e.FullUITab&&$("li#li_fullView").find("span").attr("title",e.FullUITab),e.DocsSliderButton&&$("a#sideDocButton").attr("title",e.DocsSliderButton),e.UISliderButton&&$("a#sideUIButton").attr("title",e.UISliderButton),u.other.UIDisabled&&$("span.uiDisabledMessage").html(u.other.UIDisabled)}var r=g();e("es5_shim"),e("global");var i=e("events"),s=e("menu"),o=e("build_ui"),u=e("strings").presets,a=u.deferTiming,f=e("../server/login"),l=e("../server/share"),c=y();if(c){var h=$("#modalText").html("JSCharting Editor is not supported on this browser; please utilize a modern browser to experience the full power and functionality of the web based Editor.");$(".modalOkButton").html("Open<br/>"+GLOBAL.currentSampleName+"<br/>Directly"),$("#modalDiag").show().bind("click",function(){window.location="../Samples/"+GLOBAL.currentSampleName});return}var p=document.body,d;window.addEventListener("scroll",function(){clearTimeout(d),p.classList.contains("disable-hover")||p.classList.add("disable-hover"),d=setTimeout(function(){p.classList.remove("disable-hover")},500)},!1);var v=function(){e("statusBar").init(),e("statusBar").clear(),window.addEventListener("mousemove",function(t){t=i.fixEvent(t);var n="UiHover";e("idleDefer").defer(n,a[n],function(){e("eventHandlers").reportAction(t.target,"hover")})}),b(),s.init(function(){f.init(),l.init()})};v()}),requirejs.config({baseUrl:"js/lib",config:{samples_helper:{showOnlyNotEditableSamples:!1,notEditableSamplesAsEditable:!1}},paths:{app:"../app"},waitSeconds:3e4}),requirejs(["main"],function(e){}),define("config",function(){});